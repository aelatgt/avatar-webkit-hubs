var UP=Object.create;var Fh=Object.defineProperty;var VP=Object.getOwnPropertyDescriptor;var GP=Object.getOwnPropertyNames;var WP=Object.getPrototypeOf,qP=Object.prototype.hasOwnProperty;var HP=r=>Fh(r,"__esModule",{value:!0});var Kb=(r,e)=>()=>(r&&(e=r(r=0)),e);var vt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Pt=(r,e)=>{for(var t in e)Fh(r,t,{get:e[t],enumerable:!0})},KP=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of GP(e))!qP.call(r,o)&&(t||o!=="default")&&Fh(r,o,{get:()=>e[o],enumerable:!(n=VP(e,o))||n.enumerable});return r},Ho=(r,e)=>KP(HP(Fh(r!=null?UP(WP(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);function x2(r,e){for(var t in e)r[t]=e[t];return r}function rv(r){var e=r.parentNode;e&&e.removeChild(r)}function d(r,e,t){var n,o,i,s={};for(i in e)i=="key"?n=e[i]:i=="ref"?o=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?Uh.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(i in r.defaultProps)s[i]===void 0&&(s[i]=r.defaultProps[i]);return Mh(r,s,n,o,null)}function Mh(r,e,t,n,o){var i={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++Qb};return o==null&&Ft.vnode!=null&&Ft.vnode(i),i}function y(r){return r.children}function zh(r,e){this.props=r,this.context=e}function kc(r,e){if(e==null)return r.__?kc(r.__,r.__.__k.indexOf(r)+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?kc(r):null}function nv(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return nv(r)}}function Xb(r){(!r.__d&&(r.__d=!0)&&Wx.push(r)&&!Ph.__r++||jb!==Ft.debounceRendering)&&((jb=Ft.debounceRendering)||ev)(Ph)}function Ph(){for(var r;Ph.__r=Wx.length;)r=Wx.sort(function(e,t){return e.__v.__b-t.__v.__b}),Wx=[],r.some(function(e){var t,n,o,i,s,a;e.__d&&(s=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(o=x2({},i)).__v=i.__v+1,M4(a,i,o,t.__n,a.ownerSVGElement!==void 0,i.__h!=null?[s]:null,n,s??kc(i),i.__h),av(n,i),i.__e!=s&&nv(i)))})}function ov(r,e,t,n,o,i,s,a,l,u){var c,x,f,h,g,m,b,v=n&&n.__k||tv,w=v.length;for(t.__k=[],c=0;c<e.length;c++)if((h=t.__k[c]=(h=e[c])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?Mh(null,h,null,null,h):Array.isArray(h)?Mh(y,{children:h},null,null,null):h.__b>0?Mh(h.type,h.props,h.key,null,h.__v):h)!=null){if(h.__=t,h.__b=t.__b+1,(f=v[c])===null||f&&h.key==f.key&&h.type===f.type)v[c]=void 0;else for(x=0;x<w;x++){if((f=v[x])&&h.key==f.key&&h.type===f.type){v[x]=void 0;break}f=null}M4(r,h,f=f||Lh,o,i,s,a,l,u),g=h.__e,(x=h.ref)&&f.ref!=x&&(b||(b=[]),f.ref&&b.push(f.ref,null,h),b.push(x,h.__c||g,h)),g!=null?(m==null&&(m=g),typeof h.type=="function"&&h.__k===f.__k?h.__d=l=iv(h,l,r):l=sv(r,h,f,v,g,l),typeof t.type=="function"&&(t.__d=l)):l&&f.__e==l&&l.parentNode!=r&&(l=kc(f))}for(t.__e=m,c=w;c--;)v[c]!=null&&(typeof t.type=="function"&&v[c].__e!=null&&v[c].__e==t.__d&&(t.__d=kc(n,c+1)),uv(v[c],v[c]));if(b)for(c=0;c<b.length;c++)lv(b[c],b[++c],b[++c])}function iv(r,e,t){for(var n,o=r.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=r,e=typeof n.type=="function"?iv(n,e,t):sv(t,n,n,o,n.__e,e));return e}function sv(r,e,t,n,o,i){var s,a,l;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(t==null||o!=i||o.parentNode==null)e:if(i==null||i.parentNode!==r)r.appendChild(o),s=null;else{for(a=i,l=0;(a=a.nextSibling)&&l<n.length;l+=2)if(a==o)break e;r.insertBefore(o,i),s=i}return s!==void 0?s:o.nextSibling}function ZP(r,e,t,n,o){var i;for(i in t)i==="children"||i==="key"||i in e||Bh(r,i,null,t[i],n);for(i in e)o&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||t[i]===e[i]||Bh(r,i,e[i],t[i],n)}function Yb(r,e,t){e[0]==="-"?r.setProperty(e,t):r[e]=t==null?"":typeof t!="number"||YP.test(e)?t:t+"px"}function Bh(r,e,t,n,o){var i;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||Yb(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Yb(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+i]=t,t?n||r.addEventListener(e,i?Jb:Zb,i):r.removeEventListener(e,i?Jb:Zb,i);else if(e!=="dangerouslySetInnerHTML"){if(o)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?r.setAttribute(e,t):r.removeAttribute(e))}}function Zb(r){this.l[r.type+!1](Ft.event?Ft.event(r):r)}function Jb(r){this.l[r.type+!0](Ft.event?Ft.event(r):r)}function M4(r,e,t,n,o,i,s,a,l){var u,c,x,f,h,g,m,b,v,w,C,N=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,i=[a]),(u=Ft.__b)&&u(e);try{e:if(typeof N=="function"){if(b=e.props,v=(u=N.contextType)&&n[u.__c],w=u?v?v.props.value:u.__:n,t.__c?m=(c=e.__c=t.__c).__=c.__E:("prototype"in N&&N.prototype.render?e.__c=c=new N(b,w):(e.__c=c=new zh(b,w),c.constructor=N,c.render=QP),v&&v.sub(c),c.props=b,c.state||(c.state={}),c.context=w,c.__n=n,x=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),N.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=x2({},c.__s)),x2(c.__s,N.getDerivedStateFromProps(b,c.__s))),f=c.props,h=c.state,x)N.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(N.getDerivedStateFromProps==null&&b!==f&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(b,w),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(b,c.__s,w)===!1||e.__v===t.__v){c.props=b,c.state=c.__s,e.__v!==t.__v&&(c.__d=!1),c.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(_){_&&(_.__=e)}),c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(b,c.__s,w),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(f,h,g)})}c.context=w,c.props=b,c.state=c.__s,(u=Ft.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=r,u=c.render(c.props,c.state,c.context),c.state=c.__s,c.getChildContext!=null&&(n=x2(x2({},n),c.getChildContext())),x||c.getSnapshotBeforeUpdate==null||(g=c.getSnapshotBeforeUpdate(f,h)),C=u!=null&&u.type===y&&u.key==null?u.props.children:u,ov(r,Array.isArray(C)?C:[C],e,t,n,o,i,s,a,l),c.base=e.__e,e.__h=null,c.__h.length&&s.push(c),m&&(c.__E=c.__=null),c.__e=!1}else i==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=JP(t.__e,e,t,n,o,i,s,l);(u=Ft.diffed)&&u(e)}catch(_){e.__v=null,(l||i!=null)&&(e.__e=a,e.__h=!!l,i[i.indexOf(a)]=null),Ft.__e(_,e,t)}}function av(r,e){Ft.__c&&Ft.__c(e,r),r.some(function(t){try{r=t.__h,t.__h=[],r.some(function(n){n.call(t)})}catch(n){Ft.__e(n,t.__v)}})}function JP(r,e,t,n,o,i,s,a){var l,u,c,x=t.props,f=e.props,h=e.type,g=0;if(h==="svg"&&(o=!0),i!=null){for(;g<i.length;g++)if((l=i[g])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){r=l,i[g]=null;break}}if(r==null){if(h===null)return document.createTextNode(f);r=o?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,f.is&&f),i=null,a=!1}if(h===null)x===f||a&&r.data===f||(r.data=f);else{if(i=i&&Uh.call(r.childNodes),u=(x=t.props||Lh).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!a){if(i!=null)for(x={},g=0;g<r.attributes.length;g++)x[r.attributes[g].name]=r.attributes[g].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===r.innerHTML)||(r.innerHTML=c&&c.__html||""))}if(ZP(r,f,x,o,a),c)e.__k=[];else if(g=e.props.children,ov(r,Array.isArray(g)?g:[g],e,t,n,o&&h!=="foreignObject",i,s,i?i[0]:t.__k&&kc(t,0),a),i!=null)for(g=i.length;g--;)i[g]!=null&&rv(i[g]);a||("value"in f&&(g=f.value)!==void 0&&(g!==r.value||h==="progress"&&!g||h==="option"&&g!==x.value)&&Bh(r,"value",g,x.value,!1),"checked"in f&&(g=f.checked)!==void 0&&g!==r.checked&&Bh(r,"checked",g,x.checked,!1))}return r}function lv(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){Ft.__e(n,t)}}function uv(r,e,t){var n,o;if(Ft.unmount&&Ft.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||lv(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Ft.__e(i,e)}n.base=n.__P=null}if(n=r.__k)for(o=0;o<n.length;o++)n[o]&&uv(n[o],e,typeof r.type!="function");t||r.__e==null||rv(r.__e),r.__e=r.__d=void 0}function QP(r,e,t){return this.constructor(r,t)}function cv(r,e,t){var n,o,i;Ft.__&&Ft.__(r,e),o=(n=typeof t=="function")?null:t&&t.__k||e.__k,i=[],M4(e,r=(!n&&t||e).__k=d(y,null,[r]),o||Lh,Lh,e.ownerSVGElement!==void 0,!n&&t?[t]:o?null:e.firstChild?Uh.call(e.childNodes):null,i,!n&&t?t:o?o.__e:e.firstChild,n),av(i,r)}var Uh,Ft,Qb,jP,Wx,ev,jb,XP,Lh,tv,YP,Vh=Kb(()=>{p();Lh={},tv=[],YP=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;Uh=tv.slice,Ft={__e:function(r,e){for(var t,n,o;e=e.__;)if((t=e.__c)&&!t.__)try{if((n=t.constructor)&&n.getDerivedStateFromError!=null&&(t.setState(n.getDerivedStateFromError(r)),o=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(r),o=t.__d),o)return t.__E=t}catch(i){r=i}throw r}},Qb=0,jP=function(r){return r!=null&&r.constructor===void 0},zh.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x2({},this.state),typeof r=="function"&&(r=r(x2({},t),this.props)),r&&x2(t,r),r!=null&&this.__v&&(e&&this.__h.push(e),Xb(this))},zh.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Xb(this))},zh.prototype.render=y,Wx=[],ev=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ph.__r=0,XP=0});var p=Kb(()=>{Vh()});var pv=vt((Gh,z4)=>{p();(function(r,e,t,n,o){if("customElements"in t)o();else{if(t.AWAITING_WEB_COMPONENTS_POLYFILL)return void t.AWAITING_WEB_COMPONENTS_POLYFILL.then(o);var i=t.AWAITING_WEB_COMPONENTS_POLYFILL=l();i.then(o);var s=t.WEB_COMPONENTS_POLYFILL||"//cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.0.2/webcomponents-bundle.js",a=t.ES6_CORE_POLYFILL||"//cdnjs.cloudflare.com/ajax/libs/core-js/2.5.3/core.min.js";"Promise"in t?u(s).then(function(){i.isDone=!0,i.exec()}):u(a).then(function(){u(s).then(function(){i.isDone=!0,i.exec()})})}function l(){var c=[];return c.isDone=!1,c.exec=function(){c.splice(0).forEach(function(x){x()})},c.then=function(x){return c.isDone?x():c.push(x),c},c}function u(c){var x=l(),f=n.createElement("script");return f.type="text/javascript",f.readyState?f.onreadystatechange=function(){f.readyState!="loaded"&&f.readyState!="complete"||(f.onreadystatechange=null,x.isDone=!0,x.exec())}:f.onload=function(){x.isDone=!0,x.exec()},f.src=c,n.getElementsByTagName("head")[0].appendChild(f),f.then=x.then,f}})(0,0,window,document,function(){var r,e;r=window,e=function(){return function(t){var n={};function o(i){if(n[i])return n[i].exports;var s=n[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=n,o.d=function(i,s,a){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var l in i)o.d(a,l,function(u){return i[u]}.bind(null,l));return a},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=5)}([function(t,n){t.exports=function(o){var i=[];return i.toString=function(){return this.map(function(s){var a=function(l,u){var c,x=l[1]||"",f=l[3];if(!f)return x;if(u&&typeof btoa=="function"){var h=(c=f,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+" */"),g=f.sources.map(function(m){return"/*# sourceURL="+f.sourceRoot+m+" */"});return[x].concat(g).concat([h]).join(`
`)}return[x].join(`
`)}(s,o);return s[2]?"@media "+s[2]+"{"+a+"}":a}).join("")},i.i=function(s,a){typeof s=="string"&&(s=[[null,s,""]]);for(var l={},u=0;u<this.length;u++){var c=this[u][0];typeof c=="number"&&(l[c]=!0)}for(u=0;u<s.length;u++){var x=s[u];typeof x[0]=="number"&&l[x[0]]||(a&&!x[2]?x[2]=a:a&&(x[2]="("+x[2]+") and ("+a+")"),i.push(x))}},i}},function(t,n,o){var i=o(3);t.exports=typeof i=="string"?i:i.toString()},function(t,n,o){var i=o(4);t.exports=typeof i=="string"?i:i.toString()},function(t,n,o){(t.exports=o(0)(!1)).push([t.i,"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@-webkit-keyframes burst{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}90%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}}@keyframes burst{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}90%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}}@-webkit-keyframes flashing{0%{opacity:1}45%{opacity:0}90%{opacity:1}}@keyframes flashing{0%{opacity:1}45%{opacity:0}90%{opacity:1}}@-webkit-keyframes fade-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(-20px);transform:translateX(-20px);opacity:0}}@keyframes fade-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(-20px);transform:translateX(-20px);opacity:0}}@-webkit-keyframes fade-right{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(20px);transform:translateX(20px);opacity:0}}@keyframes fade-right{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}75%{-webkit-transform:translateX(20px);transform:translateX(20px);opacity:0}}@-webkit-keyframes fade-up{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0}}@keyframes fade-up{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(-20px);transform:translateY(-20px);opacity:0}}@-webkit-keyframes fade-down{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(20px);transform:translateY(20px);opacity:0}}@keyframes fade-down{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}75%{-webkit-transform:translateY(20px);transform:translateY(20px);opacity:0}}@-webkit-keyframes tada{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}10%,20%{-webkit-transform:scale3d(.95,.95,.95) rotate(-10deg);transform:scale3d(.95,.95,.95) rotate(-10deg)}30%,50%,70%,90%{-webkit-transform:scaleX(1) rotate(10deg);transform:scaleX(1) rotate(10deg)}40%,60%,80%{-webkit-transform:scaleX(1) rotate(-10deg);transform:scaleX(1) rotate(-10deg)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes tada{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}10%,20%{-webkit-transform:scale3d(.95,.95,.95) rotate(-10deg);transform:scale3d(.95,.95,.95) rotate(-10deg)}30%,50%,70%,90%{-webkit-transform:scaleX(1) rotate(10deg);transform:scaleX(1) rotate(10deg)}40%,60%,80%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}.bx-spin,.bx-spin-hover:hover{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.bx-tada,.bx-tada-hover:hover{-webkit-animation:tada 1.5s ease infinite;animation:tada 1.5s ease infinite}.bx-flashing,.bx-flashing-hover:hover{-webkit-animation:flashing 1.5s infinite linear;animation:flashing 1.5s infinite linear}.bx-burst,.bx-burst-hover:hover{-webkit-animation:burst 1.5s infinite linear;animation:burst 1.5s infinite linear}.bx-fade-up,.bx-fade-up-hover:hover{-webkit-animation:fade-up 1.5s infinite linear;animation:fade-up 1.5s infinite linear}.bx-fade-down,.bx-fade-down-hover:hover{-webkit-animation:fade-down 1.5s infinite linear;animation:fade-down 1.5s infinite linear}.bx-fade-left,.bx-fade-left-hover:hover{-webkit-animation:fade-left 1.5s infinite linear;animation:fade-left 1.5s infinite linear}.bx-fade-right,.bx-fade-right-hover:hover{-webkit-animation:fade-right 1.5s infinite linear;animation:fade-right 1.5s infinite linear}",""])},function(t,n,o){(t.exports=o(0)(!1)).push([t.i,'.bx-rotate-90{transform:rotate(90deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)"}.bx-rotate-180{transform:rotate(180deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)"}.bx-rotate-270{transform:rotate(270deg);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"}.bx-flip-horizontal{transform:scaleX(-1);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)"}.bx-flip-vertical{transform:scaleY(-1);-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}',""])},function(t,n,o){"use strict";o.r(n),o.d(n,"BoxIconElement",function(){return N});var i,s,a,l,u=o(1),c=o.n(u),x=o(2),f=o.n(x),h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},g=function(){function _(E,T){for(var k=0;k<T.length;k++){var D=T[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,T,k){return T&&_(E.prototype,T),k&&_(E,k),E}}(),m=(s=(i=Object).getPrototypeOf||function(_){return _.__proto__},a=i.setPrototypeOf||function(_,E){return _.__proto__=E,_},l=(typeof Reflect>"u"?"undefined":h(Reflect))==="object"?Reflect.construct:function(_,E,T){var k,D=[null];return D.push.apply(D,E),k=_.bind.apply(_,D),a(new k,T.prototype)},function(_){var E=s(_);return a(_,a(function(){return l(E,arguments,s(this).constructor)},E))}),b=window,v={},w=document.createElement("template"),C=function(){return!!b.ShadyCSS};w.innerHTML=`
<style>
:host {
  display: inline-block;
  font-size: initial;
  box-sizing: border-box;
  width: 24px;
  height: 24px;
}
:host([size=xs]) {
    width: 0.8rem;
    height: 0.8rem;
}
:host([size=sm]) {
    width: 1.55rem;
    height: 1.55rem;
}
:host([size=md]) {
    width: 2.25rem;
    height: 2.25rem;
}
:host([size=lg]) {
    width: 3.0rem;
    height: 3.0rem;
}

:host([size]:not([size=""]):not([size=xs]):not([size=sm]):not([size=md]):not([size=lg])) {
    width: auto;
    height: auto;
}
:host([pull=left]) #icon {
    float: left;
    margin-right: .3em!important;
}
:host([pull=right]) #icon {
    float: right;
    margin-left: .3em!important;
}
:host([border=square]) #icon {
    padding: .25em;
    border: .07em solid rgba(0,0,0,.1);
    border-radius: .25em;
}
:host([border=circle]) #icon {
    padding: .25em;
    border: .07em solid rgba(0,0,0,.1);
    border-radius: 50%;
}
#icon,
svg {
  width: 100%;
  height: 100%;
}
#icon {
    box-sizing: border-box;
} 
`+c.a+`
`+f.a+`
</style>
<div id="icon"></div>`;var N=m(function(_){function E(){(function(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")})(this,E);var T=function(k,D){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?k:D}(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return T.$ui=T.attachShadow({mode:"open"}),T.$ui.appendChild(T.ownerDocument.importNode(w.content,!0)),C()&&b.ShadyCSS.styleElement(T),T._state={$iconHolder:T.$ui.getElementById("icon"),type:T.getAttribute("type")},T}return function(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(T,k):T.__proto__=k)}(E,HTMLElement),g(E,null,[{key:"getIconSvg",value:function(T,k){var D=this.cdnUrl+"/regular/bx-"+T+".svg";return k==="solid"?D=this.cdnUrl+"/solid/bxs-"+T+".svg":k==="logo"&&(D=this.cdnUrl+"/logos/bxl-"+T+".svg"),D&&v[D]||(v[D]=new Promise(function(R,K){var M=new XMLHttpRequest;M.addEventListener("load",function(){this.status<200||this.status>=300?K(new Error(this.status+" "+this.responseText)):R(this.responseText)}),M.onerror=K,M.onabort=K,M.open("GET",D),M.send()})),v[D]}},{key:"define",value:function(T){T=T||this.tagName,C()&&b.ShadyCSS.prepareTemplate(w,T),customElements.define(T,this)}},{key:"cdnUrl",get:function(){return"//unpkg.com/boxicons@2.1.1/svg"}},{key:"tagName",get:function(){return"box-icon"}},{key:"observedAttributes",get:function(){return["type","name","color","size","rotate","flip","animation","border","pull"]}}]),g(E,[{key:"attributeChangedCallback",value:function(T,k,D){var R=this._state.$iconHolder;switch(T){case"type":(function(K,M,j){var X=K._state;X.$iconHolder.textContent="",X.type&&(X.type=null),X.type=!j||j!=="solid"&&j!=="logo"?"regular":j,X.currentName!==void 0&&K.constructor.getIconSvg(X.currentName,X.type).then(function(Z){X.type===j&&(X.$iconHolder.innerHTML=Z)}).catch(function(Z){console.error("Failed to load icon: "+X.currentName+`
`+Z)})})(this,0,D);break;case"name":(function(K,M,j){var X=K._state;X.currentName=j,X.$iconHolder.textContent="",j&&X.type!==void 0&&K.constructor.getIconSvg(j,X.type).then(function(Z){X.currentName===j&&(X.$iconHolder.innerHTML=Z)}).catch(function(Z){console.error("Failed to load icon: "+j+`
`+Z)})})(this,0,D);break;case"color":R.style.fill=D||"";break;case"size":(function(K,M,j){var X=K._state;X.size&&(X.$iconHolder.style.width=X.$iconHolder.style.height="",X.size=X.sizeType=null),j&&!/^(xs|sm|md|lg)$/.test(X.size)&&(X.size=j.trim(),X.$iconHolder.style.width=X.$iconHolder.style.height=X.size)})(this,0,D);break;case"rotate":k&&R.classList.remove("bx-rotate-"+k),D&&R.classList.add("bx-rotate-"+D);break;case"flip":k&&R.classList.remove("bx-flip-"+k),D&&R.classList.add("bx-flip-"+D);break;case"animation":k&&R.classList.remove("bx-"+k),D&&R.classList.add("bx-"+D)}}},{key:"connectedCallback",value:function(){C()&&b.ShadyCSS.styleElement(this)}}]),E}());n.default=N,N.define()}])},typeof Gh=="object"&&typeof z4=="object"?z4.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Gh=="object"?Gh.BoxIconElement=e():r.BoxIconElement=e()})});var Vv=vt((ile,Xh)=>{p();var Cv,Nv,_v,Sv,Tv,Iv,kv,Ev,Av,Kh,P4,Dv,Rv,$v,Ac,Ov,Fv,Mv,zv,Lv,Pv,Bv,Uv,jh;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof Xh=="object"&&typeof Xh.exports=="object"?r(t(e,t(Xh.exports))):r(t(e));function t(n,o){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(i,s){return n[i]=o?o(i,s):s}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])};Cv=function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(n,o);function i(){this.constructor=n}n.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)},Nv=Object.assign||function(n){for(var o,i=1,s=arguments.length;i<s;i++){o=arguments[i];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},_v=function(n,o){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&o.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)o.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i},Sv=function(n,o,i,s){var a=arguments.length,l=a<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,i):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,o,i,s);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(l=(a<3?u(l):a>3?u(o,i,l):u(o,i))||l);return a>3&&l&&Object.defineProperty(o,i,l),l},Tv=function(n,o){return function(i,s){o(i,s,n)}},Iv=function(n,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,o)},kv=function(n,o,i,s){function a(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function c(h){try{f(s.next(h))}catch(g){u(g)}}function x(h){try{f(s.throw(h))}catch(g){u(g)}}function f(h){h.done?l(h.value):a(h.value).then(c,x)}f((s=s.apply(n,o||[])).next())})},Ev=function(n,o){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(f){return function(h){return x([f,h])}}function x(f){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,a&&(l=f[0]&2?a.return:f[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,f[1])).done)return l;switch(a=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,a=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){i=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){i.label=f[1];break}if(f[0]===6&&i.label<l[1]){i.label=l[1],l=f;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(f);break}l[2]&&i.ops.pop(),i.trys.pop();continue}f=o.call(n,i)}catch(h){f=[6,h],a=0}finally{s=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Av=function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&jh(o,n,i)},jh=Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]},Kh=function(n){var o=typeof Symbol=="function"&&Symbol.iterator,i=o&&n[o],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},P4=function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var s=i.call(n),a,l=[],u;try{for(;(o===void 0||o-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(c){u={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return l},Dv=function(){for(var n=[],o=0;o<arguments.length;o++)n=n.concat(P4(arguments[o]));return n},Rv=function(){for(var n=0,o=0,i=arguments.length;o<i;o++)n+=arguments[o].length;for(var s=Array(n),a=0,o=0;o<i;o++)for(var l=arguments[o],u=0,c=l.length;u<c;u++,a++)s[a]=l[u];return s},$v=function(n,o){for(var i=0,s=o.length,a=n.length;i<s;i++,a++)n[a]=o[i];return n},Ac=function(n){return this instanceof Ac?(this.v=n,this):new Ac(n)},Ov=function(n,o,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,o||[]),a,l=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(m){s[m]&&(a[m]=function(b){return new Promise(function(v,w){l.push([m,b,v,w])>1||c(m,b)})})}function c(m,b){try{x(s[m](b))}catch(v){g(l[0][3],v)}}function x(m){m.value instanceof Ac?Promise.resolve(m.value.v).then(f,h):g(l[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function g(m,b){m(b),l.shift(),l.length&&c(l[0][0],l[0][1])}},Fv=function(n){var o,i;return o={},s("next"),s("throw",function(a){throw a}),s("return"),o[Symbol.iterator]=function(){return this},o;function s(a,l){o[a]=n[a]?function(u){return(i=!i)?{value:Ac(n[a](u)),done:a==="return"}:l?l(u):u}:l}},Mv=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n[Symbol.asyncIterator],i;return o?o.call(n):(n=typeof Kh=="function"?Kh(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=n[l]&&function(u){return new Promise(function(c,x){u=n[l](u),a(c,x,u.done,u.value)})}}function a(l,u,c,x){Promise.resolve(x).then(function(f){l({value:f,done:c})},u)}},zv=function(n,o){return Object.defineProperty?Object.defineProperty(n,"raw",{value:o}):n.raw=o,n};var t=Object.create?function(n,o){Object.defineProperty(n,"default",{enumerable:!0,value:o})}:function(n,o){n.default=o};Lv=function(n){if(n&&n.__esModule)return n;var o={};if(n!=null)for(var i in n)i!=="default"&&Object.prototype.hasOwnProperty.call(n,i)&&jh(o,n,i);return t(o,n),o},Pv=function(n){return n&&n.__esModule?n:{default:n}},Bv=function(n,o){if(!o.has(n))throw new TypeError("attempted to get private field on non-instance");return o.get(n)},Uv=function(n,o,i){if(!o.has(n))throw new TypeError("attempted to set private field on non-instance");return o.set(n,i),i},r("__extends",Cv),r("__assign",Nv),r("__rest",_v),r("__decorate",Sv),r("__param",Tv),r("__metadata",Iv),r("__awaiter",kv),r("__generator",Ev),r("__exportStar",Av),r("__createBinding",jh),r("__values",Kh),r("__read",P4),r("__spread",Dv),r("__spreadArrays",Rv),r("__spreadArray",$v),r("__await",Ac),r("__asyncGenerator",Ov),r("__asyncDelegator",Fv),r("__asyncValues",Mv),r("__makeTemplateObject",zv),r("__importStar",Lv),r("__importDefault",Pv),r("__classPrivateFieldGet",Bv),r("__classPrivateFieldSet",Uv)})});var K4=vt((Cue,rw)=>{"use strict";p();rw.exports=function(e,t){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return e.apply(t,o)}}});var fo=vt((Nue,sw)=>{"use strict";p();var aB=K4(),f2=Object.prototype.toString;function Y4(r){return Array.isArray(r)}function j4(r){return typeof r>"u"}function lB(r){return r!==null&&!j4(r)&&r.constructor!==null&&!j4(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function nw(r){return f2.call(r)==="[object ArrayBuffer]"}function uB(r){return f2.call(r)==="[object FormData]"}function cB(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&nw(r.buffer),e}function pB(r){return typeof r=="string"}function xB(r){return typeof r=="number"}function ow(r){return r!==null&&typeof r=="object"}function ed(r){if(f2.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function fB(r){return f2.call(r)==="[object Date]"}function mB(r){return f2.call(r)==="[object File]"}function hB(r){return f2.call(r)==="[object Blob]"}function iw(r){return f2.call(r)==="[object Function]"}function dB(r){return ow(r)&&iw(r.pipe)}function gB(r){return f2.call(r)==="[object URLSearchParams]"}function yB(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function bB(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Z4(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Y4(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.call(null,r[o],o,r)}function X4(){var r={};function e(o,i){ed(r[i])&&ed(o)?r[i]=X4(r[i],o):ed(o)?r[i]=X4({},o):Y4(o)?r[i]=o.slice():r[i]=o}for(var t=0,n=arguments.length;t<n;t++)Z4(arguments[t],e);return r}function vB(r,e,t){return Z4(e,function(o,i){t&&typeof o=="function"?r[i]=aB(o,t):r[i]=o}),r}function wB(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}sw.exports={isArray:Y4,isArrayBuffer:nw,isBuffer:lB,isFormData:uB,isArrayBufferView:cB,isString:pB,isNumber:xB,isObject:ow,isPlainObject:ed,isUndefined:j4,isDate:fB,isFile:mB,isBlob:hB,isFunction:iw,isStream:dB,isURLSearchParams:gB,isStandardBrowserEnv:bB,forEach:Z4,merge:X4,extend:vB,trim:yB,stripBOM:wB}});var J4=vt((_ue,lw)=>{"use strict";p();var Oc=fo();function aw(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}lw.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(Oc.isURLSearchParams(t))o=t.toString();else{var i=[];Oc.forEach(t,function(l,u){l===null||typeof l>"u"||(Oc.isArray(l)?u=u+"[]":l=[l],Oc.forEach(l,function(x){Oc.isDate(x)?x=x.toISOString():Oc.isObject(x)&&(x=JSON.stringify(x)),i.push(aw(u)+"="+aw(x))}))}),o=i.join("&")}if(o){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}});var cw=vt((Sue,uw)=>{"use strict";p();var CB=fo();function td(){this.handlers=[]}td.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};td.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};td.prototype.forEach=function(e){CB.forEach(this.handlers,function(n){n!==null&&e(n)})};uw.exports=td});var xw=vt((Tue,pw)=>{"use strict";p();var NB=fo();pw.exports=function(e,t){NB.forEach(e,function(o,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[i])})}});var Q4=vt((Iue,fw)=>{"use strict";p();fw.exports=function(e,t,n,o,i){return e.config=t,n&&(e.code=n),e.request=o,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var e5=vt((kue,mw)=>{"use strict";p();var _B=Q4();mw.exports=function(e,t,n,o,i){var s=new Error(e);return _B(s,t,n,o,i)}});var dw=vt((Eue,hw)=>{"use strict";p();var SB=e5();hw.exports=function(e,t,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(SB("Request failed with status code "+n.status,n.config,null,n.request,n))}});var yw=vt((Aue,gw)=>{"use strict";p();var rd=fo();gw.exports=rd.isStandardBrowserEnv()?function(){return{write:function(t,n,o,i,s,a){var l=[];l.push(t+"="+encodeURIComponent(n)),rd.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),rd.isString(i)&&l.push("path="+i),rd.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var vw=vt((Due,bw)=>{"use strict";p();bw.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Cw=vt((Rue,ww)=>{"use strict";p();ww.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var _w=vt(($ue,Nw)=>{"use strict";p();var TB=vw(),IB=Cw();Nw.exports=function(e,t){return e&&!TB(t)?IB(e,t):t}});var Tw=vt((Oue,Sw)=>{"use strict";p();var t5=fo(),kB=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Sw.exports=function(e){var t={},n,o,i;return e&&t5.forEach(e.split(`
`),function(a){if(i=a.indexOf(":"),n=t5.trim(a.substr(0,i)).toLowerCase(),o=t5.trim(a.substr(i+1)),n){if(t[n]&&kB.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([o]):t[n]=t[n]?t[n]+", "+o:o}}),t}});var Ew=vt((Fue,kw)=>{"use strict";p();var Iw=fo();kw.exports=Iw.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function o(i){var s=i;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(s){var a=Iw.isString(s)?o(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var jx=vt((Mue,Aw)=>{"use strict";p();function r5(r){this.message=r}r5.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};r5.prototype.__CANCEL__=!0;Aw.exports=r5});var o5=vt((zue,Dw)=>{"use strict";p();var nd=fo(),EB=dw(),AB=yw(),DB=J4(),RB=_w(),$B=Tw(),OB=Ew(),n5=e5(),FB=Xx(),MB=jx();Dw.exports=function(e){return new Promise(function(n,o){var i=e.data,s=e.headers,a=e.responseType,l;function u(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}nd.isFormData(i)&&delete s["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(x+":"+f)}var h=RB(e.baseURL,e.url);c.open(e.method.toUpperCase(),DB(h,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function g(){if(!!c){var b="getAllResponseHeaders"in c?$B(c.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?c.responseText:c.response,w={data:v,status:c.status,statusText:c.statusText,headers:b,config:e,request:c};EB(function(N){n(N),u()},function(N){o(N),u()},w),c=null}}if("onloadend"in c?c.onloadend=g:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(g)},c.onabort=function(){!c||(o(n5("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){o(n5("Network Error",e,null,c)),c=null},c.ontimeout=function(){var v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",w=e.transitional||FB.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),o(n5(v,e,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},nd.isStandardBrowserEnv()){var m=(e.withCredentials||OB(h))&&e.xsrfCookieName?AB.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in c&&nd.forEach(s,function(v,w){typeof i>"u"&&w.toLowerCase()==="content-type"?delete s[w]:c.setRequestHeader(w,v)}),nd.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(b){!c||(o(!b||b&&b.type?new MB("canceled"):b),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),i||(i=null),c.send(i)})}});var Xx=vt((Lue,Ow)=>{"use strict";p();var qn=fo(),Rw=xw(),zB=Q4(),LB={"Content-Type":"application/x-www-form-urlencoded"};function $w(r,e){!qn.isUndefined(r)&&qn.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function PB(){var r;return typeof XMLHttpRequest<"u"?r=o5():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=o5()),r}function BB(r,e,t){if(qn.isString(r))try{return(e||JSON.parse)(r),qn.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var od={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:PB(),transformRequest:[function(e,t){return Rw(t,"Accept"),Rw(t,"Content-Type"),qn.isFormData(e)||qn.isArrayBuffer(e)||qn.isBuffer(e)||qn.isStream(e)||qn.isFile(e)||qn.isBlob(e)?e:qn.isArrayBufferView(e)?e.buffer:qn.isURLSearchParams(e)?($w(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):qn.isObject(e)||t&&t["Content-Type"]==="application/json"?($w(t,"application/json"),BB(e)):e}],transformResponse:[function(e){var t=this.transitional||od.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&qn.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(i)throw s.name==="SyntaxError"?zB(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};qn.forEach(["delete","get","head"],function(e){od.headers[e]={}});qn.forEach(["post","put","patch"],function(e){od.headers[e]=qn.merge(LB)});Ow.exports=od});var Mw=vt((Pue,Fw)=>{"use strict";p();var UB=fo(),VB=Xx();Fw.exports=function(e,t,n){var o=this||VB;return UB.forEach(n,function(s){e=s.call(o,e,t)}),e}});var i5=vt((Bue,zw)=>{"use strict";p();zw.exports=function(e){return!!(e&&e.__CANCEL__)}});var Bw=vt((Uue,Pw)=>{"use strict";p();var Lw=fo(),s5=Mw(),GB=i5(),WB=Xx(),qB=jx();function a5(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qB("canceled")}Pw.exports=function(e){a5(e),e.headers=e.headers||{},e.data=s5.call(e,e.data,e.headers,e.transformRequest),e.headers=Lw.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Lw.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var t=e.adapter||WB.adapter;return t(e).then(function(o){return a5(e),o.data=s5.call(e,o.data,o.headers,e.transformResponse),o},function(o){return GB(o)||(a5(e),o&&o.response&&(o.response.data=s5.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})}});var l5=vt((Vue,Uw)=>{"use strict";p();var Ko=fo();Uw.exports=function(e,t){t=t||{};var n={};function o(c,x){return Ko.isPlainObject(c)&&Ko.isPlainObject(x)?Ko.merge(c,x):Ko.isPlainObject(x)?Ko.merge({},x):Ko.isArray(x)?x.slice():x}function i(c){if(Ko.isUndefined(t[c])){if(!Ko.isUndefined(e[c]))return o(void 0,e[c])}else return o(e[c],t[c])}function s(c){if(!Ko.isUndefined(t[c]))return o(void 0,t[c])}function a(c){if(Ko.isUndefined(t[c])){if(!Ko.isUndefined(e[c]))return o(void 0,e[c])}else return o(void 0,t[c])}function l(c){if(c in t)return o(e[c],t[c]);if(c in e)return o(void 0,e[c])}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return Ko.forEach(Object.keys(e).concat(Object.keys(t)),function(x){var f=u[x]||i,h=f(x);Ko.isUndefined(h)&&f!==l||(n[x]=h)}),n}});var u5=vt((Gue,Vw)=>{p();Vw.exports={version:"0.25.0"}});var qw=vt((Wue,Ww)=>{"use strict";p();var HB=u5().version,c5={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){c5[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Gw={};c5.transitional=function(e,t,n){function o(i,s){return"[Axios v"+HB+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return function(i,s,a){if(e===!1)throw new Error(o(s," has been removed"+(t?" in "+t:"")));return t&&!Gw[s]&&(Gw[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,s,a):!0}};function KB(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),o=n.length;o-- >0;){var i=n[o],s=e[i];if(s){var a=r[i],l=a===void 0||s(a,i,r);if(l!==!0)throw new TypeError("option "+i+" must be "+l);continue}if(t!==!0)throw Error("Unknown option "+i)}}Ww.exports={assertOptions:KB,validators:c5}});var Zw=vt((que,Yw)=>{"use strict";p();var jw=fo(),jB=J4(),Hw=cw(),Kw=Bw(),id=l5(),Xw=qw(),Fc=Xw.validators;function Yx(r){this.defaults=r,this.interceptors={request:new Hw,response:new Hw}}Yx.prototype.request=function(e,t){if(typeof e=="string"?(t=t||{},t.url=e):t=e||{},!t.url)throw new Error("Provided config url is not valid");t=id(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&Xw.assertOptions(n,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(t)===!1||(i=i&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var a;if(!i){var l=[Kw,void 0];for(Array.prototype.unshift.apply(l,o),l=l.concat(s),a=Promise.resolve(t);l.length;)a=a.then(l.shift(),l.shift());return a}for(var u=t;o.length;){var c=o.shift(),x=o.shift();try{u=c(u)}catch(f){x(f);break}}try{a=Kw(u)}catch(f){return Promise.reject(f)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Yx.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=id(this.defaults,e),jB(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};jw.forEach(["delete","get","head","options"],function(e){Yx.prototype[e]=function(t,n){return this.request(id(n||{},{method:e,url:t,data:(n||{}).data}))}});jw.forEach(["post","put","patch"],function(e){Yx.prototype[e]=function(t,n,o){return this.request(id(o||{},{method:e,url:t,data:n}))}});Yw.exports=Yx});var Qw=vt((Hue,Jw)=>{"use strict";p();var XB=jx();function Mc(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(o){e=o});var t=this;this.promise.then(function(n){if(!!t._listeners){var o,i=t._listeners.length;for(o=0;o<i;o++)t._listeners[o](n);t._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(s){t.subscribe(s),o=s}).then(n);return i.cancel=function(){t.unsubscribe(o)},i},r(function(o){t.reason||(t.reason=new XB(o),e(t.reason))})}Mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mc.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mc.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Mc.source=function(){var e,t=new Mc(function(o){e=o});return{token:t,cancel:e}};Jw.exports=Mc});var tC=vt((Kue,eC)=>{"use strict";p();eC.exports=function(e){return function(n){return e.apply(null,n)}}});var nC=vt((jue,rC)=>{"use strict";p();var YB=fo();rC.exports=function(e){return YB.isObject(e)&&e.isAxiosError===!0}});var sC=vt((Xue,p5)=>{"use strict";p();var oC=fo(),ZB=K4(),sd=Zw(),JB=l5(),QB=Xx();function iC(r){var e=new sd(r),t=ZB(sd.prototype.request,e);return oC.extend(t,sd.prototype,e),oC.extend(t,e),t.create=function(o){return iC(JB(r,o))},t}var fs=iC(QB);fs.Axios=sd;fs.Cancel=jx();fs.CancelToken=Qw();fs.isCancel=i5();fs.VERSION=u5().version;fs.all=function(e){return Promise.all(e)};fs.spread=tC();fs.isAxiosError=nC();p5.exports=fs;p5.exports.default=fs});var lC=vt((Yue,aC)=>{p();aC.exports=sC()});var mC=vt((Zue,fC)=>{p();var eU=4,tU=.001,rU=1e-7,nU=10,Zx=11,ad=1/(Zx-1),oU=typeof Float32Array=="function";function uC(r,e){return 1-3*e+3*r}function cC(r,e){return 3*e-6*r}function pC(r){return 3*r}function ld(r,e,t){return((uC(e,t)*r+cC(e,t))*r+pC(e))*r}function xC(r,e,t){return 3*uC(e,t)*r*r+2*cC(e,t)*r+pC(e)}function iU(r,e,t,n,o){var i,s,a=0;do s=e+(t-e)/2,i=ld(s,n,o)-r,i>0?t=s:e=s;while(Math.abs(i)>rU&&++a<nU);return s}function sU(r,e,t,n){for(var o=0;o<eU;++o){var i=xC(e,t,n);if(i===0)return e;var s=ld(e,t,n)-r;e-=s/i}return e}function aU(r){return r}fC.exports=function(e,t,n,o){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===o)return aU;for(var i=oU?new Float32Array(Zx):new Array(Zx),s=0;s<Zx;++s)i[s]=ld(s*ad,e,n);function a(l){for(var u=0,c=1,x=Zx-1;c!==x&&i[c]<=l;++c)u+=ad;--c;var f=(l-i[c])/(i[c+1]-i[c]),h=u+f*ad,g=xC(h,e,n);return g>=tU?sU(l,h,e,n):g===0?h:iU(l,u,u+ad,e,n)}return function(u){return u===0?0:u===1?1:ld(a(u),t,o)}}});var JC=vt(()=>{p()});var QC=vt(()=>{p()});var HN=vt((qN,ug)=>{p();(function(r,e,t){function n(a){var l=this,u=s();l.next=function(){var c=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=c|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(a),l.s0<0&&(l.s0+=1),l.s1-=u(a),l.s1<0&&(l.s1+=1),l.s2-=u(a),l.s2<0&&(l.s2+=1),u=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var u=new n(a),c=l&&l.state,x=u.next;return x.int32=function(){return u.next()*4294967296|0},x.double=function(){return x()+(x()*2097152|0)*11102230246251565e-32},x.quick=x,c&&(typeof c=="object"&&o(c,u),x.state=function(){return o(u,{})}),x}function s(){var a=4022871197,l=function(u){u=u.toString();for(var c=0;c<u.length;c++){a+=u.charCodeAt(c);var x=.02519603282416938*a;a=x>>>0,x-=a,x*=a,a=x>>>0,x-=a,a+=x*4294967296}return(a>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.alea=i})(qN,typeof ug=="object"&&ug,typeof define=="function"&&define)});var jN=vt((KN,cg)=>{p();(function(r,e,t){function n(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var c=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^c^c>>>8},s===(s|0)?a.x=s:l+=s;for(var u=0;u<l.length+64;u++)a.x^=l.charCodeAt(u)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new n(s),u=a&&a.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var x=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(x+f)/(1<<21);while(h===0);return h},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&o(u,l),c.state=function(){return o(l,{})}),c}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.xor128=i})(KN,typeof cg=="object"&&cg,typeof define=="function"&&define)});var YN=vt((XN,pg)=>{p();(function(r,e,t){function n(s){var a=this,l="";a.next=function(){var c=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(c^c<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var u=0;u<l.length+64;u++)a.x^=l.charCodeAt(u)|0,u==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new n(s),u=a&&a.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var x=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(x+f)/(1<<21);while(h===0);return h},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&o(u,l),c.state=function(){return o(l,{})}),c}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.xorwow=i})(XN,typeof pg=="object"&&pg,typeof define=="function"&&define)});var JN=vt((ZN,xg)=>{p();(function(r,e,t){function n(s){var a=this;a.next=function(){var u=a.x,c=a.i,x,f,h;return x=u[c],x^=x>>>7,f=x^x<<24,x=u[c+1&7],f^=x^x>>>10,x=u[c+3&7],f^=x^x>>>3,x=u[c+4&7],f^=x^x<<7,x=u[c+7&7],x=x^x<<13,f^=x^x<<9,u[c]=f,a.i=c+1&7,f};function l(u,c){var x,f,h=[];if(c===(c|0))f=h[0]=c;else for(c=""+c,x=0;x<c.length;++x)h[x&7]=h[x&7]<<15^c.charCodeAt(x)+h[x+1&7]<<13;for(;h.length<8;)h.push(0);for(x=0;x<8&&h[x]===0;++x);for(x==8?f=h[7]=-1:f=h[x],u.x=h,u.i=0,x=256;x>0;--x)u.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new n(s),u=a&&a.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var x=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(x+f)/(1<<21);while(h===0);return h},c.int32=l.next,c.quick=c,u&&(u.x&&o(u,l),c.state=function(){return o(l,{})}),c}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.xorshift7=i})(ZN,typeof xg=="object"&&xg,typeof define=="function"&&define)});var e_=vt((QN,fg)=>{p();(function(r,e,t){function n(s){var a=this;a.next=function(){var u=a.w,c=a.X,x=a.i,f,h;return a.w=u=u+1640531527|0,h=c[x+34&127],f=c[x=x+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=c[x]=h^f,a.i=x,h+(u^u>>>16)|0};function l(u,c){var x,f,h,g,m,b=[],v=128;for(c===(c|0)?(f=c,c=null):(c=c+"\0",f=0,v=Math.max(v,c.length)),h=0,g=-32;g<v;++g)c&&(f^=c.charCodeAt((g+32)%c.length)),g===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(m=m+1640531527|0,x=b[g&127]^=f+m,h=x==0?h+1:0);for(h>=128&&(b[(c&&c.length||0)&127]=-1),h=127,g=4*128;g>0;--g)f=b[h+34&127],x=b[h=h+1&127],f^=f<<13,x^=x<<17,f^=f>>>15,x^=x>>>12,b[h]=f^x;u.w=m,u.X=b,u.i=h}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new n(s),u=a&&a.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var x=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(x+f)/(1<<21);while(h===0);return h},c.int32=l.next,c.quick=c,u&&(u.X&&o(u,l),c.state=function(){return o(l,{})}),c}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.xor4096=i})(QN,typeof fg=="object"&&fg,typeof define=="function"&&define)});var r_=vt((t_,mg)=>{p();(function(r,e,t){function n(s){var a=this,l="";a.next=function(){var c=a.b,x=a.c,f=a.d,h=a.a;return c=c<<25^c>>>7^x,x=x-f|0,f=f<<24^f>>>8^h,h=h-c|0,a.b=c=c<<20^c>>>12^x,a.c=x=x-f|0,a.d=f<<16^x>>>16^h,a.a=h-c|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var u=0;u<l.length+20;u++)a.b^=l.charCodeAt(u)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new n(s),u=a&&a.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var x=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(x+f)/(1<<21);while(h===0);return h},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&o(u,l),c.state=function(){return o(l,{})}),c}e&&e.exports?e.exports=i:t&&t.amd?t(function(){return i}):this.tychei=i})(t_,typeof mg=="object"&&mg,typeof define=="function"&&define)});var n_=vt(()=>{p()});var o_=vt((tye,Zd)=>{p();(function(r,e){var t=this,n=256,o=6,i=52,s="random",a=e.pow(n,o),l=e.pow(2,i),u=l*2,c=n-1,x;function f(C,N,_){var E=[];N=N==!0?{entropy:!0}:N||{};var T=b(m(N.entropy?[C,w(r)]:C??v(),3),E),k=new h(E),D=function(){for(var R=k.g(o),K=a,M=0;R<l;)R=(R+M)*n,K*=n,M=k.g(1);for(;R>=u;)R/=2,K/=2,M>>>=1;return(R+M)/K};return D.int32=function(){return k.g(4)|0},D.quick=function(){return k.g(4)/4294967296},D.double=D,b(w(k.S),r),(N.pass||_||function(R,K,M,j){return j&&(j.S&&g(j,k),R.state=function(){return g(k,{})}),M?(e[s]=R,K):R})(D,T,"global"in N?N.global:this==e,N.state)}e["seed"+s]=f;function h(C){var N,_=C.length,E=this,T=0,k=E.i=E.j=0,D=E.S=[];for(_||(C=[_++]);T<n;)D[T]=T++;for(T=0;T<n;T++)D[T]=D[k=c&k+C[T%_]+(N=D[T])],D[k]=N;(E.g=function(R){for(var K,M=0,j=E.i,X=E.j,Z=E.S;R--;)K=Z[j=c&j+1],M=M*n+Z[c&(Z[j]=Z[X=c&X+K])+(Z[X]=K)];return E.i=j,E.j=X,M})(n)}function g(C,N){return N.i=C.i,N.j=C.j,N.S=C.S.slice(),N}function m(C,N){var _=[],E=typeof C,T;if(N&&E=="object")for(T in C)try{_.push(m(C[T],N-1))}catch{}return _.length?_:E=="string"?C:C+"\0"}function b(C,N){for(var _=C+"",E,T=0;T<_.length;)N[c&T]=c&(E^=N[c&T]*19)+_.charCodeAt(T++);return w(N)}function v(){try{var C;return x&&(C=x.randomBytes)?C=C(n):(C=new Uint8Array(n),(t.crypto||t.msCrypto).getRandomValues(C)),w(C)}catch{var N=t.navigator,_=N&&N.plugins;return[+new Date,t,_,t.screen,w(r)]}}function w(C){return String.fromCharCode.apply(0,C)}if(b(e.random(),r),typeof Zd=="object"&&Zd.exports){Zd.exports=f;try{x=n_()}catch{}}else typeof define=="function"&&define.amd&&define(function(){return f})})([],Math)});var hf=vt((rye,i_)=>{p();var hq=HN(),dq=jN(),gq=YN(),yq=JN(),bq=e_(),vq=r_(),Tu=o_();Tu.alea=hq;Tu.xor128=dq;Tu.xorwow=gq;Tu.xorshift7=yq;Tu.xor4096=bq;Tu.tychei=vq;i_.exports=Tu});var nE=vt(()=>{p()});var aE=vt(()=>{p()});var Tz=vt((W9,Sz)=>{"use strict";p();(function(r,e){typeof define=="function"&&define.amd?define([],e):typeof W9=="object"?Sz.exports=e():r.typed=e()})(W9,function(){function r(){return!0}function e(){return!1}function t(){}function n(){var o=[{name:"number",test:function(oe){return typeof oe=="number"}},{name:"string",test:function(oe){return typeof oe=="string"}},{name:"boolean",test:function(oe){return typeof oe=="boolean"}},{name:"Function",test:function(oe){return typeof oe=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(oe){return oe instanceof Date}},{name:"RegExp",test:function(oe){return oe instanceof RegExp}},{name:"Object",test:function(oe){return typeof oe=="object"&&oe!==null&&oe.constructor===Object}},{name:"null",test:function(oe){return oe===null}},{name:"undefined",test:function(oe){return oe===void 0}}],i={name:"any",test:r},s=[],a=[],l={types:o,conversions:a,ignore:s};function u(oe){var he=Xe(l.types,function(ye){return ye.name===oe});if(he)return he;if(oe==="any")return i;var Ne=Xe(l.types,function(ye){return ye.name.toLowerCase()===oe.toLowerCase()});throw new TypeError('Unknown type "'+oe+'"'+(Ne?'. Did you mean "'+Ne.name+'"?':""))}function c(oe){return oe===i?999:l.types.indexOf(oe)}function x(oe){var he=Xe(l.types,function(Ne){return Ne.test(oe)});if(he)return he.name;throw new TypeError("Value has unknown type. Value: "+oe)}function f(oe,he){if(!oe.signatures)throw new TypeError("Function is no typed-function");var Ne;if(typeof he=="string"){Ne=he.split(",");for(var ye=0;ye<Ne.length;ye++)Ne[ye]=Ne[ye].trim()}else if(Array.isArray(he))Ne=he;else throw new TypeError("String array or a comma separated string expected");var Ue=Ne.join(","),Ze=oe.signatures[Ue];if(Ze)return Ze;throw new TypeError("Signature not found (signature: "+(oe.name||"unnamed")+"("+Ne.join(", ")+"))")}function h(oe,he){var Ne=x(oe);if(he===Ne)return oe;for(var ye=0;ye<l.conversions.length;ye++){var Ue=l.conversions[ye];if(Ue.from===Ne&&Ue.to===he)return Ue.convert(oe)}throw new Error("Cannot convert from "+Ne+" to "+he)}function g(oe){return oe.map(function(he){var Ne=he.types.map(T);return(he.restParam?"...":"")+Ne.join("|")}).join(",")}function m(oe,he){var Ne=oe.indexOf("...")===0,ye=Ne?oe.length>3?oe.slice(3):"any":oe,Ue=ye.split("|").map(le).filter(xe).filter(ge),Ze=Z(he,Ue),ot=Ue.map(function(Je){var ut=u(Je);return{name:Je,typeIndex:c(ut),test:ut.test,conversion:null,conversionIndex:-1}}),je=Ze.map(function(Je){var ut=u(Je.from);return{name:Je.from,typeIndex:c(ut),test:ut.test,conversion:Je,conversionIndex:he.indexOf(Je)}});return{types:ot.concat(je),restParam:Ne}}function b(oe,he,Ne){var ye=[];return oe.trim()!==""&&(ye=oe.split(",").map(le).map(function(Ue,Ze,ot){var je=m(Ue,Ne);if(je.restParam&&Ze!==ot.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ue+'": only allowed for the last parameter');return je})),ye.some(ve)?null:{params:ye,fn:he}}function v(oe){var he=De(oe);return he?he.restParam:!1}function w(oe){return oe.types.some(function(he){return he.conversion!=null})}function C(oe){if(!oe||oe.types.length===0)return r;if(oe.types.length===1)return u(oe.types[0].name).test;if(oe.types.length===2){var he=u(oe.types[0].name).test,Ne=u(oe.types[1].name).test;return function(Ze){return he(Ze)||Ne(Ze)}}else{var ye=oe.types.map(function(Ue){return u(Ue.name).test});return function(Ze){for(var ot=0;ot<ye.length;ot++)if(ye[ot](Ze))return!0;return!1}}}function N(oe){var he,Ne,ye;if(v(oe)){he=Te(oe).map(C);var Ue=he.length,Ze=C(De(oe)),ot=function(je){for(var Je=Ue;Je<je.length;Je++)if(!Ze(je[Je]))return!1;return!0};return function(Je){for(var ut=0;ut<he.length;ut++)if(!he[ut](Je[ut]))return!1;return ot(Je)&&Je.length>=Ue+1}}else return oe.length===0?function(Je){return Je.length===0}:oe.length===1?(Ne=C(oe[0]),function(Je){return Ne(Je[0])&&Je.length===1}):oe.length===2?(Ne=C(oe[0]),ye=C(oe[1]),function(Je){return Ne(Je[0])&&ye(Je[1])&&Je.length===2}):(he=oe.map(C),function(Je){for(var ut=0;ut<he.length;ut++)if(!he[ut](Je[ut]))return!1;return Je.length===he.length})}function _(oe,he){return he<oe.params.length?oe.params[he]:v(oe.params)?De(oe.params):null}function E(oe,he,Ne){var ye=_(oe,he),Ue=ye?Ne?ye.types.filter(k):ye.types:[];return Ue.map(T)}function T(oe){return oe.name}function k(oe){return oe.conversion===null||oe.conversion===void 0}function D(oe,he){var Ne=qe(tt(oe,function(ye){return E(ye,he,!1)}));return Ne.indexOf("any")!==-1?["any"]:Ne}function R(oe,he,Ne){var ye,Ue,Ze=oe||"unnamed",ot=Ne,je;for(je=0;je<he.length;je++){var Je=ot.filter(function(xn){var ai=C(_(xn,je));return(je<xn.params.length||v(xn.params))&&ai(he[je])});if(Je.length===0){if(Ue=D(ot,je),Ue.length>0){var ut=x(he[je]);return ye=new TypeError("Unexpected type of argument in function "+Ze+" (expected: "+Ue.join(" or ")+", actual: "+ut+", index: "+je+")"),ye.data={category:"wrongType",fn:Ze,index:je,actual:ut,expected:Ue},ye}}else ot=Je}var hr=ot.map(function(xn){return v(xn.params)?1/0:xn.params.length});if(he.length<Math.min.apply(null,hr))return Ue=D(ot,je),ye=new TypeError("Too few arguments in function "+Ze+" (expected: "+Ue.join(" or ")+", index: "+he.length+")"),ye.data={category:"tooFewArgs",fn:Ze,index:he.length,expected:Ue},ye;var tr=Math.max.apply(null,hr);return he.length>tr?(ye=new TypeError("Too many arguments in function "+Ze+" (expected: "+tr+", actual: "+he.length+")"),ye.data={category:"tooManyArgs",fn:Ze,index:he.length,expectedLength:tr},ye):(ye=new TypeError('Arguments of type "'+he.join(", ")+'" do not match any of the defined signatures of function '+Ze+"."),ye.data={category:"mismatch",actual:he.map(x)},ye)}function K(oe){for(var he=999,Ne=0;Ne<oe.types.length;Ne++)k(oe.types[Ne])&&(he=Math.min(he,oe.types[Ne].typeIndex));return he}function M(oe){for(var he=999,Ne=0;Ne<oe.types.length;Ne++)k(oe.types[Ne])||(he=Math.min(he,oe.types[Ne].conversionIndex));return he}function j(oe,he){var Ne;return Ne=oe.restParam-he.restParam,Ne!==0||(Ne=w(oe)-w(he),Ne!==0)||(Ne=K(oe)-K(he),Ne!==0)?Ne:M(oe)-M(he)}function X(oe,he){var Ne=Math.min(oe.params.length,he.params.length),ye,Ue;if(Ue=oe.params.some(w)-he.params.some(w),Ue!==0)return Ue;for(ye=0;ye<Ne;ye++)if(Ue=w(oe.params[ye])-w(he.params[ye]),Ue!==0)return Ue;for(ye=0;ye<Ne;ye++)if(Ue=j(oe.params[ye],he.params[ye]),Ue!==0)return Ue;return oe.params.length-he.params.length}function Z(oe,he){var Ne={};return oe.forEach(function(ye){he.indexOf(ye.from)===-1&&he.indexOf(ye.to)!==-1&&!Ne[ye.from]&&(Ne[ye.from]=ye)}),Object.keys(Ne).map(function(ye){return Ne[ye]})}function Y(oe,he){var Ne=he;if(oe.some(w)){var ye=v(oe),Ue=oe.map(ce);Ne=function(){for(var Je=[],ut=ye?arguments.length-1:arguments.length,hr=0;hr<ut;hr++)Je[hr]=Ue[hr](arguments[hr]);return ye&&(Je[ut]=arguments[ut].map(Ue[ut])),he.apply(this,Je)}}var Ze=Ne;if(v(oe)){var ot=oe.length-1;Ze=function(){return Ne.apply(this,Ae(arguments,0,ot).concat([Ae(arguments,ot)]))}}return Ze}function ce(oe){var he,Ne,ye,Ue,Ze=[],ot=[];switch(oe.types.forEach(function(je){je.conversion&&(Ze.push(u(je.conversion.from).test),ot.push(je.conversion.convert))}),ot.length){case 0:return function(Je){return Je};case 1:return he=Ze[0],ye=ot[0],function(Je){return he(Je)?ye(Je):Je};case 2:return he=Ze[0],Ne=Ze[1],ye=ot[0],Ue=ot[1],function(Je){return he(Je)?ye(Je):Ne(Je)?Ue(Je):Je};default:return function(Je){for(var ut=0;ut<ot.length;ut++)if(Ze[ut](Je))return ot[ut](Je);return Je}}}function Q(oe){var he={};return oe.forEach(function(Ne){Ne.params.some(w)||J(Ne.params,!0).forEach(function(ye){he[g(ye)]=Ne.fn})}),he}function J(oe,he){function Ne(ye,Ue,Ze){if(Ue<ye.length){var ot=ye[Ue],je=he?ot.types.filter(k):ot.types,Je;if(ot.restParam){var ut=je.filter(k);Je=ut.length<je.length?[ut,je]:[je]}else Je=je.map(function(tr){return[tr]});return tt(Je,function(tr){return Ne(ye,Ue+1,Ze.concat([tr]))})}else{var hr=Ze.map(function(tr,xn){return{types:tr,restParam:xn===ye.length-1&&v(ye)}});return[hr]}}return Ne(oe,0,[])}function te(oe,he){for(var Ne=Math.max(oe.params.length,he.params.length),ye=0;ye<Ne;ye++){var Ue=E(oe,ye,!0),Ze=E(he,ye,!0);if(!Ke(Ue,Ze))return!1}var ot=oe.params.length,je=he.params.length,Je=v(oe.params),ut=v(he.params);return Je?ut?ot===je:je>=ot:ut?ot>=je:ot===je}function ae(oe,he){if(Object.keys(he).length===0)throw new SyntaxError("No signatures provided");var Ne=[];Object.keys(he).map(function(dr){return b(dr,he[dr],l.conversions)}).filter(me).forEach(function(dr){var gn=Xe(Ne,function(_n){return te(_n,dr)});if(gn)throw new TypeError('Conflicting signatures "'+g(gn.params)+'" and "'+g(dr.params)+'".');Ne.push(dr)});var ye=tt(Ne,function(dr){var gn=dr?J(dr.params,!1):[];return gn.map(function(_n){return{params:_n,fn:dr.fn}})}).filter(me);ye.sort(X);var Ue=ye[0]&&ye[0].params.length<=2&&!v(ye[0].params),Ze=ye[1]&&ye[1].params.length<=2&&!v(ye[1].params),ot=ye[2]&&ye[2].params.length<=2&&!v(ye[2].params),je=ye[3]&&ye[3].params.length<=2&&!v(ye[3].params),Je=ye[4]&&ye[4].params.length<=2&&!v(ye[4].params),ut=ye[5]&&ye[5].params.length<=2&&!v(ye[5].params),hr=Ue&&Ze&&ot&&je&&Je&&ut,tr=ye.map(function(dr){return N(dr.params)}),xn=Ue?C(ye[0].params[0]):e,ai=Ze?C(ye[1].params[0]):e,ps=ot?C(ye[2].params[0]):e,wl=je?C(ye[3].params[0]):e,xs=Je?C(ye[4].params[0]):e,zi=ut?C(ye[5].params[0]):e,Ba=Ue?C(ye[0].params[1]):e,tn=Ze?C(ye[1].params[1]):e,c2=ot?C(ye[2].params[1]):e,bc=je?C(ye[3].params[1]):e,Dr=Je?C(ye[4].params[1]):e,Ua=ut?C(ye[5].params[1]):e,li=ye.map(function(dr){return Y(dr.params,dr.fn)}),Li=Ue?li[0]:t,Ro=Ze?li[1]:t,Ut=ot?li[2]:t,vc=je?li[3]:t,p2=Je?li[4]:t,wc=ut?li[5]:t,Cc=Ue?ye[0].params.length:-1,Pi=Ze?ye[1].params.length:-1,Cl=ot?ye[2].params.length:-1,ui=je?ye[3].params.length:-1,Bi=Je?ye[4].params.length:-1,Px=ut?ye[5].params.length:-1,Bx=hr?6:0,Nn=ye.length,Va=function(){"use strict";for(var gn=Bx;gn<Nn;gn++)if(tr[gn](arguments))return li[gn].apply(this,arguments);throw R(oe,arguments,ye)},Nl=function dr(gn,_n){"use strict";return arguments.length===Cc&&xn(gn)&&Ba(_n)?Li.apply(dr,arguments):arguments.length===Pi&&ai(gn)&&tn(_n)?Ro.apply(dr,arguments):arguments.length===Cl&&ps(gn)&&c2(_n)?Ut.apply(dr,arguments):arguments.length===ui&&wl(gn)&&bc(_n)?vc.apply(dr,arguments):arguments.length===Bi&&xs(gn)&&Dr(_n)?p2.apply(dr,arguments):arguments.length===Px&&zi(gn)&&Ua(_n)?wc.apply(dr,arguments):Va.apply(dr,arguments)};try{Object.defineProperty(Nl,"name",{value:oe})}catch{}return Nl.signatures=Q(ye),Nl}function ge(oe){return l.ignore.indexOf(oe)===-1}function le(oe){return oe.trim()}function xe(oe){return!!oe}function me(oe){return oe!==null}function ve(oe){return oe.types.length===0}function Te(oe){return oe.slice(0,oe.length-1)}function De(oe){return oe[oe.length-1]}function Ae(oe,he,Ne){return Array.prototype.slice.call(oe,he,Ne)}function _e(oe,he){return oe.indexOf(he)!==-1}function Ke(oe,he){for(var Ne=0;Ne<oe.length;Ne++)if(_e(he,oe[Ne]))return!0;return!1}function Xe(oe,he){for(var Ne=0;Ne<oe.length;Ne++)if(he(oe[Ne]))return oe[Ne]}function qe(oe){for(var he={},Ne=0;Ne<oe.length;Ne++)he[oe[Ne]]=!0;return Object.keys(he)}function tt(oe,he){return Array.prototype.concat.apply([],oe.map(he))}function et(oe){for(var he="",Ne=0;Ne<oe.length;Ne++){var ye=oe[Ne];if((typeof ye.signatures=="object"||typeof ye.signature=="string")&&ye.name!==""){if(he==="")he=ye.name;else if(he!==ye.name){var Ue=new Error("Function names do not match (expected: "+he+", actual: "+ye.name+")");throw Ue.data={actual:ye.name,expected:he},Ue}}}return he}function rt(oe){var he,Ne={};function ye(je,Je){if(Ne.hasOwnProperty(je)&&Je!==Ne[je])throw he=new Error('Signature "'+je+'" is defined twice'),he.data={signature:je},he}for(var Ue=0;Ue<oe.length;Ue++){var Ze=oe[Ue];if(typeof Ze.signatures=="object")for(var ot in Ze.signatures)Ze.signatures.hasOwnProperty(ot)&&(ye(ot,Ze.signatures[ot]),Ne[ot]=Ze.signatures[ot]);else if(typeof Ze.signature=="string")ye(Ze.signature,Ze),Ne[Ze.signature]=Ze;else throw he=new TypeError("Function is no typed-function (index: "+Ue+")"),he.data={index:Ue},he}return Ne}return l=ae("typed",{"string, Object":ae,Object:function(oe){var he=[];for(var Ne in oe)oe.hasOwnProperty(Ne)&&he.push(oe[Ne]);var ye=et(he);return ae(ye,oe)},"...Function":function(oe){return ae(et(oe),rt(oe))},"string, ...Function":function(oe,he){return ae(oe,rt(he))}}),l.create=n,l.types=o,l.conversions=a,l.ignore=s,l.convert=h,l.find=f,l.addType=function(oe,he){if(!oe||typeof oe.name!="string"||typeof oe.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(he!==!1){for(var Ne=0;Ne<l.types.length;Ne++)if(l.types[Ne].name==="Object"){l.types.splice(Ne,0,oe);return}}l.types.push(oe)},l.addConversion=function(oe){if(!oe||typeof oe.from!="string"||typeof oe.to!="string"||typeof oe.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");l.conversions.push(oe)},l}return n()})});var Jz=vt((Zz,p4)=>{p();(function(r){"use strict";var e=9e15,t=1e9,n="0123456789abcdef",o="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",i="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",s={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-e,maxE:e,crypto:!1},a,l,u,c,x=!0,f="[DecimalError] ",h=f+"Invalid argument: ",g=f+"Precision limit exceeded",m=f+"crypto unavailable",b="[object Decimal]",v=Math.floor,w=Math.pow,C=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,N=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,T=1e7,k=7,D=9007199254740991,R=o.length-1,K=i.length-1,M={toStringTag:b};M.absoluteValue=M.abs=function(){var A=new this.constructor(this);return A.s<0&&(A.s=1),J(A)},M.ceil=function(){return J(new this.constructor(this),this.e+1,2)},M.clampedTo=M.clamp=function(A,L){var P,B=this,q=B.constructor;if(A=new q(A),L=new q(L),!A.s||!L.s)return new q(NaN);if(A.gt(L))throw Error(h+L);return P=B.cmp(A),P<0?A:B.cmp(L)>0?L:new q(B)},M.comparedTo=M.cmp=function(A){var L,P,B,q,W=this,se=W.d,fe=(A=new W.constructor(A)).d,be=W.s,de=A.s;if(!se||!fe)return!be||!de?NaN:be!==de?be:se===fe?0:!se^be<0?1:-1;if(!se[0]||!fe[0])return se[0]?be:fe[0]?-de:0;if(be!==de)return be;if(W.e!==A.e)return W.e>A.e^be<0?1:-1;for(B=se.length,q=fe.length,L=0,P=B<q?B:q;L<P;++L)if(se[L]!==fe[L])return se[L]>fe[L]^be<0?1:-1;return B===q?0:B>q^be<0?1:-1},M.cosine=M.cos=function(){var A,L,P=this,B=P.constructor;return P.d?P.d[0]?(A=B.precision,L=B.rounding,B.precision=A+Math.max(P.e,P.sd())+k,B.rounding=1,P=ce(B,oe(B,P)),B.precision=A,B.rounding=L,J(c==2||c==3?P.neg():P,A,L,!0)):new B(1):new B(NaN)},M.cubeRoot=M.cbrt=function(){var A,L,P,B,q,W,se,fe,be,de,ke=this,Me=ke.constructor;if(!ke.isFinite()||ke.isZero())return new Me(ke);for(x=!1,W=ke.s*w(ke.s*ke,1/3),!W||Math.abs(W)==1/0?(P=j(ke.d),A=ke.e,(W=(A-P.length+1)%3)&&(P+=W==1||W==-2?"0":"00"),W=w(P,1/3),A=v((A+1)/3)-(A%3==(A<0?-1:2)),W==1/0?P="5e"+A:(P=W.toExponential(),P=P.slice(0,P.indexOf("e")+1)+A),B=new Me(P),B.s=ke.s):B=new Me(W.toString()),se=(A=Me.precision)+3;;)if(fe=B,be=fe.times(fe).times(fe),de=be.plus(ke),B=Q(de.plus(ke).times(fe),de.plus(be),se+2,1),j(fe.d).slice(0,se)===(P=j(B.d)).slice(0,se))if(P=P.slice(se-3,se+1),P=="9999"||!q&&P=="4999"){if(!q&&(J(fe,A+1,0),fe.times(fe).times(fe).eq(ke))){B=fe;break}se+=4,q=1}else{(!+P||!+P.slice(1)&&P.charAt(0)=="5")&&(J(B,A+1,1),L=!B.times(B).times(B).eq(ke));break}return x=!0,J(B,A,Me.rounding,L)},M.decimalPlaces=M.dp=function(){var A,L=this.d,P=NaN;if(L){if(A=L.length-1,P=(A-v(this.e/k))*k,A=L[A],A)for(;A%10==0;A/=10)P--;P<0&&(P=0)}return P},M.dividedBy=M.div=function(A){return Q(this,new this.constructor(A))},M.dividedToIntegerBy=M.divToInt=function(A){var L=this,P=L.constructor;return J(Q(L,new P(A),0,1,1),P.precision,P.rounding)},M.equals=M.eq=function(A){return this.cmp(A)===0},M.floor=function(){return J(new this.constructor(this),this.e+1,3)},M.greaterThan=M.gt=function(A){return this.cmp(A)>0},M.greaterThanOrEqualTo=M.gte=function(A){var L=this.cmp(A);return L==1||L===0},M.hyperbolicCosine=M.cosh=function(){var A,L,P,B,q,W=this,se=W.constructor,fe=new se(1);if(!W.isFinite())return new se(W.s?1/0:NaN);if(W.isZero())return fe;P=se.precision,B=se.rounding,se.precision=P+Math.max(W.e,W.sd())+4,se.rounding=1,q=W.d.length,q<32?(A=Math.ceil(q/3),L=(1/rt(4,A)).toString()):(A=16,L="2.3283064365386962890625e-10"),W=et(se,1,W.times(L),new se(1),!0);for(var be,de=A,ke=new se(8);de--;)be=W.times(W),W=fe.minus(be.times(ke.minus(be.times(ke))));return J(W,se.precision=P,se.rounding=B,!0)},M.hyperbolicSine=M.sinh=function(){var A,L,P,B,q=this,W=q.constructor;if(!q.isFinite()||q.isZero())return new W(q);if(L=W.precision,P=W.rounding,W.precision=L+Math.max(q.e,q.sd())+4,W.rounding=1,B=q.d.length,B<3)q=et(W,2,q,q,!0);else{A=1.4*Math.sqrt(B),A=A>16?16:A|0,q=q.times(1/rt(5,A)),q=et(W,2,q,q,!0);for(var se,fe=new W(5),be=new W(16),de=new W(20);A--;)se=q.times(q),q=q.times(fe.plus(se.times(be.times(se).plus(de))))}return W.precision=L,W.rounding=P,J(q,L,P,!0)},M.hyperbolicTangent=M.tanh=function(){var A,L,P=this,B=P.constructor;return P.isFinite()?P.isZero()?new B(P):(A=B.precision,L=B.rounding,B.precision=A+7,B.rounding=1,Q(P.sinh(),P.cosh(),B.precision=A,B.rounding=L)):new B(P.s)},M.inverseCosine=M.acos=function(){var A,L=this,P=L.constructor,B=L.abs().cmp(1),q=P.precision,W=P.rounding;return B!==-1?B===0?L.isNeg()?le(P,q,W):new P(0):new P(NaN):L.isZero()?le(P,q+4,W).times(.5):(P.precision=q+6,P.rounding=1,L=L.asin(),A=le(P,q+4,W).times(.5),P.precision=q,P.rounding=W,A.minus(L))},M.inverseHyperbolicCosine=M.acosh=function(){var A,L,P=this,B=P.constructor;return P.lte(1)?new B(P.eq(1)?0:NaN):P.isFinite()?(A=B.precision,L=B.rounding,B.precision=A+Math.max(Math.abs(P.e),P.sd())+4,B.rounding=1,x=!1,P=P.times(P).minus(1).sqrt().plus(P),x=!0,B.precision=A,B.rounding=L,P.ln()):new B(P)},M.inverseHyperbolicSine=M.asinh=function(){var A,L,P=this,B=P.constructor;return!P.isFinite()||P.isZero()?new B(P):(A=B.precision,L=B.rounding,B.precision=A+2*Math.max(Math.abs(P.e),P.sd())+6,B.rounding=1,x=!1,P=P.times(P).plus(1).sqrt().plus(P),x=!0,B.precision=A,B.rounding=L,P.ln())},M.inverseHyperbolicTangent=M.atanh=function(){var A,L,P,B,q=this,W=q.constructor;return q.isFinite()?q.e>=0?new W(q.abs().eq(1)?q.s/0:q.isZero()?q:NaN):(A=W.precision,L=W.rounding,B=q.sd(),Math.max(B,A)<2*-q.e-1?J(new W(q),A,L,!0):(W.precision=P=B-q.e,q=Q(q.plus(1),new W(1).minus(q),P+A,1),W.precision=A+4,W.rounding=1,q=q.ln(),W.precision=A,W.rounding=L,q.times(.5))):new W(NaN)},M.inverseSine=M.asin=function(){var A,L,P,B,q=this,W=q.constructor;return q.isZero()?new W(q):(L=q.abs().cmp(1),P=W.precision,B=W.rounding,L!==-1?L===0?(A=le(W,P+4,B).times(.5),A.s=q.s,A):new W(NaN):(W.precision=P+6,W.rounding=1,q=q.div(new W(1).minus(q.times(q)).sqrt().plus(1)).atan(),W.precision=P,W.rounding=B,q.times(2)))},M.inverseTangent=M.atan=function(){var A,L,P,B,q,W,se,fe,be,de=this,ke=de.constructor,Me=ke.precision,Be=ke.rounding;if(de.isFinite()){if(de.isZero())return new ke(de);if(de.abs().eq(1)&&Me+4<=K)return se=le(ke,Me+4,Be).times(.25),se.s=de.s,se}else{if(!de.s)return new ke(NaN);if(Me+4<=K)return se=le(ke,Me+4,Be).times(.5),se.s=de.s,se}for(ke.precision=fe=Me+10,ke.rounding=1,P=Math.min(28,fe/k+2|0),A=P;A;--A)de=de.div(de.times(de).plus(1).sqrt().plus(1));for(x=!1,L=Math.ceil(fe/k),B=1,be=de.times(de),se=new ke(de),q=de;A!==-1;)if(q=q.times(be),W=se.minus(q.div(B+=2)),q=q.times(be),se=W.plus(q.div(B+=2)),se.d[L]!==void 0)for(A=L;se.d[A]===W.d[A]&&A--;);return P&&(se=se.times(2<<P-1)),x=!0,J(se,ke.precision=Me,ke.rounding=Be,!0)},M.isFinite=function(){return!!this.d},M.isInteger=M.isInt=function(){return!!this.d&&v(this.e/k)>this.d.length-2},M.isNaN=function(){return!this.s},M.isNegative=M.isNeg=function(){return this.s<0},M.isPositive=M.isPos=function(){return this.s>0},M.isZero=function(){return!!this.d&&this.d[0]===0},M.lessThan=M.lt=function(A){return this.cmp(A)<0},M.lessThanOrEqualTo=M.lte=function(A){return this.cmp(A)<1},M.logarithm=M.log=function(A){var L,P,B,q,W,se,fe,be,de=this,ke=de.constructor,Me=ke.precision,Be=ke.rounding,ft=5;if(A==null)A=new ke(10),L=!0;else{if(A=new ke(A),P=A.d,A.s<0||!P||!P[0]||A.eq(1))return new ke(NaN);L=A.eq(10)}if(P=de.d,de.s<0||!P||!P[0]||de.eq(1))return new ke(P&&!P[0]?-1/0:de.s!=1?NaN:P?0:1/0);if(L)if(P.length>1)W=!0;else{for(q=P[0];q%10===0;)q/=10;W=q!==1}if(x=!1,fe=Me+ft,se=_e(de,fe),B=L?ge(ke,fe+10):_e(A,fe),be=Q(se,B,fe,1),Z(be.d,q=Me,Be))do if(fe+=10,se=_e(de,fe),B=L?ge(ke,fe+10):_e(A,fe),be=Q(se,B,fe,1),!W){+j(be.d).slice(q+1,q+15)+1==1e14&&(be=J(be,Me+1,0));break}while(Z(be.d,q+=10,Be));return x=!0,J(be,Me,Be)},M.minus=M.sub=function(A){var L,P,B,q,W,se,fe,be,de,ke,Me,Be,ft=this,jt=ft.constructor;if(A=new jt(A),!ft.d||!A.d)return!ft.s||!A.s?A=new jt(NaN):ft.d?A.s=-A.s:A=new jt(A.d||ft.s!==A.s?ft:NaN),A;if(ft.s!=A.s)return A.s=-A.s,ft.plus(A);if(de=ft.d,Be=A.d,fe=jt.precision,be=jt.rounding,!de[0]||!Be[0]){if(Be[0])A.s=-A.s;else if(de[0])A=new jt(ft);else return new jt(be===3?-0:0);return x?J(A,fe,be):A}if(P=v(A.e/k),ke=v(ft.e/k),de=de.slice(),W=ke-P,W){for(Me=W<0,Me?(L=de,W=-W,se=Be.length):(L=Be,P=ke,se=de.length),B=Math.max(Math.ceil(fe/k),se)+2,W>B&&(W=B,L.length=1),L.reverse(),B=W;B--;)L.push(0);L.reverse()}else{for(B=de.length,se=Be.length,Me=B<se,Me&&(se=B),B=0;B<se;B++)if(de[B]!=Be[B]){Me=de[B]<Be[B];break}W=0}for(Me&&(L=de,de=Be,Be=L,A.s=-A.s),se=de.length,B=Be.length-se;B>0;--B)de[se++]=0;for(B=Be.length;B>W;){if(de[--B]<Be[B]){for(q=B;q&&de[--q]===0;)de[q]=T-1;--de[q],de[B]+=T}de[B]-=Be[B]}for(;de[--se]===0;)de.pop();for(;de[0]===0;de.shift())--P;return de[0]?(A.d=de,A.e=ae(de,P),x?J(A,fe,be):A):new jt(be===3?-0:0)},M.modulo=M.mod=function(A){var L,P=this,B=P.constructor;return A=new B(A),!P.d||!A.s||A.d&&!A.d[0]?new B(NaN):!A.d||P.d&&!P.d[0]?J(new B(P),B.precision,B.rounding):(x=!1,B.modulo==9?(L=Q(P,A.abs(),0,3,1),L.s*=A.s):L=Q(P,A,0,B.modulo,1),L=L.times(A),x=!0,P.minus(L))},M.naturalExponential=M.exp=function(){return Ae(this)},M.naturalLogarithm=M.ln=function(){return _e(this)},M.negated=M.neg=function(){var A=new this.constructor(this);return A.s=-A.s,J(A)},M.plus=M.add=function(A){var L,P,B,q,W,se,fe,be,de,ke,Me=this,Be=Me.constructor;if(A=new Be(A),!Me.d||!A.d)return!Me.s||!A.s?A=new Be(NaN):Me.d||(A=new Be(A.d||Me.s===A.s?Me:NaN)),A;if(Me.s!=A.s)return A.s=-A.s,Me.minus(A);if(de=Me.d,ke=A.d,fe=Be.precision,be=Be.rounding,!de[0]||!ke[0])return ke[0]||(A=new Be(Me)),x?J(A,fe,be):A;if(W=v(Me.e/k),B=v(A.e/k),de=de.slice(),q=W-B,q){for(q<0?(P=de,q=-q,se=ke.length):(P=ke,B=W,se=de.length),W=Math.ceil(fe/k),se=W>se?W+1:se+1,q>se&&(q=se,P.length=1),P.reverse();q--;)P.push(0);P.reverse()}for(se=de.length,q=ke.length,se-q<0&&(q=se,P=ke,ke=de,de=P),L=0;q;)L=(de[--q]=de[q]+ke[q]+L)/T|0,de[q]%=T;for(L&&(de.unshift(L),++B),se=de.length;de[--se]==0;)de.pop();return A.d=de,A.e=ae(de,B),x?J(A,fe,be):A},M.precision=M.sd=function(A){var L,P=this;if(A!==void 0&&A!==!!A&&A!==1&&A!==0)throw Error(h+A);return P.d?(L=xe(P.d),A&&P.e+1>L&&(L=P.e+1)):L=NaN,L},M.round=function(){var A=this,L=A.constructor;return J(new L(A),A.e+1,L.rounding)},M.sine=M.sin=function(){var A,L,P=this,B=P.constructor;return P.isFinite()?P.isZero()?new B(P):(A=B.precision,L=B.rounding,B.precision=A+Math.max(P.e,P.sd())+k,B.rounding=1,P=tt(B,oe(B,P)),B.precision=A,B.rounding=L,J(c>2?P.neg():P,A,L,!0)):new B(NaN)},M.squareRoot=M.sqrt=function(){var A,L,P,B,q,W,se=this,fe=se.d,be=se.e,de=se.s,ke=se.constructor;if(de!==1||!fe||!fe[0])return new ke(!de||de<0&&(!fe||fe[0])?NaN:fe?se:1/0);for(x=!1,de=Math.sqrt(+se),de==0||de==1/0?(L=j(fe),(L.length+be)%2==0&&(L+="0"),de=Math.sqrt(L),be=v((be+1)/2)-(be<0||be%2),de==1/0?L="5e"+be:(L=de.toExponential(),L=L.slice(0,L.indexOf("e")+1)+be),B=new ke(L)):B=new ke(de.toString()),P=(be=ke.precision)+3;;)if(W=B,B=W.plus(Q(se,W,P+2,1)).times(.5),j(W.d).slice(0,P)===(L=j(B.d)).slice(0,P))if(L=L.slice(P-3,P+1),L=="9999"||!q&&L=="4999"){if(!q&&(J(W,be+1,0),W.times(W).eq(se))){B=W;break}P+=4,q=1}else{(!+L||!+L.slice(1)&&L.charAt(0)=="5")&&(J(B,be+1,1),A=!B.times(B).eq(se));break}return x=!0,J(B,be,ke.rounding,A)},M.tangent=M.tan=function(){var A,L,P=this,B=P.constructor;return P.isFinite()?P.isZero()?new B(P):(A=B.precision,L=B.rounding,B.precision=A+10,B.rounding=1,P=P.sin(),P.s=1,P=Q(P,new B(1).minus(P.times(P)).sqrt(),A+10,0),B.precision=A,B.rounding=L,J(c==2||c==4?P.neg():P,A,L,!0)):new B(NaN)},M.times=M.mul=function(A){var L,P,B,q,W,se,fe,be,de,ke=this,Me=ke.constructor,Be=ke.d,ft=(A=new Me(A)).d;if(A.s*=ke.s,!Be||!Be[0]||!ft||!ft[0])return new Me(!A.s||Be&&!Be[0]&&!ft||ft&&!ft[0]&&!Be?NaN:!Be||!ft?A.s/0:A.s*0);for(P=v(ke.e/k)+v(A.e/k),be=Be.length,de=ft.length,be<de&&(W=Be,Be=ft,ft=W,se=be,be=de,de=se),W=[],se=be+de,B=se;B--;)W.push(0);for(B=de;--B>=0;){for(L=0,q=be+B;q>B;)fe=W[q]+ft[B]*Be[q-B-1]+L,W[q--]=fe%T|0,L=fe/T|0;W[q]=(W[q]+L)%T|0}for(;!W[--se];)W.pop();return L?++P:W.shift(),A.d=W,A.e=ae(W,P),x?J(A,Me.precision,Me.rounding):A},M.toBinary=function(A,L){return he(this,2,A,L)},M.toDecimalPlaces=M.toDP=function(A,L){var P=this,B=P.constructor;return P=new B(P),A===void 0?P:(X(A,0,t),L===void 0?L=B.rounding:X(L,0,8),J(P,A+P.e+1,L))},M.toExponential=function(A,L){var P,B=this,q=B.constructor;return A===void 0?P=te(B,!0):(X(A,0,t),L===void 0?L=q.rounding:X(L,0,8),B=J(new q(B),A+1,L),P=te(B,!0,A+1)),B.isNeg()&&!B.isZero()?"-"+P:P},M.toFixed=function(A,L){var P,B,q=this,W=q.constructor;return A===void 0?P=te(q):(X(A,0,t),L===void 0?L=W.rounding:X(L,0,8),B=J(new W(q),A+q.e+1,L),P=te(B,!1,A+B.e+1)),q.isNeg()&&!q.isZero()?"-"+P:P},M.toFraction=function(A){var L,P,B,q,W,se,fe,be,de,ke,Me,Be,ft=this,jt=ft.d,Tt=ft.constructor;if(!jt)return new Tt(ft);if(de=P=new Tt(1),B=be=new Tt(0),L=new Tt(B),W=L.e=xe(jt)-ft.e-1,se=W%k,L.d[0]=w(10,se<0?k+se:se),A==null)A=W>0?L:de;else{if(fe=new Tt(A),!fe.isInt()||fe.lt(de))throw Error(h+fe);A=fe.gt(L)?W>0?L:de:fe}for(x=!1,fe=new Tt(j(jt)),ke=Tt.precision,Tt.precision=W=jt.length*k*2;Me=Q(fe,L,0,1,1),q=P.plus(Me.times(B)),q.cmp(A)!=1;)P=B,B=q,q=de,de=be.plus(Me.times(q)),be=q,q=L,L=fe.minus(Me.times(q)),fe=q;return q=Q(A.minus(P),B,0,1,1),be=be.plus(q.times(de)),P=P.plus(q.times(B)),be.s=de.s=ft.s,Be=Q(de,B,W,1).minus(ft).abs().cmp(Q(be,P,W,1).minus(ft).abs())<1?[de,B]:[be,P],Tt.precision=ke,x=!0,Be},M.toHexadecimal=M.toHex=function(A,L){return he(this,16,A,L)},M.toNearest=function(A,L){var P=this,B=P.constructor;if(P=new B(P),A==null){if(!P.d)return P;A=new B(1),L=B.rounding}else{if(A=new B(A),L===void 0?L=B.rounding:X(L,0,8),!P.d)return A.s?P:A;if(!A.d)return A.s&&(A.s=P.s),A}return A.d[0]?(x=!1,P=Q(P,A,0,L,1).times(A),x=!0,J(P)):(A.s=P.s,P=A),P},M.toNumber=function(){return+this},M.toOctal=function(A,L){return he(this,8,A,L)},M.toPower=M.pow=function(A){var L,P,B,q,W,se,fe=this,be=fe.constructor,de=+(A=new be(A));if(!fe.d||!A.d||!fe.d[0]||!A.d[0])return new be(w(+fe,de));if(fe=new be(fe),fe.eq(1))return fe;if(B=be.precision,W=be.rounding,A.eq(1))return J(fe,B,W);if(L=v(A.e/k),L>=A.d.length-1&&(P=de<0?-de:de)<=D)return q=ve(be,fe,P,B),A.s<0?new be(1).div(q):J(q,B,W);if(se=fe.s,se<0){if(L<A.d.length-1)return new be(NaN);if((A.d[L]&1)==0&&(se=1),fe.e==0&&fe.d[0]==1&&fe.d.length==1)return fe.s=se,fe}return P=w(+fe,de),L=P==0||!isFinite(P)?v(de*(Math.log("0."+j(fe.d))/Math.LN10+fe.e+1)):new be(P+"").e,L>be.maxE+1||L<be.minE-1?new be(L>0?se/0:0):(x=!1,be.rounding=fe.s=1,P=Math.min(12,(L+"").length),q=Ae(A.times(_e(fe,B+P)),B),q.d&&(q=J(q,B+5,1),Z(q.d,B,W)&&(L=B+10,q=J(Ae(A.times(_e(fe,L+P)),L),L+5,1),+j(q.d).slice(B+1,B+15)+1==1e14&&(q=J(q,B+1,0)))),q.s=se,x=!0,be.rounding=W,J(q,B,W))},M.toPrecision=function(A,L){var P,B=this,q=B.constructor;return A===void 0?P=te(B,B.e<=q.toExpNeg||B.e>=q.toExpPos):(X(A,1,t),L===void 0?L=q.rounding:X(L,0,8),B=J(new q(B),A,L),P=te(B,A<=B.e||B.e<=q.toExpNeg,A)),B.isNeg()&&!B.isZero()?"-"+P:P},M.toSignificantDigits=M.toSD=function(A,L){var P=this,B=P.constructor;return A===void 0?(A=B.precision,L=B.rounding):(X(A,1,t),L===void 0?L=B.rounding:X(L,0,8)),J(new B(P),A,L)},M.toString=function(){var A=this,L=A.constructor,P=te(A,A.e<=L.toExpNeg||A.e>=L.toExpPos);return A.isNeg()&&!A.isZero()?"-"+P:P},M.truncated=M.trunc=function(){return J(new this.constructor(this),this.e+1,1)},M.valueOf=M.toJSON=function(){var A=this,L=A.constructor,P=te(A,A.e<=L.toExpNeg||A.e>=L.toExpPos);return A.isNeg()?"-"+P:P};function j(A){var L,P,B,q=A.length-1,W="",se=A[0];if(q>0){for(W+=se,L=1;L<q;L++)B=A[L]+"",P=k-B.length,P&&(W+=me(P)),W+=B;se=A[L],B=se+"",P=k-B.length,P&&(W+=me(P))}else if(se===0)return"0";for(;se%10===0;)se/=10;return W+se}function X(A,L,P){if(A!==~~A||A<L||A>P)throw Error(h+A)}function Z(A,L,P,B){var q,W,se,fe;for(W=A[0];W>=10;W/=10)--L;return--L<0?(L+=k,q=0):(q=Math.ceil((L+1)/k),L%=k),W=w(10,k-L),fe=A[q]%W|0,B==null?L<3?(L==0?fe=fe/100|0:L==1&&(fe=fe/10|0),se=P<4&&fe==99999||P>3&&fe==49999||fe==5e4||fe==0):se=(P<4&&fe+1==W||P>3&&fe+1==W/2)&&(A[q+1]/W/100|0)==w(10,L-2)-1||(fe==W/2||fe==0)&&(A[q+1]/W/100|0)==0:L<4?(L==0?fe=fe/1e3|0:L==1?fe=fe/100|0:L==2&&(fe=fe/10|0),se=(B||P<4)&&fe==9999||!B&&P>3&&fe==4999):se=((B||P<4)&&fe+1==W||!B&&P>3&&fe+1==W/2)&&(A[q+1]/W/1e3|0)==w(10,L-3)-1,se}function Y(A,L,P){for(var B,q=[0],W,se=0,fe=A.length;se<fe;){for(W=q.length;W--;)q[W]*=L;for(q[0]+=n.indexOf(A.charAt(se++)),B=0;B<q.length;B++)q[B]>P-1&&(q[B+1]===void 0&&(q[B+1]=0),q[B+1]+=q[B]/P|0,q[B]%=P)}return q.reverse()}function ce(A,L){var P,B,q;if(L.isZero())return L;B=L.d.length,B<32?(P=Math.ceil(B/3),q=(1/rt(4,P)).toString()):(P=16,q="2.3283064365386962890625e-10"),A.precision+=P,L=et(A,1,L.times(q),new A(1));for(var W=P;W--;){var se=L.times(L);L=se.times(se).minus(se).times(8).plus(1)}return A.precision-=P,L}var Q=function(){function A(B,q,W){var se,fe=0,be=B.length;for(B=B.slice();be--;)se=B[be]*q+fe,B[be]=se%W|0,fe=se/W|0;return fe&&B.unshift(fe),B}function L(B,q,W,se){var fe,be;if(W!=se)be=W>se?1:-1;else for(fe=be=0;fe<W;fe++)if(B[fe]!=q[fe]){be=B[fe]>q[fe]?1:-1;break}return be}function P(B,q,W,se){for(var fe=0;W--;)B[W]-=fe,fe=B[W]<q[W]?1:0,B[W]=fe*se+B[W]-q[W];for(;!B[0]&&B.length>1;)B.shift()}return function(B,q,W,se,fe,be){var de,ke,Me,Be,ft,jt,Tt,Wn,Wr,Wo,wr,Rn,Nc,qo,Ux,_c,_l,Vx,po,Sc,Tc=B.constructor,Gx=B.s==q.s?1:-1,$n=B.d,Rr=q.d;if(!$n||!$n[0]||!Rr||!Rr[0])return new Tc(!B.s||!q.s||($n?Rr&&$n[0]==Rr[0]:!Rr)?NaN:$n&&$n[0]==0||!Rr?Gx*0:Gx/0);for(be?(ft=1,ke=B.e-q.e):(be=T,ft=k,ke=v(B.e/ft)-v(q.e/ft)),po=Rr.length,_l=$n.length,Wr=new Tc(Gx),Wo=Wr.d=[],Me=0;Rr[Me]==($n[Me]||0);Me++);if(Rr[Me]>($n[Me]||0)&&ke--,W==null?(qo=W=Tc.precision,se=Tc.rounding):fe?qo=W+(B.e-q.e)+1:qo=W,qo<0)Wo.push(1),jt=!0;else{if(qo=qo/ft+2|0,Me=0,po==1){for(Be=0,Rr=Rr[0],qo++;(Me<_l||Be)&&qo--;Me++)Ux=Be*be+($n[Me]||0),Wo[Me]=Ux/Rr|0,Be=Ux%Rr|0;jt=Be||Me<_l}else{for(Be=be/(Rr[0]+1)|0,Be>1&&(Rr=A(Rr,Be,be),$n=A($n,Be,be),po=Rr.length,_l=$n.length),_c=po,wr=$n.slice(0,po),Rn=wr.length;Rn<po;)wr[Rn++]=0;Sc=Rr.slice(),Sc.unshift(0),Vx=Rr[0],Rr[1]>=be/2&&++Vx;do Be=0,de=L(Rr,wr,po,Rn),de<0?(Nc=wr[0],po!=Rn&&(Nc=Nc*be+(wr[1]||0)),Be=Nc/Vx|0,Be>1?(Be>=be&&(Be=be-1),Tt=A(Rr,Be,be),Wn=Tt.length,Rn=wr.length,de=L(Tt,wr,Wn,Rn),de==1&&(Be--,P(Tt,po<Wn?Sc:Rr,Wn,be))):(Be==0&&(de=Be=1),Tt=Rr.slice()),Wn=Tt.length,Wn<Rn&&Tt.unshift(0),P(wr,Tt,Rn,be),de==-1&&(Rn=wr.length,de=L(Rr,wr,po,Rn),de<1&&(Be++,P(wr,po<Rn?Sc:Rr,Rn,be))),Rn=wr.length):de===0&&(Be++,wr=[0]),Wo[Me++]=Be,de&&wr[0]?wr[Rn++]=$n[_c]||0:(wr=[$n[_c]],Rn=1);while((_c++<_l||wr[0]!==void 0)&&qo--);jt=wr[0]!==void 0}Wo[0]||Wo.shift()}if(ft==1)Wr.e=ke,l=jt;else{for(Me=1,Be=Wo[0];Be>=10;Be/=10)Me++;Wr.e=Me+ke*ft-1,J(Wr,fe?W+Wr.e+1:W,se,jt)}return Wr}}();function J(A,L,P,B){var q,W,se,fe,be,de,ke,Me,Be,ft=A.constructor;e:if(L!=null){if(Me=A.d,!Me)return A;for(q=1,fe=Me[0];fe>=10;fe/=10)q++;if(W=L-q,W<0)W+=k,se=L,ke=Me[Be=0],be=ke/w(10,q-se-1)%10|0;else if(Be=Math.ceil((W+1)/k),fe=Me.length,Be>=fe)if(B){for(;fe++<=Be;)Me.push(0);ke=be=0,q=1,W%=k,se=W-k+1}else break e;else{for(ke=fe=Me[Be],q=1;fe>=10;fe/=10)q++;W%=k,se=W-k+q,be=se<0?0:ke/w(10,q-se-1)%10|0}if(B=B||L<0||Me[Be+1]!==void 0||(se<0?ke:ke%w(10,q-se-1)),de=P<4?(be||B)&&(P==0||P==(A.s<0?3:2)):be>5||be==5&&(P==4||B||P==6&&(W>0?se>0?ke/w(10,q-se):0:Me[Be-1])%10&1||P==(A.s<0?8:7)),L<1||!Me[0])return Me.length=0,de?(L-=A.e+1,Me[0]=w(10,(k-L%k)%k),A.e=-L||0):Me[0]=A.e=0,A;if(W==0?(Me.length=Be,fe=1,Be--):(Me.length=Be+1,fe=w(10,k-W),Me[Be]=se>0?(ke/w(10,q-se)%w(10,se)|0)*fe:0),de)for(;;)if(Be==0){for(W=1,se=Me[0];se>=10;se/=10)W++;for(se=Me[0]+=fe,fe=1;se>=10;se/=10)fe++;W!=fe&&(A.e++,Me[0]==T&&(Me[0]=1));break}else{if(Me[Be]+=fe,Me[Be]!=T)break;Me[Be--]=0,fe=1}for(W=Me.length;Me[--W]===0;)Me.pop()}return x&&(A.e>ft.maxE?(A.d=null,A.e=NaN):A.e<ft.minE&&(A.e=0,A.d=[0])),A}function te(A,L,P){if(!A.isFinite())return Ke(A);var B,q=A.e,W=j(A.d),se=W.length;return L?(P&&(B=P-se)>0?W=W.charAt(0)+"."+W.slice(1)+me(B):se>1&&(W=W.charAt(0)+"."+W.slice(1)),W=W+(A.e<0?"e":"e+")+A.e):q<0?(W="0."+me(-q-1)+W,P&&(B=P-se)>0&&(W+=me(B))):q>=se?(W+=me(q+1-se),P&&(B=P-q-1)>0&&(W=W+"."+me(B))):((B=q+1)<se&&(W=W.slice(0,B)+"."+W.slice(B)),P&&(B=P-se)>0&&(q+1===se&&(W+="."),W+=me(B))),W}function ae(A,L){var P=A[0];for(L*=k;P>=10;P/=10)L++;return L}function ge(A,L,P){if(L>R)throw x=!0,P&&(A.precision=P),Error(g);return J(new A(o),L,1,!0)}function le(A,L,P){if(L>K)throw Error(g);return J(new A(i),L,P,!0)}function xe(A){var L=A.length-1,P=L*k+1;if(L=A[L],L){for(;L%10==0;L/=10)P--;for(L=A[0];L>=10;L/=10)P++}return P}function me(A){for(var L="";A--;)L+="0";return L}function ve(A,L,P,B){var q,W=new A(1),se=Math.ceil(B/k+4);for(x=!1;;){if(P%2&&(W=W.times(L),Ne(W.d,se)&&(q=!0)),P=v(P/2),P===0){P=W.d.length-1,q&&W.d[P]===0&&++W.d[P];break}L=L.times(L),Ne(L.d,se)}return x=!0,W}function Te(A){return A.d[A.d.length-1]&1}function De(A,L,P){for(var B,q=new A(L[0]),W=0;++W<L.length;)if(B=new A(L[W]),B.s)q[P](B)&&(q=B);else{q=B;break}return q}function Ae(A,L){var P,B,q,W,se,fe,be,de=0,ke=0,Me=0,Be=A.constructor,ft=Be.rounding,jt=Be.precision;if(!A.d||!A.d[0]||A.e>17)return new Be(A.d?A.d[0]?A.s<0?0:1/0:1:A.s?A.s<0?0:A:0/0);for(L==null?(x=!1,be=jt):be=L,fe=new Be(.03125);A.e>-2;)A=A.times(fe),Me+=5;for(B=Math.log(w(2,Me))/Math.LN10*2+5|0,be+=B,P=W=se=new Be(1),Be.precision=be;;){if(W=J(W.times(A),be,1),P=P.times(++ke),fe=se.plus(Q(W,P,be,1)),j(fe.d).slice(0,be)===j(se.d).slice(0,be)){for(q=Me;q--;)se=J(se.times(se),be,1);if(L==null)if(de<3&&Z(se.d,be-B,ft,de))Be.precision=be+=10,P=W=fe=new Be(1),ke=0,de++;else return J(se,Be.precision=jt,ft,x=!0);else return Be.precision=jt,se}se=fe}}function _e(A,L){var P,B,q,W,se,fe,be,de,ke,Me,Be,ft=1,jt=10,Tt=A,Wn=Tt.d,Wr=Tt.constructor,Wo=Wr.rounding,wr=Wr.precision;if(Tt.s<0||!Wn||!Wn[0]||!Tt.e&&Wn[0]==1&&Wn.length==1)return new Wr(Wn&&!Wn[0]?-1/0:Tt.s!=1?NaN:Wn?0:Tt);if(L==null?(x=!1,ke=wr):ke=L,Wr.precision=ke+=jt,P=j(Wn),B=P.charAt(0),Math.abs(W=Tt.e)<15e14){for(;B<7&&B!=1||B==1&&P.charAt(1)>3;)Tt=Tt.times(A),P=j(Tt.d),B=P.charAt(0),ft++;W=Tt.e,B>1?(Tt=new Wr("0."+P),W++):Tt=new Wr(B+"."+P.slice(1))}else return de=ge(Wr,ke+2,wr).times(W+""),Tt=_e(new Wr(B+"."+P.slice(1)),ke-jt).plus(de),Wr.precision=wr,L==null?J(Tt,wr,Wo,x=!0):Tt;for(Me=Tt,be=se=Tt=Q(Tt.minus(1),Tt.plus(1),ke,1),Be=J(Tt.times(Tt),ke,1),q=3;;){if(se=J(se.times(Be),ke,1),de=be.plus(Q(se,new Wr(q),ke,1)),j(de.d).slice(0,ke)===j(be.d).slice(0,ke))if(be=be.times(2),W!==0&&(be=be.plus(ge(Wr,ke+2,wr).times(W+""))),be=Q(be,new Wr(ft),ke,1),L==null)if(Z(be.d,ke-jt,Wo,fe))Wr.precision=ke+=jt,de=se=Tt=Q(Me.minus(1),Me.plus(1),ke,1),Be=J(Tt.times(Tt),ke,1),q=fe=1;else return J(be,Wr.precision=wr,Wo,x=!0);else return Wr.precision=wr,be;be=de,q+=2}}function Ke(A){return String(A.s*A.s/0)}function Xe(A,L){var P,B,q;for((P=L.indexOf("."))>-1&&(L=L.replace(".","")),(B=L.search(/e/i))>0?(P<0&&(P=B),P+=+L.slice(B+1),L=L.substring(0,B)):P<0&&(P=L.length),B=0;L.charCodeAt(B)===48;B++);for(q=L.length;L.charCodeAt(q-1)===48;--q);if(L=L.slice(B,q),L){if(q-=B,A.e=P=P-B-1,A.d=[],B=(P+1)%k,P<0&&(B+=k),B<q){for(B&&A.d.push(+L.slice(0,B)),q-=k;B<q;)A.d.push(+L.slice(B,B+=k));L=L.slice(B),B=k-L.length}else B-=q;for(;B--;)L+="0";A.d.push(+L),x&&(A.e>A.constructor.maxE?(A.d=null,A.e=NaN):A.e<A.constructor.minE&&(A.e=0,A.d=[0]))}else A.e=0,A.d=[0];return A}function qe(A,L){var P,B,q,W,se,fe,be,de,ke;if(L.indexOf("_")>-1){if(L=L.replace(/(\d)_(?=\d)/g,"$1"),E.test(L))return Xe(A,L)}else if(L==="Infinity"||L==="NaN")return+L||(A.s=NaN),A.e=NaN,A.d=null,A;if(N.test(L))P=16,L=L.toLowerCase();else if(C.test(L))P=2;else if(_.test(L))P=8;else throw Error(h+L);for(W=L.search(/p/i),W>0?(be=+L.slice(W+1),L=L.substring(2,W)):L=L.slice(2),W=L.indexOf("."),se=W>=0,B=A.constructor,se&&(L=L.replace(".",""),fe=L.length,W=fe-W,q=ve(B,new B(P),W,W*2)),de=Y(L,P,T),ke=de.length-1,W=ke;de[W]===0;--W)de.pop();return W<0?new B(A.s*0):(A.e=ae(de,ke),A.d=de,x=!1,se&&(A=Q(A,q,fe*4)),be&&(A=A.times(Math.abs(be)<54?w(2,be):a.pow(2,be))),x=!0,A)}function tt(A,L){var P,B=L.d.length;if(B<3)return L.isZero()?L:et(A,2,L,L);P=1.4*Math.sqrt(B),P=P>16?16:P|0,L=L.times(1/rt(5,P)),L=et(A,2,L,L);for(var q,W=new A(5),se=new A(16),fe=new A(20);P--;)q=L.times(L),L=L.times(W.plus(q.times(se.times(q).minus(fe))));return L}function et(A,L,P,B,q){var W,se,fe,be,de=1,ke=A.precision,Me=Math.ceil(ke/k);for(x=!1,be=P.times(P),fe=new A(B);;){if(se=Q(fe.times(be),new A(L++*L++),ke,1),fe=q?B.plus(se):B.minus(se),B=Q(se.times(be),new A(L++*L++),ke,1),se=fe.plus(B),se.d[Me]!==void 0){for(W=Me;se.d[W]===fe.d[W]&&W--;);if(W==-1)break}W=fe,fe=B,B=se,se=W,de++}return x=!0,se.d.length=Me+1,se}function rt(A,L){for(var P=A;--L;)P*=A;return P}function oe(A,L){var P,B=L.s<0,q=le(A,A.precision,1),W=q.times(.5);if(L=L.abs(),L.lte(W))return c=B?4:1,L;if(P=L.divToInt(q),P.isZero())c=B?3:2;else{if(L=L.minus(P.times(q)),L.lte(W))return c=Te(P)?B?2:3:B?4:1,L;c=Te(P)?B?1:4:B?3:2}return L.minus(q).abs()}function he(A,L,P,B){var q,W,se,fe,be,de,ke,Me,Be,ft=A.constructor,jt=P!==void 0;if(jt?(X(P,1,t),B===void 0?B=ft.rounding:X(B,0,8)):(P=ft.precision,B=ft.rounding),!A.isFinite())ke=Ke(A);else{for(ke=te(A),se=ke.indexOf("."),jt?(q=2,L==16?P=P*4-3:L==8&&(P=P*3-2)):q=L,se>=0&&(ke=ke.replace(".",""),Be=new ft(1),Be.e=ke.length-se,Be.d=Y(te(Be),10,q),Be.e=Be.d.length),Me=Y(ke,10,q),W=be=Me.length;Me[--be]==0;)Me.pop();if(!Me[0])ke=jt?"0p+0":"0";else{if(se<0?W--:(A=new ft(A),A.d=Me,A.e=W,A=Q(A,Be,P,B,0,q),Me=A.d,W=A.e,de=l),se=Me[P],fe=q/2,de=de||Me[P+1]!==void 0,de=B<4?(se!==void 0||de)&&(B===0||B===(A.s<0?3:2)):se>fe||se===fe&&(B===4||de||B===6&&Me[P-1]&1||B===(A.s<0?8:7)),Me.length=P,de)for(;++Me[--P]>q-1;)Me[P]=0,P||(++W,Me.unshift(1));for(be=Me.length;!Me[be-1];--be);for(se=0,ke="";se<be;se++)ke+=n.charAt(Me[se]);if(jt){if(be>1)if(L==16||L==8){for(se=L==16?4:3,--be;be%se;be++)ke+="0";for(Me=Y(ke,q,L),be=Me.length;!Me[be-1];--be);for(se=1,ke="1.";se<be;se++)ke+=n.charAt(Me[se])}else ke=ke.charAt(0)+"."+ke.slice(1);ke=ke+(W<0?"p":"p+")+W}else if(W<0){for(;++W;)ke="0"+ke;ke="0."+ke}else if(++W>be)for(W-=be;W--;)ke+="0";else W<be&&(ke=ke.slice(0,W)+"."+ke.slice(W))}ke=(L==16?"0x":L==2?"0b":L==8?"0o":"")+ke}return A.s<0?"-"+ke:ke}function Ne(A,L){if(A.length>L)return A.length=L,!0}function ye(A){return new this(A).abs()}function Ue(A){return new this(A).acos()}function Ze(A){return new this(A).acosh()}function ot(A,L){return new this(A).plus(L)}function je(A){return new this(A).asin()}function Je(A){return new this(A).asinh()}function ut(A){return new this(A).atan()}function hr(A){return new this(A).atanh()}function tr(A,L){A=new this(A),L=new this(L);var P,B=this.precision,q=this.rounding,W=B+4;return!A.s||!L.s?P=new this(NaN):!A.d&&!L.d?(P=le(this,W,1).times(L.s>0?.25:.75),P.s=A.s):!L.d||A.isZero()?(P=L.s<0?le(this,B,q):new this(0),P.s=A.s):!A.d||L.isZero()?(P=le(this,W,1).times(.5),P.s=A.s):L.s<0?(this.precision=W,this.rounding=1,P=this.atan(Q(A,L,W,1)),L=le(this,W,1),this.precision=B,this.rounding=q,P=A.s<0?P.minus(L):P.plus(L)):P=this.atan(Q(A,L,W,1)),P}function xn(A){return new this(A).cbrt()}function ai(A){return J(A=new this(A),A.e+1,2)}function ps(A,L,P){return new this(A).clamp(L,P)}function wl(A){if(!A||typeof A!="object")throw Error(f+"Object expected");var L,P,B,q=A.defaults===!0,W=["precision",1,t,"rounding",0,8,"toExpNeg",-e,0,"toExpPos",0,e,"maxE",0,e,"minE",-e,0,"modulo",0,9];for(L=0;L<W.length;L+=3)if(P=W[L],q&&(this[P]=s[P]),(B=A[P])!==void 0)if(v(B)===B&&B>=W[L+1]&&B<=W[L+2])this[P]=B;else throw Error(h+P+": "+B);if(P="crypto",q&&(this[P]=s[P]),(B=A[P])!==void 0)if(B===!0||B===!1||B===0||B===1)if(B)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[P]=!0;else throw Error(m);else this[P]=!1;else throw Error(h+P+": "+B);return this}function xs(A){return new this(A).cos()}function zi(A){return new this(A).cosh()}function Ba(A){var L,P,B;function q(W){var se,fe,be,de=this;if(!(de instanceof q))return new q(W);if(de.constructor=q,Ua(W)){de.s=W.s,x?!W.d||W.e>q.maxE?(de.e=NaN,de.d=null):W.e<q.minE?(de.e=0,de.d=[0]):(de.e=W.e,de.d=W.d.slice()):(de.e=W.e,de.d=W.d?W.d.slice():W.d);return}if(be=typeof W,be==="number"){if(W===0){de.s=1/W<0?-1:1,de.e=0,de.d=[0];return}if(W<0?(W=-W,de.s=-1):de.s=1,W===~~W&&W<1e7){for(se=0,fe=W;fe>=10;fe/=10)se++;x?se>q.maxE?(de.e=NaN,de.d=null):se<q.minE?(de.e=0,de.d=[0]):(de.e=se,de.d=[W]):(de.e=se,de.d=[W]);return}else if(W*0!==0){W||(de.s=NaN),de.e=NaN,de.d=null;return}return Xe(de,W.toString())}else if(be!=="string")throw Error(h+W);return(fe=W.charCodeAt(0))===45?(W=W.slice(1),de.s=-1):(fe===43&&(W=W.slice(1)),de.s=1),E.test(W)?Xe(de,W):qe(de,W)}if(q.prototype=M,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=wl,q.clone=Ba,q.isDecimal=Ua,q.abs=ye,q.acos=Ue,q.acosh=Ze,q.add=ot,q.asin=je,q.asinh=Je,q.atan=ut,q.atanh=hr,q.atan2=tr,q.cbrt=xn,q.ceil=ai,q.clamp=ps,q.cos=xs,q.cosh=zi,q.div=tn,q.exp=c2,q.floor=bc,q.hypot=Dr,q.ln=li,q.log=Li,q.log10=Ut,q.log2=Ro,q.max=vc,q.min=p2,q.mod=wc,q.mul=Cc,q.pow=Pi,q.random=Cl,q.round=ui,q.sign=Bi,q.sin=Px,q.sinh=Bx,q.sqrt=Nn,q.sub=Va,q.sum=Nl,q.tan=dr,q.tanh=gn,q.trunc=_n,A===void 0&&(A={}),A&&A.defaults!==!0)for(B=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],L=0;L<B.length;)A.hasOwnProperty(P=B[L++])||(A[P]=this[P]);return q.config(A),q}function tn(A,L){return new this(A).div(L)}function c2(A){return new this(A).exp()}function bc(A){return J(A=new this(A),A.e+1,3)}function Dr(){var A,L,P=new this(0);for(x=!1,A=0;A<arguments.length;)if(L=new this(arguments[A++]),L.d)P.d&&(P=P.plus(L.times(L)));else{if(L.s)return x=!0,new this(1/0);P=L}return x=!0,P.sqrt()}function Ua(A){return A instanceof a||A&&A.toStringTag===b||!1}function li(A){return new this(A).ln()}function Li(A,L){return new this(A).log(L)}function Ro(A){return new this(A).log(2)}function Ut(A){return new this(A).log(10)}function vc(){return De(this,arguments,"lt")}function p2(){return De(this,arguments,"gt")}function wc(A,L){return new this(A).mod(L)}function Cc(A,L){return new this(A).mul(L)}function Pi(A,L){return new this(A).pow(L)}function Cl(A){var L,P,B,q,W=0,se=new this(1),fe=[];if(A===void 0?A=this.precision:X(A,1,t),B=Math.ceil(A/k),this.crypto)if(crypto.getRandomValues)for(L=crypto.getRandomValues(new Uint32Array(B));W<B;)q=L[W],q>=429e7?L[W]=crypto.getRandomValues(new Uint32Array(1))[0]:fe[W++]=q%1e7;else if(crypto.randomBytes){for(L=crypto.randomBytes(B*=4);W<B;)q=L[W]+(L[W+1]<<8)+(L[W+2]<<16)+((L[W+3]&127)<<24),q>=214e7?crypto.randomBytes(4).copy(L,W):(fe.push(q%1e7),W+=4);W=B/4}else throw Error(m);else for(;W<B;)fe[W++]=Math.random()*1e7|0;for(B=fe[--W],A%=k,B&&A&&(q=w(10,k-A),fe[W]=(B/q|0)*q);fe[W]===0;W--)fe.pop();if(W<0)P=0,fe=[0];else{for(P=-1;fe[0]===0;P-=k)fe.shift();for(B=1,q=fe[0];q>=10;q/=10)B++;B<k&&(P-=k-B)}return se.e=P,se.d=fe,se}function ui(A){return J(A=new this(A),A.e+1,this.rounding)}function Bi(A){return A=new this(A),A.d?A.d[0]?A.s:0*A.s:A.s||NaN}function Px(A){return new this(A).sin()}function Bx(A){return new this(A).sinh()}function Nn(A){return new this(A).sqrt()}function Va(A,L){return new this(A).sub(L)}function Nl(){var A=0,L=arguments,P=new this(L[A]);for(x=!1;P.s&&++A<L.length;)P=P.plus(L[A]);return x=!0,J(P,this.precision,this.rounding)}function dr(A){return new this(A).tan()}function gn(A){return new this(A).tanh()}function _n(A){return J(A=new this(A),A.e+1,1)}a=Ba(s),a.prototype.constructor=a,a.default=a.Decimal=a,o=new a(o),i=new a(i),typeof define=="function"&&define.amd?define(function(){return a}):typeof p4<"u"&&p4.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(M[Symbol.for("nodejs.util.inspect.custom")]=M.toString,M[Symbol.toStringTag]="Decimal"),p4.exports=a):(r||(r=typeof self<"u"&&self&&self.self==self?self:window),u=r.Decimal,a.noConflict=function(){return r.Decimal=u,a},r.Decimal=a)})(Zz)});var eL=vt((ny,Qz)=>{p();(function(r){"use strict";var e=function(u){return(Math.exp(u)+Math.exp(-u))*.5},t=function(u){return(Math.exp(u)-Math.exp(-u))*.5},n=function(u){var c=Math.PI/4;if(-c>u||u>c)return Math.cos(u)-1;var x=u*u;return x*(x*(x*(x*(x*(x*(x*(x/20922789888e3-11470745597729725e-27)+208767569878681e-23)-2755731922398589e-22)+248015873015873e-19)-.001388888888888889)+.041666666666666664)-.5)},o=function(u,c){var x=Math.abs(u),f=Math.abs(c);return x<3e3&&f<3e3?Math.sqrt(x*x+f*f):(x<f?(x=f,f=u/c):f=c/u,x*Math.sqrt(1+f*f))},i=function(){throw SyntaxError("Invalid Param")};function s(u,c){var x=Math.abs(u),f=Math.abs(c);return u===0?Math.log(f):c===0?Math.log(x):x<3e3&&f<3e3?Math.log(u*u+c*c)*.5:Math.log(u/Math.cos(Math.atan2(c,u)))}var a=function(u,c){var x={re:0,im:0};if(u==null)x.re=x.im=0;else if(c!==void 0)x.re=u,x.im=c;else switch(typeof u){case"object":if("im"in u&&"re"in u)x.re=u.re,x.im=u.im;else if("abs"in u&&"arg"in u){if(!Number.isFinite(u.abs)&&Number.isFinite(u.arg))return l.INFINITY;x.re=u.abs*Math.cos(u.arg),x.im=u.abs*Math.sin(u.arg)}else if("r"in u&&"phi"in u){if(!Number.isFinite(u.r)&&Number.isFinite(u.phi))return l.INFINITY;x.re=u.r*Math.cos(u.phi),x.im=u.r*Math.sin(u.phi)}else u.length===2?(x.re=u[0],x.im=u[1]):i();break;case"string":x.im=x.re=0;var f=u.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),h=1,g=0;f===null&&i();for(var m=0;m<f.length;m++){var b=f[m];b===" "||b==="	"||b===`
`||(b==="+"?h++:b==="-"?g++:b==="i"||b==="I"?(h+g===0&&i(),f[m+1]!==" "&&!isNaN(f[m+1])?(x.im+=parseFloat((g%2?"-":"")+f[m+1]),m++):x.im+=parseFloat((g%2?"-":"")+"1"),h=g=0):((h+g===0||isNaN(b))&&i(),f[m+1]==="i"||f[m+1]==="I"?(x.im+=parseFloat((g%2?"-":"")+b),m++):x.re+=parseFloat((g%2?"-":"")+b),h=g=0))}h+g>0&&i();break;case"number":x.im=0,x.re=u;break;default:i()}return isNaN(x.re)||isNaN(x.im),x};function l(u,c){if(!(this instanceof l))return new l(u,c);var x=a(u,c);this.re=x.re,this.im=x.im}l.prototype={re:0,im:0,sign:function(){var u=this.abs();return new l(this.re/u,this.im/u)},add:function(u,c){var x=new l(u,c);return this.isInfinite()&&x.isInfinite()?l.NAN:this.isInfinite()||x.isInfinite()?l.INFINITY:new l(this.re+x.re,this.im+x.im)},sub:function(u,c){var x=new l(u,c);return this.isInfinite()&&x.isInfinite()?l.NAN:this.isInfinite()||x.isInfinite()?l.INFINITY:new l(this.re-x.re,this.im-x.im)},mul:function(u,c){var x=new l(u,c);return this.isInfinite()&&x.isZero()||this.isZero()&&x.isInfinite()?l.NAN:this.isInfinite()||x.isInfinite()?l.INFINITY:x.im===0&&this.im===0?new l(this.re*x.re,0):new l(this.re*x.re-this.im*x.im,this.re*x.im+this.im*x.re)},div:function(u,c){var x=new l(u,c);if(this.isZero()&&x.isZero()||this.isInfinite()&&x.isInfinite())return l.NAN;if(this.isInfinite()||x.isZero())return l.INFINITY;if(this.isZero()||x.isInfinite())return l.ZERO;u=this.re,c=this.im;var f=x.re,h=x.im,g,m;return h===0?new l(u/f,c/f):Math.abs(f)<Math.abs(h)?(m=f/h,g=f*m+h,new l((u*m+c)/g,(c*m-u)/g)):(m=h/f,g=h*m+f,new l((u+c*m)/g,(c-u*m)/g))},pow:function(u,c){var x=new l(u,c);if(u=this.re,c=this.im,x.isZero())return l.ONE;if(x.im===0){if(c===0&&u>0)return new l(Math.pow(u,x.re),0);if(u===0)switch((x.re%4+4)%4){case 0:return new l(Math.pow(c,x.re),0);case 1:return new l(0,Math.pow(c,x.re));case 2:return new l(-Math.pow(c,x.re),0);case 3:return new l(0,-Math.pow(c,x.re))}}if(u===0&&c===0&&x.re>0&&x.im>=0)return l.ZERO;var f=Math.atan2(c,u),h=s(u,c);return u=Math.exp(x.re*h-x.im*f),c=x.im*h+x.re*f,new l(u*Math.cos(c),u*Math.sin(c))},sqrt:function(){var u=this.re,c=this.im,x=this.abs(),f,h;if(u>=0){if(c===0)return new l(Math.sqrt(u),0);f=.5*Math.sqrt(2*(x+u))}else f=Math.abs(c)/Math.sqrt(2*(x-u));return u<=0?h=.5*Math.sqrt(2*(x-u)):h=Math.abs(c)/Math.sqrt(2*(x+u)),new l(f,c<0?-h:h)},exp:function(){var u=Math.exp(this.re);return this.im,new l(u*Math.cos(this.im),u*Math.sin(this.im))},expm1:function(){var u=this.re,c=this.im;return new l(Math.expm1(u)*Math.cos(c)+n(c),Math.exp(u)*Math.sin(c))},log:function(){var u=this.re,c=this.im;return c===0&&u>0,new l(s(u,c),Math.atan2(c,u))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var u=this.re,c=this.im;return new l(Math.sin(u)*e(c),Math.cos(u)*t(c))},cos:function(){var u=this.re,c=this.im;return new l(Math.cos(u)*e(c),-Math.sin(u)*t(c))},tan:function(){var u=2*this.re,c=2*this.im,x=Math.cos(u)+e(c);return new l(Math.sin(u)/x,t(c)/x)},cot:function(){var u=2*this.re,c=2*this.im,x=Math.cos(u)-e(c);return new l(-Math.sin(u)/x,t(c)/x)},sec:function(){var u=this.re,c=this.im,x=.5*e(2*c)+.5*Math.cos(2*u);return new l(Math.cos(u)*e(c)/x,Math.sin(u)*t(c)/x)},csc:function(){var u=this.re,c=this.im,x=.5*e(2*c)-.5*Math.cos(2*u);return new l(Math.sin(u)*e(c)/x,-Math.cos(u)*t(c)/x)},asin:function(){var u=this.re,c=this.im,x=new l(c*c-u*u+1,-2*u*c).sqrt(),f=new l(x.re-c,x.im+u).log();return new l(f.im,-f.re)},acos:function(){var u=this.re,c=this.im,x=new l(c*c-u*u+1,-2*u*c).sqrt(),f=new l(x.re-c,x.im+u).log();return new l(Math.PI/2-f.im,f.re)},atan:function(){var u=this.re,c=this.im;if(u===0){if(c===1)return new l(0,1/0);if(c===-1)return new l(0,-1/0)}var x=u*u+(1-c)*(1-c),f=new l((1-c*c-u*u)/x,-2*u/x).log();return new l(-.5*f.im,.5*f.re)},acot:function(){var u=this.re,c=this.im;if(c===0)return new l(Math.atan2(1,u),0);var x=u*u+c*c;return x!==0?new l(u/x,-c/x).atan():new l(u!==0?u/0:0,c!==0?-c/0:0).atan()},asec:function(){var u=this.re,c=this.im;if(u===0&&c===0)return new l(0,1/0);var x=u*u+c*c;return x!==0?new l(u/x,-c/x).acos():new l(u!==0?u/0:0,c!==0?-c/0:0).acos()},acsc:function(){var u=this.re,c=this.im;if(u===0&&c===0)return new l(Math.PI/2,1/0);var x=u*u+c*c;return x!==0?new l(u/x,-c/x).asin():new l(u!==0?u/0:0,c!==0?-c/0:0).asin()},sinh:function(){var u=this.re,c=this.im;return new l(t(u)*Math.cos(c),e(u)*Math.sin(c))},cosh:function(){var u=this.re,c=this.im;return new l(e(u)*Math.cos(c),t(u)*Math.sin(c))},tanh:function(){var u=2*this.re,c=2*this.im,x=e(u)+Math.cos(c);return new l(t(u)/x,Math.sin(c)/x)},coth:function(){var u=2*this.re,c=2*this.im,x=e(u)-Math.cos(c);return new l(t(u)/x,-Math.sin(c)/x)},csch:function(){var u=this.re,c=this.im,x=Math.cos(2*c)-e(2*u);return new l(-2*t(u)*Math.cos(c)/x,2*e(u)*Math.sin(c)/x)},sech:function(){var u=this.re,c=this.im,x=Math.cos(2*c)+e(2*u);return new l(2*e(u)*Math.cos(c)/x,-2*t(u)*Math.sin(c)/x)},asinh:function(){var u=this.im;this.im=-this.re,this.re=u;var c=this.asin();return this.re=-this.im,this.im=u,u=c.re,c.re=-c.im,c.im=u,c},acosh:function(){var u=this.acos();if(u.im<=0){var c=u.re;u.re=-u.im,u.im=c}else{var c=u.im;u.im=-u.re,u.re=c}return u},atanh:function(){var u=this.re,c=this.im,x=u>1&&c===0,f=1-u,h=1+u,g=f*f+c*c,m=g!==0?new l((h*f-c*c)/g,(c*f+h*c)/g):new l(u!==-1?u/0:0,c!==0?c/0:0),b=m.re;return m.re=s(m.re,m.im)/2,m.im=Math.atan2(m.im,b)/2,x&&(m.im=-m.im),m},acoth:function(){var u=this.re,c=this.im;if(u===0&&c===0)return new l(0,Math.PI/2);var x=u*u+c*c;return x!==0?new l(u/x,-c/x).atanh():new l(u!==0?u/0:0,c!==0?-c/0:0).atanh()},acsch:function(){var u=this.re,c=this.im;if(c===0)return new l(u!==0?Math.log(u+Math.sqrt(u*u+1)):1/0,0);var x=u*u+c*c;return x!==0?new l(u/x,-c/x).asinh():new l(u!==0?u/0:0,c!==0?-c/0:0).asinh()},asech:function(){var u=this.re,c=this.im;if(this.isZero())return l.INFINITY;var x=u*u+c*c;return x!==0?new l(u/x,-c/x).acosh():new l(u!==0?u/0:0,c!==0?-c/0:0).acosh()},inverse:function(){if(this.isZero())return l.INFINITY;if(this.isInfinite())return l.ZERO;var u=this.re,c=this.im,x=u*u+c*c;return new l(u/x,-c/x)},conjugate:function(){return new l(this.re,-this.im)},neg:function(){return new l(-this.re,-this.im)},ceil:function(u){return u=Math.pow(10,u||0),new l(Math.ceil(this.re*u)/u,Math.ceil(this.im*u)/u)},floor:function(u){return u=Math.pow(10,u||0),new l(Math.floor(this.re*u)/u,Math.floor(this.im*u)/u)},round:function(u){return u=Math.pow(10,u||0),new l(Math.round(this.re*u)/u,Math.round(this.im*u)/u)},equals:function(u,c){var x=new l(u,c);return Math.abs(x.re-this.re)<=l.EPSILON&&Math.abs(x.im-this.im)<=l.EPSILON},clone:function(){return new l(this.re,this.im)},toString:function(){var u=this.re,c=this.im,x="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(u)<l.EPSILON&&(u=0),Math.abs(c)<l.EPSILON&&(c=0),c===0?x+u:(u!==0?(x+=u,x+=" ",c<0?(c=-c,x+="-"):x+="+",x+=" "):c<0&&(c=-c,x+="-"),c!==1&&(x+=c),x+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},l.ZERO=new l(0,0),l.ONE=new l(1,0),l.I=new l(0,1),l.PI=new l(Math.PI,0),l.E=new l(Math.E,0),l.INFINITY=new l(1/0,1/0),l.NAN=new l(NaN,NaN),l.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return l}):typeof ny=="object"?(Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Complex=l,Qz.exports=l):r.Complex=l})(ny)});var rL=vt((iy,tL)=>{p();(function(r){"use strict";var e=2e3,t={s:1,n:0,d:1};function n(m){function b(){var w=Error.apply(this,arguments);w.name=this.name=m,this.stack=w.stack,this.message=w.message}function v(){}return v.prototype=Error.prototype,b.prototype=new v,b}var o=g.DivisionByZero=n("DivisionByZero"),i=g.InvalidParameter=n("InvalidParameter");function s(m,b){return isNaN(m=parseInt(m,10))&&a(),m*b}function a(){throw new i}function l(m){for(var b={},v=m,w=2,C=4;C<=v;){for(;v%w===0;)v/=w,b[w]=(b[w]||0)+1;C+=1+2*w++}return v!==m?v>1&&(b[v]=(b[v]||0)+1):b[m]=(b[m]||0)+1,b}var u=function(m,b){var v=0,w=1,C=1,N=0,_=0,E=0,T=1,k=1,D=0,R=1,K=1,M=1,j=1e7,X;if(m!=null)if(b!==void 0)v=m,w=b,C=v*w;else switch(typeof m){case"object":{"d"in m&&"n"in m?(v=m.n,w=m.d,"s"in m&&(v*=m.s)):0 in m?(v=m[0],1 in m&&(w=m[1])):a(),C=v*w;break}case"number":{if(m<0&&(C=m,m=-m),m%1===0)v=m;else if(m>0){for(m>=1&&(k=Math.pow(10,Math.floor(1+Math.log(m)/Math.LN10)),m/=k);R<=j&&M<=j;)if(X=(D+K)/(R+M),m===X){R+M<=j?(v=D+K,w=R+M):M>R?(v=K,w=M):(v=D,w=R);break}else m>X?(D+=K,R+=M):(K+=D,M+=R),R>j?(v=K,w=M):(v=D,w=R);v*=k}else(isNaN(m)||isNaN(b))&&(w=v=NaN);break}case"string":if(R=m.match(/\d+|./g),R===null&&a(),R[D]==="-"?(C=-1,D++):R[D]==="+"&&D++,R.length===D+1?_=s(R[D++],C):R[D+1]==="."||R[D]==="."?(R[D]!=="."&&(N=s(R[D++],C)),D++,(D+1===R.length||R[D+1]==="("&&R[D+3]===")"||R[D+1]==="'"&&R[D+3]==="'")&&(_=s(R[D],C),T=Math.pow(10,R[D].length),D++),(R[D]==="("&&R[D+2]===")"||R[D]==="'"&&R[D+2]==="'")&&(E=s(R[D+1],C),k=Math.pow(10,R[D+1].length)-1,D+=3)):R[D+1]==="/"||R[D+1]===":"?(_=s(R[D],C),T=s(R[D+2],1),D+=3):R[D+3]==="/"&&R[D+1]===" "&&(N=s(R[D],C),_=s(R[D+2],C),T=s(R[D+4],1),D+=5),R.length<=D){w=T*k,C=v=E+w*N+k*_;break}default:a()}if(w===0)throw new o;t.s=C<0?-1:1,t.n=Math.abs(v),t.d=Math.abs(w)};function c(m,b,v){for(var w=1;b>0;m=m*m%v,b>>=1)b&1&&(w=w*m%v);return w}function x(m,b){for(;b%2===0;b/=2);for(;b%5===0;b/=5);if(b===1)return 0;for(var v=10%b,w=1;v!==1;w++)if(v=v*10%b,w>e)return 0;return w}function f(m,b,v){for(var w=1,C=c(10,v,b),N=0;N<300;N++){if(w===C)return N;w=w*10%b,C=C*10%b}return 0}function h(m,b){if(!m)return b;if(!b)return m;for(;;){if(m%=b,!m)return b;if(b%=m,!b)return m}}function g(m,b){if(!(this instanceof g))return new g(m,b);u(m,b),m=h(t.d,t.n),this.s=t.s,this.n=t.n/m,this.d=t.d/m}g.prototype={s:1,n:0,d:1,abs:function(){return new g(this.n,this.d)},neg:function(){return new g(-this.s*this.n,this.d)},add:function(m,b){return u(m,b),new g(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(m,b){return u(m,b),new g(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(m,b){return u(m,b),new g(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(m,b){return u(m,b),new g(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return new g(this)},mod:function(m,b){return isNaN(this.n)||isNaN(this.d)?new g(NaN):m===void 0?new g(this.s*this.n%this.d,1):(u(m,b),t.n===0&&this.d===0&&g(0,0),new g(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d))},gcd:function(m,b){return u(m,b),new g(h(t.n,this.n)*h(t.d,this.d),t.d*this.d)},lcm:function(m,b){return u(m,b),t.n===0&&this.n===0?new g:new g(t.n*this.n,h(t.n,this.n)*h(t.d,this.d))},ceil:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):new g(Math.ceil(m*this.s*this.n/this.d),m)},floor:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):new g(Math.floor(m*this.s*this.n/this.d),m)},round:function(m){return m=Math.pow(10,m||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):new g(Math.round(m*this.s*this.n/this.d),m)},inverse:function(){return new g(this.s*this.d,this.n)},pow:function(m,b){if(u(m,b),t.d===1)return t.s<0?new g(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):new g(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var v=l(this.n),w=l(this.d),C=1,N=1;for(var _ in v)if(_!=="1"){if(_==="0"){C=0;break}if(v[_]*=t.n,v[_]%t.d===0)v[_]/=t.d;else return null;C*=Math.pow(_,v[_])}for(var _ in w)if(_!=="1"){if(w[_]*=t.n,w[_]%t.d===0)w[_]/=t.d;else return null;N*=Math.pow(_,w[_])}return t.s<0?new g(N,C):new g(C,N)},equals:function(m,b){return u(m,b),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(m,b){u(m,b);var v=this.s*this.n*t.d-t.s*t.n*this.d;return(0<v)-(v<0)},simplify:function(m){if(isNaN(this.n)||isNaN(this.d))return this;var b=this.abs().toContinued();m=m||.001;function v(N){return N.length===1?new g(N[0]):v(N.slice(1)).inverse().add(N[0])}for(var w=0;w<b.length;w++){var C=v(b.slice(0,w+1));if(C.sub(this.abs()).abs().valueOf()<m)return C.mul(this.s)}return this},divisible:function(m,b){return u(m,b),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(m){var b,v="",w=this.n,C=this.d;return this.s<0&&(v+="-"),C===1?v+=w:(m&&(b=Math.floor(w/C))>0&&(v+=b,v+=" ",w%=C),v+=w,v+="/",v+=C),v},toLatex:function(m){var b,v="",w=this.n,C=this.d;return this.s<0&&(v+="-"),C===1?v+=w:(m&&(b=Math.floor(w/C))>0&&(v+=b,w%=C),v+="\\frac{",v+=w,v+="}{",v+=C,v+="}"),v},toContinued:function(){var m,b=this.n,v=this.d,w=[];if(isNaN(b)||isNaN(v))return w;do w.push(Math.floor(b/v)),m=b%v,b=v,v=m;while(b!==1);return w},toString:function(m){var b,v=this.n,w=this.d;if(isNaN(v)||isNaN(w))return"NaN";m=m||15;var C=x(v,w),N=f(v,w,C),_=this.s===-1?"-":"";if(_+=v/w|0,v%=w,v*=10,v&&(_+="."),C){for(var E=N;E--;)_+=v/w|0,v%=w,v*=10;_+="(";for(var E=C;E--;)_+=v/w|0,v%=w,v*=10;_+=")"}else for(var E=m;v&&E--;)_+=v/w|0,v%=w,v*=10;return _}},typeof define=="function"&&define.amd?define([],function(){return g}):typeof iy=="object"?(Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,tL.exports=g):r.Fraction=g})(iy)});var tP=vt(eP=>{p();(function(){"use strict";var r;function e(S){var $=0;return function(){return $<S.length?{done:!1,value:S[$++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,$,F){return S==Array.prototype||S==Object.prototype||(S[$]=F.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var $=0;$<S.length;++$){var F=S[$];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var o=n(this);function i(S,$){if($)e:{var F=o;S=S.split(".");for(var ne=0;ne<S.length-1;ne++){var Ce=S[ne];if(!(Ce in F))break e;F=F[Ce]}S=S[S.length-1],ne=F[S],$=$(ne),$!=ne&&$!=null&&t(F,S,{configurable:!0,writable:!0,value:$})}}i("Symbol",function(S){function $(ze){if(this instanceof $)throw new TypeError("Symbol is not a constructor");return new F(ne+(ze||"")+"_"+Ce++,ze)}function F(ze,Ie){this.g=ze,t(this,"description",{configurable:!0,writable:!0,value:Ie})}if(S)return S;F.prototype.toString=function(){return this.g};var ne="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ce=0;return $}),i("Symbol.iterator",function(S){if(S)return S;S=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),F=0;F<$.length;F++){var ne=o[$[F]];typeof ne=="function"&&typeof ne.prototype[S]!="function"&&t(ne.prototype,S,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return S});function s(S){return S={next:S},S[Symbol.iterator]=function(){return this},S}function a(S){var $=typeof Symbol<"u"&&Symbol.iterator&&S[Symbol.iterator];return $?$.call(S):{next:e(S)}}function l(S){if(!(S instanceof Array)){S=a(S);for(var $,F=[];!($=S.next()).done;)F.push($.value);S=F}return S}var u=typeof Object.create=="function"?Object.create:function(S){function $(){}return $.prototype=S,new $},c;if(typeof Object.setPrototypeOf=="function")c=Object.setPrototypeOf;else{var x;e:{var f={a:!0},h={};try{h.__proto__=f,x=h.a;break e}catch{}x=!1}c=x?function(S,$){if(S.__proto__=$,S.__proto__!==$)throw new TypeError(S+" is not extensible");return S}:null}var g=c;function m(S,$){if(S.prototype=u($.prototype),S.prototype.constructor=S,g)g(S,$);else for(var F in $)if(F!="prototype")if(Object.defineProperties){var ne=Object.getOwnPropertyDescriptor($,F);ne&&Object.defineProperty(S,F,ne)}else S[F]=$[F];S.ea=$.prototype}function b(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function v(S){if(S.l)throw new TypeError("Generator is already running");S.l=!0}b.prototype.o=function(S){this.h=S};function w(S,$){S.j={U:$,V:!0},S.g=S.m||S.s}b.prototype.return=function(S){this.j={return:S},this.g=this.s};function C(S,$,F){return S.g=F,{value:$}}function N(S){this.g=new b,this.h=S}function _(S,$){v(S.g);var F=S.g.i;return F?E(S,"return"in F?F.return:function(ne){return{value:ne,done:!0}},$,S.g.return):(S.g.return($),T(S))}function E(S,$,F,ne){try{var Ce=$.call(S.g.i,F);if(!(Ce instanceof Object))throw new TypeError("Iterator result "+Ce+" is not an object");if(!Ce.done)return S.g.l=!1,Ce;var ze=Ce.value}catch(Ie){return S.g.i=null,w(S.g,Ie),T(S)}return S.g.i=null,ne.call(S.g,ze),T(S)}function T(S){for(;S.g.g;)try{var $=S.h(S.g);if($)return S.g.l=!1,{value:$.value,done:!1}}catch(F){S.g.h=void 0,w(S.g,F)}if(S.g.l=!1,S.g.j){if($=S.g.j,S.g.j=null,$.V)throw $.U;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function k(S){this.next=function($){return v(S.g),S.g.i?$=E(S,S.g.i.next,$,S.g.o):(S.g.o($),$=T(S)),$},this.throw=function($){return v(S.g),S.g.i?$=E(S,S.g.i.throw,$,S.g.o):(w(S.g,$),$=T(S)),$},this.return=function($){return _(S,$)},this[Symbol.iterator]=function(){return this}}function D(S,$){return $=new k(new N($)),g&&S.prototype&&g($,S.prototype),$}function R(S,$){S instanceof String&&(S+="");var F=0,ne=!1,Ce={next:function(){if(!ne&&F<S.length){var ze=F++;return{value:$(ze,S[ze]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}var K=typeof Object.assign=="function"?Object.assign:function(S,$){for(var F=1;F<arguments.length;F++){var ne=arguments[F];if(ne)for(var Ce in ne)Object.prototype.hasOwnProperty.call(ne,Ce)&&(S[Ce]=ne[Ce])}return S};i("Object.assign",function(S){return S||K}),i("Promise",function(S){function $(Ie){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Pe=this.j();try{Ie(Pe.resolve,Pe.reject)}catch(Ye){Pe.reject(Ye)}}function F(){this.g=null}function ne(Ie){return Ie instanceof $?Ie:new $(function(Pe){Pe(Ie)})}if(S)return S;F.prototype.h=function(Ie){if(this.g==null){this.g=[];var Pe=this;this.i(function(){Pe.l()})}this.g.push(Ie)};var Ce=o.setTimeout;F.prototype.i=function(Ie){Ce(Ie,0)},F.prototype.l=function(){for(;this.g&&this.g.length;){var Ie=this.g;this.g=[];for(var Pe=0;Pe<Ie.length;++Pe){var Ye=Ie[Pe];Ie[Pe]=null;try{Ye()}catch(at){this.j(at)}}}this.g=null},F.prototype.j=function(Ie){this.i(function(){throw Ie})},$.prototype.j=function(){function Ie(at){return function(Et){Ye||(Ye=!0,at.call(Pe,Et))}}var Pe=this,Ye=!1;return{resolve:Ie(this.C),reject:Ie(this.l)}},$.prototype.C=function(Ie){if(Ie===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ie instanceof $)this.F(Ie);else{e:switch(typeof Ie){case"object":var Pe=Ie!=null;break e;case"function":Pe=!0;break e;default:Pe=!1}Pe?this.u(Ie):this.m(Ie)}},$.prototype.u=function(Ie){var Pe=void 0;try{Pe=Ie.then}catch(Ye){this.l(Ye);return}typeof Pe=="function"?this.G(Pe,Ie):this.m(Ie)},$.prototype.l=function(Ie){this.s(2,Ie)},$.prototype.m=function(Ie){this.s(1,Ie)},$.prototype.s=function(Ie,Pe){if(this.h!=0)throw Error("Cannot settle("+Ie+", "+Pe+"): Promise already settled in state"+this.h);this.h=Ie,this.i=Pe,this.h===2&&this.D(),this.A()},$.prototype.D=function(){var Ie=this;Ce(function(){if(Ie.B()){var Pe=o.console;typeof Pe<"u"&&Pe.error(Ie.i)}},1)},$.prototype.B=function(){if(this.o)return!1;var Ie=o.CustomEvent,Pe=o.Event,Ye=o.dispatchEvent;return typeof Ye>"u"?!0:(typeof Ie=="function"?Ie=new Ie("unhandledrejection",{cancelable:!0}):typeof Pe=="function"?Ie=new Pe("unhandledrejection",{cancelable:!0}):(Ie=o.document.createEvent("CustomEvent"),Ie.initCustomEvent("unhandledrejection",!1,!0,Ie)),Ie.promise=this,Ie.reason=this.i,Ye(Ie))},$.prototype.A=function(){if(this.g!=null){for(var Ie=0;Ie<this.g.length;++Ie)ze.h(this.g[Ie]);this.g=null}};var ze=new F;return $.prototype.F=function(Ie){var Pe=this.j();Ie.J(Pe.resolve,Pe.reject)},$.prototype.G=function(Ie,Pe){var Ye=this.j();try{Ie.call(Pe,Ye.resolve,Ye.reject)}catch(at){Ye.reject(at)}},$.prototype.then=function(Ie,Pe){function Ye(qt,$t){return typeof qt=="function"?function(mt){try{at(qt(mt))}catch(At){Et(At)}}:$t}var at,Et,Cr=new $(function(qt,$t){at=qt,Et=$t});return this.J(Ye(Ie,at),Ye(Pe,Et)),Cr},$.prototype.catch=function(Ie){return this.then(void 0,Ie)},$.prototype.J=function(Ie,Pe){function Ye(){switch(at.h){case 1:Ie(at.i);break;case 2:Pe(at.i);break;default:throw Error("Unexpected state: "+at.h)}}var at=this;this.g==null?ze.h(Ye):this.g.push(Ye),this.o=!0},$.resolve=ne,$.reject=function(Ie){return new $(function(Pe,Ye){Ye(Ie)})},$.race=function(Ie){return new $(function(Pe,Ye){for(var at=a(Ie),Et=at.next();!Et.done;Et=at.next())ne(Et.value).J(Pe,Ye)})},$.all=function(Ie){var Pe=a(Ie),Ye=Pe.next();return Ye.done?ne([]):new $(function(at,Et){function Cr(mt){return function(At){qt[mt]=At,$t--,$t==0&&at(qt)}}var qt=[],$t=0;do qt.push(void 0),$t++,ne(Ye.value).J(Cr(qt.length-1),Et),Ye=Pe.next();while(!Ye.done)})},$}),i("Object.is",function(S){return S||function($,F){return $===F?$!==0||1/$===1/F:$!==$&&F!==F}}),i("Array.prototype.includes",function(S){return S||function($,F){var ne=this;ne instanceof String&&(ne=String(ne));var Ce=ne.length;for(F=F||0,0>F&&(F=Math.max(F+Ce,0));F<Ce;F++){var ze=ne[F];if(ze===$||Object.is(ze,$))return!0}return!1}}),i("String.prototype.includes",function(S){return S||function($,F){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf($,F||0)!==-1}}),i("Array.prototype.keys",function(S){return S||function(){return R(this,function($){return $})}});var M=this||self;function j(S,$){S=S.split(".");var F=M;S[0]in F||typeof F.execScript>"u"||F.execScript("var "+S[0]);for(var ne;S.length&&(ne=S.shift());)S.length||$===void 0?F[ne]&&F[ne]!==Object.prototype[ne]?F=F[ne]:F=F[ne]={}:F[ne]=$}function X(S,$){return $=String.fromCharCode.apply(null,$),S==null?$:S+$}var Z,Y=typeof TextDecoder<"u",ce,Q=typeof TextEncoder<"u";function J(S){if(Q)S=(ce||(ce=new TextEncoder)).encode(S);else{var $=void 0;$=$===void 0?!1:$;for(var F=0,ne=new Uint8Array(3*S.length),Ce=0;Ce<S.length;Ce++){var ze=S.charCodeAt(Ce);if(128>ze)ne[F++]=ze;else{if(2048>ze)ne[F++]=ze>>6|192;else{if(55296<=ze&&57343>=ze){if(56319>=ze&&Ce<S.length){var Ie=S.charCodeAt(++Ce);if(56320<=Ie&&57343>=Ie){ze=1024*(ze-55296)+Ie-56320+65536,ne[F++]=ze>>18|240,ne[F++]=ze>>12&63|128,ne[F++]=ze>>6&63|128,ne[F++]=ze&63|128;continue}else Ce--}if($)throw Error("Found an unpaired surrogate");ze=65533}ne[F++]=ze>>12|224,ne[F++]=ze>>6&63|128}ne[F++]=ze&63|128}}S=ne.subarray(0,F)}return S}var te={},ae=null;function ge(S,$){$===void 0&&($=0),me(),$=te[$];for(var F=Array(Math.floor(S.length/3)),ne=$[64]||"",Ce=0,ze=0;Ce<S.length-2;Ce+=3){var Ie=S[Ce],Pe=S[Ce+1],Ye=S[Ce+2],at=$[Ie>>2];Ie=$[(Ie&3)<<4|Pe>>4],Pe=$[(Pe&15)<<2|Ye>>6],Ye=$[Ye&63],F[ze++]=at+Ie+Pe+Ye}switch(at=0,Ye=ne,S.length-Ce){case 2:at=S[Ce+1],Ye=$[(at&15)<<2]||ne;case 1:S=S[Ce],F[ze]=$[S>>2]+$[(S&3)<<4|at>>4]+Ye+ne}return F.join("")}function le(S){var $=S.length,F=3*$/4;F%3?F=Math.floor(F):"=.".indexOf(S[$-1])!=-1&&(F="=.".indexOf(S[$-2])!=-1?F-2:F-1);var ne=new Uint8Array(F),Ce=0;return xe(S,function(ze){ne[Ce++]=ze}),ne.subarray(0,Ce)}function xe(S,$){function F(Ye){for(;ne<S.length;){var at=S.charAt(ne++),Et=ae[at];if(Et!=null)return Et;if(!/^[\s\xa0]*$/.test(at))throw Error("Unknown base64 encoding at char: "+at)}return Ye}me();for(var ne=0;;){var Ce=F(-1),ze=F(0),Ie=F(64),Pe=F(64);if(Pe===64&&Ce===-1)break;$(Ce<<2|ze>>4),Ie!=64&&($(ze<<4&240|Ie>>2),Pe!=64&&$(Ie<<6&192|Pe))}}function me(){if(!ae){ae={};for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],F=0;5>F;F++){var ne=S.concat($[F].split(""));te[F]=ne;for(var Ce=0;Ce<ne.length;Ce++){var ze=ne[Ce];ae[ze]===void 0&&(ae[ze]=Ce)}}}}var ve=typeof Uint8Array.prototype.slice=="function",Te;function De(S,$,F){return $===F?Te||(Te=new Uint8Array(0)):ve?S.slice($,F):new Uint8Array(S.subarray($,F))}var Ae=0,_e=0;function Ke(S,$){$=$===void 0?{}:$,$=$.v===void 0?!1:$.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=$,S&&Xe(this,S)}function Xe(S,$){$=$.constructor===Uint8Array?$:$.constructor===ArrayBuffer?new Uint8Array($):$.constructor===Array?new Uint8Array($):$.constructor===String?le($):$ instanceof Uint8Array?new Uint8Array($.buffer,$.byteOffset,$.byteLength):new Uint8Array(0),S.h=$,S.l=0,S.j=S.h.length,S.g=S.l}Ke.prototype.reset=function(){this.g=this.l};function qe(S){for(var $=128,F=0,ne=0,Ce=0;4>Ce&&128<=$;Ce++)$=S.h[S.g++],F|=($&127)<<7*Ce;if(128<=$&&($=S.h[S.g++],F|=($&127)<<28,ne|=($&127)>>4),128<=$)for(Ce=0;5>Ce&&128<=$;Ce++)$=S.h[S.g++],ne|=($&127)<<7*Ce+3;if(128>$)return S=F>>>0,$=ne>>>0,(ne=$&2147483648)&&(S=~S+1>>>0,$=~$>>>0,S==0&&($=$+1>>>0)),S=4294967296*$+(S>>>0),ne?-S:S;S.m=!0}Ke.prototype.i=function(){var S=this.h,$=S[this.g],F=$&127;return 128>$?(this.g+=1,F):($=S[this.g+1],F|=($&127)<<7,128>$?(this.g+=2,F):($=S[this.g+2],F|=($&127)<<14,128>$?(this.g+=3,F):($=S[this.g+3],F|=($&127)<<21,128>$?(this.g+=4,F):($=S[this.g+4],F|=($&15)<<28,128>$?(this.g+=5,F>>>0):(this.g+=5,128<=S[this.g++]&&128<=S[this.g++]&&128<=S[this.g++]&&128<=S[this.g++]&&this.g++,F)))))},Ke.prototype.o=function(){var S=this.h[this.g],$=this.h[this.g+1],F=this.h[this.g+2],ne=this.h[this.g+3];return this.g+=4,F=(S<<0|$<<8|F<<16|ne<<24)>>>0,S=2*(F>>31)+1,$=F>>>23&255,F&=8388607,$==255?F?NaN:1/0*S:$==0?S*Math.pow(2,-149)*F:S*Math.pow(2,$-150)*(F+Math.pow(2,23))};var tt=[];function et(){this.g=new Uint8Array(64),this.h=0}et.prototype.push=function(S){if(!(this.h+1<this.g.length)){var $=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set($)}this.g[this.h++]=S},et.prototype.length=function(){return this.h},et.prototype.end=function(){var S=this.g,$=this.h;return this.h=0,De(S,0,$)};function rt(S,$){for(;127<$;)S.push($&127|128),$>>>=7;S.push($)}function oe(S){var $={},F=$.N===void 0?!1:$.N;this.o={v:$.v===void 0?!1:$.v},this.N=F,$=this.o,tt.length?(F=tt.pop(),$&&(F.v=$.v),S&&Xe(F,S),S=F):S=new Ke(S,$),this.g=S,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}oe.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function he(S){var $=S.g;if(($=$.g==$.j)||($=S.j)||($=S.g,$=$.m||0>$.g||$.g>$.j),$)return!1;S.m=S.g.g,$=S.g.i();var F=$&7;return F!=0&&F!=5&&F!=1&&F!=2&&F!=3&&F!=4?(S.j=!0,!1):(S.i=$,S.l=$>>>3,S.h=F,!0)}function Ne(S){switch(S.h){case 0:if(S.h!=0)Ne(S);else{for(S=S.g;S.h[S.g]&128;)S.g++;S.g++}break;case 1:S.h!=1?Ne(S):(S=S.g,S.g+=8);break;case 2:if(S.h!=2)Ne(S);else{var $=S.g.i();S=S.g,S.g+=$}break;case 5:S.h!=5?Ne(S):(S=S.g,S.g+=4);break;case 3:$=S.l;do{if(!he(S)){S.j=!0;break}if(S.h==4){S.l!=$&&(S.j=!0);break}Ne(S)}while(1);break;default:S.j=!0}}function ye(S,$,F){var ne=S.g.j,Ce=S.g.i(),ze=S.g.g+Ce;if(S.g.j=ze,F($,S),F=ze-S.g.g,F!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Ce+" bytes, instead read "+(Ce-F)+" bytes, either the data ended unexpectedly or the message misreported its own length");return S.g.g=ze,S.g.j=ne,$}function Ue(S){return S.g.o()}function Ze(S){var $=S.g.i();S=S.g;var F=S.g;S.g+=$,S=S.h;var ne;if(Y)(ne=Z)||(ne=Z=new TextDecoder("utf-8",{fatal:!1})),ne=ne.decode(S.subarray(F,F+$));else{$=F+$;for(var Ce=[],ze=null,Ie,Pe,Ye;F<$;)Ie=S[F++],128>Ie?Ce.push(Ie):224>Ie?F>=$?Ce.push(65533):(Pe=S[F++],194>Ie||(Pe&192)!==128?(F--,Ce.push(65533)):Ce.push((Ie&31)<<6|Pe&63)):240>Ie?F>=$-1?Ce.push(65533):(Pe=S[F++],(Pe&192)!==128||Ie===224&&160>Pe||Ie===237&&160<=Pe||((ne=S[F++])&192)!==128?(F--,Ce.push(65533)):Ce.push((Ie&15)<<12|(Pe&63)<<6|ne&63)):244>=Ie?F>=$-2?Ce.push(65533):(Pe=S[F++],(Pe&192)!==128||(Ie<<28)+(Pe-144)>>30!==0||((ne=S[F++])&192)!==128||((Ye=S[F++])&192)!==128?(F--,Ce.push(65533)):(Ie=(Ie&7)<<18|(Pe&63)<<12|(ne&63)<<6|Ye&63,Ie-=65536,Ce.push((Ie>>10&1023)+55296,(Ie&1023)+56320))):Ce.push(65533),8192<=Ce.length&&(ze=X(ze,Ce),Ce.length=0);ne=X(ze,Ce)}return ne}function ot(S,$,F){var ne=S.g.i();for(ne=S.g.g+ne;S.g.g<ne;)F.push($.call(S.g))}function je(S,$){S.h==2?ot(S,Ke.prototype.o,$):$.push(Ue(S))}function Je(){this.h=[],this.i=0,this.g=new et}function ut(S,$){$.length!==0&&(S.h.push($),S.i+=$.length)}function hr(S){var $=S.i+S.g.length();if($===0)return new Uint8Array(0);$=new Uint8Array($);for(var F=S.h,ne=F.length,Ce=0,ze=0;ze<ne;ze++){var Ie=F[ze];Ie.length!==0&&($.set(Ie,Ce),Ce+=Ie.length)}return F=S.g,ne=F.h,ne!==0&&($.set(F.g.subarray(0,ne),Ce),F.h=0),S.h=[$],$}function tr(S,$,F){if(F!=null){rt(S.g,8*$+5),S=S.g;var ne=F;ne=(F=0>ne?1:0)?-ne:ne,ne===0?0<1/ne?Ae=_e=0:(_e=0,Ae=2147483648):isNaN(ne)?(_e=0,Ae=2147483647):34028234663852886e22<ne?(_e=0,Ae=(F<<31|2139095040)>>>0):11754943508222875e-54>ne?(ne=Math.round(ne/Math.pow(2,-149)),_e=0,Ae=(F<<31|ne)>>>0):($=Math.floor(Math.log(ne)/Math.LN2),ne*=Math.pow(2,-$),ne=Math.round(8388608*ne),16777216<=ne&&++$,_e=0,Ae=(F<<31|$+127<<23|ne&8388607)>>>0),F=Ae,S.push(F>>>0&255),S.push(F>>>8&255),S.push(F>>>16&255),S.push(F>>>24&255)}}var xn=typeof Uint8Array=="function";function ai(S,$,F){if(S!=null)return typeof S=="object"?xn&&S instanceof Uint8Array?F(S):ps(S,$,F):$(S)}function ps(S,$,F){if(Array.isArray(S)){for(var ne=Array(S.length),Ce=0;Ce<S.length;Ce++)ne[Ce]=ai(S[Ce],$,F);return Array.isArray(S)&&S.W&&zi(ne),ne}ne={};for(Ce in S)ne[Ce]=ai(S[Ce],$,F);return ne}function wl(S){return typeof S=="number"?isFinite(S)?S:String(S):S}var xs={W:{value:!0,configurable:!0}};function zi(S){return Array.isArray(S)&&!Object.isFrozen(S)&&Object.defineProperties(S,xs),S}var Ba;function tn(S,$,F){var ne=Ba;Ba=null,S||(S=ne),ne=this.constructor.ca,S||(S=ne?[ne]:[]),this.j=ne?0:-1,this.m=this.g=null,this.h=S;e:{if(ne=this.h.length,S=ne-1,ne&&(ne=this.h[S],!(ne===null||typeof ne!="object"||Array.isArray(ne)||xn&&ne instanceof Uint8Array))){this.l=S-this.j,this.i=ne;break e}$!==void 0&&-1<$?(this.l=Math.max($,S+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(F)for($=0;$<F.length;$++)S=F[$],S<this.l?(S+=this.j,(ne=this.h[S])?zi(ne):this.h[S]=c2):(bc(this),(ne=this.i[S])?zi(ne):this.i[S]=c2)}var c2=Object.freeze(zi([]));function bc(S){var $=S.l+S.j;S.h[$]||(S.i=S.h[$]={})}function Dr(S,$,F){return $===-1?null:(F===void 0?0:F)||$>=S.l?S.i?S.i[$]:void 0:S.h[$+S.j]}function Ua(S,$){var F=F===void 0?!1:F,ne=Dr(S,$,F);return ne==null&&(ne=c2),ne===c2&&(ne=zi([]),Ut(S,$,ne,F)),ne}function li(S){var $=Ua(S,3);if(S.m||(S.m={}),!S.m[3]){for(var F=0;F<$.length;F++)$[F]=+$[F];S.m[3]=!0}return $}function Li(S,$,F){return S=Dr(S,$),S??F}function Ro(S,$,F){return S=Dr(S,$),S=S==null?S:+S,S??(F===void 0?0:F)}function Ut(S,$,F,ne){(ne===void 0?0:ne)||$>=S.l?(bc(S),S.i[$]=F):S.h[$+S.j]=F}function vc(S,$,F){if(F===-1)return null;if(S.g||(S.g={}),!S.g[F]){var ne=Dr(S,F,!1);ne&&(S.g[F]=new $(ne))}return S.g[F]}function p2(S,$){S.g||(S.g={});var F=S.g[1];if(!F){var ne=Ua(S,1);F=[];for(var Ce=0;Ce<ne.length;Ce++)F[Ce]=new $(ne[Ce]);S.g[1]=F}return F}function wc(S,$,F){var ne=ne===void 0?!1:ne;S.g||(S.g={});var Ce=F&&Pi(F,!1);S.g[$]=F,Ut(S,$,Ce,ne)}function Cc(S,$,F,ne){var Ce=p2(S,F);$=$||new F,S=Ua(S,1),ne!=null?(Ce.splice(ne,0,$),S.splice(ne,0,Pi($,!1))):(Ce.push($),S.push(Pi($,!1)))}tn.prototype.toJSON=function(){var S=Pi(this,!1);return ps(S,wl,ge)};function Pi(S,$){if(S.g)for(var F in S.g){var ne=S.g[F];if(Array.isArray(ne))for(var Ce=0;Ce<ne.length;Ce++)ne[Ce]&&Pi(ne[Ce],$);else ne&&Pi(ne,$)}return S.h}tn.prototype.toString=function(){return Pi(this,!1).toString()};function Cl(S,$){if(S=S.o){ut($,$.g.end());for(var F=0;F<S.length;F++)ut($,S[F])}}function ui(S,$){if($.h==4)return!1;var F=$.m;return Ne($),$.N||($=De($.g.h,F,$.g.g),(F=S.o)?F.push($):S.o=[$]),!0}function Bi(S){tn.call(this,S,-1,Bx)}m(Bi,tn),Bi.prototype.getRows=function(){return Dr(this,1)},Bi.prototype.getCols=function(){return Dr(this,2)},Bi.prototype.getPackedDataList=function(){return li(this)},Bi.prototype.getLayout=function(){return Li(this,4,0)};function Px(S,$){for(;he($);)switch($.i){case 8:var F=$.g.i();Ut(S,1,F);break;case 16:F=$.g.i(),Ut(S,2,F);break;case 29:case 26:je($,S.getPackedDataList());break;case 32:F=qe($.g),Ut(S,4,F);break;default:if(!ui(S,$))return S}return S}var Bx=[3];function Nn(S,$){var F=void 0;return new(F||(F=Promise))(function(ne,Ce){function ze(Ye){try{Pe($.next(Ye))}catch(at){Ce(at)}}function Ie(Ye){try{Pe($.throw(Ye))}catch(at){Ce(at)}}function Pe(Ye){Ye.done?ne(Ye.value):new F(function(at){at(Ye.value)}).then(ze,Ie)}Pe(($=$.apply(S,void 0)).next())})}function Va(S){tn.call(this,S)}m(Va,tn);function Nl(S,$){for(;he($);)switch($.i){case 8:var F=$.g.i();Ut(S,1,F);break;case 21:F=Ue($),Ut(S,2,F);break;case 26:F=Ze($),Ut(S,3,F);break;case 34:F=Ze($),Ut(S,4,F);break;default:if(!ui(S,$))return S}return S}function dr(S){tn.call(this,S,-1,gn)}m(dr,tn),dr.prototype.addClassification=function(S,$){return Cc(this,S,Va,$),this};var gn=[1];function _n(S){tn.call(this,S)}m(_n,tn);function A(S,$){for(;he($);)switch($.i){case 13:var F=Ue($);Ut(S,1,F);break;case 21:F=Ue($),Ut(S,2,F);break;case 29:F=Ue($),Ut(S,3,F);break;case 37:F=Ue($),Ut(S,4,F);break;case 45:F=Ue($),Ut(S,5,F);break;default:if(!ui(S,$))return S}return S}function L(S){tn.call(this,S,-1,B)}m(L,tn);function P(S){e:{var $=new L;for(S=new oe(S);he(S);)switch(S.i){case 10:var F=ye(S,new _n,A);Cc($,F,_n,void 0);break;default:if(!ui($,S))break e}}return $}var B=[1];function q(S){tn.call(this,S)}m(q,tn);function W(S){tn.call(this,S,-1,fe)}m(W,tn),W.prototype.getVertexType=function(){return Li(this,1,0)},W.prototype.getPrimitiveType=function(){return Li(this,2,0)},W.prototype.getVertexBufferList=function(){return li(this)},W.prototype.getIndexBufferList=function(){return Ua(this,4)};function se(S,$){for(;he($);)switch($.i){case 8:var F=qe($.g);Ut(S,1,F);break;case 16:F=qe($.g),Ut(S,2,F);break;case 29:case 26:je($,S.getVertexBufferList());break;case 32:case 34:F=$;var ne=S.getIndexBufferList();F.h==2?ot(F,Ke.prototype.i,ne):ne.push(F.g.i());break;default:if(!ui(S,$))return S}return S}var fe=[3,4];function be(S){tn.call(this,S)}m(be,tn),be.prototype.getMesh=function(){return vc(this,W,1)},be.prototype.getPoseTransformMatrix=function(){return vc(this,Bi,2)};function de(S){e:{var $=new be;for(S=new oe(S);he(S);)switch(S.i){case 10:var F=ye(S,new W,se);wc($,1,F);break;case 18:F=ye(S,new Bi,Px),wc($,2,F);break;default:if(!ui($,S))break e}}return $}function ke(S,$,F){if(F=S.createShader(F===0?S.VERTEX_SHADER:S.FRAGMENT_SHADER),S.shaderSource(F,$),S.compileShader(F),!S.getShaderParameter(F,S.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+S.getShaderInfoLog(F));return F}function Me(S){return p2(S,Va).map(function($){return{index:Li($,1,0),Y:Ro($,2),label:Dr($,3)!=null?Li($,3,""):void 0,displayName:Dr($,4)!=null?Li($,4,""):void 0}})}function Be(S){return{x:Ro(S,1),y:Ro(S,2),z:Ro(S,3),visibility:Dr(S,4)!=null?Ro(S,4):void 0}}function ft(S,$){this.h=S,this.g=$,this.l=0}function jt(S,$,F){return Tt(S,$),typeof S.g.canvas.transferToImageBitmap=="function"?Promise.resolve(S.g.canvas.transferToImageBitmap()):F?Promise.resolve(S.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(S.g.canvas):(S.i===void 0&&(S.i=document.createElement("canvas")),new Promise(function(ne){S.i.height=S.g.canvas.height,S.i.width=S.g.canvas.width,S.i.getContext("2d",{}).drawImage(S.g.canvas,0,0,S.g.canvas.width,S.g.canvas.height),ne(S.i)}))}function Tt(S,$){var F=S.g;if(S.m===void 0){var ne=ke(F,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Ce=ke(F,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),ze=F.createProgram();if(F.attachShader(ze,ne),F.attachShader(ze,Ce),F.linkProgram(ze),!F.getProgramParameter(ze,F.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+F.getProgramInfoLog(ze));ne=S.m=ze,F.useProgram(ne),Ce=F.getUniformLocation(ne,"sampler0"),S.j={I:F.getAttribLocation(ne,"aVertex"),H:F.getAttribLocation(ne,"aTex"),da:Ce},S.s=F.createBuffer(),F.bindBuffer(F.ARRAY_BUFFER,S.s),F.enableVertexAttribArray(S.j.I),F.vertexAttribPointer(S.j.I,2,F.FLOAT,!1,0,0),F.bufferData(F.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),F.STATIC_DRAW),F.bindBuffer(F.ARRAY_BUFFER,null),S.o=F.createBuffer(),F.bindBuffer(F.ARRAY_BUFFER,S.o),F.enableVertexAttribArray(S.j.H),F.vertexAttribPointer(S.j.H,2,F.FLOAT,!1,0,0),F.bufferData(F.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),F.STATIC_DRAW),F.bindBuffer(F.ARRAY_BUFFER,null),F.uniform1i(Ce,0)}ne=S.j,F.useProgram(S.m),F.canvas.width=$.width,F.canvas.height=$.height,F.viewport(0,0,$.width,$.height),F.activeTexture(F.TEXTURE0),S.h.bindTexture2d($.glName),F.enableVertexAttribArray(ne.I),F.bindBuffer(F.ARRAY_BUFFER,S.s),F.vertexAttribPointer(ne.I,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(ne.H),F.bindBuffer(F.ARRAY_BUFFER,S.o),F.vertexAttribPointer(ne.H,2,F.FLOAT,!1,0,0),F.bindFramebuffer(F.DRAW_FRAMEBUFFER?F.DRAW_FRAMEBUFFER:F.FRAMEBUFFER,null),F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT),F.colorMask(!0,!0,!0,!0),F.drawArrays(F.TRIANGLE_FAN,0,4),F.disableVertexAttribArray(ne.I),F.disableVertexAttribArray(ne.H),F.bindBuffer(F.ARRAY_BUFFER,null),S.h.bindTexture2d(0)}function Wn(S){this.g=S}var Wr=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Wo(S,$){return $+S}function wr(S,$){window[S]=$}function Rn(S){var $=document.createElement("script");return $.setAttribute("src",S),$.setAttribute("crossorigin","anonymous"),new Promise(function(F){$.addEventListener("load",function(){F()},!1),$.addEventListener("error",function(){F()},!1),document.body.appendChild($)})}function Nc(){return Nn(this,function S(){return D(S,function($){switch($.g){case 1:return $.m=2,C($,WebAssembly.instantiate(Wr),4);case 4:$.g=3,$.m=0;break;case 2:return $.m=0,$.j=null,$.return(!1);case 3:return $.return(!0)}})})}function qo(S){if(this.g=S,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=S&&S.locateFile||Wo,typeof window=="object")var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=$,S.options){$=a(Object.keys(S.options));for(var F=$.next();!F.done;F=$.next()){F=F.value;var ne=S.options[F].default;ne!==void 0&&(this.j[F]=typeof ne=="function"?ne():ne)}}}r=qo.prototype,r.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ux(S,$){return S.g.files===void 0?[]:typeof S.g.files=="function"?S.g.files($):S.g.files}function _c(S){return Nn(S,function $(){var F=this,ne,Ce,ze,Ie,Pe,Ye,at,Et,Cr,qt,$t;return D($,function(mt){switch(mt.g){case 1:return ne=F,F.R?(Ce=Ux(F,F.j),C(mt,Nc(),2)):mt.return();case 2:if(ze=mt.h,typeof window=="object")return wr("createMediapipeSolutionsWasm",{locateFile:F.locateFile}),wr("createMediapipeSolutionsPackedAssets",{locateFile:F.locateFile}),Ye=Ce.filter(function(At){return At.data!==void 0}),at=Ce.filter(function(At){return At.data===void 0}),Et=Promise.all(Ye.map(function(At){var Wt=po(ne,At.url);if(At.path!==void 0){var Zt=At.path;Wt=Wt.then(function(On){return ne.overrideFile(Zt,On),Promise.resolve(On)})}return Wt})),Cr=Promise.all(at.map(function(At){return At.simd===void 0||At.simd&&ze||!At.simd&&!ze?Rn(ne.locateFile(At.url,ne.S)):Promise.resolve()})).then(function(){return Nn(ne,function At(){var Wt,Zt,On=this;return D(At,function($r){if($r.g==1)return Wt=window.createMediapipeSolutionsWasm,Zt=window.createMediapipeSolutionsPackedAssets,C($r,Wt(Zt),2);On.h=$r.h,$r.g=0})})}),qt=function(){return Nn(ne,function At(){var Wt=this;return D(At,function(Zt){return Wt.g.graph&&Wt.g.graph.url?Zt=C(Zt,po(Wt,Wt.g.graph.url),0):(Zt.g=0,Zt=void 0),Zt})})}(),C(mt,Promise.all([Cr,Et,qt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Ie=Ce.filter(function(At){return At.simd===void 0||At.simd&&ze||!At.simd&&!ze}).map(function(At){return ne.locateFile(At.url,ne.S)}),importScripts.apply(null,l(Ie)),C(mt,createMediapipeSolutionsWasm(Module),6);case 6:F.h=mt.h,F.l=new OffscreenCanvas(1,1),F.h.canvas=F.l,Pe=F.h.GL.createContext(F.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),F.h.GL.makeContextCurrent(Pe),mt.g=4;break;case 7:if(F.l=document.createElement("canvas"),$t=F.l.getContext("webgl2",{}),!$t&&($t=F.l.getContext("webgl",{}),!$t))return alert("Failed to create WebGL canvas context when passing video frame."),mt.return();F.D=$t,F.h.canvas=F.l,F.h.createContext(F.l,!0,!0,{});case 4:F.i=new F.h.SolutionWasm,F.R=!1,mt.g=0}})})}function _l(S){return Nn(S,function $(){var F=this,ne,Ce,ze,Ie,Pe,Ye,at,Et;return D($,function(Cr){if(Cr.g==1){if(F.g.graph&&F.g.graph.url&&F.P===F.g.graph.url)return Cr.return();if(F.o=!0,!F.g.graph||!F.g.graph.url){Cr.g=2;return}return F.P=F.g.graph.url,C(Cr,po(F,F.g.graph.url),3)}for(Cr.g!=2&&(ne=Cr.h,F.i.loadGraph(ne)),Ce=a(Object.keys(F.B)),ze=Ce.next();!ze.done;ze=Ce.next())Ie=ze.value,F.i.overrideFile(Ie,F.B[Ie]);if(F.B={},F.g.listeners)for(Pe=a(F.g.listeners),Ye=Pe.next();!Ye.done;Ye=Pe.next())at=Ye.value,Gx(F,at);Et=F.j,F.j={},F.setOptions(Et),Cr.g=0})})}r.reset=function(){return Nn(this,function S(){var $=this;return D(S,function(F){$.i&&($.i.reset(),$.m={},$.s={}),F.g=0})})},r.setOptions=function(S,$){var F=this;if($=$||this.g.options){for(var ne=[],Ce=[],ze={},Ie=a(Object.keys(S)),Pe=Ie.next();!Pe.done;ze={K:ze.K,L:ze.L},Pe=Ie.next()){var Ye=Pe.value;Ye in this.j&&this.j[Ye]===S[Ye]||(this.j[Ye]=S[Ye],Pe=$[Ye],Pe!==void 0&&(Pe.onChange&&(ze.K=Pe.onChange,ze.L=S[Ye],ne.push(function(at){return function(){return Nn(F,function Et(){var Cr,qt=this;return D(Et,function($t){if($t.g==1)return C($t,at.K(at.L),2);Cr=$t.h,Cr===!0&&(qt.o=!0),$t.g=0})})}}(ze))),Pe.graphOptionXref&&(Ye={valueNumber:Pe.type===1?S[Ye]:0,valueBoolean:Pe.type===0?S[Ye]:!1,valueString:Pe.type===2?S[Ye]:""},Pe=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Pe.graphOptionXref),Ye),Ce.push(Pe))))}(ne.length!==0||Ce.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Ce),this.u=(this.u===void 0?[]:this.u).concat(ne))}};function Vx(S){return Nn(S,function $(){var F=this,ne,Ce,ze,Ie,Pe,Ye,at;return D($,function(Et){switch(Et.g){case 1:if(!F.o)return Et.return();if(!F.u){Et.g=2;break}ne=a(F.u),Ce=ne.next();case 3:if(Ce.done){Et.g=5;break}return ze=Ce.value,C(Et,ze(),4);case 4:Ce=ne.next(),Et.g=3;break;case 5:F.u=void 0;case 2:if(F.A){for(Ie=new F.h.GraphOptionChangeRequestList,Pe=a(F.A),Ye=Pe.next();!Ye.done;Ye=Pe.next())at=Ye.value,Ie.push_back(at);F.i.changeOptions(Ie),Ie.delete(),F.A=void 0}F.o=!1,Et.g=0}})})}r.initialize=function(){return Nn(this,function S(){var $=this;return D(S,function(F){return F.g==1?C(F,_c($),2):F.g!=3?C(F,_l($),3):C(F,Vx($),0)})})};function po(S,$){return Nn(S,function F(){var ne=this,Ce,ze;return D(F,function(Ie){return $ in ne.F?Ie.return(ne.F[$]):(Ce=ne.locateFile($,""),ze=fetch(Ce).then(function(Pe){return Pe.arrayBuffer()}),ne.F[$]=ze,Ie.return(ze))})})}r.overrideFile=function(S,$){this.i?this.i.overrideFile(S,$):this.B[S]=$},r.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},r.send=function(S,$){return Nn(this,function F(){var ne=this,Ce,ze,Ie,Pe,Ye,at,Et,Cr,qt;return D(F,function($t){switch($t.g){case 1:return ne.g.inputs?(Ce=1e3*($??performance.now()),C($t,ne.C,2)):$t.return();case 2:return C($t,ne.initialize(),3);case 3:for(ze=new ne.h.PacketDataList,Ie=a(Object.keys(S)),Pe=Ie.next();!Pe.done;Pe=Ie.next())if(Ye=Pe.value,at=ne.g.inputs[Ye]){e:{var mt=ne,At=S[Ye];switch(at.type){case"video":var Wt=mt.m[at.stream];if(Wt||(Wt=new ft(mt.h,mt.D),mt.m[at.stream]=Wt),mt=Wt,mt.l===0&&(mt.l=mt.h.createTexture()),typeof HTMLVideoElement<"u"&&At instanceof HTMLVideoElement){var Zt=At.videoWidth;Wt=At.videoHeight}else typeof HTMLImageElement<"u"&&At instanceof HTMLImageElement?(Zt=At.naturalWidth,Wt=At.naturalHeight):(Zt=At.width,Wt=At.height);Wt={glName:mt.l,width:Zt,height:Wt},Zt=mt.g,Zt.canvas.width=Wt.width,Zt.canvas.height=Wt.height,Zt.activeTexture(Zt.TEXTURE0),mt.h.bindTexture2d(mt.l),Zt.texImage2D(Zt.TEXTURE_2D,0,Zt.RGBA,Zt.RGBA,Zt.UNSIGNED_BYTE,At),mt.h.bindTexture2d(0),mt=Wt;break e;case"detections":for(Wt=mt.m[at.stream],Wt||(Wt=new Wn(mt.h),mt.m[at.stream]=Wt),mt=Wt,mt.data||(mt.data=new mt.g.DetectionListData),mt.data.reset(At.length),Wt=0;Wt<At.length;++Wt){Zt=At[Wt];var On=mt.data,$r=On.setBoundingBox,xo=Wt,fn=Zt.T,Lt=new q;Ut(Lt,1,fn.Z),Ut(Lt,2,fn.$),Ut(Lt,3,fn.height),Ut(Lt,4,fn.width),Ut(Lt,5,fn.rotation),Ut(Lt,6,fn.X);var rr=fn=new Je;tr(rr,1,Dr(Lt,1)),tr(rr,2,Dr(Lt,2)),tr(rr,3,Dr(Lt,3)),tr(rr,4,Dr(Lt,4)),tr(rr,5,Dr(Lt,5));var or=Dr(Lt,6);if(or!=null&&or!=null){rt(rr.g,48);var Ht=rr.g,nr=or;or=0>nr,nr=Math.abs(nr);var ir=nr>>>0;for(nr=Math.floor((nr-ir)/4294967296),nr>>>=0,or&&(nr=~nr>>>0,ir=(~ir>>>0)+1,4294967295<ir&&(ir=0,nr++,4294967295<nr&&(nr=0))),Ae=ir,_e=nr,or=Ae,ir=_e;0<ir||127<or;)Ht.push(or&127|128),or=(or>>>7|ir<<25)>>>0,ir>>>=7;Ht.push(or)}if(Cl(Lt,rr),fn=hr(fn),$r.call(On,xo,fn),Zt.O)for(On=0;On<Zt.O.length;++On)Lt=Zt.O[On],rr=!!Lt.visibility,$r=mt.data,xo=$r.addNormalizedLandmark,fn=Wt,Lt=Object.assign(Object.assign({},Lt),{visibility:rr?Lt.visibility:0}),rr=new _n,Ut(rr,1,Lt.x),Ut(rr,2,Lt.y),Ut(rr,3,Lt.z),Lt.visibility&&Ut(rr,4,Lt.visibility),Ht=Lt=new Je,tr(Ht,1,Dr(rr,1)),tr(Ht,2,Dr(rr,2)),tr(Ht,3,Dr(rr,3)),tr(Ht,4,Dr(rr,4)),tr(Ht,5,Dr(rr,5)),Cl(rr,Ht),Lt=hr(Lt),xo.call($r,fn,Lt);if(Zt.M)for(On=0;On<Zt.M.length;++On){if($r=mt.data,xo=$r.addClassification,fn=Wt,Lt=Zt.M[On],rr=new Va,Ut(rr,2,Lt.Y),Lt.index&&Ut(rr,1,Lt.index),Lt.label&&Ut(rr,3,Lt.label),Lt.displayName&&Ut(rr,4,Lt.displayName),Ht=Lt=new Je,ir=Dr(rr,1),ir!=null&&ir!=null)if(rt(Ht.g,8),or=Ht.g,0<=ir)rt(or,ir);else{for(nr=0;9>nr;nr++)or.push(ir&127|128),ir>>=7;or.push(1)}tr(Ht,2,Dr(rr,2)),or=Dr(rr,3),or!=null&&(or=J(or),rt(Ht.g,26),rt(Ht.g,or.length),ut(Ht,Ht.g.end()),ut(Ht,or)),or=Dr(rr,4),or!=null&&(or=J(or),rt(Ht.g,34),rt(Ht.g,or.length),ut(Ht,Ht.g.end()),ut(Ht,or)),Cl(rr,Ht),Lt=hr(Lt),xo.call($r,fn,Lt)}}mt=mt.data;break e;default:mt={}}}switch(Et=mt,Cr=at.stream,at.type){case"video":ze.pushTexture2d(Object.assign(Object.assign({},Et),{stream:Cr,timestamp:Ce}));break;case"detections":qt=Et,qt.stream=Cr,qt.timestamp=Ce,ze.pushDetectionList(qt);break;default:throw Error("Unknown input config type: '"+at.type+"'")}}return ne.i.send(ze),C($t,ne.C,4);case 4:ze.delete(),$t.g=0}})})};function Sc(S,$,F){return Nn(S,function ne(){var Ce,ze,Ie,Pe,Ye,at,Et=this,Cr,qt,$t,mt,At,Wt,Zt,On;return D(ne,function($r){switch($r.g){case 1:if(!F)return $r.return($);for(Ce={},ze=0,Ie=a(Object.keys(F)),Pe=Ie.next();!Pe.done;Pe=Ie.next())Ye=Pe.value,at=F[Ye],typeof at!="string"&&at.type==="texture"&&$[at.stream]!==void 0&&++ze;1<ze&&(Et.G=!1),Cr=a(Object.keys(F)),Pe=Cr.next();case 2:if(Pe.done){$r.g=4;break}if(qt=Pe.value,$t=F[qt],typeof $t=="string")return Zt=Ce,On=qt,C($r,Tc(Et,qt,$[$t]),14);if(mt=$[$t.stream],$t.type==="detection_list"){if(mt){for(var xo=mt.getRectList(),fn=mt.getLandmarksList(),Lt=mt.getClassificationsList(),rr=[],or=0;or<xo.size();++or){var Ht=xo.get(or);e:{var nr=new q;for(Ht=new oe(Ht);he(Ht);)switch(Ht.i){case 13:var ir=Ue(Ht);Ut(nr,1,ir);break;case 21:ir=Ue(Ht),Ut(nr,2,ir);break;case 29:ir=Ue(Ht),Ut(nr,3,ir);break;case 37:ir=Ue(Ht),Ut(nr,4,ir);break;case 45:ir=Ue(Ht),Ut(nr,5,ir);break;case 48:ir=qe(Ht.g),Ut(nr,6,ir);break;default:if(!ui(nr,Ht))break e}}nr={Z:Ro(nr,1),$:Ro(nr,2),height:Ro(nr,3),width:Ro(nr,4),rotation:Ro(nr,5,0),X:Li(nr,6,0)},Ht=p2(P(fn.get(or)),_n).map(Be);var Ic=Lt.get(or);e:for(ir=new dr,Ic=new oe(Ic);he(Ic);)switch(Ic.i){case 10:ir.addClassification(ye(Ic,new Va,Nl));break;default:if(!ui(ir,Ic))break e}nr={T:nr,O:Ht,M:Me(ir)},rr.push(nr)}xo=rr}else xo=[];Ce[qt]=xo,$r.g=7;break}if($t.type==="proto_list"){if(mt){for(xo=Array(mt.size()),fn=0;fn<mt.size();fn++)xo[fn]=mt.get(fn);mt.delete()}else xo=[];Ce[qt]=xo,$r.g=7;break}if(mt===void 0){$r.g=3;break}if($t.type==="float_list"){Ce[qt]=mt,$r.g=7;break}if($t.type==="proto"){Ce[qt]=mt,$r.g=7;break}if($t.type!=="texture")throw Error("Unknown output config type: '"+$t.type+"'");return At=Et.s[qt],At||(At=new ft(Et.h,Et.D),Et.s[qt]=At),C($r,jt(At,mt,Et.G),13);case 13:Wt=$r.h,Ce[qt]=Wt;case 7:$t.transform&&Ce[qt]&&(Ce[qt]=$t.transform(Ce[qt])),$r.g=3;break;case 14:Zt[On]=$r.h;case 3:Pe=Cr.next(),$r.g=2;break;case 4:return $r.return(Ce)}})})}function Tc(S,$,F){return Nn(S,function ne(){var Ce=this,ze;return D(ne,function(Ie){return typeof F=="number"||F instanceof Uint8Array||F instanceof Ce.h.Uint8BlobList?Ie.return(F):F instanceof Ce.h.Texture2dDataOut?(ze=Ce.s[$],ze||(ze=new ft(Ce.h,Ce.D),Ce.s[$]=ze),Ie.return(jt(ze,F,Ce.G))):Ie.return(void 0)})})}function Gx(S,$){for(var F=$.name||"$",ne=[].concat(l($.wants)),Ce=new S.h.StringList,ze=a($.wants),Ie=ze.next();!Ie.done;Ie=ze.next())Ce.push_back(Ie.value);ze=S.h.PacketListener.implement({onResults:function(Pe){for(var Ye={},at=0;at<$.wants.length;++at)Ye[ne[at]]=Pe.get(at);var Et=S.listeners[F];Et&&(S.C=Sc(S,Ye,$.outs).then(function(Cr){Cr=Et(Cr);for(var qt=0;qt<$.wants.length;++qt){var $t=Ye[ne[qt]];typeof $t=="object"&&$t.hasOwnProperty&&$t.hasOwnProperty("delete")&&$t.delete()}Cr&&(S.C=Cr)}))}}),S.i.attachMultiListener(Ce,ze),Ce.delete()}r.onResults=function(S,$){this.listeners[$||"$"]=S},j("Solution",qo),j("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function $n(S){S=de(S);var $=S.getMesh();if(!$)return S;var F=new Float32Array($.getVertexBufferList());$.getVertexBufferList=function(){return F};var ne=new Uint32Array($.getIndexBufferList());return $.getIndexBufferList=function(){return ne},S}var Rr={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(S){return S.map($n)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(S){return S.map(function($){return p2(P($),_n).map(Be)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Bb=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Ub=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Vb=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Gb=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Wb=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],qb=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],BP=[].concat(l(Bb),l(Ub),l(Vb),l(Gb),l(Wb),l(qb));function Hb(S){S=S||{},S=Object.assign(Object.assign({},Rr),S),this.g=new qo(S)}r=Hb.prototype,r.close=function(){return this.g.close(),Promise.resolve()},r.onResults=function(S){this.g.onResults(S)},r.initialize=function(){return Nn(this,function S(){var $=this;return D(S,function(F){return C(F,$.g.initialize(),0)})})},r.reset=function(){this.g.reset()},r.send=function(S){return Nn(this,function $(){var F=this;return D($,function(ne){return C(ne,F.g.send(S),0)})})},r.setOptions=function(S){this.g.setOptions(S)},j("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),j("FaceMesh",Hb),j("FACEMESH_LIPS",Bb),j("FACEMESH_LEFT_EYE",Ub),j("FACEMESH_LEFT_EYEBROW",Vb),j("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),j("FACEMESH_RIGHT_EYE",Gb),j("FACEMESH_RIGHT_EYEBROW",Wb),j("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),j("FACEMESH_FACE_OVAL",qb),j("FACEMESH_CONTOURS",BP),j("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),j("matrixDataToMatrix",function(S){for(var $=S.getCols(),F=S.getRows(),ne=S.getPackedDataList(),Ce=[],ze=0;ze<F;ze++)Ce.push(Array($));for(ze=0;ze<F;ze++)for(var Ie=0;Ie<$;Ie++){var Pe=S.getLayout()===1?ze*$+Ie:Ie*F+ze;Ce[ze][Ie]=ne[Pe]}return Ce}),j("VERSION","0.4.1633559619")}).call(eP)});p();var Uqt=Ho(pv());p();p();var xv=String.raw;AFRAME.registerSystem("scene-overlay",{init:function(){let r=document.createElement("style");r.innerHTML=xv`
      #scene-overlay {
        position: fixed;
        pointer-events: none;
        overflow: hidden;
      }
    `,document.head.appendChild(r),this.root=document.createElement("div"),this.root.id="scene-overlay",this.shadowRoot=this.root.attachShadow({mode:"open"});let e=document.createElement("style");e.innerHTML=xv`
      * {
        pointer-events: auto;
      }
    `,this.shadowRoot.appendChild(e);let t=document.createElement("link");t.href=new URL("./room.css",import.meta.url),t.rel="stylesheet",this.shadowRoot.appendChild(t),document.body.appendChild(this.root),this.canvas=this.el.sceneEl.canvas},tick:function(){this.resize()},resize:function(){this.root.style.width=this.canvas.clientWidth+"px",this.root.style.height=this.canvas.clientHeight+"px"}});p();var L4=new THREE.Vector2,Wh=10,Ec=256;AFRAME.registerSystem("preview-self",{init:function(){this.enabled=!1;let r=document.createElement("canvas");r.width=Ec,r.height=Ec;let e=r.getContext("2d"),t=new THREE.PerspectiveCamera(10,1,.1,1e3);t.layers.set(Wh),t.position.z=-2,t.rotation.y=Math.PI,t.updateMatrix();let n=APP.scene.systems["hubs-systems"].cameraSystem,o=n.avatarPOV,i=n.avatarRig.querySelector(".model");i.addEventListener("model-loaded",()=>{i.object3D.traverse(x=>x.layers.enable(Wh)),this.el.sceneEl.object3D.traverse(x=>x.isLight&&x.layers.enable(Wh)),document.querySelector("[skybox]").object3D.traverse(x=>x.layers.enable(Wh))});let s=new THREE.WebGLRenderTarget(1024,1024,{format:THREE.RGBAFormat}),a=document.createElement("a-entity");a.setObject3D("faceCam",t),o.appendChild(a);let l=this.el.sceneEl.object3D,u=this.el.sceneEl.renderer;Object.assign(this,{previewEl:a,camera:t,renderTarget:s,canvas:r,context:e,scene:l,renderer:u,cameraSystem:n}),this.updateRenderTargetNextTick=!1,setInterval(()=>{this.updateRenderTargetNextTick=!0},1e3/25)},tick:function(){this.enabled&&this.updateRenderTargetNextTick&&(this.renderPreview(),this.updateRenderTargetNextTick=!1)},renderPreview:function(){let r=this.scene.onAfterRender;delete this.scene.onAfterRender,this.showPlayerHead(),this.renderer.getSize(L4),this.renderer.setSize(Ec,Ec,!1),this.renderer.render(this.scene,this.camera),this.context.drawImage(this.renderer.domElement,0,0,Ec,Ec),this.scene.onAfterRender=r,this.renderer.setSize(L4.x,L4.y,!1),this.hidePlayerHead()},showPlayerHead(){let r=APP.scene.systems["camera-tools"].playerHead;r&&(r.visible=!0,r.scale.setScalar(1),r.updateMatrices(!0,!0),r.updateMatrixWorld(!0,!0))},hidePlayerHead(){let r=APP.scene.systems["camera-tools"].playerHead,e=this.cameraSystem.inspectable?.el===this.cameraSystem.avatarRig;r&&!e&&(r.visible=!1,r.scale.setScalar(1e-8),r.updateMatrices(!0,!0),r.updateMatrixWorld(!0,!0))}});p();p();var Ga=["browDownLeft","cheekSquintLeft","browOuterUpLeft","browDownRight","browOuterUpRight","cheekSquintRight","browInnerUp","eyeBlinkLeft","eyeBlinkRight","eyeSquintLeft","eyeSquintRight","eyeWideLeft","eyeWideRight","eyeLookDownLeft","eyeLookDownRight","eyeLookInLeft","eyeLookInRight","eyeLookOutLeft","eyeLookOutRight","eyeLookUpLeft","eyeLookUpRight","jawOpen","jawLeft","jawRight","mouthClose","mouthFunnel","mouthPucker","mouthRollLower","mouthRollUpper","mouthShrugLower","mouthShrugUpper","noseSneerLeft","noseSneerRight","mouthLeft","mouthRight","mouthSmileLeft","mouthSmileRight","mouthFrownLeft","mouthFrownRight","mouthDimpleLeft","mouthDimpleRight","mouthStretchLeft","mouthStretchRight","mouthPressLeft","mouthPressRight","mouthLowerDownLeft","mouthLowerDownRight","mouthUpperUpLeft","mouthUpperUpRight"],qh=Ga.filter(r=>!r.includes("eyeLook")),fv=Object.fromEntries(Ga.map(r=>[r,r.replace(/Left|Right/,"")])),eB=Array.from(new Set(qh.map(r=>fv[r])));Object.assign(window,{blendShapeNames:Ga,geometryBlendShapes:qh,geometryBlendShapesDesymmetrized:eB,desymmetrizeMap:fv});function mv(r){try{let e=r.querySelector(".Wolf3D_Head").object3DMap.skinnedmesh,t={};r.object3D.traverse(a=>{a.isBone&&(t[a.name]=a)});let o=Ga.filter(a=>!a.includes("eyeLook")).every(a=>a in e.morphTargetDictionary),s=["Head","RightEye","LeftEye"].every(a=>a in t);return o&&s}catch{return!1}}var Hh=Object.fromEntries(Ga.map(r=>[r,0]));function tB(r,e){let t=0;for(let n=0;n<qh.length;++n){let o=qh[n];t-=Math.abs((r[o]??0)-(e[o]??0))}return t}function rB(r){let e=Math.max(...r),t=r.map(o=>Math.exp(o-e)),n=t.reduce((o,i)=>o+i);return t.map(o=>o/n)}function hv(r,e){let t=[];for(let n=0;n<e.length;++n)t[n]=tB(r,e[n]);return rB(t)}function dv(r,e){let[t,n,o]=e,i=(r.mouthSmileLeft+r.mouthSmileRight)/2,s=(r.mouthFrownLeft+r.mouthFrownRight)/2,a=i-s;a>n?a=n+a*(o-n):a=n+a*(n-t),a>0?(i=a,s=0):(s=-a,i=0),r.mouthSmileLeft=r.mouthSmileRight=i,r.mouthFrownLeft=r.mouthFrownRight=s}var gv={browDownLeft:.14292000404803207,cheekSquintLeft:.0837113283056486,browOuterUpLeft:.0005960479803265726,browDownRight:.15186765250916626,browOuterUpRight:.002649308265391297,cheekSquintRight:.07983533252216857,browInnerUp:.07195527641530391,eyeBlinkLeft:.008286092891455772,eyeBlinkRight:.008060047906610742,eyeSquintLeft:.1775005578601865,eyeSquintRight:.1758928216591102,eyeWideLeft:.0384276696458762,eyeWideRight:.03996200098237262,eyeLookDownLeft:.004033706223955267,eyeLookDownRight:.003948707450104452,eyeLookInLeft:.04418030056143658,eyeLookInRight:.0820209826341746,eyeLookOutLeft:.0030659964710422908,eyeLookOutRight:.003006878913860351,eyeLookUpLeft:.028767204000691424,eyeLookUpRight:.029090857808409726,jawOpen:.08025557589225471,jawLeft:.013878543688068241,jawRight:.014181348080548259,mouthClose:.09547342805544627,mouthFunnel:.07242722825074889,mouthPucker:.13948846605237805,mouthRollLower:.14252952604226954,mouthRollUpper:.04314594284526849,mouthShrugLower:.16378268421715397,mouthShrugUpper:.12618127587666747,noseSneerLeft:.029718078853023317,noseSneerRight:.02994943281898618,mouthLeft:.01104563390993006,mouthRight:.006609823864141941,mouthSmileLeft:0,mouthSmileRight:0,mouthFrownLeft:.1089579894213551,mouthFrownRight:.1089579894213551,mouthDimpleLeft:.0448081477219363,mouthDimpleRight:.03845306409022615,mouthStretchLeft:.1182972417373446,mouthStretchRight:.11651151087827287,mouthPressLeft:.08134576392367292,mouthPressRight:.08500022705777602,mouthLowerDownLeft:.10099839816662173,mouthLowerDownRight:.1009940570094999,mouthUpperUpLeft:.032025989467466216,mouthUpperUpRight:.028987820494759644},yv={browDownLeft:.31193478302642086,cheekSquintLeft:.4966666820666009,browOuterUpLeft:.0014718952547100057,browDownRight:.3132465963211932,browOuterUpRight:.001628139684792446,cheekSquintRight:.4997495173273402,browInnerUp:.06391730202476087,eyeBlinkLeft:.041254810113567304,eyeBlinkRight:.04279744297706484,eyeSquintLeft:.3118102078435434,eyeSquintRight:.32421436803236053,eyeWideLeft:.008044380043260056,eyeWideRight:.007942548556781014,eyeLookDownLeft:.08512978974701954,eyeLookDownRight:.08464192120601105,eyeLookInLeft:.017978726424517862,eyeLookInRight:.11517774138923369,eyeLookOutLeft:.009253886939266922,eyeLookOutRight:.0032137041453680886,eyeLookUpLeft:.007242051360121068,eyeLookUpRight:.007331904871664228,jawOpen:.11543286710534544,jawLeft:.017124684270103593,jawRight:.008602246133473018,mouthClose:.02589906639806163,mouthFunnel:.05654594090742553,mouthPucker:.0179783853019965,mouthRollLower:.060011151188915854,mouthRollUpper:.02699725400723775,mouthShrugLower:.02739969540716398,mouthShrugUpper:.20718354097814676,noseSneerLeft:.15364747392460607,noseSneerRight:.16272873919473266,mouthLeft:.01516525773905802,mouthRight:.029074595779598165,mouthSmileLeft:.574274360879454,mouthSmileRight:.574274360879454,mouthFrownLeft:0,mouthFrownRight:0,mouthDimpleLeft:.2425586027797846,mouthDimpleRight:.24213675984615515,mouthStretchLeft:.1647236356058485,mouthStretchRight:.16200694185536765,mouthPressLeft:.10518212477025311,mouthPressRight:.10688312777743042,mouthLowerDownLeft:.5673969602399163,mouthLowerDownRight:.5752730988419767,mouthUpperUpLeft:.2072643930658644,mouthUpperUpRight:.21660619785289678},bv={browDownLeft:.21894755766243107,cheekSquintLeft:.0720502124938468,browOuterUpLeft:.001131681028836966,browDownRight:.2065480429607979,browOuterUpRight:.0016888267395015664,cheekSquintRight:.06624369403105379,browInnerUp:.04989160645875895,eyeBlinkLeft:.019280808081942064,eyeBlinkRight:.018514927548377132,eyeSquintLeft:.20272710728449725,eyeSquintRight:.20006331235374747,eyeWideLeft:.022520680990659386,eyeWideRight:.025571784637023105,eyeLookDownLeft:.005219463444586615,eyeLookDownRight:.0052285496397275425,eyeLookInLeft:.055078669085388145,eyeLookInRight:.07103339878475431,eyeLookOutLeft:.0039032066375637967,eyeLookOutRight:.000868889764285386,eyeLookUpLeft:.06771758395133971,eyeLookUpRight:.06749859980501595,jawOpen:.05135693812513425,jawLeft:.011016677887952298,jawRight:.01723693521852213,mouthClose:.06649715547069114,mouthFunnel:.09536212090226476,mouthPucker:.22641890522489633,mouthRollLower:.1664198520866212,mouthRollUpper:.0353744479361229,mouthShrugLower:.46869855290428886,mouthShrugUpper:.2897678939429373,noseSneerLeft:.02463435689490283,noseSneerRight:.026503704323414406,mouthLeft:.02402928352704954,mouthRight:.004710406051171298,mouthSmileLeft:0,mouthSmileRight:0,mouthFrownLeft:.5044462037667596,mouthFrownRight:.5044462037667596,mouthDimpleLeft:.04916602395505078,mouthDimpleRight:.0385806574720608,mouthStretchLeft:.2014721478745718,mouthStretchRight:.21024909193626076,mouthPressLeft:.1444740593184618,mouthPressRight:.14248490365974414,mouthLowerDownLeft:.08546819947451495,mouthLowerDownRight:.07593731665798187,mouthUpperUpLeft:.033034930992303084,mouthUpperUpRight:.027125678894874168};p();function vv(r=()=>{},e=()=>{}){let t=(l,u,c)=>{u&&console.log("video track added"),APP.scene.emit("share_video_enabled",{source:l?"screen":"camera"}),APP.scene.addState("sharing_video"),r(APP.mediaDevicesManager.mediaStream)},n=l=>{console.error(l),this.scene.emit("share_video_failed"),e(l)},i={video:{width:{max:1280,ideal:720},frameRate:30}},a=window.APP.store.state.preferences.preferredCamera||"default";switch(a){case"default":i.video.mediaSource="camera";break;case"user":case"environment":i.video.facingMode=a;break;default:i.video.deviceId=a;break}APP.mediaDevicesManager.startVideoShare(i,!1,null,t,n)}p();function wv(r=()=>{}){new MutationObserver(t=>{t.forEach(n=>{n.addedNodes.forEach(o=>{if(o.querySelector("h5")?.textContent==="Share"){let i=()=>{let a=o.querySelector('[class*="ButtonGridPopover__button-grid-popover"]'),l=nB(a);r(l)};new MutationObserver(a=>{a.some(l=>l.removedNodes.length>0)&&i()}).observe(o,{childList:!0,subtree:!0}),i()}})})}).observe(document.body,{childList:!0})}function nB(r){let t=document.querySelector('[class*="ToolbarButton__accent2"]').cloneNode(!0),n=t.querySelector("label");return n.innerText="Face",t.className=r.firstChild.className,r.appendChild(t),t}p();p();p();p();p();var Gv=Ho(Vv(),1),{__extends:Dc,__assign:sle,__rest:ale,__decorate:lle,__param:ule,__metadata:cle,__awaiter:ple,__generator:xle,__exportStar:fle,__createBinding:mle,__values:qx,__read:Sl,__spread:hle,__spreadArrays:dle,__spreadArray:Tl,__await:gle,__asyncGenerator:yle,__asyncDelegator:ble,__asyncValues:vle,__makeTemplateObject:wle,__importStar:Cle,__importDefault:Nle,__classPrivateFieldGet:_le,__classPrivateFieldSet:Sle}=Gv.default;p();function ci(r){return typeof r=="function"}p();p();p();function Yh(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Zh=Yh(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});p();function Hx(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Rc=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return r.prototype.unsubscribe=function(){var e,t,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(Array.isArray(s))try{for(var a=qx(s),l=a.next();!l.done;l=a.next()){var u=l.value;u.remove(this)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else s?.remove(this);var c=this.initialTeardown;if(ci(c))try{c()}catch(m){i=m instanceof Zh?m.errors:[m]}var x=this._teardowns;if(x){this._teardowns=null;try{for(var f=qx(x),h=f.next();!h.done;h=f.next()){var g=h.value;try{Wv(g)}catch(m){i=i??[],m instanceof Zh?i=Tl(Tl([],Sl(i)),Sl(m.errors)):i.push(m)}}}catch(m){n={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(i)throw new Zh(i)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Wv(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(t=this._teardowns)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Hx(t,e)},r.prototype.remove=function(e){var t=this._teardowns;t&&Hx(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();var B4=Rc.EMPTY;function Jh(r){return r instanceof Rc||r&&"closed"in r&&ci(r.remove)&&ci(r.add)&&ci(r.unsubscribe)}function Wv(r){ci(r)?r():r.unsubscribe()}p();var Wa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};p();p();var $c={setTimeout:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=$c.delegate;return(t?.setTimeout||setTimeout).apply(void 0,Tl([],Sl(r)))},clearTimeout:function(r){var e=$c.delegate;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function qv(r){$c.setTimeout(function(){var e=Wa.onUnhandledError;if(e)e(r);else throw r})}p();function Kx(){}p();var Hv=function(){return U4("C",void 0,void 0)}();function Kv(r){return U4("E",void 0,r)}function jv(r){return U4("N",r,void 0)}function U4(r,e,t){return{kind:r,value:e,error:t}}var W4=function(r){Dc(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Jh(t)&&t.add(n)):n.destination=oB,n}return e.create=function(t,n,o){return new q4(t,n,o)},e.prototype.next=function(t){this.isStopped?G4(jv(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?G4(Kv(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?G4(Hv,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Rc);var q4=function(r){Dc(e,r);function e(t,n,o){var i=r.call(this)||this,s;if(ci(t))s=t;else if(t){s=t.next,n=t.error,o=t.complete;var a;i&&Wa.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return i.unsubscribe()}):a=t,s=s?.bind(a),n=n?.bind(a),o=o?.bind(a)}return i.destination={next:s?V4(s,i):Kx,error:V4(n??Xv,i),complete:o?V4(o,i):Kx},i}return e}(W4);function V4(r,e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{r.apply(void 0,Tl([],Sl(t)))}catch(o){if(Wa.useDeprecatedSynchronousErrorHandling)if(e._syncErrorHack_isSubscribing)e.__syncError=o;else throw o;else qv(o)}}}function Xv(r){throw r}function G4(r,e){var t=Wa.onStoppedNotification;t&&$c.setTimeout(function(){return t(r,e)})}var oB={closed:!0,next:Kx,error:Xv,complete:Kx};p();var Yv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();p();p();function Zv(r){return r}function Jv(r){return r.length===0?Zv:r.length===1?r[0]:function(t){return r.reduce(function(n,o){return o(n)},t)}}var H4=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var o=sB(e)?e:new q4(e,t,n);if(Wa.useDeprecatedSynchronousErrorHandling)this._deprecatedSyncErrorSubscribe(o);else{var i=this,s=i.operator,a=i.source;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}return o},r.prototype._deprecatedSyncErrorSubscribe=function(e){var t=e;t._syncErrorHack_isSubscribing=!0;var n=this.operator;if(n)e.add(n.call(e,this.source));else try{this._subscribe(e)}catch(i){t.__syncError=i}for(var o=t;o;){if("__syncError"in o)try{throw o.__syncError}finally{e.unsubscribe()}o=o.destination}t._syncErrorHack_isSubscribing=!1},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=Qv(t),new t(function(o,i){var s;s=n.subscribe(function(a){try{e(a)}catch(l){i(l),s?.unsubscribe()}},i,o)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[Yv]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?Jv(e)(this):this},r.prototype.toPromise=function(e){var t=this;return e=Qv(e),new e(function(n,o){var i;t.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},r.create=function(e){return new r(e)},r}();function Qv(r){var e;return(e=r??Wa.Promise)!==null&&e!==void 0?e:Promise}function iB(r){return r&&ci(r.next)&&ci(r.error)&&ci(r.complete)}function sB(r){return r&&r instanceof W4||iB(r)&&Jh(r)}p();p();var ew=Yh(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Qh=function(r){Dc(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new tw(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new ew},e.prototype.next=function(t){var n,o;if(this._throwIfClosed(),!this.isStopped){var i=this.observers.slice();try{for(var s=qx(i),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}}},e.prototype.error=function(t){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;for(var n=this.observers;n.length;)n.shift().error(t)}},e.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var t=this.observers;t.length;)t.shift().complete()}},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,o=n.hasError,i=n.isStopped,s=n.observers;return o||i?B4:(s.push(t),new Rc(function(){return Hx(s,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?t.error(i):s&&t.complete()},e.prototype.asObservable=function(){var t=new H4;return t.source=this,t},e.create=function(t,n){return new tw(t,n)},e}(H4);var tw=function(r){Dc(e,r);function e(t,n){var o=r.call(this)||this;return o.destination=t,o.source=n,o}return e.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},e.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:B4},e}(Qh);var Fb=Ho(lC()),I4=Ho(mC());var r4={};Pt(r4,{Abs:()=>Ha,Acos:()=>ds,Acosh:()=>gs,AdadeltaOptimizer:()=>Fu,AdagradOptimizer:()=>Mu,AdamOptimizer:()=>zu,AdamaxOptimizer:()=>Lu,Add:()=>xi,AddN:()=>Ka,All:()=>Al,Any:()=>Dl,ArgMax:()=>ja,ArgMin:()=>Xa,Asin:()=>ys,Asinh:()=>bs,Atan:()=>vs,Atan2:()=>Cs,Atanh:()=>ws,AvgPool:()=>Ya,AvgPool3D:()=>Za,AvgPool3DGrad:()=>$l,AvgPoolGrad:()=>Rl,BatchMatMul:()=>Ja,BatchToSpaceND:()=>Qa,Bincount:()=>Ol,BroadcastTo:()=>v5,Callback:()=>K1,CallbackList:()=>I1,Cast:()=>Gi,Ceil:()=>Ns,ClipByValue:()=>_s,Complex:()=>Fl,ComplexAbs:()=>e0,Concat:()=>t0,Conv2D:()=>r0,Conv2DBackpropFilter:()=>Ml,Conv2DBackpropInput:()=>n0,Conv3D:()=>o0,Conv3DBackpropFilterV2:()=>zl,Conv3DBackpropInputV2:()=>Ll,Cos:()=>Ss,Cosh:()=>Ts,CropAndResize:()=>Pl,Cumsum:()=>i0,CustomCallback:()=>E1,DataStorage:()=>Il,DenseBincount:()=>Bl,DepthToSpace:()=>Ul,DepthwiseConv2dNative:()=>s0,DepthwiseConv2dNativeBackpropFilter:()=>Vl,DepthwiseConv2dNativeBackpropInput:()=>Gl,Diag:()=>Wl,Dilation2D:()=>a0,Dilation2DBackpropFilter:()=>Vc,Dilation2DBackpropInput:()=>Uc,ENV:()=>cd,EarlyStopping:()=>j1,Elu:()=>ks,EluGrad:()=>ql,Environment:()=>tf,Equal:()=>m2,Erf:()=>Es,Exp:()=>As,ExpandDims:()=>l0,Expm1:()=>Ds,FFT:()=>Hl,Fill:()=>Kl,FlipLeftRight:()=>jl,Floor:()=>Rs,FloorDiv:()=>$s,FromPixels:()=>Gc,FusedBatchNorm:()=>u0,FusedConv2D:()=>N2,FusedDepthwiseConv2D:()=>_2,GatherNd:()=>Xl,GatherV2:()=>c0,GraphModel:()=>c3,Greater:()=>h2,GreaterEqual:()=>Os,History:()=>k1,IFFT:()=>Yl,Identity:()=>Wi,Imag:()=>Zl,InputSpec:()=>Sr,IsFinite:()=>Fs,IsInf:()=>Ms,IsNan:()=>zs,KernelBackend:()=>qa,LRN:()=>x0,LRNGrad:()=>Ql,LayerVariable:()=>Ff,LayersModel:()=>Lo,LeakyRelu:()=>p0,Less:()=>d2,LessEqual:()=>g2,LinSpace:()=>Jl,Log:()=>Ls,Log1p:()=>Ps,LogSoftmax:()=>w5,LogicalAnd:()=>y2,LogicalNot:()=>b2,LogicalOr:()=>v2,Max:()=>f0,MaxPool:()=>m0,MaxPool3D:()=>h0,MaxPool3DGrad:()=>tu,MaxPoolGrad:()=>eu,MaxPoolWithArgmax:()=>ru,Maximum:()=>Bs,Mean:()=>d0,Min:()=>g0,Minimum:()=>Us,MirrorPad:()=>y0,Mod:()=>Vs,MomentumOptimizer:()=>Pu,Multinomial:()=>nu,Multiply:()=>Gs,Neg:()=>b0,NonMaxSuppressionV3:()=>ou,NonMaxSuppressionV4:()=>iu,NonMaxSuppressionV5:()=>su,NotEqual:()=>w2,OP_SCOPE_SUFFIX:()=>F5,OneHot:()=>w0,OnesLike:()=>v0,Optimizer:()=>Pn,Pack:()=>C0,PadV2:()=>N0,Pool:()=>kU,Pow:()=>Ws,Prelu:()=>_0,Prod:()=>au,RMSPropOptimizer:()=>Bu,RNN:()=>_o,Range:()=>lu,Rank:()=>fd,Real:()=>uu,RealDiv:()=>Is,Reciprocal:()=>qs,Reduction:()=>Ur,Relu:()=>Hs,Relu6:()=>Ks,Reshape:()=>S0,ResizeBilinear:()=>I0,ResizeBilinearGrad:()=>pu,ResizeNearestNeighbor:()=>T0,ResizeNearestNeighborGrad:()=>cu,Reverse:()=>k0,RotateWithOffset:()=>yu,Round:()=>js,Rsqrt:()=>Xs,SGDOptimizer:()=>Y0,ScatterNd:()=>xu,Select:()=>E0,Selu:()=>Ys,Sequential:()=>ka,Sigmoid:()=>ea,Sign:()=>Qs,Sin:()=>Zs,Sinh:()=>Js,Slice:()=>A0,Softmax:()=>O0,Softplus:()=>ta,SpaceToBatchND:()=>R0,SparseToDense:()=>mu,SplitV:()=>$0,Sqrt:()=>ra,Square:()=>fu,SquaredDifference:()=>na,Step:()=>aa,StridedSlice:()=>hu,Sub:()=>oa,Sum:()=>D0,SymbolicTensor:()=>Qn,Tan:()=>ia,Tanh:()=>sa,Tensor:()=>Ct,TensorBuffer:()=>Jt,Tile:()=>qi,TopK:()=>du,Transpose:()=>F0,Unique:()=>gu,Unpack:()=>M0,UnsortedSegmentSum:()=>z0,Variable:()=>P0,ZerosLike:()=>L0,_FusedMatMul:()=>C2,abs:()=>gr,acos:()=>tp,acosh:()=>rp,add:()=>$e,addN:()=>kd,all:()=>D2,any:()=>q0,argMax:()=>H0,argMin:()=>np,asin:()=>op,asinh:()=>ip,atan:()=>sp,atan2:()=>ap,atanh:()=>lp,avgPool:()=>pa,avgPool3d:()=>cp,backend:()=>tg,backend_util:()=>H,basicLSTMCell:()=>EN,batchNorm:()=>Zo,batchNorm2d:()=>Ad,batchNorm3d:()=>Dd,batchNorm4d:()=>Rd,batchToSpaceND:()=>xa,bincount:()=>$d,booleanMaskAsync:()=>pH,broadcastTo:()=>j0,browser:()=>pf,buffer:()=>it,callbacks:()=>ZI,cast:()=>Le,ceil:()=>pp,clipByValue:()=>on,clone:()=>$o,complex:()=>mo,concat:()=>Mt,concat1d:()=>Od,concat2d:()=>Fd,concat3d:()=>Md,concat4d:()=>zd,constraints:()=>Og,conv1d:()=>R2,conv2d:()=>Kn,conv2dTranspose:()=>$2,conv3d:()=>fp,conv3dTranspose:()=>DN,copyRegisteredKernels:()=>DU,cos:()=>fa,cosh:()=>O2,cosineWindow:()=>bf,cumsum:()=>F2,customGrad:()=>jn,data:()=>l7,denseBincount:()=>Pd,deprecationWarn:()=>SN,depthToSpace:()=>mp,depthwiseConv2d:()=>mi,deregisterOp:()=>ek,device_util:()=>I2,diag:()=>RN,dilation2d:()=>hp,disableDeprecationWarnings:()=>LV,dispose:()=>ct,disposeVariables:()=>PV,div:()=>He,divNoNan:()=>dp,dot:()=>Bd,dropout:()=>bg,elu:()=>hi,enableDebugMode:()=>zV,enableProdMode:()=>MV,enclosingPowerOfTwo:()=>vg,engine:()=>Oo,env:()=>we,equal:()=>go,erf:()=>gp,exp:()=>Yr,expandDims:()=>sn,expm1:()=>yp,eye:()=>_u,fft:()=>wa,fill:()=>ma,findBackend:()=>qV,findBackendFactory:()=>HV,floor:()=>di,floorDiv:()=>A2,fused:()=>ei,gather:()=>Jo,gatherND:()=>yg,gather_util:()=>j5,getBackend:()=>GV,getGradient:()=>pd,getKernel:()=>qc,getKernelsForBackend:()=>of,grad:()=>$N,grads:()=>ON,greater:()=>Jr,greaterEqual:()=>oo,ifft:()=>ji,imag:()=>z2,image:()=>Yi,inTopKAsync:()=>wH,initializers:()=>Pg,input:()=>W1,io:()=>Sn,irfft:()=>j2,isFinite:()=>Ud,isInf:()=>Vd,isNaN:()=>Gd,keep:()=>Er,kernel_impls:()=>An,layers:()=>_6,leakyRelu:()=>ha,less:()=>L2,lessEqual:()=>Mo,linalg:()=>Cg,linspace:()=>Wd,loadGraphModel:()=>Ek,loadLayersModel:()=>G1,localResponseNormalization:()=>bp,log:()=>an,log1p:()=>P2,logSigmoid:()=>Hd,logSoftmax:()=>B2,logSumExp:()=>vp,logicalAnd:()=>hn,logicalNot:()=>da,logicalOr:()=>U2,logicalXor:()=>Kd,losses:()=>cK,matMul:()=>kt,math:()=>K5,max:()=>ln,maxPool:()=>ga,maxPool3d:()=>wp,maxPoolWithArgmax:()=>jd,maximum:()=>Xn,mean:()=>ar,memory:()=>ep,metrics:()=>S6,min:()=>Ki,minimum:()=>bi,mirrorPad:()=>Cp,mod:()=>Np,model:()=>zI,models:()=>T6,moments:()=>Su,movingAverage:()=>mH,mul:()=>re,multiRNNCell:()=>LN,multinomial:()=>Xd,neg:()=>Dt,nextFrame:()=>zp,norm:()=>Au,notEqual:()=>Qo,oneHot:()=>fi,ones:()=>kn,onesLike:()=>Qr,op:()=>U,outerProduct:()=>PN,pad:()=>Mn,pad1d:()=>BN,pad2d:()=>UN,pad3d:()=>VN,pad4d:()=>GN,pool:()=>Yd,pow:()=>zn,prelu:()=>ba,print:()=>gd,prod:()=>V2,profile:()=>BV,rand:()=>WN,randomGamma:()=>s_,randomNormal:()=>df,randomUniform:()=>vi,range:()=>Iu,ready:()=>VV,real:()=>X0,reciprocal:()=>Sp,registerBackend:()=>xf,registerCallbackConstructor:()=>PI,registerGradient:()=>C5,registerKernel:()=>Hc,registerOp:()=>QI,regularizers:()=>I6,relu:()=>En,relu6:()=>G2,removeBackend:()=>WV,reshape:()=>ie,reverse:()=>qr,reverse1d:()=>a_,reverse2d:()=>l_,reverse3d:()=>u_,reverse4d:()=>c_,rfft:()=>Ca,round:()=>Tp,rsqrt:()=>W2,scalar:()=>Ve,scatterND:()=>gg,scatter_util:()=>_d,selu:()=>q2,separableConv2d:()=>Ip,sequential:()=>LI,serialization:()=>Re,setBackend:()=>TN,setPlatform:()=>KV,setdiff1dAsync:()=>Qd,sigmoid:()=>Hn,sign:()=>kp,signal:()=>uK,sin:()=>H2,sinh:()=>K2,slice:()=>ht,slice1d:()=>Ep,slice2d:()=>gf,slice3d:()=>Ap,slice4d:()=>ku,slice_util:()=>Tn,softmax:()=>va,softplus:()=>gi,spaceToBatchND:()=>ya,sparseToDense:()=>yf,spectral:()=>lK,split:()=>un,sqrt:()=>ur,square:()=>gt,squaredDifference:()=>X2,squeeze:()=>yo,stack:()=>Pr,step:()=>wi,stridedSlice:()=>Dp,sub:()=>Ge,sum:()=>Qe,sumOutType:()=>T2,tan:()=>Rp,tanh:()=>Hi,tensor:()=>yn,tensor1d:()=>Br,tensor2d:()=>Xi,tensor3d:()=>Cd,tensor4d:()=>p_,tensor5d:()=>x_,tensor6d:()=>f_,tensor_util:()=>Xo,test_util:()=>eg,tidy:()=>pe,tile:()=>Fo,time:()=>UV,topk:()=>$p,train:()=>Z2,transpose:()=>Rt,truncatedNormal:()=>Y2,unique:()=>Eu,unregisterGradient:()=>AU,unregisterKernel:()=>EU,unsortedSegmentSum:()=>Op,unstack:()=>cn,upcastType:()=>nn,util:()=>I,valueAndGrad:()=>FN,valueAndGrads:()=>MN,variable:()=>e1,variableGrads:()=>ff,version:()=>$ie,version_converter:()=>p3,version_core:()=>Id,version_layers:()=>nl,where:()=>Ar,whereAsync:()=>Fp,zeros:()=>lr,zerosLike:()=>st});p();p();p();p();p();var Il=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},qa=class{refCount(e){return pi("refCount")}incRef(e){return pi("incRef")}timerAvailable(){return!0}time(e){return pi("time")}read(e){return pi("read")}readSync(e){return pi("readSync")}numDataIds(){return pi("numDataIds")}disposeData(e,t){return pi("disposeData")}write(e,t,n){return pi("write")}move(e,t,n,o,i){return pi("move")}memory(){return pi("memory")}floatPrecision(){return pi("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return pi("dispose")}};function pi(r){throw new Error(`'${r}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}p();p();function hC(r){let e=r.length,t=0,n=0;for(;e>0;)n=Math.random()*e|0,e--,t=r[e],r[e]=r[n],r[n]=t}function lU(r,e){if(r.length!==e.length)throw Error(`Array sizes must match to be shuffled together First array length was ${r.length}Second array length was ${e.length}`);let t=r.length,n,o,i=0;for(;t>0;)i=Math.random()*t|0,t--,n=r[t],o=e[t],r[t]=r[i],e[t]=e[i],r[i]=n,e[i]=o}function zc(r,e,t){return Math.max(r,Math.min(e,t))}function uU(r){return r%2===0?r:r+1}function cU(r){let e=0;for(let t=0;t<r.length;t++)e+=r[t];return e}function pU(r,e){let t=Math.random();return e*t+(1-t)*r}function xU(r,e){let t=0;for(let n=0;n<r.length;n++){let o=Number(r[n])-Number(e[n]);t+=o*o}return t}function V(r,e){if(!r)throw new Error(typeof e=="string"?e:e())}function Nr(r,e,t=""){V(to(r,e),()=>t+` Shapes ${r} and ${e} must match`)}function jo(r){V(r!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ui(r,e=[],t=!1){if(e==null&&(e=[]),Array.isArray(r)||mn(r)&&!t)for(let n=0;n<r.length;++n)Ui(r[n],e,t);else e.push(r);return e}function sr(r){if(r.length===0)return 1;let e=r[0];for(let t=1;t<r.length;t++)e*=r[t];return e}function fU(r){return r.length===0}function to(r,e){if(r===e)return!0;if(r==null||e==null||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Xt(r){return r%1===0}function mU(r){if(Math.tanh!=null)return Math.tanh(r);if(r===1/0)return 1;if(r===-1/0)return-1;{let e=Math.exp(2*r);return(e-1)/(e+1)}}function hU(r){let e=Math.ceil(Math.sqrt(r));return[e,Math.ceil(r/e)]}function dU(r){let e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return hC(e),e}function El(r,e){return e<=r.length?r:r+" ".repeat(e-r.length)}function gU(r,e=n=>0,t){return new Promise((n,o)=>{let i=0,s=()=>{if(r()){n();return}i++;let a=e(i);if(t!=null&&i>=t){o();return}setTimeout(s,a)};s()})}function yU(r,e){let t=1,n=-1;for(let i=0;i<r.length;++i)if(r[i]>=0)t*=r[i];else if(r[i]===-1){if(n!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${n} and dim ${i}`);n=i}else if(r[i]<0)throw Error(`Shapes can not be < 0. Found ${r[i]} at dim ${i}`);if(n===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${r}`);return r}if(t===0)throw Error(`Cannot infer the missing size in [${r}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);let o=r.slice();return o[n]=e/t,o}function rn(r,e){let t=e.length;return r=r==null?e.map((n,o)=>o):[].concat(r),V(r.every(n=>n>=-t&&n<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${r}`),V(r.every(n=>Xt(n)),()=>`All values in axis param must be integers but got axis ${r}`),r.map(n=>n<0?t+n:n)}function x5(r,e){let t=[],n=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:rn(e,r).sort(),s=0;for(let a=0;a<r.length;++a){if(i!=null){if(i[s]===a&&r[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${r[a]}' is not 1`);(i[s]==null||i[s]>a)&&r[a]===1&&(t.push(r[a]),n.push(a)),i[s]<=a&&s++}r[a]!==1&&(t.push(r[a]),n.push(a))}return{newShape:t,keptDims:n}}function f5(r,e){let t=null;if(r==null||r==="float32")t=new Float32Array(e);else if(r==="int32")t=new Int32Array(e);else if(r==="bool")t=new Uint8Array(e);else throw new Error(`Unknown data type ${r}`);return t}function m5(r,e){let t=null;if(r==null||r==="float32")t=new Float32Array(e);else if(r==="int32")t=new Int32Array(e);else if(r==="bool")t=new Uint8Array(e);else if(r==="string")t=new Array(e);else throw new Error(`Unknown data type ${r}`);return t}function h5(r,e){for(let t=0;t<r.length;t++){let n=r[t];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${e} being uploaded contains ${n}.`)}}function d5(r){return r==="bool"||r==="complex64"||r==="float32"||r==="int32"||r==="string"}function bU(r,e){return!(e==="complex64"||e==="float32"&&r!=="complex64"||e==="int32"&&r!=="float32"&&r!=="complex64"||e==="bool"&&r==="bool")}function mn(r){return r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array}function ud(r){if(r==="float32"||r==="int32")return 4;if(r==="complex64")return 8;if(r==="bool")return 1;throw new Error(`Unknown dtype ${r}`)}function g5(r){if(r==null)return 0;let e=0;return r.forEach(t=>e+=t.length),e}function Vi(r){return typeof r=="string"||r instanceof String}function dC(r){return typeof r=="boolean"}function gC(r){return typeof r=="number"}function Lc(r){return Array.isArray(r)?Lc(r[0]):r instanceof Float32Array?"float32":r instanceof Int32Array||r instanceof Uint8Array?"int32":gC(r)?"float32":Vi(r)?"string":dC(r)?"bool":"float32"}function ms(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Pc(r,e){for(let t=e;t<r;++t)if(r%t===0)return t;return r}function hs(r){let e=r.length;if(e<2)return[];let t=new Array(e-1);t[e-2]=r[e-1];for(let n=e-3;n>=0;--n)t[n]=t[n+1]*r[n+1];return t}function yC(r,e,t){let n=new Array;if(e.length===1){let o=e[0];for(let i=0;i<o;i++)n[i]=t[r+i]}else{let o=e[0],i=e.slice(1),s=i.reduce((a,l)=>a*l);for(let a=0;a<o;a++)n[a]=yC(r+a*s,i,t)}return n}function kl(r,e){if(r.length===0)return e[0];let t=r.reduce((n,o)=>n*o);if(t===0)return[];if(t!==e.length)throw new Error(`[${r}] does not match the input size ${e.length}.`);return yC(0,r,e)}function Jx(r,e){let t=Bc(r,e);for(let n=0;n<t.length;n++)t[n]=1;return t}function Bc(r,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(r);if(e==="int32")return new Int32Array(r);if(e==="bool")return new Uint8Array(r);throw new Error(`Unknown data type ${e}`)}function vU(r,e){let t=r.reduce((n,o)=>n*o,1);if(e==null||e==="float32")return kl(r,new Float32Array(t));if(e==="int32")return kl(r,new Int32Array(t));if(e==="bool")return kl(r,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function Qx(r){r.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${r}].`)})}function wU(r,e,t){if(e===0)return 0;if(e===1)return r[0];let n=r[r.length-1];for(let o=0;o<r.length-1;++o)n+=t[o]*r[o];return n}function CU(r,e,t){if(e===0)return[];if(e===1)return[r];let n=new Array(e);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(r/t[o]),r-=n[o]*t[o];return n[n.length-1]=r,n}function ef(r){return r&&r.then&&typeof r.then=="function"}var bC="tfjsflags",tf=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){let o=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(ef(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=_U(this.global.location.search);bC in e&&e[bC].split(",").forEach(n=>{let[o,i]=n.split(":");this.urlFlags[o]=TU(o,i)})}};function _U(r){let e={};return r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(SU(e,n[0],n[1]),n.join("="))),e}function SU(r,e,t){r[decodeURIComponent(e)]=decodeURIComponent(t||"")}function TU(r,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${r}.`)}function we(){return cd}var cd=null;function vC(r){cd=r}p();var y5;function b5(){if(y5==null){let r;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else if(typeof self<"u")r=self;else throw new Error("Could not find a global object");y5=r}return y5}function IU(){let r=b5();return r._tfGlobals==null&&(r._tfGlobals=new Map),r._tfGlobals}function rf(r,e){let t=IU();if(t.has(r))return t.get(r);{let n=e();return t.set(r,n),t.get(r)}}p();var Ha="Abs",ds="Acos",gs="Acosh",xi="Add",Ka="AddN",Al="All",Dl="Any",ja="ArgMax",Xa="ArgMin",ys="Asin",bs="Asinh",vs="Atan",ws="Atanh",Cs="Atan2",Ya="AvgPool",Rl="AvgPoolGrad",Za="AvgPool3D",$l="AvgPool3DGrad",Ja="BatchMatMul",Qa="BatchToSpaceND",Ol="Bincount",v5="BroadcastTo",Gi="Cast",Ns="Ceil",_s="ClipByValue",Fl="Complex",e0="ComplexAbs",t0="Concat",r0="Conv2D",Ml="Conv2DBackpropFilter",n0="Conv2DBackpropInput",o0="Conv3D",zl="Conv3DBackpropFilterV2",Ll="Conv3DBackpropInputV2",Ss="Cos",Ts="Cosh",i0="Cumsum",Pl="CropAndResize",Bl="DenseBincount",Ul="DepthToSpace",s0="DepthwiseConv2dNative",Vl="DepthwiseConv2dNativeBackpropFilter",Gl="DepthwiseConv2dNativeBackpropInput",Wl="Diag",a0="Dilation2D",Uc="Dilation2DBackpropInput",Vc="Dilation2DBackpropFilter",Is="RealDiv",ks="Elu",ql="EluGrad",Es="Erf",m2="Equal",As="Exp",l0="ExpandDims",Ds="Expm1",Hl="FFT",Kl="Fill",jl="FlipLeftRight",Rs="Floor",$s="FloorDiv",u0="FusedBatchNorm",c0="GatherV2",Xl="GatherNd",h2="Greater",Os="GreaterEqual",Wi="Identity",Yl="IFFT",Zl="Imag",Fs="IsFinite",Ms="IsInf",zs="IsNan",p0="LeakyRelu",d2="Less",g2="LessEqual",Jl="LinSpace",Ls="Log",Ps="Log1p",y2="LogicalAnd",b2="LogicalNot",v2="LogicalOr",w5="LogSoftmax",x0="LRN",Ql="LRNGrad",f0="Max",Bs="Maximum",m0="MaxPool",eu="MaxPoolGrad",h0="MaxPool3D",tu="MaxPool3DGrad",ru="MaxPoolWithArgmax",d0="Mean",g0="Min",Us="Minimum",y0="MirrorPad",Vs="Mod",nu="Multinomial",Gs="Multiply",b0="Neg",w2="NotEqual",ou="NonMaxSuppressionV3",iu="NonMaxSuppressionV4",su="NonMaxSuppressionV5",v0="OnesLike",w0="OneHot",C0="Pack",N0="PadV2",kU="Pool",Ws="Pow",_0="Prelu",au="Prod",lu="Range",uu="Real",qs="Reciprocal",Hs="Relu",S0="Reshape",T0="ResizeNearestNeighbor",cu="ResizeNearestNeighborGrad",I0="ResizeBilinear",pu="ResizeBilinearGrad",Ks="Relu6",k0="Reverse",js="Round",Xs="Rsqrt",xu="ScatterNd",E0="Select",Ys="Selu",A0="Slice",Zs="Sin",Js="Sinh",Qs="Sign",ea="Sigmoid",ta="Softplus",ra="Sqrt",D0="Sum",R0="SpaceToBatchND",$0="SplitV",O0="Softmax",na="SquaredDifference",fu="Square",oa="Sub",mu="SparseToDense",hu="StridedSlice",ia="Tan",sa="Tanh",qi="Tile",du="TopK",F0="Transpose",gu="Unique",M0="Unpack",z0="UnsortedSegmentSum",L0="ZerosLike",aa="Step",Gc="FromPixels",yu="RotateWithOffset",C2="_FusedMatMul",N2="FusedConv2D",_2="FusedDepthwiseConv2D";p();var Wc=rf("kernelRegistry",()=>new Map),nf=rf("gradRegistry",()=>new Map);function qc(r,e){let t=N5(r,e);return Wc.get(t)}function pd(r){return nf.get(r)}function of(r){let e=Wc.entries(),t=[];for(;;){let{done:n,value:o}=e.next();if(n)break;let[i,s]=o,[a]=i.split("_");a===r&&t.push(s)}return t}function Hc(r){let{kernelName:e,backendName:t}=r,n=N5(e,t);Wc.has(n)&&console.warn(`The kernel '${e}' for backend '${t}' is already registered`),Wc.set(n,r)}function C5(r){let{kernelName:e}=r;nf.has(e)&&we().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),nf.set(e,r)}function EU(r,e){let t=N5(r,e);if(!Wc.has(t))throw new Error(`The kernel '${r}' for backend '${e}' is not registered`);Wc.delete(t)}function AU(r){if(!nf.has(r))throw new Error(`The gradient '${r}' for backend is not registered`);nf.delete(r)}function DU(r,e){of(r).forEach(n=>{let o=Object.assign({},n,{backendName:e});Hc(o)})}function N5(r,e){return`${e}_${r}`}p();var I={};Pt(I,{arraysEqual:()=>to,assert:()=>V,assertNonNegativeIntegerDimensions:()=>Qx,assertNonNull:()=>jo,assertShapesMatch:()=>Nr,bytesFromStringArray:()=>g5,bytesPerElement:()=>ud,checkConversionForErrors:()=>h5,clamp:()=>zc,computeStrides:()=>hs,createScalarValue:()=>RU,createShuffledIndices:()=>dU,decodeString:()=>jc,distSquared:()=>xU,encodeString:()=>S2,fetch:()=>OU,flatten:()=>Ui,getArrayFromDType:()=>m5,getTypedArrayFromDType:()=>f5,hasEncodingLoss:()=>bU,indexToLoc:()=>CU,inferDtype:()=>Lc,inferFromImplicitShape:()=>yU,isBoolean:()=>dC,isFunction:()=>ms,isInt:()=>Xt,isNumber:()=>gC,isPromise:()=>ef,isScalarShape:()=>fU,isString:()=>Vi,isTypedArray:()=>mn,isValidDtype:()=>d5,locToIndex:()=>wU,makeOnesTypedArray:()=>Jx,makeZerosNestedTypedArray:()=>vU,makeZerosTypedArray:()=>Bc,nearestDivisor:()=>Pc,nearestLargerEven:()=>uU,now:()=>bu,parseAxisParam:()=>rn,randUniform:()=>pU,repeatedTry:()=>gU,rightPad:()=>El,shuffle:()=>hC,shuffleCombo:()=>lU,sizeFromShape:()=>sr,sizeToSquarishShape:()=>hU,squeezeShape:()=>x5,sum:()=>cU,tanh:()=>mU,toNestedArray:()=>kl,toTypedArray:()=>Kc});p();function RU(r,e){return e==="string"?S2(r):Kc([r],e)}function $U(r,e){return r instanceof Float32Array&&e==="float32"||r instanceof Int32Array&&e==="int32"||r instanceof Uint8Array&&e==="bool"}function Kc(r,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(r)&&(r=Ui(r)),we().getBool("DEBUG")&&h5(r,e),$U(r,e))return r;if(e==null||e==="float32"||e==="complex64")return new Float32Array(r);if(e==="int32")return new Int32Array(r);if(e==="bool"){let t=new Uint8Array(r.length);for(let n=0;n<t.length;++n)Math.round(r[n])!==0&&(t[n]=1);return t}else throw new Error(`Unknown data type ${e}`)}function bu(){return we().platform.now()}function OU(r,e){return we().platform.fetch(r,e)}function S2(r,e="utf-8"){return e=e||"utf-8",we().platform.encode(r,e)}function jc(r,e="utf-8"){return e=e||"utf-8",we().platform.decode(r,e)}var _5=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new wC)}profileKernel(e,t,n){let o,i=()=>{o=n()},s,a=bu();if(this.backendTimer.timerAvailable()?s=this.backendTimer.time(i):(i(),o.map(u=>u.dataSync()),s=Promise.resolve({kernelMs:bu()-a})),we().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){let c=o[u];c.data().then(x=>{FU(x,c.dtype,e)})}return{kernelName:e,outputs:o,inputs:t,timeMs:s.then(u=>u.kernelMs),extraInfo:s.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:o,inputs:i,extraInfo:s}=e;n.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(t,a,l[0],l[1],i,l[2])})})}};function FU(r,e,t){if(e!=="float32")return!1;for(let n=0;n<r.length;n++){let o=r[n];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${t}'`),!0}return!1}var wC=class{logKernelProfile(e,t,n,o,i,s){let a=typeof o=="number"?El(`${o}ms`,9):o.error,l=El(e,25),u=t.rank,c=t.size,x=El(t.shape.toString(),14),f="";for(let h in i){let g=i[h];if(g!=null){let m=g.shape||t.shape,b=m.length;f+=`${h}: ${b}D ${b>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${x}	%c${c}	%c${f}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};p();function CC(r,e,t){let n={},o={};for(let l=0;l<e.length;l++)n[e[l].id]=!0;for(let l=0;l<r.length;l++){let u=r[l],c=u.inputs;for(let x in c){let f=c[x],h=!1;for(let g=0;g<e.length;g++)if(n[f.id]){u.outputs.forEach(m=>n[m.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}let i={};i[t.id]=!0;let s={};for(let l=r.length-1;l>=0;l--){let u=r[l],c=u.inputs;for(let x=0;x<u.outputs.length;x++)if(i[u.outputs[x].id]){for(let f in c)i[c[f].id]=!0,s[u.id]=!0;break}}let a=[];for(let l=0;l<r.length;l++){let u=r[l];if(o[u.id]&&s[u.id]){let c={};for(let f in u.inputs){let h=u.inputs[f];n[h.id]&&(c[f]=h)}let x=Object.assign({},u);x.inputs=c,x.outputs=u.outputs,a.push(x)}}return a}function NC(r,e,t,n){for(let o=e.length-1;o>=0;o--){let i=e[o],s=[];if(i.outputs.forEach(l=>{let u=r[l.id];u!=null?s.push(u):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let u=t(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);let c=i.inputs[l];if(!to(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(r[c.id]==null)r[c.id]=u;else{let x=r[c.id];r[c.id]=n(x,u),x.dispose()}}}}p();p();var _C=20,sf=3,S5=7;function SC(r,e,t,n){let o=hs(e),i=MU(r,e,t,o),s=e.length,a=xd(r,e,t,o,i),l=["Tensor"];return n&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function MU(r,e,t,n){let o=sr(e),i=n[n.length-1],s=new Array(i).fill(0),a=e.length,l=t==="complex64"?lf(r):r;if(a>1)for(let u=0;u<o/i;u++){let c=u*i;for(let x=0;x<i;x++)s[x]=Math.max(s[x],af(l[c+x],0,t).length)}return s}function af(r,e,t){let n;return Array.isArray(r)?n=`${parseFloat(r[0].toFixed(S5))} + ${parseFloat(r[1].toFixed(S5))}j`:Vi(r)?n=`'${r}'`:t==="bool"?n=TC(r):n=parseFloat(r.toFixed(S5)).toString(),El(n,e)}function TC(r){return r===0?"false":"true"}function xd(r,e,t,n,o,i=!0){let s=t==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(t==="complex64"){let m=lf(r);return[af(m[0],0,t)]}return t==="bool"?[TC(r[0])]:[r[0].toString()]}if(l===1){if(a>_C){let b=sf*s,v=Array.from(r.slice(0,b)),w=Array.from(r.slice((a-sf)*s,a*s));return t==="complex64"&&(v=lf(v),w=lf(w)),["["+v.map((C,N)=>af(C,o[N],t)).join(", ")+", ..., "+w.map((C,N)=>af(C,o[a-sf+N],t)).join(", ")+"]"]}let m=t==="complex64"?lf(r):Array.from(r);return["["+m.map((b,v)=>af(b,o[v],t)).join(", ")+"]"]}let u=e.slice(1),c=n.slice(1),x=n[0]*s,f=[];if(a>_C){for(let m=0;m<sf;m++){let b=m*x,v=b+x;f.push(...xd(r.slice(b,v),u,t,c,o,!1))}f.push("...");for(let m=a-sf;m<a;m++){let b=m*x,v=b+x;f.push(...xd(r.slice(b,v),u,t,c,o,m===a-1))}}else for(let m=0;m<a;m++){let b=m*x,v=b+x;f.push(...xd(r.slice(b,v),u,t,c,o,m===a-1))}let h=l===2?",":"";f[0]="["+f[0]+h;for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let g=`,
`;for(let m=2;m<l;m++)g+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":g),f}function lf(r){let e=[];for(let t=0;t<r.length;t+=2)e.push([r[t],r[t+1]]);return e}var Jt=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=sr(e),n!=null){let o=n.length;V(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||m5(t,this.size),this.strides=hs(e)}set(e,...t){t.length===0&&(t=[0]),V(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let o of e){if(o<0||o>=this.shape[t]){let i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}t++}let n=e[e.length-1];for(let o=0;o<e.length-1;++o)n+=this.strides[o]*e[o];return this.values[n]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return la().makeTensor(this.values,this.shape,this.dtype)}},la=null,Xc=null,zU=null;function IC(r){la=r}function kC(r){Xc=r}function EC(r){zU=r}var Ct=class{constructor(e,t,n,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=sr(e),this.strides=hs(e),this.dataId=n,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Xc.buffer(this.shape,this.dtype,e)}bufferSync(){return Xc.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return kl(this.shape,e)}arraySync(){return kl(this.shape,this.dataSync())}async data(){this.throwIfDisposed();let e=la().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(n=>jc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();let e=la().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>jc(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await la().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(la().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Xc.print(this,e)}clone(){return this.throwIfDisposed(),Xc.clone(this)}toString(e=!1){let t=this.dataSync();return SC(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Xc.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),la().makeVariable(this,e,t,n)}};Object.defineProperty(Ct,Symbol.hasInstance,{value:r=>!!r&&r.data!=null&&r.dataSync!=null&&r.throwIfDisposed!=null});function ee(){return rf("Tensor",()=>Ct)}ee();var P0=class extends Ct{constructor(e,t,n,o){super(e.shape,e.dtype,e.dataId,o);this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!to(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);la().disposeTensor(this),this.dataId=e.dataId,la().incRef(this,null)}dispose(){la().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(P0,Symbol.hasInstance,{value:r=>r instanceof Ct&&r.assign!=null&&r.assign instanceof Function});var Xo={};Pt(Xo,{assertTypesMatch:()=>A5,getTensorsInContainer:()=>uf,isTensorInList:()=>PU,makeTypesMatch:()=>It});p();p();var fd;(function(r){r.R0="R0",r.R1="R1",r.R2="R2",r.R3="R3",r.R4="R4",r.R5="R5",r.R6="R6"})(fd||(fd={}));var T5;(function(r){r.float32="float32",r.int32="int32",r.bool="int32",r.complex64="complex64"})(T5||(T5={}));var I5;(function(r){r.float32="float32",r.int32="int32",r.bool="bool",r.complex64="complex64"})(I5||(I5={}));var k5;(function(r){r.float32="float32",r.int32="float32",r.bool="float32",r.complex64="complex64"})(k5||(k5={}));var E5;(function(r){r.float32="complex64",r.int32="complex64",r.bool="complex64",r.complex64="complex64"})(E5||(E5={}));var LU={float32:k5,int32:T5,bool:I5,complex64:E5};function nn(r,e){if(r==="string"||e==="string"){if(r==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${r} with ${e}`)}return LU[r][e]}function T2(r){return nn(r,"int32")}function It(r,e){if(r.dtype===e.dtype)return[r,e];let t=nn(r.dtype,e.dtype);return[r.cast(t),e.cast(t)]}function A5(r,e){V(r.dtype===e.dtype,()=>`The dtypes of the first(${r.dtype}) and second(${e.dtype}) input must match`)}function PU(r,e){return e.some(t=>t.id===r.id)}function uf(r){let e=[];return AC(r,e,new Set),e}function AC(r,e,t){if(r==null)return;if(r instanceof Ct){e.push(r);return}if(!BU(r))return;let n=r;for(let o in n){let i=n[o];t.has(i)||(t.add(i),AC(i,e,t))}}function BU(r){return Array.isArray(r)||typeof r=="object"}function D5(r){return r.kernelName!=null}var R5=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},vu=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new R5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new _5(this.backendInstance),!0}setupRegisteredKernels(){of(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){of(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(n&&!(n instanceof qa)&&typeof n.then=="function"){let o=++this.pendingBackendInitId,i=n.then(s=>o<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(s.stack||s.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=n,{success:!0,asyncInit:!1}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:o,asyncInit:i}=this.initializeBackend(n);if(i||o)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),o=n.backend,i=this.readSync(t),s=o.refCount(t);o.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let o;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(o),()=>(o=t(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,t,n){e();try{let o=n();return t(),o}catch(o){throw t(),o}}nextTensorId(){return vu.nextTensorId++}nextVariableId(){return vu.nextVariableId++}clone(e){let t=G.runKernel(Wi,{x:e}),n={x:e},o=s=>({x:()=>{let a="float32",l={x:s},u={dtype:a};return G.runKernel(Gi,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,n,[t],o,i,{}),t}runKernel(e,t,n){if(!(qc(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let o=this.backend.numDataIds(),i=0;n.forEach(l=>{i+=l.dtype==="complex64"?3:1});let s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-t-i-s;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[],o=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l,u=D5(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(D5(e)){let{kernelName:g,inputs:m,attrs:b}=e;this.backendName==null&&this.backend;let v=qc(g,this.backendName);V(v!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),a=()=>{let w=this.backend.numDataIds();l=v.kernelFunc({inputs:m,attrs:b,backend:this.backend});let C=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,w,C);let N=C.map(_=>{if(_.rank!=null)return _;let{dataId:E,shape:T,dtype:k}=_;return this.makeTensorFromDataId(E,T,k)});if(o){let _=this.getTensorsForGradient(g,m,N);n=this.saveTensorsForBackwardMode(_)}return N}}else{let{forwardFunc:g}=e,m=b=>{!o||(n=b.map(v=>this.keep(this.clone(v))))};a=()=>{let b=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,m));let v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,b,v),v}}let{inputs:c,attrs:x}=e,f=D5(e)?null:e.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs)}),o&&this.addTapeNode(u,c,t,f,n,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:t.map(g=>g.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,t,n){let o=pd(e);if(o!=null){let i=o.inputsToSave||[],s=o.outputsToSave||[],a;o.saveAllInputs?(V(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(u=>t[u])):a=i.map(u=>t[u]);let l=n.filter((u,c)=>s[c]);return a.concat(l)}return[]}makeTensor(e,t,n,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",o=o||this.backend;let i=e;n==="string"&&Vi(e[0])&&(i=e.map(l=>S2(l)));let s=o.write(i,t,n),a=new Ct(t,n,s,this.nextTensorId());if(this.trackTensor(a,o),n==="string"){let l=this.state.tensorInfo.get(s),u=g5(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,t,n,o){n=n||"float32";let i=new Ct(t,n,e,this.nextTensorId());return this.trackTensor(i,o),i}makeVariable(e,t=!0,n,o){n=n||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));let i=new P0(e,t,n,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*ud(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof P0||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let n=e.size*ud(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,n,o,i,s){let a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},l=pd(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,x)=>{if(c==null){let f=n[x],h=Bc(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],i,s))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=uf(e),n=new Set(t.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){let s=this.state.activeScope.track[i];!s.kept&&!n.has(s.id)&&s.dispose()}let o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(i=>{!i.kept&&i.scopeId===o.id&&this.track(i)})}gradients(e,t,n,o=!1){if(V(t.length>0,()=>"gradients() received an empty list of xs."),n!=null&&n.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(i instanceof Ct,()=>"The result y returned by f() must be a tensor.");let s=CC(this.state.activeTape,t,i);if(!o&&s.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let a={};a[i.id]=n??UU(i.shape),NC(a,s,u=>this.tidy(u),VU);let l=t.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return V(ms(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{V(t.every(a=>a instanceof Ct),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,o={};t.forEach((a,l)=>{o[l]=a});let i=(a,l)=>(n=e(...t,l),V(n.value instanceof Ct,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(ms(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),s=(a,l)=>{let u=n.gradFunc(a,l),c=Array.isArray(u)?u:[u];V(c.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(c.every(f=>f instanceof Ct),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let x={};return c.forEach((f,h)=>{x[h]=()=>f}),x};return this.runKernelFunc({forwardFunc:i,backwardsFunc:s,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){let t=bu(),n=await this.backend.time(e);return n.wallMs=bu()-t,n}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new R5;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};vu.nextTensorId=0;vu.nextVariableId=0;function UU(r){let e=Jx(sr(r),"float32");return G.makeTensor(e,r,"float32")}function $5(){let r=b5();if(r._tfengine==null){let e=new tf(r);r._tfengine=new vu(e)}return vC(r._tfengine.ENV),IC(()=>r._tfengine),r._tfengine}var G=$5();function VU(r,e){let t={a:r,b:e};return G.runKernel(xi,t)}p();var I2={};Pt(I2,{isBrowser:()=>O5,isMobile:()=>WU});p();function GU(){return typeof navigator<"u"&&navigator!=null}function WU(){if(GU()){let r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}return!1}function O5(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ua=we();ua.registerFlag("DEBUG",()=>!1,r=>{r&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ua.registerFlag("IS_BROWSER",()=>O5());ua.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ua.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ua.registerFlag("PROD",()=>!1);ua.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ua.getBool("DEBUG"));ua.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ua.registerFlag("IS_TEST",()=>!1);ua.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);p();p();p();p();p();function Fn(r,e){let t=r;if(mn(r))return e==="string"?[]:[r.length];if(!Array.isArray(r))return[];let n=[];for(;Array.isArray(t)||mn(t)&&e!=="string";)n.push(t.length),t=t[0];return Array.isArray(r)&&we().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&RC(r,n,[]),n}function RC(r,e,t){if(t=t||[],!Array.isArray(r)&&!mn(r)){V(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${r.length} elements`),V(r.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${r.length} elements`);let n=e.slice(1);for(let o=0;o<r.length;++o)RC(r[o],n,t.concat(o))}function DC(r,e,t,n){if(r!=="string_or_numeric"){if(r==null)throw new Error("Expected dtype cannot be null.");if(r!=="numeric"&&r!==e||r==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${n}' must be ${r} tensor, but got ${e} tensor`)}}function O(r,e,t,n="numeric"){if(r instanceof Ct)return DC(n,r.dtype,e,t),r;let o=Lc(r);if(o!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(o=n),DC(n,o,e,t),r==null||!mn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string"){let l=r==null?"null":r.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}let i=Fn(r,o);!mn(r)&&!Array.isArray(r)&&(r=[r]);let a=o!=="string"?Kc(r,o):Ui(r,[],!0);return G.makeTensor(a,i,o)}function B0(r,e,t,n="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return r.map((i,s)=>O(i,`${e}[${s}]`,t,n))}p();var F5="__op";function U(r){let e=Object.keys(r);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0],n=r[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+F5;let o=(...i)=>{G.startScope(t);try{let s=n(...i);return ef(s)&&console.error("Cannot return a Promise inside of tidy."),G.endScope(s),s}catch(s){throw G.endScope(null),s}};return Object.defineProperty(o,"name",{value:t,configurable:!0}),o}function qU(r,e){let t=O(r,"real","complex"),n=O(e,"imag","complex");Nr(t.shape,n.shape,`real and imag shapes, ${t.shape} and ${n.shape}, must match in call to tf.complex().`);let o={real:t,imag:n};return G.runKernel(Fl,o)}var mo=U({complex_:qU});p();p();function ro(r,e,t,n){if(n==null&&(n=Lc(r)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!mn(r)&&!Array.isArray(r)&&typeof r!="number"&&typeof r!="boolean"&&typeof r!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Qx(e);let o=sr(e),i=sr(t);V(o===i,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<t.length;++s){let a=t[s],l=s===t.length-1?a!==sr(e.slice(s)):!0;V(t[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!mn(r)&&!Array.isArray(r)&&(r=[r]),e=e||t,r=n!=="string"?Kc(r,n):Ui(r,[],!0),G.makeTensor(r,e,n)}function yn(r,e,t){let n=Fn(r,t);return ro(r,e,n,t)}p();var cf={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var md=4;async function OC(r,e){let t=[],n=[],o=Array.isArray(r)?r.map(s=>s.name):Object.keys(r);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(r)?r[s].tensor:r[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let c=new Promise(async x=>{let f=await l.bytes(),h=f.reduce((b,v)=>b+v.length,0)+md*f.length,g=new Uint8Array(h),m=0;for(let b=0;b<f.length;b++){let v=f[b],w=new Uint8Array(new Uint32Array([v.length]).buffer);g.set(w,m),m+=md,g.set(v,m),m+=v.length}x(g)});n.push(c)}else n.push(l.data());e!=null&&(u.group=e),t.push(u)}let i=await Promise.all(n);return{data:HU(i),specs:t}}function hd(r,e){let t={},n,o=0;for(let i of e){let s=i.name,a=i.dtype,l=i.shape,u=sr(l),c;if("quantization"in i){let x=i.quantization;if(x.dtype==="uint8"||x.dtype==="uint16"){if(!("min"in x&&"scale"in x))throw new Error(`Weight ${i.name} with quantization ${x.dtype} doesn't have corresponding metadata min and scale.`)}else if(x.dtype==="float16"){if(a!=="float32")throw new Error(`Weight ${i.name} is quantized with ${x.dtype} which only supports weights of type float32 not ${a}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${x.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let f=cf[x.dtype],h=r.slice(o,o+u*f),g=x.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(a==="float32")if(x.dtype==="uint8"||x.dtype==="uint16"){c=new Float32Array(g.length);for(let m=0;m<g.length;m++){let b=g[m];c[m]=b*x.scale+x.min}}else if(x.dtype==="float16")n===void 0&&(n=YU()),c=n(g);else throw new Error(`Unsupported quantization type ${x.dtype} for weight type float32.`);else if(a==="int32"){if(x.dtype!=="uint8"&&x.dtype!=="uint16")throw new Error(`Unsupported quantization type ${x.dtype} for weight type int32.`);c=new Int32Array(g.length);for(let m=0;m<g.length;m++){let b=g[m];c[m]=Math.round(b*x.scale+x.min)}}else throw new Error(`Unsupported dtype in weight '${s}': ${a}`);o+=u*f}else if(a==="string"){let x=sr(i.shape);c=[];for(let f=0;f<x;f++){let h=new Uint32Array(r.slice(o,o+md))[0];o+=md;let g=new Uint8Array(r.slice(o,o+h));c.push(g),o+=h}}else{let x=cf[a],f=r.slice(o,o+u*x);if(a==="float32")c=new Float32Array(f);else if(a==="int32")c=new Int32Array(f);else if(a==="bool")c=new Uint8Array(f);else if(a==="complex64"){c=new Float32Array(f);let h=new Float32Array(c.length/2),g=new Float32Array(c.length/2);for(let v=0;v<h.length;v++)h[v]=c[v*2],g[v]=c[v*2+1];let m=yn(h,l,"float32"),b=yn(g,l,"float32");t[s]=mo(m,b),m.dispose(),b.dispose()}else throw new Error(`Unsupported dtype in weight '${s}': ${a}`);o+=u*x}a!=="complex64"&&(t[s]=yn(c,l,a))}return t}function HU(r){if(r===null)throw new Error(`Invalid input value: ${JSON.stringify(r)}`);let e=0,t=[];r.forEach(i=>{if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let n=new Uint8Array(e),o=0;return t.forEach(i=>{n.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),n.buffer}var M5=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function $C(r){return M5?Buffer.byteLength(r):new Blob([r]).size}function FC(r){if(M5)return Buffer.from(r).toString("base64");let e=new Uint8Array(r),t="";for(let n=0,o=e.length;n<o;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function MC(r){if(M5){let n=Buffer.from(r,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}let e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t.set([e.charCodeAt(n)],n);return t.buffer}function Yc(r){if(r.length===1)return r[0];let e=0;r.forEach(o=>{e+=o.byteLength});let t=new Uint8Array(e),n=0;return r.forEach(o=>{t.set(new Uint8Array(o),n),n+=o.byteLength}),t.buffer}function z5(r){let e="/";for(r=r.trim();r.endsWith(e);)r=r.slice(0,r.length-1);let t=r.split(e);return t[t.length-1]}function ca(r){if(r.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:r.modelTopology==null?0:$C(JSON.stringify(r.modelTopology)),weightSpecsBytes:r.weightSpecs==null?0:$C(JSON.stringify(r.weightSpecs)),weightDataBytes:r.weightData==null?0:r.weightData.byteLength}}function KU(){let r=t=>{let n=t<<13,o=0;for(;(n&8388608)===0;)o-=8388608,n<<=1;return n&=-8388609,o+=947912704,n|o},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=r(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function jU(){let r=new Uint32Array(64);r[0]=0,r[31]=1199570944,r[32]=2147483648,r[63]=3347054592;for(let e=1;e<31;e++)r[e]=e<<23;for(let e=33;e<63;e++)r[e]=2147483648+(e-32<<23);return r}function XU(){let r=new Uint32Array(64);for(let e=0;e<64;e++)r[e]=1024;return r[0]=r[32]=0,r}function YU(){let r=KU(),e=jU(),t=XU();return n=>{let o=new ArrayBuffer(4*n.length),i=new Uint32Array(o);for(let s=0;s<n.length;s++){let a=n[s],l=r[t[a>>10]+(a&1023)]+e[a>>10];i[s]=l}return new Float32Array(o)}}p();var _r=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return _r.instance==null&&(_r.instance=new _r),_r.instance}static registerSaveRouter(e){_r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){_r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return _r.getHandlers(e,"save")}static getLoadHandlers(e,t){return _r.getHandlers(e,"load",t)}static getHandlers(e,t,n){let o=[];return(t==="load"?_r.getInstance().loadRouters:_r.getInstance().saveRouters).forEach(s=>{let a=s(e,n);a!==null&&o.push(a)}),o}},zC=r=>_r.registerSaveRouter(r),LC=r=>_r.registerLoadRouter(r),PC=r=>_r.getSaveHandlers(r),BC=(r,e)=>_r.getLoadHandlers(r,e);var L5="tensorflowjs",P5=1,wu="models_store",k2="model_info_store";function UC(){if(!we().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let r=typeof window>"u"?self:window,e=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB||r.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function B5(r){let e=r.result;e.createObjectStore(wu,{keyPath:"modelPath"}),e.createObjectStore(k2,{keyPath:"modelPath"})}var U0=class{constructor(e){if(this.indexedDB=UC(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((n,o)=>{let i=this.indexedDB.open(L5,P5);i.onupgradeneeded=()=>B5(i),i.onsuccess=()=>{let s=i.result;if(t==null){let a=s.transaction(wu,"readonly"),u=a.objectStore(wu).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));n(u.result.modelArtifacts)},u.onerror=c=>(s.close(),o(u.error)),a.oncomplete=()=>s.close()}else{let a=ca(t),l=s.transaction(k2,"readwrite"),u=l.objectStore(k2),c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a}),x;c.onsuccess=()=>{x=s.transaction(wu,"readwrite");let h=x.objectStore(wu).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a});h.onsuccess=()=>n({modelArtifactsInfo:a}),h.onerror=g=>{u=l.objectStore(k2);let m=u.delete(this.modelPath);m.onsuccess=()=>(s.close(),o(h.error)),m.onerror=b=>(s.close(),o(h.error))}},c.onerror=f=>(s.close(),o(c.error)),l.oncomplete=()=>{x==null?s.close():x.oncomplete=()=>s.close()}}},i.onerror=s=>o(i.error)})}};U0.URL_SCHEME="indexeddb://";var VC=r=>we().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(U0.URL_SCHEME)?ZU(r.slice(U0.URL_SCHEME.length)):null;_r.registerSaveRouter(VC);_r.registerLoadRouter(VC);function ZU(r){return new U0(r)}function JU(r){return r.startsWith(U0.URL_SCHEME)?r.slice(U0.URL_SCHEME.length):r}var U5=class{constructor(){this.indexedDB=UC()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(L5,P5);n.onupgradeneeded=()=>B5(n),n.onsuccess=()=>{let o=n.result,i=o.transaction(k2,"readonly"),a=i.objectStore(k2).getAll();a.onsuccess=()=>{let l={};for(let u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),t(a.error)),i.oncomplete=()=>o.close()},n.onerror=o=>t(n.error)})}async removeModel(e){return e=JU(e),new Promise((t,n)=>{let o=this.indexedDB.open(L5,P5);o.onupgradeneeded=()=>B5(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(k2,"readwrite"),a=s.objectStore(k2),l=a.get(e),u;l.onsuccess=()=>{if(l.result==null)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let c=a.delete(e),x=()=>{u=i.transaction(wu,"readwrite");let h=u.objectStore(wu).delete(e);h.onsuccess=()=>t(l.result.modelArtifactsInfo),h.onerror=g=>n(l.error)};c.onsuccess=x,c.onerror=f=>(x(),i.close(),n(l.error))}},l.onerror=c=>(i.close(),n(l.error)),s.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},o.onerror=i=>n(o.error)})}};p();var V0="/",Zc="tensorflowjs_models",GC="info",QU="model_topology",eV="weight_specs",tV="weight_data",rV="model_metadata";function WC(r){return{info:[Zc,r,GC].join(V0),topology:[Zc,r,QU].join(V0),weightSpecs:[Zc,r,eV].join(V0),weightData:[Zc,r,tV].join(V0),modelMetadata:[Zc,r,rV].join(V0)}}function nV(r){let e=r.split(V0);if(e.length<3)throw new Error(`Invalid key format: ${r}`);return e.slice(1,e.length-1).join(V0)}function oV(r){return r.startsWith(G0.URL_SCHEME)?r.slice(G0.URL_SCHEME.length):r}var G0=class{constructor(e){if(!we().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=WC(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),o=ca(e);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,FC(e.weightData));let i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return e.signature!=null&&(i.signature=e.signature),e.userDefinedMetadata!=null&&(i.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(i.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=o;let i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){let a=JSON.parse(i);t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,a.signature!=null&&(t.signature=a.signature),a.userDefinedMetadata!=null&&(t.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(t.modelInitializer=a.modelInitializer)}let s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=MC(s),t}};G0.URL_SCHEME="localstorage://";var qC=r=>we().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(G0.URL_SCHEME)?iV(r.slice(G0.URL_SCHEME.length)):null;_r.registerSaveRouter(qC);_r.registerLoadRouter(qC);function iV(r){return new G0(r)}var V5=class{constructor(){V(we().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=Zc+V0,n=V0+GC;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(t)&&i.endsWith(n)){let s=nV(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=oV(e);let t=WC(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),n}};p();var Jc="://",no=class{constructor(){this.managers={}}static getInstance(){return no.instance==null&&(no.instance=new no),no.instance}static registerManager(e,t){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Jc)&&(e=e.slice(0,e.indexOf(Jc))),V(e.length>0,()=>"scheme must not be an empty string.");let n=no.getInstance();V(n.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=this.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}};function dd(r){if(r.indexOf(Jc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${no.getSchemes().join(",")}`);return{scheme:r.split(Jc)[0],path:r.split(Jc)[1]}}async function HC(r,e,t=!1){V(r!==e,()=>`Old path and new path are the same: '${r}'`);let n=_r.getLoadHandlers(r);V(n.length>0,()=>`Copying failed because no load handler is found for source URL ${r}.`),V(n.length<2,()=>`Copying failed because more than one (${n.length}) load handlers for source URL ${r}.`);let o=n[0],i=_r.getSaveHandlers(e);V(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),V(i.length<2,()=>`Copying failed because more than one (${n.length}) save handlers for destination URL ${e}.`);let s=i[0],a=dd(r).scheme,l=dd(r).path,u=a===dd(r).scheme,c=await o.load();t&&u&&await no.getManager(a).removeModel(l);let x=await s.save(c);return t&&!u&&await no.getManager(a).removeModel(l),x.modelArtifactsInfo}async function KC(){let r=no.getSchemes(),e={};for(let t of r){let n=await no.getManager(t).listModels();for(let o in n){let i=t+Jc+o;e[i]=n[o]}}return e}async function jC(r){let e=dd(r);return no.getManager(e.scheme).removeModel(e.path)}async function XC(r,e){return HC(r,e,!1)}async function YC(r,e){return HC(r,e,!0)}var ZC=class{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}};if(we().get("IS_BROWSER")){we().setPlatform("browser",new ZC);try{no.registerManager(G0.URL_SCHEME,new V5)}catch{}try{no.registerManager(U0.URL_SCHEME,new U5)}catch{}}p();var sV={importFetch:()=>JC()},G5;var eN=class{constructor(){this.util=QC(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return we().global.fetch!=null?we().global.fetch(e,t):(G5==null&&(G5=sV.importFetch()),G5(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}};we().get("IS_NODE")&&we().setPlatform("node",new eN);p();function it(r,e="float32",t){return e=e||"float32",Qx(r),new Jt(r,e,t)}p();function aV(r,e){let t=O(r,"x","cast");if(!d5(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");let n={x:t},o={dtype:e};return G.runKernel(Gi,n,o)}var Le=U({cast_:aV});p();function lV(r){let t={x:O(r,"x","clone","string_or_numeric")};return G.runKernel(Wi,t)}var $o=U({clone_:lV});p();function gd(r,e=!1){console.log(r.toString(e))}$5();var uV={buffer:it,cast:Le,clone:$o,print:gd};kC(uV);p();var Sn={};Pt(Sn,{browserFiles:()=>nN,browserHTTPRequest:()=>sN,concatenateArrayBuffers:()=>Yc,copyModel:()=>XC,decodeWeights:()=>hd,encodeWeights:()=>OC,fromMemory:()=>lN,getLoadHandlers:()=>BC,getModelArtifactsInfoForJSON:()=>ca,getSaveHandlers:()=>PC,http:()=>vd,isHTTPScheme:()=>yd,listModels:()=>KC,loadWeights:()=>oN,moveModel:()=>YC,registerLoadRouter:()=>LC,registerSaveRouter:()=>zC,removeModel:()=>jC,weightsLoaderFactory:()=>H5,withSaveHandler:()=>uN});p();p();var cV="model",pV=".json",xV=".weights.bin";function tN(r){return new Promise(e=>setTimeout(e)).then(r)}var E2=class{constructor(e){if(!we().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(E2.URL_SCHEME)&&(e=e.slice(E2.URL_SCHEME.length)),(e==null||e.length===0)&&(e=cV),this.modelTopologyFileName=e+pV,this.weightDataFileName=e+xV}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};e.signature!=null&&(o.signature=e.signature),e.userDefinedMetadata!=null&&(o.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(o.modelInitializer=e.modelInitializer);let i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor;if(s.download=this.modelTopologyFileName,s.href=i,await tN(()=>s.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;a.download=this.weightDataFileName,a.href=t,await tN(()=>a.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ca(e)}}}};E2.URL_SCHEME="downloads://";var rN=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.files=e}async load(){let e=this.files[0],t=this.files.slice(1);return new Promise((n,o)=>{let i=new FileReader;i.onload=s=>{let a=JSON.parse(s.target.result),l=a.modelTopology;if(l==null){o(new Error(`modelTopology field is missing from file ${e.name}`));return}t.length===0&&n({modelTopology:l});let u=a.weightsManifest;if(u==null){o(new Error(`weightManifest field is missing from file ${e.name}`));return}let c;try{c=this.checkManifestAndWeightFiles(u,t)}catch(g){o(g);return}let x=[],f=[],h=[];u.forEach(g=>{g.paths.forEach(m=>{f.push(m),h.push(null)}),x.push(...g.weights)}),u.forEach(g=>{g.paths.forEach(m=>{let b=new FileReader;b.onload=v=>{let w=v.target.result,C=f.indexOf(m);if(h[C]=w,h.indexOf(null)===-1){let N={modelTopology:l,weightSpecs:x,weightData:Yc(h),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy};a.signature!=null&&(N.signature=a.signature),a.userDefinedMetadata!=null&&(N.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(N.modelInitializer=a.modelInitializer),n(N)}},b.onerror=v=>o(`Failed to weights data from file of path '${m}'.`),b.readAsArrayBuffer(c[m])})})},i.onerror=s=>o(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(e)})}checkManifestAndWeightFiles(e,t){let n=[],o=t.map(s=>z5(s.name)),i={};for(let s of e)s.paths.forEach(a=>{let l=z5(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),o.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);i[a]=t[o.indexOf(l)]});if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return i}},fV=r=>we().getBool("IS_BROWSER")&&!Array.isArray(r)&&r.startsWith(E2.URL_SCHEME)?mV(r.slice(E2.URL_SCHEME.length)):null;_r.registerSaveRouter(fV);function mV(r="model"){return new E2(r)}function nN(r){return new rN(r)}p();p();p();function W5(r,e,t,n){s(r),t=t??0,n=n??1,a(t,n);let o=0,i=l=>(l.then(u=>{let c=t+ ++o/r.length*(n-t);return e(c),u}),l);function s(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),V(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(r.map(i))}async function q5(r,e){e==null&&(e={});let t=e.fetchFunc==null?we().platform.fetch:e.fetchFunc,n=r.map(x=>t(x,e.requestInit,{isBinary:!0})),o=0,i=.5,a=(e.onProgress==null?await Promise.all(n):await W5(n,e.onProgress,o,i)).map(x=>x.arrayBuffer()),l=.5,u=1;return e.onProgress==null?await Promise.all(a):await W5(a,e.onProgress,l,u)}async function oN(r,e="",t,n){return H5(s=>q5(s,{requestInit:n}))(r,e,t)}function H5(r){return async(e,t="",n)=>{let o=e.map(()=>!1),i={},s=n!=null?n.map(()=>!1):[],a=[];if(e.forEach((h,g)=>{let m=0;h.weights.forEach(b=>{let v="quantization"in b?b.quantization.dtype:b.dtype,w=cf[v]*sr(b.shape),C=()=>{o[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:b,groupOffset:m,sizeBytes:w})};n!=null?n.forEach((N,_)=>{N===b.name&&(C(),s[_]=!0)}):C(),a.push(b.name),m+=w})}),!s.every(h=>h)){let h=n.filter((g,m)=>!s[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((h,g,m)=>(g&&h.push(m),h),[]),u=[];l.forEach(h=>{e[h].paths.forEach(g=>{let m=t+(t.endsWith("/")?"":"/")+g;u.push(m)})});let c=await r(u),x={},f=0;return l.forEach(h=>{let g=e[h].paths.length,m=0;for(let N=0;N<g;N++)m+=c[f+N].byteLength;let b=new ArrayBuffer(m),v=new Uint8Array(b),w=0;for(let N=0;N<g;N++){let _=new Uint8Array(c[f+N]);v.set(_,w),w+=_.byteLength}i[h].forEach(N=>{let _=b.slice(N.groupOffset,N.groupOffset+N.sizeBytes),E=hd(_,[N.manifestEntry]);for(let T in E)x[T]=E[T]}),f+=g}),x}}var hV="application/octet-stream",dV="application/json",bd=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(V(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=we().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};e.signature!=null&&(o.signature=e.signature),e.userDefinedMetadata!=null&&(o.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(o.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(o)],{type:dV}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:hV}),"model.weights.bin");let i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:ca(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let m=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?m+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":m+=" Please make sure the server is serving valid JSON for this request.",new Error(m)}let n=t.modelTopology,o=t.weightsManifest,i=t.generatedBy,s=t.convertedBy,a=t.format,l=t.signature,u=t.userDefinedMetadata;if(n==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let c,x;o!=null&&([c,x]=await this.loadWeights(o));let f={modelTopology:n,weightSpecs:c,weightData:x,generatedBy:i,convertedBy:s,format:a};l!=null&&(f.signature=l),u!=null&&(f.userDefinedMetadata=u);let h=t.modelInitializer;return h&&(f.modelInitializer=h),f}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,o]=gV(t),i=this.weightPathPrefix||n,s=[];for(let c of e)s.push(...c.weights);let a=[],l=[];for(let c of e)for(let x of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(x)):a.push(i+x+o);this.weightUrlConverter&&a.push(...await Promise.all(l));let u=await q5(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[s,Yc(u)]}};bd.URL_SCHEME_REGEX=/^https?:\/\//;function gV(r){let e=r.lastIndexOf("/"),t=r.lastIndexOf("?"),n=r.substring(0,e),o=t>e?r.substring(t):"";return[n+"/",o]}function yd(r){return r.match(bd.URL_SCHEME_REGEX)!=null}var iN=(r,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(r)?t=r.every(n=>yd(n)):t=yd(r),t)return vd(r,e)}return null};_r.registerSaveRouter(iN);_r.registerLoadRouter(iN);function vd(r,e){return new bd(r,e)}function sN(r,e){return vd(r,e)}p();var wd=class{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}},aN=class{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}};function lN(r,e,t,n){return arguments.length===1?r.modelTopology!=null||r.weightSpecs!=null?new wd(r):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wd({modelTopology:r})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wd({modelTopology:r,weightSpecs:e,weightData:t,trainingConfig:n}))}function uN(r){return new aN(r)}var K5={};Pt(K5,{confusionMatrix:()=>cN});p();p();p();function yV(r,e,t=!1,n=!1){let o=O(r,"a","matMul"),i=O(e,"b","matMul");[o,i]=It(o,i);let s={a:o,b:i},a={transposeA:t,transposeB:n};return G.runKernel(Ja,s,a)}var kt=U({matMul_:yV});p();function bV(r,e,t=1,n=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let i={indices:O(r,"indices","oneHot","int32")},s={depth:e,onValue:t,offValue:n};return G.runKernel(w0,i,s)}var fi=U({oneHot_:bV});p();function vV(r,e){let t=O(r,"x","transpose");if(e==null&&(e=t.shape.map((i,s)=>s).reverse()),V(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of perm ${e}.`),e.forEach(i=>{V(i>=0&&i<t.rank,()=>`All entries in 'perm' must be between 0 and ${t.rank-1} but got ${e}`)}),t.rank<=1)return t.clone();let n={x:t},o={perm:e};return G.runKernel(F0,n,o)}var Rt=U({transpose_:vV});function wV(r,e,t){let n=O(r,"labels","confusionMatrix"),o=O(e,"predictions","confusionMatrix");V(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),V(n.rank===1,()=>`Expected the rank of labels to be 1, but got ${n.rank}`),V(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),V(n.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${n.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),V(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);let i=fi(Le(n,"int32"),t),s=fi(Le(o,"int32"),t),a=Rt(i),l=kt(a,s);return Le(l,"int32")}var cN=U({confusionMatrix_:wV});var pf={};Pt(pf,{fromPixels:()=>_V,toPixels:()=>NV});p();p();function Cd(r,e,t){if(jo(r),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let n=Fn(r,t);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ro(r,e,n,t)}var Qc;function CV(r,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(r==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,n=!1,o=!1,i=!1,s=!1,a=!1;if(r.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&r instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement)i=!0;else if(r.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&r instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${r.constructor.name}`);if(o&&o&&r.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(qc(Gc,G.backendName)!=null){let g={pixels:r},m={numChannels:e};return G.runKernel(Gc,g,m)}let[u,c]=o?[r.videoWidth,r.videoHeight]:[r.width,r.height],x;s?x=r.getContext("2d").getImageData(0,0,u,c).data:n||t?x=r.data:(i||o||a)&&(Qc==null&&(Qc=document.createElement("canvas").getContext("2d")),Qc.canvas.width=u,Qc.canvas.height=c,Qc.drawImage(r,0,0,u,c),x=Qc.getImageData(0,0,u,c).data);let f;if(e===4)f=new Int32Array(x);else{let g=u*c;f=new Int32Array(g*e);for(let m=0;m<g;m++)for(let b=0;b<e;++b)f[m*e+b]=x[m*4+b]}return Cd(f,[c,u,e],"int32")}async function NV(r,e){let t=O(r,"img","toPixels");if(!(r instanceof Ct)){let u=t;t=Le(u,"int32"),u.dispose()}if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let[n,o]=t.shape.slice(0,2),i=t.rank===2?1:t.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`);let s=await t.data(),a=t.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*n*4);for(let u=0;u<n*o;++u){let c=[0,0,0,255];for(let f=0;f<i;f++){let h=s[u*i+f];if(t.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(t.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(c[0]=h*a,c[1]=h*a,c[2]=h*a):c[f]=h*a}let x=u*4;l[x+0]=Math.round(c[0]),l[x+1]=Math.round(c[1]),l[x+2]=Math.round(c[2]),l[x+3]=Math.round(c[3])}if(e!=null){e.width=o,e.height=n;let u=e.getContext("2d"),c=new ImageData(l,o,n);u.putImageData(c,0,0)}return t!==r&&t.dispose(),l}var _V=U({fromPixels_:CV});var j5={};Pt(j5,{prepareAndValidate:()=>pN});p();function pN(r,e){let t=r.shape.length,n=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(n<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[n-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[n-1]} vs. ${t}`);if(sr(r.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${r.shape}.`);let o=e.shape,i=o[o.length-1],s=1;for(let x=0;x<o.length-1;++x)s*=o[x];let a=r.shape,l=o.slice();l.pop();let u=1;for(let x=i;x<t;++x)u*=a[x],l.push(a[x]);let c=[...hs(r.shape).map(x=>x/u),1].slice(0,i);return[l,s,u,c]}var _d={};Pt(_d,{calculateShapes:()=>xN,validateInput:()=>Nd,validateUpdateShape:()=>X5});p();function X5(r,e,t){let n=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${r}, sliceDim: ${n}, and batchDim: ${o}.`;if(t.rank<o)throw new Error(i+` update.rank < ${o}. `);if(r.length<n+(t.rank-o))throw new Error(i+` Output shape length < ${n+(t.rank-o)}`);if(t.rank!==o+r.length-n)throw new Error(i+` update.rank != ${o+r.length-n}`);for(let s=0;s<o;++s)if(t.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${t.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<t.rank-o;++s)if(t.shape[s+o]!==r[s+n])throw new Error(i+` updates.shape[${s+o}] (${t.shape[s+o]}) != shape[${s+o}] (${r[s+o]})`)}function Nd(r,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(r.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${r.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(r.size===0)throw new Error(`Updates specified for empty output. updates shape: ${r.shape}`)}X5(t,e,r)}function xN(r,e,t){let n=e.shape.length,o=n>1?e.shape[n-1]:1,i=t.length,s=1;for(let x=o;x<i;++x)s*=t[x];let a=o<1?1:o,l=sr(e.shape)/a,u=[...hs(t.slice(0,o)),1],c=sr(t);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:u,outputSize:c}}var Tn={};Pt(Tn,{assertParamsValid:()=>SV,computeFlatOffset:()=>IV,computeOutShape:()=>fN,getNormalizedAxes:()=>gN,isSliceContinous:()=>TV,maskToAxes:()=>Sd,parseSliceParams:()=>Y5,sliceInfo:()=>kV,startForAxis:()=>wN,startIndicesWithElidedDims:()=>yN,stopForAxis:()=>CN,stopIndicesWithElidedDims:()=>bN,stridesForAxis:()=>vN,stridesWithElidedDims:()=>mN});p();function SV(r,e,t){let n=r.shape.length;V(n===e.length,()=>`Error in slice${n}D: Length of begin ${e} must match the rank of the array (${n}).`),V(n===t.length,()=>`Error in slice${n}D: Length of size ${t} must match the rank of the array (${n}).`);for(let o=0;o<n;++o)V(e[o]+t[o]<=r.shape[o],()=>`Error in slice${n}D: begin[${o}] + size[${o}] (${e[o]+t[o]}) would overflow input.shape[${o}] (${r.shape[o]})`)}function Sd(r){let e=[],t=0;for(;r>0;)r&1&&e.push(t),r/=2,t++;return e}function fN(r,e,t){let n=[];for(let o=0;o<r.length;o++)n[o]=Math.ceil((e[o]-r[o])/t[o]);return n}function mN(r,e,t,n){let o=[...r];for(let i=o.length;i<n.length;i++)o.push(1);for(let i=0;i<t;i++)i===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function hN(r,e,t){return t<=r?t:t-(e-1)}function dN(r,e){let t=[];for(let n=0;n<r;n++)t.push(e+n);return t}function gN(r,e,t,n,o,i,s,a,l){let u=r.length,c=new Array(u),x=new Array(u),f=new Array(u);if(e.length&&t>0){let h=e[0],g=t+1;c=yN(s,h,g,n,r),x=bN(a,h,g,o,r),f=mN(i,h,g,r)}else for(let h=0;h<u;h++)c[h]=wN(s,n,i,r,h,l),x[h]=CN(a,o,i,r,h,l),f[h]=vN(i,h,l);return{begin:c,end:x,strides:f}}function yN(r,e,t,n,o){let i=[...o],s=dN(t,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=hN(e,t,a),u=n[l];r&1<<l&&(u=0),i[a]=u}return i}function bN(r,e,t,n,o){let i=[...o],s=dN(t,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=hN(e,t,a),u=n[l];r&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=zc(0,i[a],o[a])}return i}function vN(r,e,t){let n=r[e];return(t&1<<e||n==null)&&(n=1),n}function wN(r,e,t,n,o,i){let s=e[o],a=t[o]||1;(r&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=n[o];return s<0&&(s+=l),s=zc(0,s,l-1),s}function CN(r,e,t,n,o,i){let s=e[o],a=t[o]||1;(r&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=n[o];return s<0&&(s+=l),a>0?s=zc(0,s,l):s=zc(-1,s,l-1),s}function TV(r,e,t){let n=t.length;for(let o=0;o<t.length;o++)if(t[o]>1){n=o;break}for(let o=n+1;o<t.length;o++)if(e[o]>0||t[o]!==r[o])return!1;return!0}function IV(r,e){let t=r.length>0?r[r.length-1]:1;for(let n=0;n<r.length-1;n++)t+=r[n]*e[n];return t}function Y5(r,e,t){let n,o=r.shape.length;typeof e=="number"?n=[e,...new Array(o-1).fill(0)]:e.length<o?n=e.concat(new Array(o-e.length).fill(0)):n=e.slice(),n.forEach(s=>{V(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return t==null?i=new Array(o).fill(-1):typeof t=="number"?i=[t,...new Array(o-1).fill(-1)]:t.length<o?i=t.concat(new Array(o-t.length).fill(-1)):i=t,i=i.map((s,a)=>s>=0?s:(V(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),r.shape[a]-n[a])),[n,i]}function kV(r,e,t,n,o,i,s,a,l){let u=e.slice(),c=t.slice(),x=n;n==null&&(x=new Array(u.length));let f=Sd(s);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(s!==0&&a!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(s!==0&&l!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");let h=r.length-u.length,g=Sd(a),m=r.slice();g.forEach(T=>{u[T]=0,c[T]=1,m.splice(T,0,1)});let{begin:b,end:v,strides:w}=gN(m,f,h,u,c,x,o,i,s);u=b,c=v,x=w;let C=Sd(l);C.forEach(T=>{c[T]=u[T]+1,x[T]=1});let N=fN(u,c,x),_=N.filter((T,k)=>C.indexOf(k)===-1);return{nonStrided:x.every(T=>T===1),$begin:u,$end:c,$strides:x,size:N,newShape:m,outShape:_}}var Re={};Pt(Re,{Serializable:()=>Td,SerializationMap:()=>W0,registerClass:()=>ho});p();var Td=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},W0=class{constructor(){this.classNameMap={}}static getMap(){return W0.instance==null&&(W0.instance=new W0),W0.instance}static register(e){W0.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function ho(r){V(r.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof r.className=="string",()=>"className is required to be a string, but got type "+typeof r.className),V(r.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),W0.register(r)}var eg={};Pt(eg,{TEST_EPSILON_FLOAT16:()=>NN,encodeStrings:()=>_N,expectArrayBuffersEqual:()=>FV,expectArraysClose:()=>AV,expectArraysEqual:()=>RV,expectNumbersClose:()=>$V,expectPromiseToFail:()=>DV,expectValuesInRange:()=>OV,testEpsilon:()=>J5});p();var EV=.001,NN=.1;function AV(r,e,t){return t==null&&(t=J5()),Z5(r,e,(n,o)=>Q5(n,o,t))}function J5(){return G.backend.floatPrecision()===32?EV:NN}function Z5(r,e,t){let n=!0;if((mn(r)||mn(e))&&(n=!1),mn(r)&&mn(e)&&(n=!0),n){let s=r.constructor.name,a=e.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(r)&&Array.isArray(e)){let s=Fn(r),a=Fn(e);if(!to(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=mn(r)?r:Ui(r),i=mn(e)?e:Ui(e);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!t(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}}function DV(r,e){r().then(()=>e.fail(),()=>e())}function RV(r,e){let t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Vi(r)||Vi(r[0])||Vi(e)||Vi(e[0])?Z5(r,t,(n,o)=>n==o):Z5(r,e,(n,o)=>Q5(n,o,0))}function $V(r,e,t){if(t==null&&(t=J5()),!Q5(r,e,t))throw new Error(`Numbers differ: actual === ${r}, expected === ${e}`)}function Q5(r,e,t){return!isFinite(r)&&!isFinite(e)?!0:!(isNaN(r)||isNaN(e)||Math.abs(r-e)>t)}function OV(r,e,t){for(let n=0;n<r.length;n++)if(r[n]<e||r[n]>t)throw new Error(`Value out of range:${r[n]} low: ${e}, high: ${t}`)}function FV(r,e){expect(new Float32Array(r)).toEqual(new Float32Array(e))}function _N(r){for(let e=0;e<r.length;e++){let t=r[e];Array.isArray(t)?_N(t):r[e]=S2(t)}return r}p();var Id="3.1.0";p();p();function MV(){we().set("PROD",!0)}function zV(){we().set("DEBUG",!0)}function LV(){we().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function SN(r){we().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(r+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}EC(SN);function PV(){G.disposeVariables()}function Oo(){return G}function ep(){return G.memory()}function BV(r){return G.profile(r)}function pe(r,e){return G.tidy(r,e)}function ct(r){uf(r).forEach(t=>t.dispose())}function Er(r){return G.keep(r)}function UV(r){return G.time(r)}function TN(r){return G.setBackend(r)}function VV(){return G.ready()}function GV(){return G.backendName}function WV(r){G.removeBackend(r)}function qV(r){return G.findBackend(r)}function HV(r){return G.findBackendFactory(r)}function xf(r,e,t=1){return G.registerBackend(r,e,t)}function tg(){return G.backend}function KV(r,e){we().setPlatform(r,e)}p();function jV(r,e){let t=O(r,"a","add"),n=O(e,"b","add");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(xi,o)}var $e=U({add_:jV});p();p();function XV(r,e){let t=O(r,"a","floorDiv"),n=O(e,"b","floorDiv");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel($s,o)}var A2=U({floorDiv_:XV});function YV(r,e){let t=O(r,"a","div"),n=O(e,"b","div");if([t,n]=It(t,n),t.dtype==="int32"&&n.dtype==="int32")return A2(t,n);let o={a:t,b:n},i={};return G.runKernel(Is,o,i)}var He=U({div_:YV});p();function ZV(r,e){let t=O(r,"a","mul"),n=O(e,"b","mul");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(Gs,o)}var re=U({mul_:ZV});p();p();function JV(r){let e=O(r,"x","abs");if(e.dtype==="complex64"){let t={x:e};return G.runKernel(e0,t)}else{let t={x:e};return G.runKernel(Ha,t)}}var gr=U({abs_:JV});p();function QV(r){let t={x:O(r,"x","acos")};return G.runKernel(ds,t)}var tp=U({acos_:QV});p();function eG(r){let t={x:O(r,"x","acosh")};return G.runKernel(gs,t)}var rp=U({acosh_:eG});p();function tG(r){V(Array.isArray(r),()=>"The argument passed to tf.addN() must be a list of tensors"),V(r.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${r.length}`);let e=r.map((o,i)=>O(o,`tensors${i}`,"addN")),t=e[0];e.forEach(o=>{if(o.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!to(o.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let n=e;return G.runKernel(Ka,n)}var kd=U({addN_:tG});p();function rG(r,e=null,t=!1){let o={x:O(r,"x","all","bool")},i={axis:e,keepDims:t};return G.runKernel(Al,o,i)}var D2=U({all_:rG});p();function nG(r,e=null,t=!1){let o={x:O(r,"x","any","bool")},i={axis:e,keepDims:t};return G.runKernel(Dl,o,i)}var q0=U({any_:nG});p();function oG(r,e=0){let n={x:O(r,"x","argMax")},o={axis:e};return G.runKernel(ja,n,o)}var H0=U({argMax_:oG});p();function iG(r,e=0){let n={x:O(r,"x","argMin")},o={axis:e};return G.runKernel(Xa,n,o)}var np=U({argMin_:iG});p();function sG(r){let t={x:O(r,"x","asin")};return G.runKernel(ys,t)}var op=U({asin_:sG});p();function aG(r){let t={x:O(r,"x","asinh")};return G.runKernel(bs,t)}var ip=U({asinh_:aG});p();function lG(r){let t={x:O(r,"x","atan")};return G.runKernel(vs,t)}var sp=U({atan_:lG});p();function uG(r,e){let t=O(r,"a","atan2"),n=O(e,"b","atan2");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(Cs,o)}var ap=U({atan2_:uG});p();function cG(r){let t={x:O(r,"x","atanh")};return G.runKernel(ws,t)}var lp=U({atanh_:cG});p();p();function pG(r,e,t,n,o="NHWC",i){let s=r[3],a=[...e,s],l=kN(o);return Nu(r,a,t,i,n,null,null,l)}function ng(r,e,t,n,o,i,s="channelsLast"){let[a,l]=Ed(e),u;if(s==="channelsLast")u=[a,l,r[3],r[3]];else if(s==="channelsFirst")u=[a,l,r[1],r[1]];else throw new Error(`Unknown dataFormat ${s}`);return Nu(r,u,t,n,o,i,!1,s)}function xG(r,e,t,n,o,i,s="NDHWC"){let[a,l,u]=rg(e),c,x;if(s==="NDHWC")x="channelsLast",c=[a,l,u,r[4],r[4]];else if(s==="NCDHW")x="channelsFirst",c=[a,l,u,r[1],r[1]];else throw new Error(`Unknown dataFormat ${s}`);return IN(r,c,t,n,o,!1,x,i)}function Nu(r,e,t,n,o,i,s=!1,a="channelsLast"){let[l,u,c,x]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,x]=r;else if(a==="channelsFirst")[l,x,u,c]=r;else throw new Error(`Unknown dataFormat ${a}`);let[f,h,,g]=e,[m,b]=Ed(t),[v,w]=Ed(n),C=up(f,v),N=up(h,w),{padInfo:_,outHeight:E,outWidth:T}=hG(o,u,c,m,b,C,N,i,a),k=s?g*x:g,D;return a==="channelsFirst"?D=[l,k,E,T]:a==="channelsLast"&&(D=[l,E,T,k]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:x,outHeight:E,outWidth:T,outChannels:k,padInfo:_,strideHeight:m,strideWidth:b,filterHeight:f,filterWidth:h,effectiveFilterHeight:C,effectiveFilterWidth:N,dilationHeight:v,dilationWidth:w,inShape:r,outShape:D,filterShape:e}}function IN(r,e,t,n,o,i=!1,s="channelsLast",a){let[l,u,c,x,f]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,x,f]=r;else if(s==="channelsFirst")[l,f,u,c,x]=r;else throw new Error(`Unknown dataFormat ${s}`);let[h,g,m,,b]=e,[v,w,C]=rg(t),[N,_,E]=rg(n),T=up(h,N),k=up(g,_),D=up(m,E),{padInfo:R,outDepth:K,outHeight:M,outWidth:j}=dG(o,u,c,x,v,w,C,T,k,D,a),X=i?b*f:b,Z;return s==="channelsFirst"?Z=[l,X,K,M,j]:s==="channelsLast"&&(Z=[l,K,M,j,X]),{batchSize:l,dataFormat:s,inDepth:u,inHeight:c,inWidth:x,inChannels:f,outDepth:K,outHeight:M,outWidth:j,outChannels:X,padInfo:R,strideDepth:v,strideHeight:w,strideWidth:C,filterDepth:h,filterHeight:g,filterWidth:m,effectiveFilterDepth:T,effectiveFilterHeight:k,effectiveFilterWidth:D,dilationDepth:N,dilationHeight:_,dilationWidth:E,inShape:r,outShape:Z,filterShape:e}}function fG(r,e,t,n,o){n==null&&(n=og(r,e,t));let i=r[0],s=r[1],a=Cu((i-e+2*n)/t+1,o),l=Cu((s-e+2*n)/t+1,o);return[a,l]}function mG(r,e,t,n,o,i){o==null&&(o=og(r,e,n));let s=r[0],a=r[1],l=r[2],u=Cu((s-e+2*o)/n+1,i),c=Cu((a-e+2*o)/n+1,i),x=Cu((l-e+2*o)/n+1,i);return[u,c,x,t]}function og(r,e,t,n=1){let o=up(e,n);return Math.floor((r[0]*(t-1)-t+o)/2)}function Ed(r){return typeof r=="number"?[r,r,r]:r.length===2?[r[0],r[1],1]:r}function rg(r){return typeof r=="number"?[r,r,r]:r}function up(r,e){return e<=1?r:r+(r-1)*(e-1)}function hG(r,e,t,n,o,i,s,a,l){let u,c,x;if(typeof r=="number"){u={top:r,bottom:r,left:r,right:r,type:r===0?"VALID":"NUMBER"};let h=fG([e,t],i,n,r,a);c=h[0],x=h[1]}else if(r==="same"){c=Math.ceil(e/n),x=Math.ceil(t/o);let f=Math.max(0,(c-1)*n+i-e),h=Math.max(0,(x-1)*o+s-t),g=Math.floor(f/2),m=f-g,b=Math.floor(h/2),v=h-b;u={top:g,bottom:m,left:b,right:v,type:"SAME"}}else if(r==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/n),x=Math.ceil((t-s+1)/o);else if(typeof r=="object"){let f=l==="channelsLast"?r[1][0]:r[2][0],h=l==="channelsLast"?r[1][1]:r[2][1],g=l==="channelsLast"?r[2][0]:r[3][0],m=l==="channelsLast"?r[2][1]:r[3][1];u={top:f,bottom:h,left:g,right:m,type:f===0&&h===0&&g===0&&m===0?"VALID":"EXPLICIT"},c=Cu((e-i+f+h)/n+1,a),x=Cu((t-s+g+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${r}`);return{padInfo:u,outHeight:c,outWidth:x}}function dG(r,e,t,n,o,i,s,a,l,u,c){let x,f,h,g;if(typeof r=="number"){x={top:r,bottom:r,left:r,right:r,front:r,back:r,type:r===0?"VALID":"NUMBER"};let b=mG([e,t,n,1],a,1,o,r,c);f=b[0],h=b[1],g=b[2]}else if(r==="same"){f=Math.ceil(e/o),h=Math.ceil(t/i),g=Math.ceil(n/s);let m=(f-1)*o+a-e,b=(h-1)*i+l-t,v=(g-1)*s+u-n,w=Math.floor(m/2),C=m-w,N=Math.floor(b/2),_=b-N,E=Math.floor(v/2),T=v-E;x={top:N,bottom:_,left:E,right:T,front:w,back:C,type:"SAME"}}else if(r==="valid")x={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-a+1)/o),h=Math.ceil((t-l+1)/i),g=Math.ceil((n-u+1)/s);else throw Error(`Unknown padding parameter: ${r}`);return{padInfo:x,outDepth:f,outHeight:h,outWidth:g}}function Cu(r,e){if(!e)return Math.trunc(r);switch(e){case"round":return Math.round(r);case"ceil":return Math.ceil(r);case"floor":return Math.floor(r);default:throw new Error(`Unknown roundingMode ${e}`)}}function Yo(r){let[e,t,n]=Ed(r);return e===1&&t===1&&n===1}function In(r,e){return Yo(r)||Yo(e)}function kN(r){if(r==="NHWC")return"channelsLast";if(r==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${r}`)}p();function gG(r,e){let n={x:O(r,"x","reshape","string_or_numeric")},o={shape:e};return G.runKernel(S0,n,o)}var ie=U({reshape_:gG});function yG(r,e,t,n,o){let i=O(r,"x","avgPool","float32"),s=1;V(In(t,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),o!=null&&V(Xt(n),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${o} but got pad ${n}.`);let u={x:a},c={filterSize:e,strides:t,pad:n,dimRoundingMode:o},x=G.runKernel(Ya,u,c);return x=Le(x,i.dtype),l?ie(x,[x.shape[1],x.shape[2],x.shape[3]]):x}var pa=U({avgPool_:yG});p();function bG(r,e,t,n,o,i="NDHWC"){let s=O(r,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),V(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),o!=null&&V(Xt(n),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${n}.`);let u={x:a},c={filterSize:e,strides:t,pad:n,dimRoundingMode:o,dataFormat:i},x=G.runKernel(Za,u,c);return x=Le(x,a.dtype),l?ie(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}var cp=U({avgPool3d_:bG});p();p();function vG(r,e=0){V(r.length>=1,()=>"Pass at least one tensor to concat");let t=B0(r,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),t.length===1)return $o(t[0]);let n=t,o={axis:e};return G.runKernel(t0,n,o)}var Mt=U({concat_:vG});p();function wG(r){let t={x:O(r,"x","sigmoid")};return G.runKernel(ea,t)}var Hn=U({sigmoid_:wG});p();function CG(r,e,t){let n=O(r,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");let o={x:n},i={begin:e,size:t};return G.runKernel(A0,o,i)}var ht=U({slice_:CG});p();function NG(r){let t={x:O(r,"x","tanh")};return G.runKernel(sa,t)}var Hi=U({tanh_:NG});function _G(r,e,t,n,o,i){let s=O(r,"forgetBias","basicLSTMCell"),a=O(e,"lstmKernel","basicLSTMCell"),l=O(t,"lstmBias","basicLSTMCell"),u=O(n,"data","basicLSTMCell"),c=O(o,"c","basicLSTMCell"),x=O(i,"h","basicLSTMCell"),f=Mt([u,x],1),h=kt(f,a),g=$e(h,l),m=g.shape[0],b=g.shape[1]/4,v=[m,b],w=ht(g,[0,0],v),C=ht(g,[0,b],v),N=ht(g,[0,b*2],v),_=ht(g,[0,b*3],v),E=$e(re(Hn(w),Hi(C)),re(c,Hn($e(s,N)))),T=re(Hi(E),Hn(_));return[E,T]}var EN=U({basicLSTMCell_:_G});p();function SG(r,e,t){let n=O(r,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);V(n.rank>=1+e.length,()=>`input rank is ${n.rank} but should be > than blockShape.length ${e.length}`),V(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),V(n.shape[0]%o===0,()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);let i={x:n},s={blockShape:e,crops:t};return G.runKernel(Qa,i,s)}var xa=U({batchToSpaceND_:SG});p();p();function AN(r){let e;return r.rank===0||r.rank===1?e=ie(r,[1,1,1,r.size]):r.rank===2?e=ie(r,[1,1,r.shape[0],r.shape[1]]):r.rank===3?e=ie(r,[1,r.shape[0],r.shape[1],r.shape[2]]):e=r,e}function TG(r,e,t,n,o,i){i==null&&(i=.001);let s=O(r,"x","batchNorm"),a=O(e,"mean","batchNorm"),l=O(t,"variance","batchNorm"),u;o!=null&&(u=O(o,"scale","batchNorm"));let c;n!=null&&(c=O(n,"offset","batchNorm")),V(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let f={x:AN(s),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:i},g=G.runKernel(u0,f,h);return ie(g,s.shape)}var Zo=U({batchNorm_:TG});p();function IG(r,e,t,n,o,i){let s=O(r,"x","batchNorm"),a=O(e,"mean","batchNorm"),l=O(t,"variance","batchNorm"),u;o!=null&&(u=O(o,"scale","batchNorm"));let c;return n!=null&&(c=O(n,"offset","batchNorm")),V(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),V(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Zo(s,a,l,c,u,i)}var Ad=U({batchNorm2d_:IG});p();function kG(r,e,t,n,o,i){let s=O(r,"x","batchNorm"),a=O(e,"mean","batchNorm"),l=O(t,"variance","batchNorm"),u;o!=null&&(u=O(o,"scale","batchNorm"));let c;return n!=null&&(c=O(n,"offset","batchNorm")),V(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),V(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Zo(s,a,l,c,u,i)}var Dd=U({batchNorm3d_:kG});p();function EG(r,e,t,n,o,i){let s=O(r,"x","batchNorm"),a=O(e,"mean","batchNorm"),l=O(t,"variance","batchNorm"),u;o!=null&&(u=O(o,"scale","batchNorm"));let c;return n!=null&&(c=O(n,"offset","batchNorm")),V(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),V(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Zo(s,a,l,c,u,i)}var Rd=U({batchNorm4d_:EG});p();function AG(r,e,t){let n=O(r,"x","bincount"),o=O(e,"weights","bincount");V(n.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${n.dtype}`),V(t>=0,()=>`size must be non-negative, but got ${t}.`),V(o.size===n.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${n.shape}, weights shape: ${o.shape}.`);let i={x:n,weights:o},s={size:t};return G.runKernel(Ol,i,s)}var $d=U({bincount_:AG});p();function DG(r,e){let t=O(r,"broadcastTo","x"),n=t.shape;if(e.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){let u=t.shape.slice();for(;u.length<e.length;)u.unshift(1);t=ie(t,u)}let o=t.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(o[u]===e[u])i[u]=1;else if(t.shape[u]!==1)throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return $o(t);let a={x:t},l={reps:i};return G.runKernel(qi,a,l)}var j0=U({broadcastTo_:DG});p();function RG(r){let t={x:O(r,"x","ceil")};return G.runKernel(Ns,t)}var pp=U({ceil_:RG});p();function $G(r,e,t){let n=O(r,"x","clipByValue");V(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`);let o={x:n},i={clipValueMin:e,clipValueMax:t};return G.runKernel(_s,o,i)}var on=U({clipByValue_:$G});p();function OG(r){return Mt(r,0)}var Od=U({concat1d_:OG});p();function FG(r,e){return Mt(r,e)}var Fd=U({concat2d_:FG});p();function MG(r,e){return Mt(r,e)}var Md=U({concat3d_:MG});p();function zG(r,e){return Mt(r,e)}var zd=U({concat4d_:zG});p();p();function LG(r,e,t,n,o="NHWC",i=[1,1],s){let a=O(r,"x","conv2d"),l=O(e,"filter","conv2d"),u=a,c=!1;a.rank===3&&(c=!0,u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),s!=null&&V(Xt(n),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${n}.`);let x=o==="NHWC"?u.shape[3]:u.shape[1];V(x===l.shape[2],()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${l.shape[2]}.`),V(In(t,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`);let f={x:u,filter:l},h={strides:t,pad:n,dataFormat:o,dilations:i,dimRoundingMode:s},g=G.runKernel(r0,f,h);return c?ie(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var Kn=U({conv2d_:LG});function PG(r,e,t,n,o="NWC",i=1,s){let a=O(r,"x","conv1d"),l=O(e,"filter","conv1d"),u=a,c=!1;a.rank===2&&(c=!0,u=ie(a,[1,a.shape[0],a.shape[1]])),V(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),s!=null&&V(Xt(n),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${n}.`),V(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(In(t,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${i}'`),V(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let x=ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=ie(u,[u.shape[0],1,u.shape[1],u.shape[2]]),b=Kn(f,x,[1,t],n,"NHWC",[1,i],s);return c?ie(b,[b.shape[2],b.shape[3]]):ie(b,[b.shape[0],b.shape[2],b.shape[3]])}var R2=U({conv1d_:PG});p();p();function BG(r,e,t,n,o,i="NHWC",s){V(r.length===e.rank,()=>`Length of inShape (${r.length}) and rank of dy (${e.rank}) must match`);let a=r,l=e,u=!1;e.rank===3&&(u=!0,l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,r[0],r[1],r[2]]),V(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);let c=i==="NHWC"?a[3]:a[1],x=i==="NHWC"?l.shape[3]:l.shape[1];V(c===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${t.shape[2]}.`),V(x===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${x}) must match output depth for filter ${t.shape[3]}.`),s!=null&&V(Xt(o),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${s} but got pad ${o}.`);let f={dy:l,filter:t},h={strides:n,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},g=G.runKernel(n0,f,h);return u?ie(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var xp=U({conv2DBackpropInput_:BG});function UG(r,e,t,n,o,i){let s=O(r,"x","conv2dTranspose"),a=O(e,"filter","conv2dTranspose");return xp(t,s,a,n,o,"NHWC",i)}var $2=U({conv2dTranspose_:UG});p();function VG(r,e,t,n,o="NDHWC",i=[1,1,1]){let s=O(r,"x","conv3d"),a=O(e,"filter","conv3d"),l=s,u=!1;s.rank===4&&(u=!0,l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),V(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),V(In(t,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),V(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);let c={x:l,filter:a},x={strides:t,pad:n,dataFormat:o,dilations:i},f=G.runKernel(o0,c,x);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var fp=U({conv3d_:VG});p();p();function GG(r,e,t,n,o){V(r.length===e.rank,()=>`Length of inShape (${r.length}) and rank of dy (${e.rank}) must match`);let i=r,s=e,a=!1;e.rank===4&&(a=!0,s=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,r[0],r[1],r[2],r[3]]);let l=i[4],u=s.shape[4];V(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),V(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),V(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),V(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),V(u===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${t.shape[4]}.`);let c={dy:s,filter:t},x={pad:o,strides:n,inputShape:i},f=G.runKernel(Ll,c,x);return a?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var Ld=U({conv3DBackpropInput_:GG});function WG(r,e,t,n,o){let i=O(r,"x","conv3dTranspose"),s=O(e,"filter","conv3dTranspose");return Ld(t,i,s,n,o)}var DN=U({conv3dTranspose_:WG});p();function qG(r){let t={x:O(r,"x","cos")};return G.runKernel(Ss,t)}var fa=U({cos_:qG});p();function HG(r){let t={x:O(r,"x","cosh")};return G.runKernel(Ts,t)}var O2=U({cosh_:HG});p();function KG(r,e=0,t=!1,n=!1){let i={x:O(r,"x","cumsum")},s={axis:e,exclusive:t,reverse:n};return G.runKernel(i0,i,s)}var F2=U({cumsum_:KG});p();function jG(r,e,t,n=!1){let o=O(r,"x","denseBincount"),i=O(e,"weights","denseBincount");V(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),V(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),V(t>=0,()=>`size must be non-negative, but got ${t}.`),V(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:t,binaryOutput:n};return G.runKernel(Bl,s,a)}var Pd=U({denseBincount_:jG});p();function XG(r,e,t="NHWC"){let n=O(r,"x","depthToSpace"),o=t==="NHWC"?n.shape[1]:n.shape[2],i=t==="NHWC"?n.shape[2]:n.shape[3],s=t==="NHWC"?n.shape[3]:n.shape[1];V(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${n.shape}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${n.shape}`),V(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${n.shape}`);let a={x:n},l={blockSize:e,dataFormat:t};return G.runKernel(Ul,a,l)}var mp=U({depthToSpace_:XG});p();function YG(r,e,t,n,o="NHWC",i=[1,1],s){let a=O(r,"x","depthwiseConv2d"),l=O(e,"filter","depthwiseConv2d"),u=a,c=!1;a.rank===3&&(c=!0,u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),s!=null&&V(Xt(n),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${n}.`);let x={x:u,filter:l},f={strides:t,pad:n,dataFormat:o,dilations:i,dimRoundingMode:s},h=G.runKernel(s0,x,f);return c?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var mi=U({depthwiseConv2d_:YG});p();function ZG(r){let t={x:O(r,"x","diag")};return G.runKernel(Wl,t)}var RN=U({diag_:ZG});p();function JG(r,e,t,n,o=[1,1],i="NHWC"){let s=O(r,"x","dilation2d"),a=O(e,"filter","dilation2d");V(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),V(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),V(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,u=!1;s.rank===3&&(l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0);let c={x:l,filter:a},x={strides:t,pad:n,dilations:o},f=G.runKernel(a0,c,x);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var hp=U({dilation2d_:JG});p();p();p();function QG(r,e){let t=r.length,n=[];for(let o=0;o<t;o++){let i=t-1-o,s=r[i]||1;(e[e.length-1-o]||1)>1&&s===1&&n.unshift(i)}return n}function yr(r,e){let t=[];for(let n=0;n<e.length;n++){let o=r[r.length-n-1],i=e.length-n-1,s=e[i];(o==null||o===1&&s>1)&&t.unshift(i)}return t}function Nt(r,e){let t=[],n=Math.max(r.length,e.length);for(let o=0;o<n;o++){let i=r[r.length-o-1];i==null&&(i=1);let s=e[e.length-o-1];if(s==null&&(s=1),i===1)t.unshift(s);else if(s===1)t.unshift(i);else if(i!==s){let a=`Operands could not be broadcast together with shapes ${r} and ${e}.`;throw Error(a)}else t.unshift(i)}return t}function eW(r,e){let t=O(r,"a","equal"),n=O(e,"b","equal");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(m2,o)}var go=U({equal_:eW});p();function tW(r,e,t){let n=O(e,"a","where"),o=O(t,"b","where"),i=O(r,"condition","where","bool"),s=Nt(n.shape,o.shape),a=j0(n,s),l=j0(o,s);i.rank===1&&V(i.shape[0]===n.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),i.rank!==1&&Nr(i.shape,l.shape,"Error in where: ");let u={condition:i,t:a,e:l};return G.runKernel(E0,u)}var Ar=U({where_:tW});p();function rW(r){let t={x:O(r,"x","zerosLike")};return G.runKernel(L0,t)}var st=U({zerosLike_:rW});function nW(r,e){let t=O(r,"a","div"),n=O(e,"b","div");[t,n]=It(t,n);let o=He(t,n),i=st(o),s=go(n,i);return Ar(s,i,o)}var dp=U({divNoNan_:nW});p();function oW(r,e){let t=O(r,"t1","dot"),n=O(e,"t2","dot");V((t.rank===1||t.rank===2)&&(n.rank===1||n.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${n.rank}.`);let o=t.rank===1?t.size:t.shape[1],i=n.rank===1?n.size:n.shape[0];if(V(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),t.rank===1&&n.rank===1){let s=ie(t,[1,-1]),a=ie(n,[-1,1]),l=kt(s,a);return ie(l,[])}else if(t.rank===1&&n.rank===2){let s=ie(t,[1,-1]),a=ie(n,[n.shape[0],n.shape[1]]),l=kt(s,a);return ie(l,[l.size])}else if(t.rank===2&&n.rank===1){let s=ie(n,[-1,1]),a=kt(t,s);return ie(a,[a.size])}else{let s=ie(n,[n.shape[0],n.shape[1]]);return kt(t,s)}}var Bd=U({dot_:oW});p();function iW(r){let t={x:O(r,"x","elu")};return G.runKernel(ks,t)}var hi=U({elu_:iW});p();function sW(r){let e=O(r,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Le(e,"float32"));let t={x:e};return G.runKernel(Es,t)}var gp=U({erf_:sW});p();function aW(r){let t={x:O(r,"x","exp")};return G.runKernel(As,t)}var Yr=U({exp_:aW});p();function lW(r,e=0){let t=O(r,"x","expandDims","string_or_numeric");V(e<=t.rank,()=>"Axis must be <= rank of the tensor");let n={input:t},o={dim:e};return G.runKernel(l0,n,o)}var sn=U({expandDims_:lW});p();function uW(r){let t={x:O(r,"x","expm1")};return G.runKernel(Ds,t)}var yp=U({expm1_:uW});p();p();function cW(r,e){let t=O(r,"x","tile","string_or_numeric");V(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);let n={x:t},o={reps:e};return G.runKernel(qi,n,o)}var Fo=U({tile_:cW});function pW(r,e,t,n="float32"){e==null&&(e=r);let o=it([r,e],n),i=r<=e?r:e;for(let a=0;a<i;++a)o.set(1,a,a);let s=ie(o.toTensor(),[r,e]);if(t==null)return s;if(t.length===1)return Fo(sn(s,0),[t[0],1,1]);if(t.length===2)return Fo(sn(sn(s,0),0),[t[0],t[1],1,1]);if(t.length===3)return Fo(sn(sn(sn(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}var _u=U({eye_:pW});p();function ma(r,e,t){let n={shape:r,value:e,dtype:t};return G.runKernel(Kl,{},n)}p();function xW(r){let t={x:O(r,"x","floor")};return G.runKernel(Rs,t)}var di=U({floor_:xW});p();function fW(r,e,t=0,n=0){let o=O(r,"x","gather"),i=O(e,"indices","gather","int32"),s={x:o,indices:i},a={axis:t,batchDims:n};return G.runKernel(c0,s,a)}var Jo=U({gather_:fW});p();function mW(r,e){let t=O(r,"a","greater"),n=O(e,"b","greater");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(h2,o)}var Jr=U({greater_:mW});p();function hW(r,e){let t=O(r,"a","greaterEqual"),n=O(e,"b","greaterEqual");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(Os,o)}var oo=U({greaterEqual_:hW});p();function dW(r){let t={input:O(r,"input","imag")};return G.runKernel(Zl,t)}var z2=U({imag_:dW});p();function gW(r){let t={x:O(r,"x","isFinite")};return G.runKernel(Fs,t)}var Ud=U({isFinite_:gW});p();function yW(r){let t={x:O(r,"x","isInf")};return G.runKernel(Ms,t)}var Vd=U({isInf_:yW});p();function bW(r){let t={x:O(r,"x","isNaN")};return G.runKernel(zs,t)}var Gd=U({isNaN_:bW});p();function vW(r,e=.2){let n={x:O(r,"x","leakyRelu")},o={alpha:e};return G.runKernel(p0,n,o)}var ha=U({leakyRelu_:vW});p();function wW(r,e){let t=O(r,"a","less"),n=O(e,"b","less");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(d2,o)}var L2=U({less_:wW});p();function CW(r,e){let t=O(r,"a","lessEqual"),n=O(e,"b","lessEqual");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(g2,o)}var Mo=U({lessEqual_:CW});p();function Wd(r,e,t){if(t<=0)throw new Error("The number of values should be positive.");let n={start:r,stop:e,num:t};return G.runKernel(Jl,{},n)}p();function NW(r,e=5,t=1,n=1,o=.5){let i=O(r,"x","localResponseNormalization");V(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),V(Xt(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},u={depthRadius:e,bias:t,alpha:n,beta:o},c=G.runKernel(x0,l,u);return a?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var bp=U({localResponseNormalization_:NW});p();function _W(r){let t={x:O(r,"x","log")};return G.runKernel(Ls,t)}var an=U({log_:_W});p();function SW(r){let t={x:O(r,"x","log1p")};return G.runKernel(Ps,t)}var P2=U({log1p_:SW});p();p();function $N(r){return V(ms(r),()=>"The f passed in grad(f) must be a function"),(e,t)=>{let n=O(e,"x","tf.grad","string_or_numeric"),o=t!=null?O(t,"dy","tf.grad"):null;return G.tidy(()=>{let{value:i,grads:s}=G.gradients(()=>r(n),[n],o);return o!=null&&Nr(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),qd(s),s[0]})}}function ON(r){return V(ms(r),()=>"The f passed in grads(f) must be a function"),(e,t)=>{V(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let n=B0(e,"args","tf.grads","string_or_numeric"),o=t!=null?O(t,"dy","tf.grads"):null;return G.tidy(()=>{let{value:i,grads:s}=G.gradients(()=>r(...n),n,o);return o!=null&&Nr(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),qd(s),s})}}function FN(r){return V(ms(r),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{V(e instanceof Ct,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),V(t==null||t instanceof Ct,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:n,value:o}=G.gradients(()=>r(e),[e],t);return qd(n),{grad:n[0],value:o}}}function MN(r){return V(ms(r),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{V(Array.isArray(e)&&e.every(o=>o instanceof Ct),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),V(t==null||t instanceof Ct,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let n=G.gradients(()=>r(...e),e,t);return t!=null&&Nr(n.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),qd(n.grads),n}}function ff(r,e){V(ms(r),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(u=>u instanceof P0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let t=e!=null;if(!t){e=[];for(let u in G.registeredVariables)e.push(G.registeredVariables[u])}let n=t?e.filter(u=>!u.trainable):null,o=e.length;e=e.filter(u=>u.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=G.gradients(r,e,null,i);V(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),n?.forEach(u=>l[u.name]=null),{value:s,grads:l}}function jn(r){return G.customGrad(r)}function qd(r){if(r.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}p();function TW(r){let t={x:O(r,"x","neg")};return G.runKernel(b0,t)}var Dt=U({neg_:TW});p();function IW(r){let t={x:O(r,"x","softplus")};return G.runKernel(ta,t)}var gi=U({softplus_:IW});function kW(r){let e=O(r,"x","logSigmoid");return jn(n=>({value:Dt(gi(Dt(n))),gradFunc:s=>re(s,Hn(Dt(n)))}))(e)}var Hd=U({logSigmoid_:kW});p();p();function EW(r,e=null,t=!1){let o={x:O(r,"x","max")},i={reductionIndices:e,keepDims:t};return G.runKernel(f0,o,i)}var ln=U({max_:EW});p();function AW(r,e){let t=O(r,"a","sub"),n=O(e,"b","sub");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(oa,o)}var Ge=U({sub_:AW});p();function DW(r,e=null,t=!1){let n=O(r,"x","sum");n.dtype==="bool"&&(n=Le(n,"int32"));let o={x:n},i={axis:e,keepDims:t};return G.runKernel(D0,o,i)}var Qe=U({sum_:DW});function RW(r,e=-1){let t=O(r,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return jn((o,i)=>{let a=ln(o,e,!0),l=Ge(o,a),u=Ge(Le(l,"float32"),an(Qe(Yr(l),e,!0)));return i([u]),{value:u,gradFunc:(x,f)=>{let[h]=f,g=!0,m=Yr(h);return Ge(x,re(Qe(x,e,g),m))}}})(t)}var B2=U({logSoftmax_:RW});p();p();function ig(r,e){for(let t=0;t<r.length;++t)if(r[r.length-t-1]!==e-1-t)return!1;return!0}function zN(r,e,t){let n=r.length+e.length,o=[],i=0,s=0;for(let a=0;a<n;a++)t.indexOf(a)===-1?o.push(r[i++]):o.push(e[s++]);return o}function sg(r,e){let t=[],n=r.length;for(let i=0;i<n;i++)e.indexOf(i)===-1&&t.push(r[i]);let o=e.map(i=>r[i]);return[t,o]}function yi(r,e){let t=e.map(n=>1);return zN(r,t,e)}function $W(r,e,t){V(ig(e,t),()=>`${r} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function ag(r,e){if(ig(r,e))return null;let t=[];for(let n=0;n<e;++n)r.indexOf(n)===-1&&t.push(n);return r.forEach(n=>t.push(n)),t}function mf(r){return r.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function OW(r,e){let t=[];for(let n=e-r;n<e;++n)t.push(n);return t}function FW(r,e=null,t=!1){let n=O(r,"x","logSumExp"),o=rn(e,n.shape),i=ln(n,o,!0),s=Ge(n,i),a=Yr(s),l=Qe(a,o),u=an(l),c=$e(ie(i,u.shape),u);if(t){let x=yi(c.shape,o);return ie(c,x)}return c}var vp=U({logSumExp_:FW});p();function MW(r,e){let t=O(r,"a","logicalAnd","bool"),n=O(e,"b","logicalAnd","bool");Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(y2,o)}var hn=U({logicalAnd_:MW});p();function zW(r){let t={x:O(r,"x","logicalNot","bool")};return G.runKernel(b2,t)}var da=U({logicalNot_:zW});p();function LW(r,e){let t=O(r,"a","logicalOr","bool"),n=O(e,"b","logicalOr","bool");Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(v2,o)}var U2=U({logicalOr_:LW});p();function PW(r,e){let t=O(r,"a","logicalXor","bool"),n=O(e,"b","logicalXor","bool");return Nt(t.shape,n.shape),hn(U2(r,e),da(hn(r,e)))}var Kd=U({logicalXor_:PW});p();function BW(r,e,t,n,o){let i=O(r,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),V(In(t,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),o!=null&&V(Xt(n),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${o} but got pad ${n}.`);let u={x:a},c={filterSize:e,strides:t,pad:n,dimRoundingMode:o},x=G.runKernel(m0,u,c);return l?ie(x,[x.shape[1],x.shape[2],x.shape[3]]):x}var ga=U({maxPool_:BW});p();function UW(r,e=[1,1,1],t,n,o,i="NDHWC"){let s=O(r,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),V(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),o!=null&&V(Xt(n),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${n}.`);let u={x:a},c={filterSize:e,strides:t,pad:n,dimRoundingMode:o,dataFormat:i},x=G.runKernel(h0,u,c);return l?ie(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}var wp=U({maxPool3d_:UW});p();function VW(r,e,t,n,o=!1){let s={x:O(r,"x","maxPoolWithArgmax")},a={filterSize:e,strides:t,pad:n,includeBatchInIndex:o},l=G.runKernel(ru,s,a);return{result:l[0],indexes:l[1]}}var jd=U({maxPoolWithArgmax_:VW});p();function GW(r,e){let t=O(r,"a","maximum"),n=O(e,"b","maximum");[t,n]=It(t,n),t.dtype==="bool"&&(t=Le(t,"int32"),n=Le(n,"int32")),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(Bs,o)}var Xn=U({maximum_:GW});p();function WW(r,e=null,t=!1){let o={x:O(r,"x","mean")},i={axis:e,keepDims:t};return G.runKernel(d0,o,i)}var ar=U({mean_:WW});p();function qW(r,e=null,t=!1){let o={x:O(r,"x","min")},i={axis:e,keepDims:t};return G.runKernel(g0,o,i)}var Ki=U({min_:qW});p();function HW(r,e){let t=O(r,"a","minimum"),n=O(e,"b","minimum");[t,n]=It(t,n),t.dtype==="bool"&&(t=Le(t,"int32"),n=Le(n,"int32")),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(Us,o)}var bi=U({minimum_:HW});p();function KW(r,e,t){V(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);let n=O(r,"x","mirrorPad");if(n.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===n.rank,()=>`Padding doesn't match input. Must be ${n.rank}. Got ${e.length}.`);let o=t==="reflect"?1:0;for(let a=0;a<n.rank;a++)V(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[a][0]>=0&&e[a][0]<=n.shape[a]-o&&e[a][1]>=0&&e[a][1]<=n.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${n.shape[a]-o} or less than 0 for input of shape ${n.shape}`);let i={paddings:e,mode:t},s={x:n};return G.runKernel(y0,s,i)}var Cp=U({mirrorPad_:KW});p();function jW(r,e){let t=O(r,"a","mod"),n=O(e,"b","mod");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(Vs,o)}var Np=U({mod_:jW});p();p();function XW(r){let e=O(r,"x","square"),t={};return G.runKernel("Square",{x:e},t)}var gt=U({square_:XW});function YW(r,e=null,t=!1){r=O(r,"x","moments");let n=rn(e,r.shape),o=ar(r,n,t),i=o.shape;t||(i=yi(o.shape,n));let s=gt(Ge(Le(r,"float32"),ie(o,i))),a=ar(s,n,t);return{mean:o,variance:a}}var Su=U({moments_:YW});p();function ZW(r,e,t,n){let o=O(e,"data","multiRNNCell"),i=B0(t,"c","multiRNNCell"),s=B0(n,"h","multiRNNCell"),a=o,l=[];for(let x=0;x<r.length;x++){let f=r[x](a,i[x],s[x]);l.push(f[0]),l.push(f[1]),a=f[1]}let u=[],c=[];for(let x=0;x<l.length;x+=2)u.push(l[x]),c.push(l[x+1]);return[u,c]}var LN=U({multiRNNCell_:ZW});p();function JW(r,e,t,n=!1){let o=O(r,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);t=t||Math.random();let l={logits:s===1?ie(o,[1,-1]):o},u={numSamples:e,seed:t,normalized:n},c=G.runKernel(nu,l,u);return s===1?ie(c,[c.size]):c}var Xd=U({multinomial_:JW});p();function QW(r,e){let t=O(r,"a","notEqual"),n=O(e,"b","notEqual");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n};return G.runKernel(w2,o)}var Qo=U({notEqual_:QW});p();p();function lr(r,e="float32"){if(e==="complex64"){let n=lr(r,"float32"),o=lr(r,"float32");return mo(n,o)}let t=Bc(sr(r),e);return G.makeTensor(t,r,e)}function kn(r,e="float32"){if(e==="complex64"){let n=kn(r,"float32"),o=lr(r,"float32");return mo(n,o)}let t=Jx(sr(r),e);return G.makeTensor(t,r,e)}p();function eq(r){let t={x:O(r,"x","onesLike")};return G.runKernel(v0,t)}var Qr=U({onesLike_:eq});p();function tq(r,e){let t=O(r,"v1","outerProduct"),n=O(e,"v2","outerProduct");V(t.rank===1&&n.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${n.rank}.`);let o=ie(t,[-1,1]),i=ie(n,[1,-1]);return kt(o,i)}var PN=U({outerProduct_:tq});p();function rq(r,e,t=0){let n=O(r,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:e,constantValue:t},i={x:n};return G.runKernel(N0,i,o)}var Mn=U({pad_:rq});p();function nq(r,e,t=0){return V(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Mn(r,[e],t)}var BN=U({pad1d_:nq});p();function oq(r,e,t=0){return V(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mn(r,e,t)}var UN=U({pad2d_:oq});p();function iq(r,e,t=0){return V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mn(r,e,t)}var VN=U({pad3d_:iq});p();function sq(r,e,t=0){return V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mn(r,e,t)}var GN=U({pad4d_:sq});p();p();function aq(r,e,t){let n=O(r,"x","spaceToBatchND");V(n.rank>=1+e.length,()=>`input rank ${n.rank} should be > than [blockShape] ${e.length}`),V(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),V(n.shape.reduce((s,a,l)=>l>0&&l<=e.length?s&&(a+t[l-1][0]+t[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);let o={x:n},i={blockShape:e,paddings:t};return G.runKernel(R0,o,i)}var ya=U({spaceToBatchND_:aq});function lq(r,e,t,n,o,i){o==null&&(o=[1,1]),i==null&&(i=1),n===0&&(n="valid");let s=O(r,"x","maxPool"),a=s,l=!1;s.rank===3&&(l=!0,a=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(In(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=ng(a.shape,e,i,o,n),c=[u.dilationHeight,u.dilationWidth],x;n==="same"?x=cq([u.filterHeight,u.filterWidth],c):x=[[0,0],[0,0]];let f=c[0]===1&&c[1]===1,[h,g]=uq([u.inHeight,u.inWidth],c,x),m=f?n:"valid",b=f?a:ya(a,c,h),w=(t==="avg"?()=>pa(b,e,i,m):()=>ga(b,e,i,m))(),C=f?w:xa(w,c,g);return l?ie(C,[C.shape[1],C.shape[2],C.shape[3]]):C}function uq(r,e,t){let n=t.map(c=>c[0]),o=t.map(c=>c[1]),i=r.concat(n,o),s=e.map((c,x)=>(c-i[x]%c)%c),a=o.map((c,x)=>c+s[x]),l=e.map((c,x)=>[n[x],a[x]]),u=e.map((c,x)=>[0,s[x]]);return[l,u]}function cq(r,e){let n=r.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),o=n.map(s=>Math.floor(s/2)),i=n.map((s,a)=>s-o[a]);return n.map((s,a)=>[o[a],i[a]])}var Yd=U({pool_:lq});p();function pq(r,e){let t=O(r,"base","pow"),n=O(e,"exp","pow");[t,n]=It(t,n);let o={a:t,b:n};return G.runKernel(Ws,o)}var zn=U({pow_:pq});p();function xq(r,e){let t=O(r,"x","prelu"),n=O(e,"alpha","prelu"),o={x:t,alpha:n};return G.runKernel(_0,o)}var ba=U({prelu_:xq});p();function fq(r,e=null,t=!1){let n=O(r,"x","prod");n.dtype==="bool"&&(n=Le(n,"int32"));let o={x:n},i={axis:e,keepDims:t};return G.runKernel(au,o,i)}var V2=U({prod_:fq});p();function mq(r,e,t){let n=sr(r),o=null;if(t==null||t==="float32")o=new Float32Array(n);else if(t==="int32")o=new Int32Array(n);else if(t==="bool")o=new Uint8Array(n);else throw new Error(`Unknown data type ${t}`);for(let i=0;i<n;i++)o[i]=e();return G.makeTensor(o,r,t)}var WN=U({rand_:mq});p();p();var Jd=Ho(hf());var _p=class{constructor(e,t,n,o,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=Jd.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let e,t,n=!1;for(;!n;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*a,t=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},hg=class{constructor(e,t,n,o){this.alpha=e,this.beta=1/t,this.dtype=n;let i=o||Math.random();this.randu=Jd.alea(i.toString()),this.randn=new _p(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,e=o*o,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<t||Math.log(i)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},dg=class{constructor(e=0,t=1,n,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=n,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=Jd.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function wq(r,e,t=1,n="float32",o){if(t==null&&(t=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error(`Unsupported data type ${n}`);let i=new hg(e,t,n,o),s=it(r,n);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var s_=U({randomGamma_:wq});p();function Cq(r,e=0,t=1,n,o){if(n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);let i=new _p(e,t,n,!1,o),s=it(r,n);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var df=U({randomNormal_:Cq});p();function Nq(r,e=0,t=1,n="float32",o){let i=it(r,n),s=new dg(e,t,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var vi=U({randomUniform_:Nq});p();function Iu(r,e,t=1,n="float32"){if(t===0)throw new Error("Cannot have a step of zero");let o={start:r,stop:e,step:t,dtype:n};return G.runKernel(lu,{},o)}p();function _q(r){let t={input:O(r,"input","real")};return G.runKernel(uu,t)}var X0=U({real_:_q});p();function Sq(r){let t={x:O(r,"x","reciprocal")};return G.runKernel(qs,t)}var Sp=U({reciprocal_:Sq});p();function Tq(r){let t={x:O(r,"x","relu")};return G.runKernel(Hs,t)}var En=U({relu_:Tq});p();function Iq(r){let t={x:O(r,"x","relu6")};return G.runKernel(Ks,t)}var G2=U({relu6_:Iq});p();function kq(r,e){let n={x:O(r,"x","reverse")},o={dims:e};return G.runKernel(k0,n,o)}var qr=U({reverse_:kq});p();function Eq(r){let e=O(r,"x","reverse");return V(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),qr(e,0)}var a_=U({reverse1d_:Eq});p();function Aq(r,e){let t=O(r,"x","reverse");return V(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),qr(t,e)}var l_=U({reverse2d_:Aq});p();function Dq(r,e){let t=O(r,"x","reverse");return V(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),qr(t,e)}var u_=U({reverse3d_:Dq});p();function Rq(r,e){let t=O(r,"x","reverse");return V(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),qr(t,e)}var c_=U({reverse4d_:Rq});p();function $q(r){let t={x:O(r,"x","round")};return G.runKernel(js,t)}var Tp=U({round_:$q});p();function Oq(r){let t={x:O(r,"x","rsqrt")};return G.runKernel(Xs,t)}var W2=U({rsqrt_:Oq});p();function Ve(r,e){if((mn(r)&&e!=="string"||Array.isArray(r))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&mn(r)&&!(r instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ro(r,[],[],e)}p();function Fq(r){let t={x:O(r,"x","selu")};return G.runKernel(Ys,t)}var q2=U({selu_:Fq});p();function Mq(r,e,t,n,o,i=[1,1],s="NHWC"){let a=O(r,"x","separableConv2d"),l=O(e,"depthwiseFilter","separableConv2d"),u=O(t,"pointwiseFilter","separableConv2d"),c=a,x=!1;if(a.rank===3&&(x=!0,c=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),V(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let f=l.shape[2],h=l.shape[3];V(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);let g=mi(c,l,n,o,s,i),b=Kn(g,u,1,"valid",s);return x?ie(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var Ip=U({separableConv2d_:Mq});p();async function zq(r,e){let t=O(r,"x","setdiff1d"),n=O(e,"y","setdiff1d");V(t.dtype===n.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${n.dtype}).`),V(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),V(n.rank===1,()=>`y should be 1D tensor, but got y (${n.shape}).`);let o=await t.data(),i=await n.data(),s=new Set(i),a=0;for(let c=0;c<o.length;c++)s.has(o[c])||a++;let l=new Jt([a],t.dtype),u=new Jt([a],"int32");for(let c=0,x=0;c<o.length;c++)s.has(o[c])||(l.values[x]=o[c],u.values[x]=c,x++);return[l.toTensor(),u.toTensor()]}var Qd=zq;p();function Lq(r){let t={x:O(r,"x","sign")};return G.runKernel(Qs,t)}var kp=U({sign_:Lq});p();function Pq(r){let t={x:O(r,"x","sin")};return G.runKernel(Zs,t)}var H2=U({sin_:Pq});p();function Bq(r){let t={x:O(r,"x","sinh")};return G.runKernel(Js,t)}var K2=U({sinh_:Bq});p();function Uq(r,e,t){let n=O(r,"x","slice1d");return V(n.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${n.rank} tensor`),ht(n,[e],[t])}var Ep=U({slice1d_:Uq});p();function Vq(r,e,t){let n=O(r,"x","slice2d");return V(n.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${n.rank} tensor`),ht(n,e,t)}var gf=U({slice2d_:Vq});p();function Gq(r,e,t){let n=O(r,"x","slice3d");return V(n.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${n.rank} tensor`),ht(n,e,t)}var Ap=U({slice3d_:Gq});p();function Wq(r,e,t){let n=O(r,"x","slice4d");return V(n.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${n.rank} tensor`),ht(n,e,t)}var ku=U({slice4d_:Wq});p();function qq(r,e=-1){let t=O(r,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);let n={logits:t},o={dim:e};return G.runKernel(O0,n,o)}var va=U({softmax_:qq});p();function Hq(r){V(r.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${r.dtype}.`);let e={input:r};return G.runKernel(Hl,e)}var wa=U({fft_:Hq});p();function Kq(r){V(r.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${r.dtype}.`);let e={input:r};return G.runKernel(Yl,e)}var ji=U({ifft_:Kq});p();function jq(r){let e=r.shape[r.shape.length-1],t=r.size/e,n;if(e<=2){let o=ie(r,[t,e]);n=ji(o)}else{let o=[t,2*(e-1)],i=ie(X0(r),[t,e]),s=ie(z2(r),[t,e]),a=qr(ht(i,[0,1],[t,e-2]),1),l=re(qr(ht(s,[0,1],[t,e-2]),1),Ve(-1)),u=Mt([i,a],1),c=Mt([s,l],1),x=ie(mo(u,c),[o[0],o[1]]);n=ji(x)}if(n=X0(n),r.rank===3&&r.shape[0]!==0){let o=n,i=r.shape[0];n=ie(n,[i,n.shape[0]/i,n.shape[1]]),o.dispose()}return n}var j2=U({irfft_:jq});p();p();function Xq(r,e,t=0){let o={x:O(r,"x","split")},i={numOrSizeSplits:e,axis:t};return G.runKernel($0,o,i)}var un=U({split_:Xq});function Yq(r,e){V(r.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${r.dtype}`);let t=r.shape[r.shape.length-1],n=r.size/t,o;if(e!=null&&e<t){let g=r.shape.map(b=>0),m=r.shape.map(b=>b);m[r.shape.length-1]=e,o=ht(r,g,m),t=e}else if(e!=null&&e>t){let g=r.shape.map(m=>m);g[r.shape.length-1]=e-t,o=Mt([r,lr(g)],r.shape.length-1),t=e}else o=r;let i=st(o),s=ie(mo(o,i),[n,t]),a=wa(s),l=Math.floor(t/2)+1,u=X0(a),c=z2(a),x=un(u,[l,t-l],u.shape.length-1),f=un(c,[l,t-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,ie(mo(x[0],f[0]),h)}var Ca=U({rfft_:Yq});p();function Zq(r){let t={x:O(r,"x","sqrt")};return G.runKernel(ra,t)}var ur=U({sqrt_:Zq});p();function Jq(r,e){let t=O(r,"a","squaredDifference"),n=O(e,"b","squaredDifference");[t,n]=It(t,n),Nt(t.shape,n.shape);let o={a:t,b:n},i={};return G.runKernel(na,o,i)}var X2=U({squaredDifference_:Jq});p();function Qq(r,e){let t=O(r,"x","squeeze");return ie(t,x5(t.shape,e).newShape)}var yo=U({squeeze_:Qq});p();function eH(r,e=0){let t=B0(r,"tensors","stack","string_or_numeric");V(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&V(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");let n=t,o={axis:e};return G.runKernel(C0,n,o)}var Pr=U({stack_:eH});p();function tH(r,e=0){let n={x:O(r,"x","step")},o={alpha:e};return G.runKernel(aa,n,o)}var wi=U({step_:tH});p();function rH(r,e,t,n,o=0,i=0,s=0,a=0,l=0){let c={x:O(r,"x","stridedSlice")},x={begin:e,end:t,strides:n,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return G.runKernel(hu,c,x)}var Dp=U({stridedSlice_:rH});p();function nH(r){let t={x:O(r,"x","tan")};return G.runKernel(ia,t)}var Rp=U({tan_:nH});p();function Br(r,e){jo(r);let t=Fn(r,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ro(r,null,t,e)}p();function Xi(r,e,t){if(jo(r),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let n=Fn(r,t);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ro(r,e,n,t)}p();function p_(r,e,t){if(jo(r),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let n=Fn(r,t);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ro(r,e,n,t)}p();function x_(r,e,t){if(jo(r),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let n=Fn(r,t);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ro(r,e,n,t)}p();function f_(r,e,t){if(jo(r),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let n=Fn(r,t);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||n,ro(r,e,n,t)}p();function oH(r,e=1,t=!0){let n=O(r,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=n.shape[n.shape.length-1];if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);let i={x:n},s={k:e,sorted:t},[a,l]=G.runKernel(du,i,s);return{values:a,indices:l}}var $p=U({topk_:oH});p();function iH(r,e=0,t=1,n,o){if(n!=null&&n==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new _p(e,t,n,!0,o),s=it(r,n);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var Y2=U({truncatedNormal_:iH});p();function sH(r,e=0){let t=O(r,"x","unique","string_or_numeric");V(t.rank>0,()=>"The input tensor must be at least 1D");let n={x:t},o={axis:e},[i,s]=G.runKernel(gu,n,o);return{values:i,indices:s}}var Eu=U({unique_:sH});p();function aH(r,e,t){let n=O(r,"x","unsortedSegmentSum"),o=O(e,"segmentIds","unsortedSegmentSum","int32");V(Xt(t),()=>"numSegments must be of dtype int");let i={x:n,segmentIds:o},s={numSegments:t};return G.runKernel(z0,i,s)}var Op=U({unsortedSegmentSum_:aH});p();function lH(r,e=0){let t=O(r,"x","unstack","string_or_numeric");V(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);let n={value:t},o={axis:e};return G.runKernel(M0,n,o)}var cn=U({unstack_:lH});p();function e1(r,e=!0,t,n){return G.makeVariable(r,e,t,n)}p();p();function t1(r,e){let t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(i);let n=it(r,"int32"),o=it([t.length,r.length],"int32");for(let i=0;i<t.length;i++){let s=n.indexToLoc(t[i]),a=i*r.length;o.values.set(s,a)}return o.toTensor()}async function uH(r){let e=O(r,"condition","whereAsync","bool"),t=await e.data(),n=t1(e.shape,t);return r!==e&&e.dispose(),n}var Fp=uH;p();async function cH(r,e,t){let n=O(r,"tensor","boolMask"),o=O(e,"mask","boolMask","bool"),i=t??0,s=o.rank,a=n.shape;V(s>0,()=>"mask cannot be scalar"),Nr(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=a[m];let u=a.slice(0,i).concat([l],a.slice(i+s)),c=ie(n,u),x=ie(o,[-1]),f=await Fp(x),h=yo(f,[1]),g=Jo(c,h,i);return r!==n&&n.dispose(),e!==o&&o.dispose(),h.dispose(),c.dispose(),x.dispose(),f.dispose(),g}var pH=cH;p();function xH(r,e="euclidean",t=null,n=!1){r=O(r,"x","norm");let o=m_(r,e,t),i=o.shape;if(n){let s=rn(t,r.shape);i=yi(o.shape,s)}return ie(o,i)}function m_(r,e,t=null){if(r.rank===0)return gr(r);if(r.rank!==1&&t===null)return m_(ie(r,[-1]),e,t);if(r.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return Qe(gr(r),t);if(e===1/0)return ln(gr(r),t);if(e===-1/0)return Ki(gr(r),t);if(e==="euclidean"||e===2)return ur(Qe(zn(gr(r),Ve(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return ln(Qe(gr(r),t[0]),t[1]-1);if(e===1/0)return ln(Qe(gr(r),t[1]),t[0]);if(e===-1/0)return Ki(Qe(gr(r),t[1]),t[0]);if(e==="fro"||e==="euclidean")return ur(Qe(gt(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}var Au=U({norm_:xH});p();function fH(r,e,t,n,o=!0){let i=O(r,"v","movingAverage"),s=O(e,"x","movingAverage"),a=O(t,"decay","movingAverage");A5(i,s),V(to(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=Ve(1),u=Ge(l,a),c=re(Ge(s,i),u);if(o){V(n!=null,()=>"When using zeroDebias: true, step is required.");let x=O(n,"step","movingAverage");c=He(c,Ge(l,zn(a,x)))}return $e(i,c)}var mH=U({movingAverage_:fH});p();function hH(r,e,t){let n=O(r,"indices","scatterND","int32"),o=O(e,"updates","scatterND");Nd(o,n,t);let i={indices:n,updates:o},s={shape:t};return G.runKernel(xu,i,s)}var gg=U({scatterND_:hH});p();p();function h_(r,e,t,n){if(r.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${r.shape}.`);let o=r.rank>0?r.shape[0]:1,i=r.rank>1?r.shape[1]:1;if(t.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${i}.`);let s=e.size;if(!(e.rank===0||e.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function gH(r,e,t,n=0){let o=O(r,"sparseIndices","sparseToDense","int32"),i=O(e,"sparseValues","sparseToDense"),s=O(n,"defaultValue","sparseToDense",i.dtype);h_(o,i,t,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:t};return G.runKernel(mu,a,l)}var yf=U({sparseToDense_:gH});p();function yH(r,e){let t=O(e,"indices","gatherND","int32"),o={params:O(r,"x","gatherND"),indices:t};return G.runKernel(Xl,o)}var yg=U({gatherND_:yH});p();p();function d_(r,e){if(e==null)return r.shape.slice();if(to(r.shape,e))return e;if(r.shape.length===e.length){let t=[];for(let n=0;n<r.shape.length;n++)e[n]==null&&r.shape[n]!=null?t.push(r.shape[n]):t.push(e[n]);return t}return e}function bH(r,e,t,n){let o=O(r,"x","dropout");if(V(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return r instanceof Ct?o.clone():o;let i=d_(o,t),s=1-e,a=He(di($e(vi(i,0,1,"float32",n),s)),s);return re(o,a)}var bg=U({dropout_:bH});p();function vg(r){return Math.floor(Math.pow(2,Math.ceil(Math.log(r)/Math.log(2))))}function bf(r,e,t){let n=1-r%2,o=new Float32Array(r);for(let i=0;i<r;++i){let s=2*Math.PI*i/(r+n-1);o[i]=e-t*Math.cos(s)}return Br(o,"float32")}p();async function vH(r,e,t=1){let n=O(r,"predictions","inTopK"),o=O(e,"targets","inTopK");V(n.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${n.rank}`),V(n.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${n.rank} and targets rank ${o.rank}`),Nr(n.shape.slice(0,n.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=n.shape[n.shape.length-1];V(t>0&&t<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${t}`);let s=await n.data(),a=await o.data(),[l,u]=[s.length/i,i],c=f5("bool",l);for(let x=0;x<l;x++){let f=x*u,h=s.subarray(f,f+u),g=[];for(let m=0;m<h.length;m++)g.push({value:h[m],index:m});g.sort((m,b)=>b.value-m.value),c[x]=0;for(let m=0;m<t;m++)if(g[m].index===a[x]){c[x]=1;break}}return r!==n&&n.dispose(),e!==o&&o.dispose(),yn(c,o.shape,"bool")}var wH=vH;var ei={};Pt(ei,{conv2d:()=>g_,depthwiseConv2d:()=>y_,matMul:()=>b_});p();p();p();function CH(r,e,t,n,o,i="NHWC",s){let a=r;r.rank===3&&(a=ie(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);let u=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];V(u===t[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${t[2]}.`),V(c===t[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${t[3]}).`),s!=null&&V(Xt(o),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${s} but got pad ${o}.`);let x={x:a,dy:l},f={strides:n,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:t};return G.runKernel(Ml,x,f)}var Mp=U({conv2DBackpropFilter_:CH});p();function Du(r,e,t){if(t==null||t==="linear")return r;if(t==="relu")return re(r,wi(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function Ru(r,e){let t=e,n=yr(r.shape,e.shape);return n.length>0&&(t=Qe(t,n)),ie(t,r.shape)}function $u(r,e,t,n){if(e==="linear")return r;if(e==="relu")return En(r);if(e==="elu")return hi(r);if(e==="relu6")return G2(r);if(e==="prelu")return ba(r,t);if(e==="leakyrelu")return ha(r,n);throw new Error(`Unknown fused activation ${e}.`)}var Ou=(r,e)=>!(r>0)||e==="linear";function NH({x:r,filter:e,strides:t,pad:n,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",Ou(G.state.gradientDepth,l)===!1){let _=Kn(r,e,t,n,o,i,s);return a!=null&&(_=$e(_,a)),$u(_,l,u,c)}let x=O(r,"x","conv2d"),f=O(e,"filter","conv2d"),h=x,g=!1;x.rank===3&&(g=!0,h=ie(x,[1,x.shape[0],x.shape[1],x.shape[2]])),V(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),V(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),s!=null&&V(Xt(n),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${n}.`),V(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),V(In(t,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),V(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);let m=Nu(h.shape,f.shape,t,i,n,s),b;a!=null&&(b=O(a,"bias","fused conv2d"),[b]=It(b,x),Nt(m.outShape,b.shape));let v;u!=null&&(v=O(u,"prelu weights","fused conv2d"));let w=(_,E)=>{let[T,k,D,R]=E,K=Du(_,D,l);V(Yo(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let M=xp(k.shape,K,T,t,n),j=Mp(k,K,T.shape,t,n),X=[M,j];if(R!=null){let Z=Ru(R,K);X.push(Z)}return X},C={x:h,filter:f,bias:b,preluActivationWeights:v},N={strides:t,pad:n,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return a==null?jn((E,T,k)=>{let D=G.runKernel(N2,C,N);return k([T,E,D]),g&&(D=ie(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:w}})(h,f):jn((E,T,k,D)=>{let R=G.runKernel(N2,C,N);return D([T,E,R,k]),g&&(R=ie(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:w}})(h,f,b)}var g_=U({fusedConv2d_:NH});p();p();function _H(r,e,t,n,o,i=[1,1],s){let a=r;r.rank===3&&(a=ie(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u={x:a,dy:l},c={strides:n,pad:o,dimRoundingMode:s,dilations:i,filterShape:t};return G.runKernel(Vl,u,c)}var r1=U({depthwiseConv2dNativeBackpropFilter_:_H});p();function SH(r,e,t,n,o,i=[1,1],s){let a=e,l=!1;e.rank===3&&(l=!0,a=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u={dy:a,filter:t},c={strides:n,pad:o,dimRoundingMode:s,dilations:i,inputShape:r},x=G.runKernel(Gl,u,c);return l?ie(x,[x.shape[1],x.shape[2],x.shape[3]]):x}var n1=U({depthwiseConv2dNativeBackpropInput_:SH});function TH({x:r,filter:e,strides:t,pad:n,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(Ou(G.state.gradientDepth,l)===!1){let _=mi(r,e,t,n,o,i,s);return a!=null&&(_=$e(_,a)),$u(_,l,u,c)}let x=O(r,"x","depthwiseConv2d"),f=O(e,"filter","depthwiseConv2d"),h=x,g=!1;x.rank===3&&(g=!0,h=ie(x,[1,x.shape[0],x.shape[1],x.shape[2]])),V(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),V(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),V(h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),i==null&&(i=[1,1]),V(In(t,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),s!=null&&V(Xt(n),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${s} but got pad ${n}.`);let m=Nu(h.shape,f.shape,t,i,n,s,!0),b;a!=null&&(b=O(a,"bias","fused conv2d"),[b]=It(b,x),Nt(m.outShape,b.shape));let v;u!=null&&(v=O(u,"prelu weights","fused depthwiseConv2d"));let w=(_,E)=>{V(Yo(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[T,k,D,R]=E,K=Du(_,D,l),M=n1(k.shape,K,T,t,n,i,s),j=r1(k,K,T.shape,t,n,i,s);if(R!=null){let X=Ru(b,K);return[M,j,X]}return[M,j]},C={x:h,filter:f,bias:b,preluActivationWeights:v},N={strides:t,pad:n,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return a==null?jn((E,T,k)=>{let D=G.runKernel(_2,C,N);return k([T,E,D]),g&&(D=ie(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:w}})(h,f):jn((E,T,k,D)=>{let R=G.runKernel(_2,C,N);return D([T,E,R,k]),g&&(R=ie(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:w}})(h,f,b)}var y_=U({fusedDepthwiseConv2d_:TH});p();function IH({a:r,b:e,transposeA:t=!1,transposeB:n=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a}){if(Ou(G.state.gradientDepth,i)===!1){let R=kt(r,e,t,n);return o!=null&&(R=$e(R,o)),$u(R,i,s,a)}let l=O(r,"a","fused matMul"),u=O(e,"b","fused matMul");[l,u]=It(l,u);let c=t?l.shape[l.rank-2]:l.shape[l.rank-1],x=n?u.shape[u.rank-1]:u.shape[u.rank-2],f=t?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),m=u.shape.slice(0,-2),b=sr(g),v=sr(m);V(l.rank>=2&&u.rank>=2&&l.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${u.rank}.`),V(to(g,m),()=>`Error in fused matMul: outer dimensions (${g}) and (${m}) of Tensors with shapes ${l.shape} and ${u.shape} must match.`),V(c===x,()=>`Error in fused matMul: inner shapes (${c}) and (${x}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${t} and transposeB=${n} must match.`);let w=l.shape.slice(0,-2).concat([f,h]),C=t?ie(l,[b,c,f]):ie(l,[b,f,c]),N=n?ie(u,[v,h,x]):ie(u,[v,x,h]),_;o!=null&&(_=O(o,"bias","fused matMul"),[_]=It(_,l),Nt(w,_.shape));let E;s!=null&&(E=O(s,"prelu weights","fused matMul"));let T=(R,K)=>{let[M,j,X,Z]=K,Y=Du(ie(R,X.shape),X,i),ce,Q;if(!t&&!n?(ce=kt(Y,j,!1,!0),Q=kt(M,Y,!0,!1)):!t&&n?(ce=kt(Y,j,!1,!1),Q=kt(Y,M,!0,!1)):t&&!n?(ce=kt(j,Y,!1,!0),Q=kt(M,Y,!1,!1)):(ce=kt(j,Y,!0,!0),Q=kt(Y,M,!0,!0)),o!=null){let J=Ru(Z,Y);return[ce,Q,J]}else return[ce,Q]},k={a:C,b:N,bias:_,preluActivationWeights:E},D={transposeA:t,transposeB:n,activation:i,leakyreluAlpha:a};return o==null?jn((K,M,j)=>{let X=G.runKernel(C2,k,D);return j([K,M,X]),{value:ie(X,w),gradFunc:T}})(C,N):jn((K,M,j,X)=>{let Z=G.runKernel(C2,k,D);return X([K,M,Z,j]),{value:ie(Z,w),gradFunc:T}})(C,N,_)}var b_=U({fusedMatMul_:IH});p();function kH(r){return bf(r,.54,.46)}var v_=U({hammingWindow_:kH});p();function EH(r){return bf(r,.5,.5)}var o1=U({hannWindow_:EH});p();function AH(r,e,t,n=!1,o=0){let i=0,s=[];for(;i+e<=r.size;)s.push(ht(r,i,e)),i+=t;if(n)for(;i<r.size;){let a=i+e-r.size,l=Mt([ht(r,i,e-a),ma([a],o)]);s.push(l),i+=t}return s.length===0?Xi([],[0,e]):ie(Mt(s),[s.length,e])}var i1=U({frame_:AH});p();function DH(r,e,t,n,o=o1){n==null&&(n=vg(e));let i=i1(r,e,t),s=re(i,o(e)),a=[];for(let l=0;l<i.shape[0];l++)a.push(Ca(ht(s,[l,0],[1,e]),n));return Mt(a)}var w_=U({stft_:DH});p();function RH(r,e,t,n,o="bilinear",i=0){let s=O(r,"image","cropAndResize"),a=O(e,"boxes","cropAndResize","float32"),l=O(t,"boxInd","cropAndResize","int32"),u=a.shape[0];V(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),V(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),V(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),V(n.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${n.length}.`),V(n[0]>=1&&n[1]>=1,()=>`cropSize must be atleast [1,1], but was ${n}`),V(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let c={image:s,boxes:a,boxInd:l},x={method:o,extrapolationValue:i,cropSize:n};return G.runKernel(Pl,c,x)}var C_=U({cropAndResize_:RH});p();function $H(r){let e=O(r,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let t={image:e};return G.runKernel(jl,t,{})}var N_=U({flipLeftRight_:$H});p();function OH(r,e,t=0,n=.5){let o=O(r,"image","rotateWithOffset","float32");V(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:e,fillValue:t,center:n};return G.runKernel(yu,i,s)}var __=U({rotateWithOffset_:OH});p();p();function Ci(r,e,t,n,o,i){n==null&&(n=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=r.shape[0];return t=Math.min(t,s),V(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),V(r.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${r.rank}'`),V(r.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${r.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),V(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:t,iouThreshold:n,scoreThreshold:o,softNmsSigma:i}}function FH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY){let i=O(r,"boxes","nonMaxSuppression"),s=O(e,"scores","nonMaxSuppression"),a=Ci(i,s,t,n,o);t=a.maxOutputSize,n=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:t,iouThreshold:n,scoreThreshold:o};return G.runKernel(ou,{boxes:i,scores:s},l)}var S_=U({nonMaxSuppression_:FH});p();p();p();function T_(r,e,t){let n=MH(r,e,t),o=n<0?-(n+1):n;r.splice(o,0,e)}function MH(r,e,t){return LH(r,e,t||zH)}function zH(r,e){return r>e?1:r<e?-1:0}function LH(r,e,t){let n=0,o=r.length,i=0,s=!1;for(;n<o;){i=n+(o-n>>>1);let a=t(e,r[i]);a>0?n=i+1:(o=i,s=!a)}return s?n:-n-1}function s1(r,e,t,n,o){return wg(r,e,t,n,o,0)}function a1(r,e,t,n,o,i){return wg(r,e,t,n,o,0,!1,i,!0)}function l1(r,e,t,n,o,i){return wg(r,e,t,n,o,i,!0)}function wg(r,e,t,n,o,i,s=!1,a=!1,l=!1){let u=[];for(let b=0;b<e.length;b++)e[b]>o&&u.push({score:e[b],boxIndex:b,suppressBeginIndex:0});u.sort(I_);let c=i>0?-.5/i:0,x=[],f=[];for(;x.length<t&&u.length>0;){let b=u.pop(),{score:v,boxIndex:w,suppressBeginIndex:C}=b;if(v<o)break;let N=!1;for(let _=x.length-1;_>=C;--_){let E=PH(r,w,x[_]);if(E>=n){N=!0;break}if(b.score=b.score*BH(n,c,E),b.score<=o)break}b.suppressBeginIndex=x.length,N||(b.score===v?(x.push(w),f.push(b.score)):b.score>o&&T_(u,b,I_))}let h=x.length,g=t-h;a&&g>0&&(x.push(...new Array(g).fill(0)),f.push(...new Array(g).fill(0)));let m={selectedIndices:x};return s&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function PH(r,e,t){let n=r.subarray(e*4,e*4+4),o=r.subarray(t*4,t*4+4),i=Math.min(n[0],n[2]),s=Math.min(n[1],n[3]),a=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),x=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-i)*(l-s),g=(x-u)*(f-c);if(h<=0||g<=0)return 0;let m=Math.max(i,u),b=Math.max(s,c),v=Math.min(a,x),w=Math.min(l,f),C=Math.max(v-m,0)*Math.max(w-b,0);return C/(h+g-C)}function BH(r,e,t){let n=Math.exp(e*t*t);return t<=r?n:0}function I_(r,e){return r.score-e.score||r.score===e.score&&e.boxIndex-r.boxIndex}async function UH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY){let i=O(r,"boxes","nonMaxSuppressionAsync"),s=O(e,"scores","nonMaxSuppressionAsync"),a=Ci(i,s,t,n,o);t=a.maxOutputSize,n=a.iouThreshold,o=a.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),u=l[0],c=l[1],{selectedIndices:x}=s1(u,c,t,n,o);return i!==r&&i.dispose(),s!==e&&s.dispose(),Br(x,"int32")}var k_=UH;p();function VH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=O(r,"boxes","nonMaxSuppression"),a=O(e,"scores","nonMaxSuppression"),l=Ci(s,a,t,n,o,i);t=l.maxOutputSize,n=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let u={boxes:s,scores:a},c={maxOutputSize:t,iouThreshold:n,scoreThreshold:o,softNmsSigma:i},x=G.runKernel(su,u,c);return{selectedIndices:x[0],selectedScores:x[1]}}var E_=U({nonMaxSuppressionWithScore_:VH});p();async function GH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=O(r,"boxes","nonMaxSuppressionAsync"),a=O(e,"scores","nonMaxSuppressionAsync"),l=Ci(s,a,t,n,o,i);t=l.maxOutputSize,n=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let u=await Promise.all([s.data(),a.data()]),c=u[0],x=u[1],{selectedIndices:f,selectedScores:h}=l1(c,x,t,n,o,i);return s!==r&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Br(f,"int32"),selectedScores:Br(h)}}var A_=GH;p();function WH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=O(r,"boxes","nonMaxSuppression"),a=O(e,"scores","nonMaxSuppression"),l=Ci(s,a,t,n,o,null),u=l.maxOutputSize,c=l.iouThreshold,x=l.scoreThreshold,f={boxes:s,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:x,padToMaxOutputSize:i},g=G.runKernel(iu,f,h);return{selectedIndices:g[0],validOutputs:g[1]}}var D_=U({nonMaxSuppressionPadded_:WH});p();async function qH(r,e,t,n=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=O(r,"boxes","nonMaxSuppressionAsync"),a=O(e,"scores","nonMaxSuppressionAsync"),l=Ci(s,a,t,n,o,null),u=l.maxOutputSize,c=l.iouThreshold,x=l.scoreThreshold,[f,h]=await Promise.all([s.data(),a.data()]),{selectedIndices:g,validOutputs:m}=a1(f,h,u,c,x,i);return s!==r&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Br(g,"int32"),validOutputs:Ve(m,"int32")}}var R_=qH;p();function HH(r,e,t=!1,n=!1){let o=O(r,"images","resizeBilinear");V(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(n===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:t,halfPixelCenters:n,size:e},u=G.runKernel(I0,a,l);return s?ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var u1=U({resizeBilinear_:HH});p();function KH(r,e,t=!1,n=!1){let o=O(r,"images","resizeNearestNeighbor");V(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(n===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:t,halfPixelCenters:n,size:e},u=G.runKernel(T0,a,l);return s?ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var c1=U({resizeNearestNeighbor_:KH});p();function jH(r,e,t){V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`);let n=O(r,"a","bandPart");V(n.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${n.rank}.`);let o=n.shape,[i,s]=n.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(t<=s))throw new Error(`bandPart(): numUpper (${t}) must not be greater than the number of columns (${s}).`);e<0&&(e=i),t<0&&(t=s);let a=ie(Iu(0,i,1,"int32"),[-1,1]),l=Iu(0,s,1,"int32"),u=Ge(a,l),c=hn(Mo(u,Ve(+e,"int32")),oo(u,Ve(-t,"int32"))),x=lr([i,s],n.dtype);return ie(Pr(cn(ie(n,[-1,i,s])).map(f=>Ar(c,f,x))),o)}var $_=U({bandPart_:jH});p();function XH(r){let e;if(Array.isArray(r)){e=!1,V(r!=null&&r.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=r[0].shape[0];for(let i=1;i<r.length;++i)V(r[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${r[i].shape[0]} vs. ${o})`)}else e=!0,r=un(r,r.shape[0],0).map(o=>yo(o,[0]));V(r.length<=r[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${r.length}) exceeds number of dimensions (${r[0].shape[0]}).`);let t=[],n=r;for(let o=0;o<r.length;++o)t.push(G.tidy(()=>{let i=n[o];if(o>0)for(let s=0;s<o;++s){let a=re(Qe(re(t[s],i)),t[s]);i=Ge(i,a)}return He(i,Au(i,"euclidean"))}));return e?Pr(t,0):t}var O_=U({gramSchmidt_:XH});p();function YH(r,e=!1){if(V(r.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${r.rank}`),r.rank===2)return F_(r,e);{let t=r.shape.slice(0,r.shape.length-2).reduce((l,u)=>l*u),n=cn(ie(r,[t,r.shape[r.shape.length-2],r.shape[r.shape.length-1]]),0),o=[],i=[];n.forEach(l=>{let[u,c]=F_(l,e);o.push(u),i.push(c)});let s=ie(Pr(o,0),r.shape),a=ie(Pr(i,0),r.shape);return[s,a]}}function F_(r,e=!1){return G.tidy(()=>{V(r.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${r.shape.length}D Tensor.`);let t=r.shape[0],n=r.shape[1],o=_u(t),i=$o(r),s=Xi([[1]],[1,1]),a=$o(s),l=t>=n?n:t;for(let u=0;u<l;++u){let c=i,x=a,f=o;[a,i,o]=G.tidy(()=>{let h=ht(i,[u,u],[t-u,1]),g=Au(h),m=ht(i,[u,u],[1,1]),b=Ar(Jr(m,0),Xi([[-1]]),Xi([[1]])),v=Ge(m,re(b,g)),w=He(h,v);w.shape[0]===1?a=$o(s):a=Mt([s,ht(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);let C=Dt(He(kt(b,v),g)),N=ht(i,[u,0],[t-u,n]),_=re(C,a),E=Rt(a);if(u===0)i=Ge(N,kt(_,kt(E,N)));else{let D=Ge(N,kt(_,kt(E,N)));i=Mt([ht(i,[0,0],[u,n]),D],0)}let T=Rt(_),k=ht(o,[0,u],[t,o.shape[1]-u]);if(u===0)o=Ge(k,kt(kt(k,a),T));else{let D=Ge(k,kt(kt(k,a),T));o=Mt([ht(o,[0,0],[t,u]),D],1)}return[a,i,o]}),ct([c,x,f])}return!e&&t>n&&(o=ht(o,[0,0],[t,n]),i=ht(i,[0,0],[n,n])),[o,i]})}var M_=U({qr_:YH});p();p();var Ur;(function(r){r[r.NONE=0]="NONE",r[r.MEAN=1]="MEAN",r[r.SUM=2]="SUM",r[r.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ur||(Ur={}));p();function ZH(r,e,t=Ur.SUM_BY_NONZERO_WEIGHTS){let n=O(r,"losses","computeWeightedLoss"),o=null;e!=null&&(o=O(e,"weights","computeWeightedLoss"));let i=o==null?n:re(n,o);if(t===Ur.NONE)return i;if(t===Ur.SUM)return Qe(i);if(t===Ur.MEAN){if(o==null)return ar(i);{let s=n.size/o.size,a=He(Qe(i),Qe(o));return s>1?He(a,Ve(s)):a}}if(t===Ur.SUM_BY_NONZERO_WEIGHTS){if(o==null)return He(Qe(i),Ve(n.size));{let s=re(o,kn(n.shape)),a=Le(Qe(Qo(s,Ve(0))),"float32");return He(Qe(i),a)}}throw Error(`Unknown reduction: ${t}`)}var Ln=U({computeWeightedLoss_:ZH});function JH(r,e,t,n=Ur.SUM_BY_NONZERO_WEIGHTS){let o=O(r,"labels","absoluteDifference"),i=O(e,"predictions","absoluteDifference"),s=null;t!=null&&(s=O(t,"weights","absoluteDifference")),Nr(o.shape,i.shape,"Error in absoluteDifference: ");let a=gr(Ge(o,i));return Ln(a,s,n)}var z_=U({absoluteDifference_:JH});p();function QH(r,e,t,n,o=Ur.SUM_BY_NONZERO_WEIGHTS){let i=O(r,"labels","cosineDistance"),s=O(e,"predictions","cosineDistance"),a=null;n!=null&&(a=O(n,"weights","cosineDistance")),Nr(i.shape,s.shape,"Error in cosineDistance: ");let l=Ve(1),u=Ge(l,Qe(re(i,s),t,!0));return Ln(u,a,o)}var L_=U({cosineDistance_:QH});p();function eK(r,e,t,n=Ur.SUM_BY_NONZERO_WEIGHTS){let o=O(r,"labels","hingeLoss"),i=O(e,"predictions","hingeLoss"),s=null;t!=null&&(s=O(t,"weights","hingeLoss")),Nr(o.shape,i.shape,"Error in hingeLoss: ");let a=Ve(1);o=Ge(re(Ve(2),o),a);let l=En(Ge(a,re(o,i)));return Ln(l,s,n)}var P_=U({hingeLoss_:eK});p();function tK(r,e,t,n=1,o=Ur.SUM_BY_NONZERO_WEIGHTS){let i=O(r,"labels","huberLoss"),s=O(e,"predictions","huberLoss"),a=null;t!=null&&(a=O(t,"weights","huberLoss")),Nr(i.shape,s.shape,"Error in huberLoss: ");let l=Ve(n),u=gr(Ge(s,i)),c=bi(u,l),x=Ge(u,c),f=$e(re(Ve(.5),gt(c)),re(l,x));return Ln(f,a,o)}var B_=U({huberLoss_:tK});p();function rK(r,e,t,n=1e-7,o=Ur.SUM_BY_NONZERO_WEIGHTS){let i=O(r,"labels","logLoss"),s=O(e,"predictions","logLoss"),a=null;t!=null&&(a=O(t,"weights","logLoss")),Nr(i.shape,s.shape,"Error in logLoss: ");let l=Ve(1),u=Ve(n),c=Dt(re(i,an($e(s,u)))),x=re(Ge(l,i),an($e(Ge(l,s),u))),f=Ge(c,x);return Ln(f,a,o)}var U_=U({logLoss_:rK});p();function nK(r,e,t,n=Ur.SUM_BY_NONZERO_WEIGHTS){let o=O(r,"labels","meanSquaredError"),i=O(e,"predictions","meanSquaredError"),s=null;t!=null&&(s=O(t,"weights","meanSquaredError")),Nr(o.shape,i.shape,"Error in meanSquaredError: ");let a=X2(o,i);return Ln(a,s,n)}var V_=U({meanSquaredError_:nK});p();function oK(r,e){let t=O(r,"labels","sigmoidCrossEntropyWithLogits"),n=O(e,"logits","sigmoidCrossEntropyWithLogits");Nr(t.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=En(n),i=re(n,t),s=P2(Yr(Dt(gr(n))));return $e(Ge(o,i),s)}function iK(r,e,t,n=0,o=Ur.SUM_BY_NONZERO_WEIGHTS){let i=O(r,"multiClassLabels","sigmoidCrossEntropy"),s=O(e,"logits","sigmoidCrossEntropy"),a=null;if(t!=null&&(a=O(t,"weights","sigmoidCrossEntropy")),Nr(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),n>0){let u=Ve(n),c=Ve(1),x=Ve(.5);i=$e(re(i,Ge(c,u)),re(x,u))}let l=oK(i,s);return Ln(l,a,o)}var G_=U({sigmoidCrossEntropy_:iK});p();function sK(r,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return jn((o,i,s)=>{let l=vp(i,[t],!0),u=Ge(Le(i,"float32"),l);s([o,u]);let c=Dt(re(u,o));return{value:Qe(c,[t]),gradFunc:(h,g)=>{let[m,b]=g,v=yi(h.shape,[t]);return[re(ie(h,v),Ge(Le(m,"float32"),Yr(b))),re(ie(h,v),Ge(Yr(b),Le(m,"float32")))]}}})(r,e)}function aK(r,e,t,n=0,o=Ur.SUM_BY_NONZERO_WEIGHTS){let i=O(r,"onehotLabels","softmaxCrossEntropy"),s=O(e,"logits","softmaxCrossEntropy"),a=null;if(t!=null&&(a=O(t,"weights","softmaxCrossEntropy")),Nr(i.shape,s.shape,"Error in softmaxCrossEntropy: "),n>0){let u=Ve(n),c=Ve(1),x=Ve(i.shape[1]);i=$e(re(i,Ge(c,u)),He(u,x))}let l=sK(i,s);return Ln(l,a,o)}var W_=U({softmaxCrossEntropy_:aK});var lK={fft:wa,ifft:ji,rfft:Ca,irfft:j2},uK={hammingWindow:v_,hannWindow:o1,frame:i1,stft:w_},Yi={flipLeftRight:N_,resizeNearestNeighbor:c1,resizeBilinear:u1,rotateWithOffset:__,cropAndResize:C_,nonMaxSuppression:S_,nonMaxSuppressionAsync:k_,nonMaxSuppressionWithScore:E_,nonMaxSuppressionWithScoreAsync:A_,nonMaxSuppressionPadded:D_,nonMaxSuppressionPaddedAsync:R_},Cg={bandPart:$_,gramSchmidt:O_,qr:M_},cK={absoluteDifference:z_,computeWeightedLoss:Ln,cosineDistance:L_,hingeLoss:P_,huberLoss:B_,logLoss:U_,meanSquaredError:V_,sigmoidCrossEntropy:G_,softmaxCrossEntropy:W_};p();var Pn=class extends Td{minimize(e,t=!1,n){let{value:o,grads:i}=this.computeGradients(e,n);if(n!=null){let s=n.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return ct(i),t?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return ff(e,t)}dispose(){this.iterations_!=null&&ct(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ve(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Pn,Symbol.hasInstance,{value:r=>r.minimize!=null&&r.computeGradients!=null&&r.applyGradients!=null});var Fu=class extends Pn{constructor(e,t,n=null){super();this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,o)=>{let i=G.registeredVariables[n],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${n}/accum_grad`,variable:pe(()=>st(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${n}/accum_var`,variable:pe(()=>st(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[n];if(a==null)return;let l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;pe(()=>{let c=$e(re(l,this.rho),re(gt(a),1-this.rho)),x=re(He(ur($e(u,this.epsilon)),ur($e(l,this.epsilon))),a),f=$e(re(u,this.rho),re(gt(x),1-this.rho));l.assign(c),u.assign(f);let h=$e(re(x,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ct(this.accumulatedGrads.map(e=>e.variable)),ct(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(o=>({originalName:o.name,variable:o.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,t*2).map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}};Fu.className="Adadelta";ho(Fu);p();var Mu=class extends Pn{constructor(e,t=.1){super();this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,o)=>{let i=G.registeredVariables[n];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${n}/accumulator`,variable:pe(()=>ma(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(e)?e[o].tensor:e[n];if(s==null)return;let a=this.accumulatedGrads[o].variable;pe(()=>{let l=$e(a,gt(s));a.assign(l);let u=$e(re(He(s,ur($e(l,G.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ct(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}};Mu.className="Adagrad";ho(Mu);p();var zu=class extends Pn{constructor(e,t,n,o=null){super();this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],pe(()=>{this.accBeta1=Ve(t).variable(),this.accBeta2=Ve(n).variable()}),o==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);pe(()=>{let n=Ge(1,this.accBeta1),o=Ge(1,this.accBeta2);t.forEach((i,s)=>{let a=G.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:pe(()=>st(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:pe(()=>st(a).variable(l))});let u=Array.isArray(e)?e[s].tensor:e[i];if(u==null)return;let c=this.accumulatedFirstMoment[s].variable,x=this.accumulatedSecondMoment[s].variable,f=$e(re(c,this.beta1),re(u,1-this.beta1)),h=$e(re(x,this.beta2),re(gt(u),1-this.beta2)),g=He(f,n),m=He(h,o);c.assign(f),x.assign(h);let b=$e(re(He(g,$e(ur(m),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(re(this.accBeta1,this.beta1)),this.accBeta2.assign(re(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ct(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),pe(()=>{this.accBeta1.assign(zn(this.beta1,this.iterations_+1)),this.accBeta2.assign(zn(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(o=>({originalName:o.name,variable:o.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}};zu.className="Adam";ho(zu);p();var Lu=class extends Pn{constructor(e,t,n,o=null,i=0){super();this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],pe(()=>{this.iteration=Ve(0).variable(),this.accBeta1=Ve(t).variable()}),o==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);pe(()=>{let n=Ge(1,this.accBeta1),o=He(-this.learningRate,$e(re(this.iteration,this.decay),1));t.forEach((i,s)=>{let a=G.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:st(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:st(a).variable(l)});let u=Array.isArray(e)?e[s].tensor:e[i];if(u==null)return;let c=this.accumulatedFirstMoment[s].variable,x=this.accumulatedWeightedInfNorm[s].variable,f=$e(re(c,this.beta1),re(u,1-this.beta1)),h=re(x,this.beta2),g=gr(u),m=Xn(h,g);c.assign(f),x.assign(m);let b=$e(re(He(o,n),He(f,$e(m,this.epsilon))),a);a.assign(b)}),this.iteration.assign($e(this.iteration,1)),this.accBeta1.assign(re(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ct(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}};Lu.className="Adamax";ho(Lu);p();p();var Y0=class extends Pn{constructor(e){super();this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,o)=>{let i=Array.isArray(e)?e[o].tensor:e[n];if(i==null)return;let s=G.registeredVariables[n];pe(()=>{let a=$e(re(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Er(Ve(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}};Y0.className="SGD";ho(Y0);var Pu=class extends Y0{constructor(e,t,n=!1){super(e);this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Ve(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,o)=>{let i=G.registeredVariables[n];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${n}/momentum`,variable:pe(()=>st(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[n];a!=null&&pe(()=>{let l,u=$e(re(this.m,s),a);this.useNesterov?l=$e(re(this.c,$e(a,re(u,this.m))),i):l=$e(re(this.c,u),i),s.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ct(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}};Pu.className="Momentum";ho(Pu);p();var Bu=class extends Pn{constructor(e,t=.9,n=0,o=null,i=!1){super();if(this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=G.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,o)=>{let i=G.registeredVariables[n],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${n}/rms`,variable:pe(()=>st(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${n}/momentum`,variable:pe(()=>st(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${n}/mg`,variable:pe(()=>st(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[n];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;pe(()=>{let c=$e(re(l,this.decay),re(gt(a),1-this.decay));if(this.centered){let x=this.accumulatedMeanGrads[o].variable,f=$e(re(x,this.decay),re(a,1-this.decay)),h=He(re(a,this.learningRate),ur(Ge(c,$e(gt(f),this.epsilon)))),g=$e(re(u,this.momentum),h);l.assign(c),x.assign(f),u.assign(g);let m=Ge(i,g);i.assign(m)}else{let x=$e(re(l,this.decay),re(gt(a),1-this.decay)),f=$e(re(u,this.momentum),He(re(a,this.learningRate),ur($e(x,this.epsilon))));l.assign(x),u.assign(f);let h=Ge(i,f);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ct(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ct(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ct(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(o=>({originalName:o.name,variable:o.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,t*2).map(o=>({originalName:o.name,variable:o.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(o=>({originalName:o.name,variable:o.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}};Bu.className="RMSProp";ho(Bu);p();p();var Z0=class{static sgd(e){return new Y0(e)}static momentum(e,t,n=!1){return new Pu(e,t,n)}static rmsprop(e,t=.9,n=0,o=null,i=!1){return new Bu(e,t,n,o,i)}static adam(e=.001,t=.9,n=.999,o=null){return new zu(e,t,n,o)}static adadelta(e=.001,t=.95,n=null){return new Fu(e,t,n)}static adamax(e=.002,t=.9,n=.999,o=null,i=0){return new Lu(e,t,n,o,i)}static adagrad(e,t=.1){return new Mu(e,t)}};var Z2={sgd:Z0.sgd,momentum:Z0.momentum,adadelta:Z0.adadelta,adagrad:Z0.adagrad,rmsprop:Z0.rmsprop,adamax:Z0.adamax,adam:Z0.adam};p();var pK=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:r=>r())();function zp(){return new Promise(r=>pK(()=>r()))}var H={};Pt(H,{ERF_A1:()=>CK,ERF_A2:()=>NK,ERF_A3:()=>_K,ERF_A4:()=>SK,ERF_A5:()=>TK,ERF_P:()=>wK,PARALLELIZE_THRESHOLD:()=>p1,SELU_SCALE:()=>_g,SELU_SCALEALPHA:()=>Ng,applyActivation:()=>$u,assertAndGetBroadcastShape:()=>Nt,assertAxesAreInnerMostDims:()=>$W,assertParamsConsistent:()=>xK,assignToTypedArray:()=>OK,axesAreInnerMostDims:()=>ig,calculateShapes:()=>xN,combineLocations:()=>zN,complexWithEvenIndex:()=>DK,complexWithOddIndex:()=>RK,computeConv2DInfo:()=>Nu,computeConv3DInfo:()=>IN,computeDefaultPad:()=>og,computeDilation2DInfo:()=>pG,computeOptimalWindowSize:()=>mK,computeOutAndReduceShapes:()=>sg,computeOutShape:()=>fK,computePool2DInfo:()=>ng,computePool3DInfo:()=>xG,convertConv2DDataFormat:()=>kN,eitherStridesOrDilationsAreOne:()=>In,expandShapeToKeepDim:()=>yi,exponent:()=>MK,exponents:()=>FK,fromStringArrayToUint8:()=>VK,fromUint8ToStringArray:()=>UK,getAxesPermutation:()=>ag,getBroadcastDims:()=>QG,getComplexWithIndex:()=>$K,getFusedBiasGradient:()=>Ru,getFusedDyActivation:()=>Du,getImageCenter:()=>hK,getInnerMostAxes:()=>OW,getPermuted:()=>gK,getReductionAxes:()=>yr,getReshaped:()=>dK,getReshapedPermuted:()=>yK,getSliceBeginCoords:()=>bK,getSliceSize:()=>vK,getUndoAxesPermutation:()=>mf,log:()=>kK,mergeRealAndImagArrays:()=>EK,prepareAndValidate:()=>pN,prepareSplitSize:()=>zK,segment_util:()=>Sg,shouldFuse:()=>Ou,slice_util:()=>Tn,splitRealAndImagArrays:()=>AK,tupleValuesAreOne:()=>Yo,upcastType:()=>nn,validateInput:()=>Nd,validateUpdateShape:()=>X5,warn:()=>IK});p();p();function xK(r,e){let t=r[0].length;r.forEach((o,i)=>{V(o.length===t,()=>`Error in concat${t}D: rank of tensors[${i}] must be the same as the rank of the rest (${t})`)}),V(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);let n=r[0];r.forEach((o,i)=>{for(let s=0;s<t;s++)V(s===e||o[s]===n[s],()=>`Error in concat${t}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${n}) along the non-concatenated axis ${i}.`)})}function fK(r,e){let t=r[0].slice();for(let n=1;n<r.length;n++)t[e]+=r[n][e];return t}p();var p1=30;function mK(r){return r<=p1?r:Pc(r,Math.floor(Math.sqrt(r)))}p();function hK(r,e,t){let n=t*(typeof r=="number"?r:r[0]),o=e*(typeof r=="number"?r:r[1]);return[n,o]}p();function dK(r,e,t,n=!0){let o=[];if(n)o=o.concat(e.slice(0)),o.push(r[0]/t),o=o.concat(r.slice(1));else{o=o.concat(r[0]);let i=e.length;for(let s=0;s<i;++s)o=o.concat([r[s+1]/e[s],e[s]]);o=o.concat(r.slice(i+1))}return o}function gK(r,e,t=!0){let n=[];if(t){n.push(e);for(let o=e+1;o<r;++o)o<=2*e?(n.push(o),n.push(o-(e+1))):n.push(o)}else{let o=[],i=[];for(let s=1;s<r;++s)s>=e*2+1||s%2===1?i.push(s):o.push(s);n.push(...o),n.push(0),n.push(...i)}return n}function yK(r,e,t,n=!0){let o=[];n?o.push(r[0]/t):o.push(r[0]*t);for(let i=1;i<r.length;++i)i<=e.length?n?o.push(e[i-1]*r[i]):o.push(r[i]/e[i-1]):o.push(r[i]);return o}function bK(r,e){let t=[0];for(let n=0;n<e;++n)t.push(r[n][0]);return t}function vK(r,e,t){let n=r.slice(0,1);for(let o=0;o<t;++o)n.push(r[o+1]-e[o][0]-e[o][1]);return n}p();var Ng=1.7580993408473768,_g=1.0507009873554805;p();var wK=.3275911,CK=.254829592,NK=-.284496736,_K=1.421413741,SK=-1.453152027,TK=1.061405429;p();function IK(...r){we().getBool("IS_TEST")||console.warn(...r)}function kK(...r){we().getBool("IS_TEST")||console.log(...r)}p();function EK(r,e){if(r.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${r.length}, imag: ${e.length}.`);let t=new Float32Array(r.length*2);for(let n=0;n<t.length;n+=2)t[n]=r[n/2],t[n+1]=e[n/2];return t}function AK(r){let e=new Float32Array(r.length/2),t=new Float32Array(r.length/2);for(let n=0;n<r.length;n+=2)e[n/2]=r[n],t[n/2]=r[n+1];return{real:e,imag:t}}function DK(r){let e=Math.ceil(r.length/4),t=new Float32Array(e),n=new Float32Array(e);for(let o=0;o<r.length;o+=4)t[Math.floor(o/4)]=r[o],n[Math.floor(o/4)]=r[o+1];return{real:t,imag:n}}function RK(r){let e=Math.floor(r.length/4),t=new Float32Array(e),n=new Float32Array(e);for(let o=2;o<r.length;o+=4)t[Math.floor(o/4)]=r[o],n[Math.floor(o/4)]=r[o+1];return{real:t,imag:n}}function $K(r,e){let t=r[e*2],n=r[e*2+1];return{real:t,imag:n}}function OK(r,e,t,n){r[n*2]=e,r[n*2+1]=t}function FK(r,e){let t=new Float32Array(r/2),n=new Float32Array(r/2);for(let o=0;o<Math.ceil(r/2);o++){let i=(e?2:-2)*Math.PI*(o/r);t[o]=Math.cos(i),n[o]=Math.sin(i)}return{real:t,imag:n}}function MK(r,e,t){let n=(t?2:-2)*Math.PI*(r/e),o=Math.cos(n),i=Math.sin(n);return{real:o,imag:i}}p();function zK(r,e,t=0){let n=[];if(typeof e=="number")V(r.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),n=new Array(e).fill(r.shape[t]/e);else{let o=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);V(o<=1,()=>"There should be only one negative value in split array.");let i=e.indexOf(-1);if(i!==-1){let s=e.reduce((a,l)=>l>0?a+l:a);e[i]=r.shape[t]-s}V(r.shape[t]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),n=e}return n}var Sg={};Pt(Sg,{collectGatherOpShapeInfo:()=>BK,computeOutShape:()=>PK,segOpComputeOptimalWindowSize:()=>LK});p();function LK(r,e){let t=!1,n;for(r<=p1?(n=r,t=!0):n=Pc(r,Math.floor(Math.sqrt(r)));!t;)n>e||n===r?t=!0:n=Pc(r,n+1);return n}function PK(r,e,t){let n=[],o=r.length;for(let i=0;i<o;i++)i!==e?n.push(r[i]):n.push(t);return n}function BK(r,e,t,n){let o=e.shape.length,i=r.shape.length;if(n!==0&&(n<-o||n>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${n}`);if(n<0&&(n+=o),n>i)throw new Error(`batchDims (${n}) must be less than rank(x) (
    ${i}).`);if(t<n)throw new Error(`batchDims (${n}) must be less than or equal to axis (${t}).`);for(let x=0;x<n;++x)if(r.shape[x]!==e.shape[x])throw new Error(`x.shape[${x}]: ${r.shape[x]} should be equal to indices.shape[${x}]: ${e.shape[x]}.`);let s=r.shape[t],a=[],l=1,u=1,c=1;for(let x=0;x<n;++x)a.push(r.shape[x]),l*=r.shape[x];for(let x=n;x<t;x++)a.push(r.shape[x]),u*=r.shape[x];for(let x=n;x<o;x++)a.push(e.shape[x]);for(let x=t+1;x<i;x++)a.push(r.shape[x]),c*=r.shape[x];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:s,outputShape:a}}function UK(r){try{return r.map(e=>jc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function VK(r){return r.map(e=>S2(e))}var An={};Pt(An,{nonMaxSuppressionV3Impl:()=>s1,nonMaxSuppressionV4Impl:()=>a1,nonMaxSuppressionV5Impl:()=>l1,whereImpl:()=>t1});p();p();p();var x1={kernelName:Ha,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,wi(Le(t,"float32"),-1))}}};p();var q_={kernelName:ds,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=gt(Le(t,"float32")),o=ur(Ge(Ve(1),n));return Dt(He(r,o))}}}};p();var H_={kernelName:gs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=ur(Ge(gt(Le(t,"float32")),1));return He(r,n)}}}};p();var K_={kernelName:xi,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=r,l=yr(t.shape,o);return l.length>0&&(a=Qe(a,l)),ie(a,t.shape)},b:()=>{let a=r,l=yr(n.shape,o);return l.length>0&&(a=Qe(a,l)),ie(a,n.shape)}}}};p();var j_={kernelName:Ka,saveAllInputs:!0,gradFunc:(r,e)=>{let t={};return e.forEach((n,o)=>{t[o]=()=>r.clone()}),t}};p();var X_={kernelName:ja,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>st(t)}}};p();var Y_={kernelName:Xa,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>st(t)}}};p();var Z_={kernelName:ys,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,ur(Ge(Ve(1),gt(Le(t,"float32")))))}}};p();var J_={kernelName:bs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=ur($e(Ve(1),gt(Le(t,"float32"))));return He(r,n)}}}};p();var Q_={kernelName:Cs,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=$e(gt(t),gt(n)),l=re(r,He(n,a)),u=yr(t.shape,o);return u.length>0&&(l=Qe(l,u)),ie(l,t.shape)},b:()=>{let a=$e(gt(t),gt(n)),l=Dt(re(r,He(t,a))),u=yr(n.shape,o);return u.length>0&&(l=Qe(l,u)),ie(l,n.shape)}}}};p();var eS={kernelName:vs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,$e(gt(Le(t,"float32")),1))}}};p();var tS={kernelName:ws,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,Ge(Ve(1),gt(Le(t,"float32"))))}}};p();p();function GK(r,e,t,n,o,i){let s=O(r,"dy","avgPool3dGrad"),a=O(e,"input","avgPool3dGrad"),l=s,u=a,c=!1;a.rank===4&&(c=!0,l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),V(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),i!=null&&V(Xt(o),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${o}.`);let x={dy:l,input:u},f={filterSize:t,strides:n,pad:o,dimRoundingMode:i},h=G.runKernel($l,x,f);return c?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var rS=U({avgPool3dGrad_:GK});var nS={kernelName:Za,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{filterSize:o,strides:i,pad:s,dimRoundingMode:a}=t;return{x:()=>rS(r,n,o,i,s,a)}}};p();p();function WK(r,e,t,n,o){let i=O(r,"dy","avgPoolGrad"),s=O(e,"input","avgPoolGrad");V(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let a=s,l=i,u=!1;s.rank===3&&(u=!0,a=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),V(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let c={dy:l,input:a},x={filterSize:t,strides:n,pad:o},f=G.runKernel(Rl,c,x);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var oS=U({avgPoolGrad_:WK});var iS={kernelName:Ya,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{filterSize:o,strides:i,pad:s}=t;return{x:()=>oS(r,n,o,i,s)}}};p();var sS={kernelName:Ja,inputsToSave:["a","b"],gradFunc:(r,e,t)=>{let[n,o]=e,{transposeA:i,transposeB:s}=t;return!i&&!s?{a:()=>kt(r,o,!1,!0),b:()=>kt(n,r,!0,!1)}:!i&&s?{a:()=>kt(r,o,!1,!1),b:()=>kt(r,n,!0,!1)}:i&&!s?{a:()=>kt(o,r,!1,!0),b:()=>kt(n,r,!1,!1)}:{a:()=>kt(o,r,!0,!0),b:()=>kt(r,n,!0,!0)}}};p();var aS={kernelName:Qa,gradFunc:(r,e,t)=>{let{blockShape:n,crops:o}=t;return{x:()=>ya(r,n,o)}}};p();var lS={kernelName:v5,gradFunc:(r,e,t)=>{let n=t,o=n.inputShape,i=n.shape,s=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])s[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${i}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Qe(r,a,!0)}}};p();var uS={kernelName:Gi,gradFunc:r=>({x:()=>r.clone()})};p();var cS={kernelName:Ns,gradFunc:r=>({x:()=>st(r)})};p();var pS={kernelName:_s,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{clipValueMin:o,clipValueMax:i}=t;return{x:()=>Ar(hn(oo(n,o),Mo(n,i)),r,st(r))}}};p();var xS={kernelName:e0,inputsToSave:["x"],gradFunc:x1.gradFunc};p();var fS={kernelName:t0,saveAllInputs:!0,gradFunc:(r,e,t)=>{let n=e.map(l=>l.shape),{axis:o}=t,i=rn(o,e[0].shape)[0],s=n.map(l=>l[i]);return un(r,s,i).map(l=>()=>l)}};p();var mS={kernelName:r0,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let[n,o]=e,{dilations:i,strides:s,pad:a,dataFormat:l}=t;return V(Yo(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>xp(n.shape,r,o,s,a,l),filter:()=>Mp(n,r,o.shape,s,a,l)}}};p();var hS={kernelName:n0,inputsToSave:["dy","filter"],gradFunc:(r,e,t)=>{let[n,o]=e,{strides:i,pad:s,dataFormat:a,dimRoundingMode:l}=t;return{dy:()=>Kn(r,o,i,s,a,1,l),filter:()=>Mp(r,n,o.shape,i,s,a,l)}}};p();p();function qK(r,e,t,n,o){let i=r;r.rank===4&&(i=ie(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));let s=e;s.rank===4&&(s=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),V(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),V(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),V(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),V(i.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${t[3]}.`),V(s.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${t[4]}).`);let a={x:i,dy:s},l={strides:n,pad:o,filterShape:t};return G.runKernel(zl,a,l)}var dS=U({conv3DBackpropFilter_:qK});var gS={kernelName:o0,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let{dilations:n,strides:o,pad:i}=t;V(Yo(n),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${n}'`);let[s,a]=e;return{x:()=>Ld(s.shape,r,a,o,i),filter:()=>dS(s,r,a.shape,o,i)}}};p();var yS={kernelName:Ss,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(Dt(H2(Le(t,"float32"))),r)}}};p();var bS={kernelName:Ts,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(K2(Le(t,"float32")),r)}}};p();var vS={kernelName:i0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{axis:o,exclusive:i,reverse:s}=t;return{x:()=>{let a=ag([o],n.rank),l=F2(r,o,i,!s);return a!=null&&(l=Rt(l,a)),l}}}};p();var wS={kernelName:s0,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let{dilations:n,strides:o,pad:i,dimRoundingMode:s}=t,a=n??[1,1];V(Yo(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,u]=e;return V(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),V(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),V(In(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),s!=null&&V(Xt(i),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${s} but got pad ${i}.`),{x:()=>n1(l.shape,r,u,o,i,n,s),filter:()=>r1(l,r,u.shape,o,i,n,s)}}};p();var CS={kernelName:a0,inputsToSave:["x","filter"],gradFunc:(r,e,t)=>{let[n,o]=e,i={x:n,filter:o,dy:r},s={x:n,filter:o,dy:r};return{x:()=>G.runKernel(Uc,i,t),filter:()=>G.runKernel(Vc,s,t)}}};p();var NS={kernelName:ks,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e,n={dy:r,y:t};return{x:()=>G.runKernel(ql,n)}}};p();var _S={kernelName:Es,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e,n=re(Yr(Dt(gt(t))),2/Math.sqrt(Math.PI));return{x:()=>re(r,n)}}};p();var SS={kernelName:As,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,t)}}};p();var TS={kernelName:l0,inputsToSave:["input"],gradFunc:(r,e)=>{let[t]=e;return{input:()=>ie(r,t.shape)}}};p();var IS={kernelName:Ds,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,Yr(t))}}};p();var kS={kernelName:Rs,gradFunc:r=>({x:()=>st(r)})};p();var ES={kernelName:$s,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=He(r,Le(n,"float32")),l=yr(t.shape,o);return l.length>0?ie(Qe(a,l),t.shape):a},b:()=>{let a=re(r,Le(t,"float32")),l=yr(n.shape,o);l.length>0&&(a=ie(Qe(a,l),n.shape));let u=gt(n);return Dt(He(a,Le(u,"float32")))}}}};p();var AS={kernelName:u0,inputsToSave:["x","mean","variance","scale"],gradFunc:(r,e,t)=>{let{varianceEpsilon:n}=t,[o,i,s,a]=e,l=a??Ve(1),u=yr(i.shape,o.shape),c=[];if(i.rank===1){for(let N=0;N<o.shape.length-1;++N)c.push(o.shape[N]);c.push(1)}let x=Ge(o,i),f=re(r,l),h=W2($e(s,Ve(n))),g=re(re(re(h,h),h),Ve(-.5));return{x:()=>i.rank===1?ie(re(re(r,Fo(ie(h,[1,1,1,i.shape[0]]),c)),l),o.shape):ie(re(re(r,h),l),o.shape),mean:()=>{let N=re(re(h,Ve(-1)),f);return i.rank===1&&(N=Qe(N,u)),ie(N,i.shape)},variance:()=>{let N=re(re(g,x),f);return i.rank===1&&(N=Qe(N,u)),ie(N,i.shape)},scale:()=>{let N=re(x,h),_=re(r,N);return i.rank===1&&(_=Qe(_,u)),ie(_,i.shape)},offset:()=>{let N=r;return i.rank===1&&(N=Qe(N,u)),ie(N,i.shape)}}}};p();var $S={kernelName:c0,inputsToSave:["x","indices"],gradFunc:(r,e,t)=>{let[n,o]=e,{axis:i}=t,s=rn(i,n.shape)[0];return{x:()=>{let l=n.shape,u=o.size,c=l.slice(0,s),x=c.length,f=l.slice(i,l.length).slice(1),h=f.length,g=DS(0,x),m=DS(x+1,x+1+h),b=RS([c,[u],f]),v=ie(r,b),w=ie(o,[u]),C=RS([[x],g,m]),N=Rt(v,C),_=Op(N,w,n.shape[s]),E=mf(C);return _=Rt(_,E),_},indices:()=>o}}};function DS(r,e){let t=[];for(let n=r;n<e;++n)t.push(n);return t}function RS(r){let e=[];for(let t=0;t<r.length;++t)for(let n=0;n<r[t].length;++n)e.push(r[t][n]);return e}p();var OS={kernelName:Os,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>st(t),b:()=>st(n)}}};p();var FS={kernelName:Wi,gradFunc:r=>({x:()=>Le(r,"float32")})};p();var MS={kernelName:Fs,gradFunc:r=>({x:()=>st(r)})};p();var zS={kernelName:Ms,gradFunc:r=>({x:()=>st(r)})};p();var LS={kernelName:zs,gradFunc:r=>({x:()=>st(r)})};p();var PS={kernelName:p0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{alpha:o}=t,i=Jr(n,0);return{x:()=>Ar(i,r,re(r,o))}}};p();var BS={kernelName:Ps,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,$e(t,1))}}};p();var US={kernelName:Ls,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,Le(t,"float32"))}}};p();var VS={kernelName:w5,inputsToSave:[],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n]=e,{axis:o}=t;return{logits:()=>{let s=Yr(n);return Ge(r,re(Qe(r,o,!0),s))}}}};p();p();function HK(r,e,t,n=5,o=1,i=1,s=.5){let a={x:r,y:e,dy:t},l={depthRadius:n,bias:o,alpha:i,beta:s};return G.runKernel(Ql,a,l)}var GS=U({localResponseNormalizationBackprop_:HK});var WS={kernelName:x0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,o]=e,{depthRadius:i,bias:s,alpha:a,beta:l}=t;return{x:()=>GS(n,o,r,i,s,a,l)}}};p();p();function f1(r,e,t,n){return e.rank<t.rank&&(e=ie(e,yi(e.shape,n))),r.rank<t.rank&&(r=ie(r,yi(r.shape,n))),{x:()=>re(r,Le(go(t,e),r.dtype))}}var Tg={kernelName:f0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let n=t,{reductionIndices:o}=n,i=e[0],s=e[1],a=rn(o,i.shape),l=f1(r,s,i,a);return{x:()=>l.x()}}};p();var qS={kernelName:Bs,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>re(r,Le(oo(t,n),"float32")),b:()=>re(r,Le(L2(t,n),"float32"))}}};p();p();function KK(r,e,t,n,o,i,s){let a=O(r,"dy","maxPool3dGrad"),l=O(e,"input","maxPool3dGrad"),u=O(t,"output","maxPool3dGrad"),c=a,x=l,f=u,h=!1;l.rank===4&&(h=!0,c=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),x=ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=ie(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),V(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),V(x.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${x.rank}.`),V(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),s!=null&&V(Xt(i),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${s} but got pad ${i}.`);let g={dy:c,input:x,output:f},m={filterSize:n,strides:o,pad:i,dimRoundingMode:s},b=G.runKernel(tu,g,m);return h?ie(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}var HS=U({maxPool3dGrad_:KK});var KS={kernelName:h0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,o]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=t;return{x:()=>HS(r,n,o,i,s,a,l)}}};p();p();function jK(r,e,t,n,o,i,s){let a=O(r,"dy","maxPoolGrad"),l=O(e,"input","maxPoolGrad"),u=O(t,"output","maxPoolGrad");V(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),V(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),V(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),s!=null&&V(Xt(i),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${s} but got pad ${i}.`);let c={dy:a,input:l,output:u},x={filterSize:n,strides:o,pad:i,dimRoundingMode:s};return G.runKernel(eu,c,x)}var jS=U({maxPoolGrad_:jK});var XS={kernelName:m0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n,o]=e,{filterSize:i,strides:s,pad:a}=t;return{x:()=>jS(r,n,o,i,s,a)}}};p();var YS={kernelName:d0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{axis:o}=t,i=rn(o,n.shape),a=sg(n.shape,i)[1],l=sr(a);return{x:()=>{let c=n.shape.slice();i.forEach(h=>{c[h]=1});let x=ie(r,c);return He(re(x,kn(n.shape,"float32")),l)}}}};p();var ZS={kernelName:g0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(r,e,t)=>{let n=t,{axis:o}=n,[i,s]=e,a=rn(o,i.shape),l=f1(r,s,i,a);return{x:()=>l.x()}}};p();var JS={kernelName:Us,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e;return{a:()=>re(r,Le(Mo(t,n),"float32")),b:()=>re(r,Le(Jr(t,n),"float32"))}}};p();var QS={kernelName:y0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let n=e[0],{paddings:o}=t,i=o.map(s=>s[0]);return{x:()=>ht(r,i,n.shape)}}};p();var eT={kernelName:Vs,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=yr(t.shape,o);return a.length>0?ie(Qe(r,a),t.shape):r},b:()=>{let a=re(r,Dt(di(He(t,n)))),l=yr(n.shape,o);return l.length>0?ie(Qe(a,l),n.shape):a}}}};p();var tT={kernelName:Gs,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=re(r,Le(n,"float32")),l=yr(t.shape,o);return l.length>0?ie(Qe(a,l),t.shape):a},b:()=>{let a=re(r,Le(t,"float32")),l=yr(n.shape,o);return l.length>0?ie(Qe(a,l),n.shape):a}}}};p();var rT={kernelName:b0,gradFunc:r=>({x:()=>Dt(r)})};p();var nT={kernelName:w0,inputsToSave:["indices"],gradFunc:(r,e)=>{let t=e[0];return{indices:()=>lr(t.shape,"float32")}}};p();var oT={kernelName:v0,gradFunc:r=>({x:()=>st(r)})};p();var iT={kernelName:C0,saveAllInputs:!0,gradFunc:(r,e,t)=>{let{axis:n}=t;return cn(r,n).map(i=>()=>i)}};p();var Ig={kernelName:N0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let n=e[0],{paddings:o}=t,i=o.map(s=>s[0]);return{x:()=>ht(r,i,n.shape)}}};p();var sT={kernelName:Ws,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(r,e)=>{let[t,n,o]=e,i=t,s=n,a=Nt(i.shape,s.shape);return{a:()=>{let c=Le(s,"float32"),x=re(r,re(c,zn(i,Ge(c,Ve(1))))),f=yr(i.shape,a);return f.length>0&&(x=Qe(x,f)),ie(x,i.shape)},b:()=>{let c=Jr(i,0),x=Ar(c,an(i),st(i)),f=re(r,re(o,x)),h=yr(s.shape,a);return h.length>0&&(f=Qe(f,h)),ie(f,s.shape)}}}};p();var aT={kernelName:_0,inputsToSave:["x","alpha"],gradFunc:(r,e)=>{let[t,n]=e,o=Jr(t,0);return{x:()=>Ar(o,r,re(r,n)),alpha:()=>{let i=Ar(o,st(r),re(r,t)),s=yr(n.shape,r.shape);return s.length>0&&(i=Qe(i,s)),ie(i,n.shape)}}}};p();var lT={kernelName:Is,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=He(r,Le(n,"float32")),l=yr(t.shape,o);return l.length>0?ie(Qe(a,l),t.shape):a},b:()=>{let a=re(r,Le(t,"float32")),l=yr(n.shape,o);l.length>0&&(a=ie(Qe(a,l),n.shape));let u=gt(n);return Dt(He(a,Le(u,"float32")))}}}};p();var uT={kernelName:qs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,Dt(gt(t)))}}};p();var cT={kernelName:Ks,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e,n=re(Mo(t,6),wi(t));return{x:()=>re(r,Le(n,"float32"))}}};p();var pT={kernelName:Hs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,Le(wi(t),"float32"))}}};p();var xT={kernelName:S0,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>ie(r,t.shape)}}};p();var fT={kernelName:I0,inputsToSave:["images"],gradFunc:(r,e,t)=>{let[n]=e,o={dy:r,images:n};return{images:()=>G.runKernel(pu,o,t)}}};p();var mT={kernelName:T0,inputsToSave:["images"],gradFunc:(r,e,t)=>{let[n]=e,o={dy:r,images:n};return{images:()=>G.runKernel(cu,o,t)}}};p();var hT={kernelName:k0,gradFunc:(r,e,t)=>{let{dims:n}=t,o=rn(n,r.shape);return{x:()=>qr(r,o)}}};p();var dT={kernelName:js,gradFunc:r=>({x:()=>st(r)})};p();var gT={kernelName:Xs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>Dt(He(r,re(zn(t,1.5),2)))}}};p();var yT={kernelName:E0,inputsToSave:["condition"],gradFunc:(r,e)=>{let[t]=e;return{condition:()=>Le(st(t),"float32"),t:()=>re(r,Le(t,r.dtype)),e:()=>re(r,Le(da(t),r.dtype))}}};p();var bT={kernelName:Ys,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>{let n=Jr(t,Ve(0)),o=Ve(Ng),i=Ve(_g),s=re(r,i),a=re(re(r,o),Yr(Le(t,"float32")));return Ar(n,s,a)}}}};p();var vT={kernelName:ea,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,re(t,Ge(Ve(1),t)))}}};p();var wT={kernelName:Qs,gradFunc:r=>({x:()=>st(r)})};p();var CT={kernelName:Zs,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(fa(Le(t,"float32")),r)}}};p();var NT={kernelName:Js,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(O2(Le(t,"float32")),r)}}};p();var _T={kernelName:A0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{begin:o,size:i}=t,s=n.shape,[a,l]=Y5(n,o,i),u=[];for(let c=0;c<r.rank;c++)u.push([a[c],s[c]-a[c]-l[c]]);return{x:()=>Mn(r,u)}}};p();var ST={kernelName:O0,outputsToSave:[!0],gradFunc:(r,e,t)=>{let[n]=e,{dim:o}=t,i=!0,s=re(r,n);return{logits:()=>Ge(s,re(Qe(s,[o],i),n))}}};p();var TT={kernelName:ta,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,Hn(t))}}};p();var kg={kernelName:R0,gradFunc:(r,e,t)=>{let{blockShape:n,paddings:o}=t;return{x:()=>xa(r,n,o)}}};p();var Eg={kernelName:$0,gradFunc:(r,e,t)=>{let{axis:n}=t;return{x:()=>Mt(r,n)}}};p();var IT={kernelName:ra,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,re(ur(Le(t,"float32")),2))}}};p();var kT={kernelName:fu,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(r,re(Le(t,"float32"),2))}}};p();var ET={kernelName:na,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Ve(2);return{a:()=>re(r,re(o,Ge(t,n))),b:()=>re(r,re(o,Ge(n,t)))}}};p();var AT={kernelName:aa,gradFunc:r=>({x:()=>st(r)})};p();var DT={kernelName:oa,inputsToSave:["a","b"],gradFunc:(r,e)=>{let[t,n]=e,o=Nt(t.shape,n.shape);return{a:()=>{let a=r,l=yr(t.shape,o);return l.length>0&&(a=Qe(a,l)),ie(a,t.shape)},b:()=>{let a=r,l=yr(n.shape,o);return l.length>0&&(a=Qe(a,l)),ie(Dt(a),n.shape)}}}};p();var RT={kernelName:D0,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,o=n.shape.slice(),{axis:i}=t;rn(i,n.shape).forEach(u=>{o[u]=1});let a=ie(r,o),l=re(a,kn(n.shape,"float32"));return{x:()=>l}}};p();var $T={kernelName:ia,inputsToSave:["x"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>He(r,gt(fa(t)))}}};p();var OT={kernelName:sa,outputsToSave:[!0],gradFunc:(r,e)=>{let[t]=e;return{x:()=>re(Ge(Ve(1),gt(t)),r)}}};p();var FT={kernelName:qi,inputsToSave:["x"],gradFunc:(r,e,t)=>{let[n]=e,{reps:o}=t;return{x:()=>{let s=st(n);if(n.rank===1)for(let a=0;a<o[0];++a)s=$e(s,ht(r,[a*n.shape[0]],[n.shape[0]]));else if(n.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)s=$e(s,ht(r,[a*n.shape[0],l*n.shape[1]],[n.shape[0],n.shape[1]]));else if(n.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)s=$e(s,ht(r,[a*n.shape[0],l*n.shape[1],u*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else if(n.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)s=$e(s,ht(r,[a*n.shape[0],l*n.shape[1],u*n.shape[2],c*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${n.rank} tensors yet.`);return s}}}};p();var MT={kernelName:F0,gradFunc:(r,e,t)=>{let n=t,{perm:o}=n,i=mf(o);return{x:()=>Rt(r,i)}}};p();var zT={kernelName:M0,gradFunc:(r,e,t)=>{let n=t,{axis:o}=n;return{value:()=>Pr(r,o)}}};p();var LT={kernelName:z0,inputsToSave:["segmentIds"],gradFunc:(r,e)=>{let[t]=e;return{x:()=>XK(r,t)}}};function XK(r,e){let t=Xn(e,st(e)),n=Jo(r,t),o=oo(e,Ve(0,"int32")),i=n.rank-o.rank;for(let a=0;a<i;++a)o=sn(o,a+1);o=hn(o,kn(n.shape,"bool"));let s=st(n);return Ar(o,n,s)}p();var PT={kernelName:L0,gradFunc:r=>({x:()=>st(r)})};var YK=[x1,q_,H_,K_,j_,X_,Y_,Z_,J_,Q_,eS,tS,nS,iS,sS,aS,lS,uS,cS,pS,xS,fS,hS,mS,gS,yS,bS,vS,wS,CS,lT,NS,_S,SS,TS,IS,ES,kS,AS,$S,OS,FS,MS,zS,LS,PS,BS,US,VS,WS,Tg,Tg,qS,KS,XS,YS,ZS,JS,QS,eT,tT,rT,nT,oT,iT,Ig,Ig,sT,aT,uT,cT,pT,xT,fT,mT,hT,dT,gT,yT,bT,vT,wT,CT,NT,_T,ST,TT,kg,kg,Eg,Eg,IT,ET,kT,AT,DT,RT,$T,OT,FT,MT,zT,LT,PT];for(let r of YK)C5(r);p();p();ee().prototype.abs=function(){return this.throwIfDisposed(),gr(this)};p();ee().prototype.acos=function(){return this.throwIfDisposed(),tp(this)};p();ee().prototype.acosh=function(){return this.throwIfDisposed(),rp(this)};p();ee().prototype.add=function(r){return this.throwIfDisposed(),$e(this,r)};p();ee().prototype.all=function(r,e){return this.throwIfDisposed(),D2(this,r,e)};p();ee().prototype.any=function(r,e){return this.throwIfDisposed(),q0(this,r,e)};p();ee().prototype.argMax=function(r){return this.throwIfDisposed(),H0(this,r)};p();ee().prototype.argMin=function(r){return this.throwIfDisposed(),np(this,r)};p();ee().prototype.asScalar=function(){return this.throwIfDisposed(),V(this.size===1,()=>"The array must have only 1 element."),ie(this,[])};p();ee().prototype.asType=function(r){return this.throwIfDisposed(),Le(this,r)};p();ee().prototype.as1D=function(){return this.throwIfDisposed(),ie(this,[this.size])};p();ee().prototype.as2D=function(r,e){return this.throwIfDisposed(),ie(this,[r,e])};p();ee().prototype.as3D=function(r,e,t){return this.throwIfDisposed(),ie(this,[r,e,t])};p();ee().prototype.as4D=function(r,e,t,n){return this.throwIfDisposed(),ie(this,[r,e,t,n])};p();ee().prototype.as5D=function(r,e,t,n,o){return this.throwIfDisposed(),ie(this,[r,e,t,n,o])};p();ee().prototype.asin=function(){return this.throwIfDisposed(),op(this)};p();ee().prototype.asinh=function(){return this.throwIfDisposed(),ip(this)};p();ee().prototype.atan=function(){return this.throwIfDisposed(),sp(this)};p();ee().prototype.atan2=function(r){return this.throwIfDisposed(),ap(this,r)};p();ee().prototype.atanh=function(){return this.throwIfDisposed(),lp(this)};p();ee().prototype.avgPool=function(r,e,t,n){return this.throwIfDisposed(),pa(this,r,e,t,n)};p();ee().prototype.batchToSpaceND=function(r,e){return this.throwIfDisposed(),xa(this,r,e)};p();ee().prototype.batchNorm=function(r,e,t,n,o){return this.throwIfDisposed(),Zo(this,r,e,t,n,o)};p();ee().prototype.broadcastTo=function(r){return this.throwIfDisposed(),j0(this,r)};p();ee().prototype.cast=function(r){return this.throwIfDisposed(),Le(this,r)};p();ee().prototype.ceil=function(){return this.throwIfDisposed(),pp(this)};p();ee().prototype.clipByValue=function(r,e){return this.throwIfDisposed(),on(this,r,e)};p();ee().prototype.concat=function(r,e){return this.throwIfDisposed(),r instanceof Ct&&(r=[r]),Mt([this,...r],e)};p();ee().prototype.conv1d=function(r,e,t,n,o,i){return this.throwIfDisposed(),R2(this,r,e,t,n,o,i)};p();ee().prototype.conv2dTranspose=function(r,e,t,n,o){return this.throwIfDisposed(),$2(this,r,e,t,n,o)};p();ee().prototype.conv2d=function(r,e,t,n,o,i){return this.throwIfDisposed(),Kn(this,r,e,t,n,o,i)};p();ee().prototype.cos=function(){return this.throwIfDisposed(),fa(this)};p();ee().prototype.cosh=function(){return this.throwIfDisposed(),O2(this)};p();ee().prototype.cumsum=function(r,e,t){return this.throwIfDisposed(),F2(this,r,e,t)};p();ee().prototype.depthToSpace=function(r,e){return this.throwIfDisposed(),mp(this,r,e)};p();ee().prototype.depthwiseConv2d=function(r,e,t,n,o,i){return this.throwIfDisposed(),mi(this,r,e,t,n,o,i)};p();ee().prototype.dilation2d=function(r,e,t,n,o){return this.throwIfDisposed(),hp(this,r,e,t,n,o)};p();ee().prototype.divNoNan=function(r){return this.throwIfDisposed(),dp(this,r)};p();ee().prototype.div=function(r){return this.throwIfDisposed(),He(this,r)};p();ee().prototype.dot=function(r){return this.throwIfDisposed(),Bd(this,r)};p();ee().prototype.elu=function(){return this.throwIfDisposed(),hi(this)};p();ee().prototype.equal=function(r){return this.throwIfDisposed(),go(this,r)};p();ee().prototype.erf=function(){return this.throwIfDisposed(),gp(this)};p();ee().prototype.exp=function(){return this.throwIfDisposed(),Yr(this)};p();ee().prototype.expandDims=function(r){return this.throwIfDisposed(),sn(this,r)};p();ee().prototype.expm1=function(){return this.throwIfDisposed(),yp(this)};p();ee().prototype.fft=function(){return this.throwIfDisposed(),wa(this)};p();ee().prototype.flatten=function(){return this.throwIfDisposed(),ie(this,[this.size])};p();ee().prototype.floor=function(){return this.throwIfDisposed(),di(this)};p();ee().prototype.floorDiv=function(r){return this.throwIfDisposed(),A2(this,r)};p();ee().prototype.gather=function(r,e){return this.throwIfDisposed(),Jo(this,r,e)};p();ee().prototype.greaterEqual=function(r){return this.throwIfDisposed(),oo(this,r)};p();ee().prototype.greater=function(r){return this.throwIfDisposed(),Jr(this,r)};p();ee().prototype.ifft=function(){return this.throwIfDisposed(),ji(this)};p();ee().prototype.irfft=function(){return this.throwIfDisposed(),j2(this)};p();ee().prototype.isFinite=function(){return this.throwIfDisposed(),Ud(this)};p();ee().prototype.isInf=function(){return this.throwIfDisposed(),Vd(this)};p();ee().prototype.isNaN=function(){return this.throwIfDisposed(),Gd(this)};p();ee().prototype.leakyRelu=function(r){return this.throwIfDisposed(),ha(this,r)};p();ee().prototype.lessEqual=function(r){return this.throwIfDisposed(),Mo(this,r)};p();ee().prototype.less=function(r){return this.throwIfDisposed(),L2(this,r)};p();ee().prototype.localResponseNormalization=function(r,e,t,n){return this.throwIfDisposed(),bp(this,r,e,t,n)};p();ee().prototype.logSigmoid=function(){return this.throwIfDisposed(),Hd(this)};p();ee().prototype.logSoftmax=function(r){return this.throwIfDisposed(),B2(this,r)};p();ee().prototype.logSumExp=function(r,e){return this.throwIfDisposed(),vp(this,r,e)};p();ee().prototype.log=function(){return this.throwIfDisposed(),an(this)};p();ee().prototype.log1p=function(){return this.throwIfDisposed(),P2(this)};p();ee().prototype.logicalAnd=function(r){return this.throwIfDisposed(),hn(this,r)};p();ee().prototype.logicalNot=function(){return this.throwIfDisposed(),da(this)};p();ee().prototype.logicalOr=function(r){return this.throwIfDisposed(),U2(this,r)};p();ee().prototype.logicalXor=function(r){return this.throwIfDisposed(),Kd(this,r)};p();ee().prototype.matMul=function(r,e,t){return this.throwIfDisposed(),kt(this,r,e,t)};p();ee().prototype.maxPool=function(r,e,t,n){return this.throwIfDisposed(),ga(this,r,e,t,n)};p();ee().prototype.max=function(r,e){return this.throwIfDisposed(),ln(this,r,e)};p();ee().prototype.maximum=function(r){return this.throwIfDisposed(),Xn(this,r)};p();ee().prototype.mean=function(r,e){return this.throwIfDisposed(),ar(this,r,e)};p();ee().prototype.min=function(r,e){return this.throwIfDisposed(),Ki(this,r,e)};p();ee().prototype.minimum=function(r){return this.throwIfDisposed(),bi(this,r)};p();ee().prototype.mirrorPad=function(r,e){return this.throwIfDisposed(),Cp(this,r,e)};p();ee().prototype.mod=function(r){return this.throwIfDisposed(),Np(this,r)};p();ee().prototype.mul=function(r){return this.throwIfDisposed(),re(this,r)};p();ee().prototype.neg=function(){return this.throwIfDisposed(),Dt(this)};p();ee().prototype.norm=function(r,e,t){return this.throwIfDisposed(),Au(this,r,e,t)};p();ee().prototype.notEqual=function(r){return this.throwIfDisposed(),Qo(this,r)};p();ee().prototype.oneHot=function(r,e=1,t=0){return this.throwIfDisposed(),fi(this,r,e,t)};p();ee().prototype.onesLike=function(){return this.throwIfDisposed(),Qr(this)};p();ee().prototype.pad=function(r,e){return this.throwIfDisposed(),Mn(this,r,e)};p();ee().prototype.pool=function(r,e,t,n,o){return this.throwIfDisposed(),Yd(this,r,e,t,n,o)};p();ee().prototype.pow=function(r){return this.throwIfDisposed(),zn(this,r)};p();ee().prototype.prelu=function(r){return this.throwIfDisposed(),ba(this,r)};p();ee().prototype.prod=function(r,e){return this.throwIfDisposed(),V2(this,r,e)};p();ee().prototype.reciprocal=function(){return this.throwIfDisposed(),Sp(this)};p();ee().prototype.relu=function(){return this.throwIfDisposed(),En(this)};p();ee().prototype.relu6=function(){return this.throwIfDisposed(),G2(this)};p();ee().prototype.reshapeAs=function(r){return this.throwIfDisposed(),ie(this,r.shape)};p();ee().prototype.reshape=function(r){return this.throwIfDisposed(),ie(this,r)};p();ee().prototype.resizeBilinear=function(r,e,t){return this.throwIfDisposed(),u1(this,r,e,t)};p();ee().prototype.resizeNearestNeighbor=function(r,e,t){return this.throwIfDisposed(),c1(this,r,e,t)};p();ee().prototype.reverse=function(r){return this.throwIfDisposed(),qr(this,r)};p();ee().prototype.rfft=function(){return this.throwIfDisposed(),Ca(this)};p();ee().prototype.round=function(){return this.throwIfDisposed(),Tp(this)};p();ee().prototype.rsqrt=function(){return this.throwIfDisposed(),W2(this)};p();ee().prototype.selu=function(){return this.throwIfDisposed(),q2(this)};p();ee().prototype.separableConv2d=function(r,e,t,n,o,i){return this.throwIfDisposed(),Ip(this,r,e,t,n,o,i)};p();ee().prototype.sigmoid=function(){return this.throwIfDisposed(),Hn(this)};p();ee().prototype.sign=function(){return this.throwIfDisposed(),kp(this)};p();ee().prototype.sin=function(){return this.throwIfDisposed(),H2(this)};p();ee().prototype.sinh=function(){return this.throwIfDisposed(),K2(this)};p();ee().prototype.slice=function(r,e){return this.throwIfDisposed(),ht(this,r,e)};p();ee().prototype.softmax=function(r){return this.throwIfDisposed(),va(this,r)};p();ee().prototype.softplus=function(){return this.throwIfDisposed(),gi(this)};p();ee().prototype.spaceToBatchND=function(r,e){return this.throwIfDisposed(),ya(this,r,e)};p();ee().prototype.split=function(r,e){return this.throwIfDisposed(),un(this,r,e)};p();ee().prototype.sqrt=function(){return this.throwIfDisposed(),ur(this)};p();ee().prototype.square=function(){return this.throwIfDisposed(),gt(this)};p();ee().prototype.squaredDifference=function(r){return this.throwIfDisposed(),X2(this,r)};p();ee().prototype.squeeze=function(r){return this.throwIfDisposed(),yo(this,r)};p();ee().prototype.stack=function(r,e){this.throwIfDisposed();let t=r instanceof Ct?[this,r]:[this,...r];return Pr(t,e)};p();ee().prototype.step=function(r){return this.throwIfDisposed(),wi(this,r)};p();ee().prototype.stridedSlice=function(r,e,t,n,o,i,s,a){return this.throwIfDisposed(),Dp(this,r,e,t,n,o,i,s,a)};p();ee().prototype.sub=function(r){return this.throwIfDisposed(),Ge(this,r)};p();ee().prototype.sum=function(r,e){return this.throwIfDisposed(),Qe(this,r,e)};p();ee().prototype.tan=function(){return this.throwIfDisposed(),Rp(this)};p();ee().prototype.tanh=function(){return this.throwIfDisposed(),Hi(this)};p();ee().prototype.tile=function(r){return this.throwIfDisposed(),Fo(this,r)};p();ee().prototype.toBool=function(){return this.throwIfDisposed(),Le(this,"bool")};p();ee().prototype.toFloat=function(){return this.throwIfDisposed(),Le(this,"float32")};p();ee().prototype.toInt=function(){return this.throwIfDisposed(),Le(this,"int32")};p();ee().prototype.topk=function(r,e){return this.throwIfDisposed(),$p(this,r,e)};p();ee().prototype.transpose=function(r){return this.throwIfDisposed(),Rt(this,r)};p();ee().prototype.unique=function(r){return this.throwIfDisposed(),Eu(this,r)};p();ee().prototype.unsortedSegmentSum=function(r,e){return this.throwIfDisposed(),Op(this,r,e)};p();ee().prototype.unstack=function(r){return this.throwIfDisposed(),cn(this,r)};p();ee().prototype.where=function(r,e){return this.throwIfDisposed(),Ar(r,this,e)};p();ee().prototype.zerosLike=function(){return this.throwIfDisposed(),st(this)};p();var Og={};Pt(Og,{maxNorm:()=>JK,minMaxNorm:()=>tj,nonNeg:()=>ej,unitNorm:()=>QK});p();p();p();var Ag;function en(){return Ag==null&&(Ag=tg().epsilon()),Ag}function io(){return"channelsLast"}p();p();var zo=class extends Error{constructor(e){super(e);Object.setPrototypeOf(this,zo.prototype)}},Yn=class extends Error{constructor(e){super(e);Object.setPrototypeOf(this,Yn.prototype)}},ue=class extends Error{constructor(e){super(e);Object.setPrototypeOf(this,ue.prototype)}},lt=class extends Error{constructor(e){super(e);Object.setPrototypeOf(this,lt.prototype)}},vf=class extends Error{constructor(e){super(e);Object.setPrototypeOf(this,vf.prototype)}};function _i(r,e){if(Array.isArray(r)){let t=[];for(let n=0;n<e;n++)t=t.concat(r);return t}else{let t=new Array(e);return t.fill(r),t}}function ti(r,e){if(!r)throw new vf(e)}function Rg(r,e){let t=0;for(let n of r)n===e&&t++;return t}function bn(r){return r.length===1?r[0]:r}function xr(r){return Array.isArray(r)?r:[r]}function Si(r){let t=r.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function J0(r){return r.length<=1||r.indexOf("_")===-1?r:r.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}var Ni={};function Lp(r){if(r==null)return null;let e={};return e.className=r.getClassName(),e.config=r.getConfig(),e}function Dg(r){if(!(r==null||typeof r!="object"))if(Array.isArray(r))r.forEach(e=>Dg(e));else{let e=Object.keys(r);for(let t of e){let n=r[t];n!=null&&typeof n=="object"&&(!Array.isArray(n)&&n.type==="ndarray"&&typeof n.value=="number"?r[t]=n.value:Dg(n))}}}function Na(r,e={},t={},n="object",o=!1){if(typeof r=="string"){let i=r,s;if(i in t)s=t[i];else if(i in Ni)s=Ni[i];else if(s=e[i],s==null)throw new ue(`Unknown ${n}: ${r}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let i=r;if(i.className==null||i.config==null)throw new ue(`${n}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);let s=i.className,a,l;if(s in t?[a,l]=t[s]:s in Ni?[a,l]=Ni.className:s in e&&([a,l]=e[s]),a==null)throw new ue(`Unknown ${n}: ${s}. This may be due to one of the following reasons:
1. The ${n} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${n} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let u={};for(let h of Object.keys(Ni))u[h]=Ni[h];for(let h of Object.keys(t))u[h]=t[h];let c=i.config;c.customObjects=u;let x=Object.assign({},Ni);for(let h of Object.keys(t))Ni[h]=t[h];Dg(i.config);let f=l(a,i.config,t,o);return Ni=Object.assign({},x),f}else{let u=Object.assign({},Ni);for(let x of Object.keys(t))Ni[x]=t[x];let c=new a(i.config);return Ni=Object.assign({},u),c}}}function ZK(r,e){return r<e?-1:r>e?1:0}function wf(r,e){return-1*ZK(r,e)}function Ti(r){if(r==null)return r;let e=[];for(let t of r)e.indexOf(t)===-1&&e.push(t);return e}function BT(r){if(r==null)throw new ue(`Invalid value in obj: ${JSON.stringify(r)}`);for(let e in r)if(r.hasOwnProperty(e))return!1;return!0}function _a(r,e,t){if(t!=null&&r.indexOf(t)<0)throw new ue(`${t} is not a valid ${e}.  Valid values are ${r} or null/undefined.`)}function m1(r,e,t=0,n=1/0){return ti(t>=0),ti(n>=t),Array.isArray(r)&&r.length>=t&&r.length<=n&&r.every(o=>typeof o===e)}function Hr(r,e){Array.isArray(r)?(I.assert(r.length>0,()=>`${e} is unexpectedly an empty array.`),r.forEach((t,n)=>Hr(t,`element ${n+1} of ${e}`))):I.assert(Number.isInteger(r)&&r>0,()=>`Expected ${e} to be a positive integer, but got ${UT(r)}.`)}function UT(r){return r===null?"null":Array.isArray(r)?"["+r.map(e=>UT(e)).join(",")+"]":typeof r=="string"?`"${r}"`:`${r}`}function VT(r,e){let t=I.now(),n;return(...i)=>{let s=I.now();return s-t<e||(t=s,n=r(...i)),n}}function h1(r){return r==="relu"?"relu":r==="linear"?"linear":r==="elu"?"elu":null}function $g(r,e){return pe(()=>ur(Qe(re(r,r),e,!0)))}var Pp=class extends Re.Serializable{getConfig(){return{}}},Cf=class extends Pp{constructor(e){super();this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return pe(()=>{let t=$g(e,this.axis),n=on(t,0,this.maxValue);return re(e,He(n,$e(en(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};Cf.className="MaxNorm";Re.registerClass(Cf);var Nf=class extends Pp{constructor(e){super();this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return pe(()=>He(e,$e(en(),$g(e,this.axis))))}getConfig(){return{axis:this.axis}}};Nf.className="UnitNorm";Re.registerClass(Nf);var _f=class extends Pp{apply(e){return En(e)}};_f.className="NonNeg";Re.registerClass(_f);var Sf=class extends Pp{constructor(e){super();this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return pe(()=>{let t=$g(e,this.axis),n=$e(re(this.rate,on(t,this.minValue,this.maxValue)),re(1-this.rate,t));return re(e,He(n,$e(en(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};Sf.className="MinMaxNorm";Re.registerClass(Sf);var GT={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fr(r){return Lp(r)}function WT(r,e={}){return Na(r,Re.SerializationMap.getMap().classNameMap,e,"constraint")}function Mr(r){if(r==null)return null;if(typeof r=="string"){let t={className:r in GT?GT[r]:r,config:{}};return WT(t)}else return r instanceof Pp?r:WT(r)}function JK(r){return new Cf(r)}function QK(r){return new Nf(r)}function ej(){return new _f}function tj(r){return new Sf(r)}var Pg={};Pt(Pg,{constant:()=>uj,glorotNormal:()=>dj,glorotUniform:()=>hj,heNormal:()=>gj,heUniform:()=>yj,identity:()=>fj,leCunNormal:()=>bj,leCunUniform:()=>vj,ones:()=>lj,orthogonal:()=>wj,randomNormal:()=>pj,randomUniform:()=>cj,truncatedNormal:()=>xj,varianceScaling:()=>mj,zeros:()=>aj});p();p();p();p();p();var qT=["channelsFirst","channelsLast"],HT=["nearest","bilinear"],KT=["valid","same","causal"],jT=["max","avg"],XT=["sum","mul","concat","ave"];var Bp=new Map;function Or(r){_a(qT,"DataFormat",r)}function ZT(r){_a(HT,"InterpolationFormat",r)}function so(r){_a(KT,"PaddingMode",r)}function Fg(r){_a(jT,"PoolMode",r)}var Tf=[],YT="/";function Ji(r,e){Tf.push(r);try{let t=e();return Tf.pop(),t}catch(t){throw Tf.pop(),t}}function rj(){return Tf.length===0?"":Tf.join(YT)+YT}function d1(r){if(!JT(r))throw new Error("Not a valid tensor name: '"+r+"'");return rj()+r}function g1(r){if(!JT(r))throw new Error("Not a valid tensor name: '"+r+"'");Bp.has(r)||Bp.set(r,0);let e=Bp.get(r);if(Bp.set(r,Bp.get(r)+1),e>0){let t=`${r}_${e}`;return Bp.set(t,1),t}else return r}var nj=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function JT(r){return!!r.match(nj)}p();function QT(r){return r===parseInt(r.toString(),10)}function Ii(r,e,t){e==null&&(e=0),t==null&&(t=r.length);let n=1;for(let o=e;o<t;++o)n*=r[o];return n}function eI(r){return r=Array.isArray(r)?new Float32Array(r):r,Br(r)}function Uu(r){return Ki(eI(r)).dataSync()[0]}function Qi(r){return ln(eI(r)).dataSync()[0]}function Zn(r,e){if(e<r)throw new ue(`end (${e}) < begin (${r}) is forbidden.`);let t=[];for(let n=r;n<e;++n)t.push(n);return t}function e2(r,e){return r.asType(e)}function t2(r,e=-1){let t=r.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),r.reshape(t)}function tI(r,e){return pe(()=>{if(r.shape.length!==2)throw new ue(`repeat() expects a rank-2 tensor, but received a rank-${r.shape.length} tensor.`);let t=t2(r,1);return b1(t,[1,e,1])})}function rI(r){let e=[Ii(r.shape)];return r.reshape(e)}function nI(r){if(r.rank<=1)throw new ue(`batchFlatten requires a minimum rank of 2. Got rank: ${r.rank}.`);let e=[r.shape[0],Ii(r.shape,1)];return r.reshape(e)}function Q0(r,e,t){return pe(()=>{switch(r.rank){case 1:return Ep(r,e,t);case 2:return gf(r,[e,0],[t,r.shape[1]]);case 3:return Ap(r,[e,0,0],[t,r.shape[1],r.shape[2]]);case 4:return ku(r,[e,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3]]);case 5:return ht(r,[e,0,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3],r.shape[4]]);case 6:return ht(r,[e,0,0,0,0,0],[t,r.shape[1],r.shape[2],r.shape[3],r.shape[4],r.shape[5]]);default:throw new ue(`sliceAlongFirstAxis() received an unsupported tensor rank: ${r.rank}`)}})}function Mg(r,e,t){return pe(()=>{switch(r.rank){case 1:return Ep(r,e,t);case 2:return gf(r,[0,e],[r.shape[0],t]);case 3:return Ap(r,[0,0,e],[r.shape[0],r.shape[1],t]);case 4:return ku(r,[0,0,0,e],[r.shape[0],r.shape[1],r.shape[2],t]);default:throw new ue(`sliceAlongLastAxis() received an unsupported tensor rank: ${r.rank}`)}})}function If(r,e,t,n){return pe(()=>{switch(r.rank){case 1:return Ep(r,e,t);case 2:switch(n){case 1:return Q0(r,e,t);case 2:return Mg(r,e,t);default:throw new ue(`The axis is not within the rank of the tensor ${n}`)}case 3:switch(n){case 1:return Q0(r,e,t);case 2:return Ap(r,[0,e,0],[r.shape[0],t,r.shape[2]]);case 3:return Mg(r,e,t);default:throw new ue(`The axis is not within the rank of the tensor ${n}`)}case 4:switch(n){case 1:return Q0(r,e,t);case 2:return ku(r,[0,e,0,0],[r.shape[0],t,r.shape[2],r.shape[3]]);case 3:return ku(r,[0,0,e,0],[r.shape[0],r.shape[1],t,r.shape[3]]);case 4:return Mg(r,e,t);default:throw new ue(`The axis is not within the rank of the tensor ${n}`)}default:throw new ue(`sliceAlongLastAxis() received an unsupported tensor rank: ${r.rank}`)}})}function Up(r,e=-1){let t;return e<0&&(t=r[0].rank,t!==0?e=t:e=0),e===r[0].rank&&(e=-1),Mt(r,e)}function Lg(r,e){switch(r.rank){case 1:return Od([r,e]);case 2:return Fd([r,e],0);case 3:return Md([r,e],0);case 4:return zd([r,e],0);default:throw new ue(`concatAlongFirstAxis() received an unsupported tensor rank: ${r.rank}`)}}function b1(r,e){if(Array.isArray(e)||(e=[e]),r.rank!==e.length)throw new ue(`The length of input n (${e.length}) does not match the number of dimensions in input x (${r.rank})`);return Fo(r,e)}function Vp(r,e=0,t=1,n,o){return df(r,e,t,n,o)}function ki(r,e,t,n){if(r.rank<2||e.rank<2)throw new lt(`dot requires both inputs to be rank >= 2 but got x shape = ${r.shape} and y shape = ${e.shape}`);if(e.rank>=3){let o=r.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(o!==i)throw new lt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${r.shape} and  y shape = ${e.shape}`)}if(r.rank===2&&e.rank===2)return ei.matMul({a:r,b:e,transposeA:!1,transposeB:!1,bias:n?zg(r.rank,n,io()):null,activation:t});{let o=r.shape.slice(),i=o.pop();r=r.reshape([-1,i]);let s=e.shape.slice(),a=s.pop(),l=s.pop(),u=[...s,a],c=Array.from({length:e.rank},(g,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=e.transpose(c).reshape([l,-1]);let x=[...o,...u],f=!1,h=!1;return ei.matMul({a:r,b:e,transposeA:f,transposeB:h,bias:n?zg(r.rank,n,io()):null,activation:t}).reshape(x)}}function v1(r,e,t){return pe(()=>(Array.isArray(e)?e=Br(e,"int32"):e=e.toInt(),Jo(r,e,t)))}function Vu(r){return re(r,r)}function zg(r,e,t){let n=e.shape;if(e.rank!==1&&e.rank!==r)throw new ue(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${r}`);if(r===5){if(t==="channelsFirst")return n.length===1?e.reshape([1,n[0],1,1,1]):e.reshape([1,n[3],n[0],n[1],n[2]]);if(t==="channelsLast")return n.length===1?e.reshape([1,1,1,1,n[0]]):e.reshape([1].concat(n))}else if(r===4){if(t==="channelsFirst")return n.length===1?e.reshape([1,n[0],1,1]):e.reshape([1,n[2],n[0],n[1]]);if(t==="channelsLast")return n.length===1?e.reshape([1,1,1,n[0]]):e.reshape([1].concat(n))}else if(r===3){if(t==="channelsFirst")return n.length===1?e.reshape([1,n[0],1]):e.reshape([1,n[1],n[0]]);if(t==="channelsLast")return n.length===1?e.reshape([1,1,n[0]]):e.reshape([1].concat(n))}else if(r<3)return e;throw new ue(`Unsupported input rank by biasAdd: ${e.rank}`)}function bo(r,e,t){return pe(()=>(t==null&&(t=io()),Or(t),r.add(zg(r.rank,e,t))))}function oI(r,e=1){if(e!==1)throw new lt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return hi(r)}function iI(r){return pe(()=>He(r,gr(r).add(1)))}function w1(r,e,t,n){return pe(()=>bg(r,e,t,n))}function sI(r){return pe(()=>{let e=$e(.5,re(.2,r));return on(e,0,1)})}function J2(r,e,t=!1){return t?r():e()}p();var aI=["fanIn","fanOut","fanAvg"],lI=["normal","uniform","truncatedNormal"];function oj(r){_a(aI,"FanMode",r)}function ij(r){_a(lI,"Distribution",r)}var vo=class extends Re.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},kf=class extends vo{apply(e,t){return lr(e,t)}};kf.className="Zeros";Re.registerClass(kf);var Gu=class extends vo{apply(e,t){return kn(e,t)}};Gu.className="Ones";Re.registerClass(Gu);var Ef=class extends vo{constructor(e){super();if(typeof e!="object")throw new ue(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ue(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return pe(()=>re(Ve(this.value),kn(e,t)))}getConfig(){return{value:this.value}}};Ef.className="Constant";Re.registerClass(Ef);var Af=class extends vo{constructor(e){super();this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return vi(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};Af.className="RandomUniform";Re.registerClass(Af);var Df=class extends vo{constructor(e){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new lt(`randomNormal does not support dType ${t}.`);return Vp(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};Df.className="RandomNormal";Re.registerClass(Df);var Rf=class extends vo{constructor(e){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new lt(`truncatedNormal does not support dType ${t}.`);return Y2(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};Rf.className="TruncatedNormal";Re.registerClass(Rf);var $f=class extends vo{constructor(e){super();this.gain=e.gain!=null?e.gain:1}apply(e,t){return pe(()=>{if(e.length!==2||e[0]!==e[1])throw new ue("Identity matrix initializer can only be used for 2D square matrices.");return re(this.gain,_u(e[0]))})}getConfig(){return{gain:this.gain}}};$f.className="Identity";Re.registerClass($f);function sj(r,e="channelsLast"){let t,n;if(Or(e),r.length===2)t=r[0],n=r[1];else if([3,4,5].indexOf(r.length)!==-1){if(e==="channelsFirst"){let o=Ii(r,2);t=r[1]*o,n=r[0]*o}else if(e==="channelsLast"){let o=Ii(r,0,r.length-2);t=r[r.length-2]*o,n=r[r.length-1]*o}}else{let o=Ii(r);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}var Jn=class extends vo{constructor(e){super();if(e.scale<0)throw new ue(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,oj(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ij(this.distribution),this.seed=e.seed}apply(e,t){let n=sj(e),o=n[0],i=n[1],s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,o):this.mode==="fanOut"?s/=Math.max(1,i):s/=Math.max(1,(o+i)/2),this.distribution==="normal"){let a=Math.sqrt(s);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new lt(`${this.getClassName()} does not support dType ${t}.`);return Y2(e,0,a,t,this.seed)}else{let a=Math.sqrt(3*s);return vi(e,-a,a,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Jn.className="VarianceScaling";Re.registerClass(Jn);var Gp=class extends Jn{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};Gp.className="GlorotUniform";Re.registerClass(Gp);var Wp=class extends Jn{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};Wp.className="GlorotNormal";Re.registerClass(Wp);var qp=class extends Jn{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};qp.className="HeNormal";Re.registerClass(qp);var Hp=class extends Jn{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};Hp.className="HeUniform";Re.registerClass(Hp);var Kp=class extends Jn{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};Kp.className="LeCunNormal";Re.registerClass(Kp);var jp=class extends Jn{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Jn.className}};jp.className="LeCunNormal";Re.registerClass(jp);var Of=class extends vo{constructor(e){super();if(this.DEFAULT_GAIN=1,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,this.seed!=null)throw new lt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return pe(()=>{if(e.length<2)throw new lt("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let n=e[0]>e[1]?[e[1],e[0]]:e,o=Vp(n,0,1,"float32"),i=Cg.gramSchmidt(o);return e[0]>e[1]&&(i=i.transpose()),re(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}};Of.className="Orthogonal";Re.registerClass(Of);var uI={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function cI(r,e={}){return Na(r,Re.SerializationMap.getMap().classNameMap,e,"initializer")}function br(r){return Lp(r)}function cr(r){if(typeof r=="string"){let e=r in uI?uI[r]:r;if(e==="GlorotNormal")return new Wp;if(e==="GlorotUniform")return new Gp;if(e==="HeNormal")return new qp;if(e==="HeUniform")return new Hp;if(e==="LeCunNormal")return new Kp;if(e==="LeCunUniform")return new jp;{let t={};return t.className=e,t.config={},cI(t)}}else return r instanceof vo?r:cI(r)}function aj(){return new kf}function lj(){return new Gu}function uj(r){return new Ef(r)}function cj(r){return new Af(r)}function pj(r){return new Df(r)}function xj(r){return new Rf(r)}function fj(r){return new $f(r)}function mj(r){return new Jn(r)}function hj(r){return new Gp(r)}function dj(r){return new Wp(r)}function gj(r){return new qp(r)}function yj(r){return new Hp(r)}function bj(r){return new Kp(r)}function vj(r){return new jp(r)}function wj(r){return new Of(r)}var _6={};Pt(_6,{Layer:()=>yt,RNN:()=>_o,RNNCell:()=>al,activation:()=>VX,add:()=>ZX,alphaDropout:()=>OY,average:()=>JX,averagePooling1d:()=>w6,averagePooling2d:()=>C6,averagePooling3d:()=>N6,avgPool1d:()=>aY,avgPool2d:()=>uY,avgPool3d:()=>pY,avgPooling1d:()=>lY,avgPooling2d:()=>cY,avgPooling3d:()=>xY,batchNormalization:()=>oY,bidirectional:()=>TY,concatenate:()=>QX,conv1d:()=>OX,conv2d:()=>FX,conv2dTranspose:()=>MX,conv3d:()=>zX,convLstm2d:()=>CY,convLstm2dCell:()=>NY,cropping2D:()=>PX,dense:()=>GX,depthwiseConv2d:()=>UX,dot:()=>nY,dropout:()=>WX,elu:()=>kX,embedding:()=>YX,flatten:()=>HX,gaussianDropout:()=>$Y,gaussianNoise:()=>RY,globalAveragePooling1d:()=>fY,globalAveragePooling2d:()=>mY,globalMaxPool1d:()=>kY,globalMaxPool2d:()=>EY,globalMaxPooling1d:()=>HI,globalMaxPooling2d:()=>KI,gru:()=>dY,gruCell:()=>gY,input:()=>W1,inputLayer:()=>IX,layerNormalization:()=>iY,leakyReLU:()=>AX,lstm:()=>yY,lstmCell:()=>bY,masking:()=>FY,maxPool1d:()=>AY,maxPool2d:()=>DY,maxPooling1d:()=>jI,maxPooling2d:()=>XI,maxPooling3d:()=>hY,maximum:()=>eY,minimum:()=>tY,multiply:()=>rY,permute:()=>XX,prelu:()=>DX,reLU:()=>EX,repeatVector:()=>KX,reshape:()=>jX,rnn:()=>_Y,separableConv2d:()=>LX,simpleRNN:()=>vY,simpleRNNCell:()=>wY,softmax:()=>RX,spatialDropout1d:()=>qX,stackedRNNCells:()=>SY,thresholdedReLU:()=>$X,timeDistributed:()=>IY,upSampling2d:()=>BX,zeroPadding2d:()=>sY});p();p();p();var Cj=0;function N1(){return Cj++}var C1={};function Q2(r=""){return r in C1||(C1[r]=0),C1[r]+=1,r+C1[r].toString()}p();p();function _1(r){return Array.isArray(r)&&Array.isArray(r[0])}function Xp(r){return r.length===0?[]:Array.isArray(r[0])?r:[r]}function dt(r){let e;if(Array.isArray(r)){if(r.length!==1)throw new ue(`Expected Tensor length to be 1; got ${r.length}`);e=r[0]}else e=r;return e}function Bt(r){if(Array.isArray(r)&&Array.isArray(r[0])){if(r.length===1)return r=r,r[0];throw new ue(`Expected exactly 1 Shape; got ${r.length}`)}else return r}p();function Yp(r){let e=0;for(let t of r)t.shape.length===0?e+=1:e+=t.shape.reduce((n,o)=>n*o);return e}p();var xI="Variable",Ff=class{constructor(e,t="float32",n=xI,o=!0,i=null){this.dtype=t??"float32",this.shape=e.shape,this.id=N1(),n=n??xI,this.originalName=d1(n),this.name=g1(this.originalName),this.trainable_=o,this.constraint=i,this.val=e1(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),_j(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function _j(r,e){if(r.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(r.shape)+" vs. "+JSON.stringify(e.shape))}function Mf(r){return r.map(e=>e.read())}function Zp(r){r.forEach(e=>{e[0].write(e[1])})}var Sr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},Qn=class{constructor(e,t,n,o,i,s,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=o,this.callArgs=i,this.outputTensorIndex=a,this.id=N1(),s!=null&&(this.originalName=d1(s),this.name=g1(this.originalName)),this.rank=t.length}},Sj=0,el=class{constructor(e,t){this.callArgs=t,this.id=Sj++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Tj=0,yt=class extends Re.Serializable{constructor(e={}){super();this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Tj++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let n=this.getClassName();t=Si(n)+"_"+Q2(n)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),n=[i].concat(e.inputShape)}this.batchInputShape=n;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Yn(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ue(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return bn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return bn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new zo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new zo(`Layer ${this.name} is not connected, no input to return.`);return bn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new zo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new zo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return bn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=xr(e),this.inputSpec==null||this.inputSpec.length===0)return;let t=xr(this.inputSpec);if(e.length!==t.length)throw new ue(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let o=e[n],i=t[n];if(i==null)continue;let s=o.rank;if(i.ndim!=null&&s!==i.ndim)throw new ue(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${s}`);if(i.maxNDim!=null&&s>i.maxNDim)throw new ue(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${s}`);if(i.minNDim!=null&&s<i.minNDim)throw new ue(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${s}.`);if(i.dtype!=null&&o.dtype!==i.dtype)throw new ue(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${o.dtype}.`);if(i.axes){let a=o.shape;for(let l in i.axes){let u=Number(l),c=i.axes[l],x=u>=0?a[u]:a[a.length+u];if(c!=null&&[c,null].indexOf(x)===-1)throw new ue(`Input ${n} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${a}.`)}}if(i.shape!=null)for(let a=0;a<i.shape.length;++a){let l=i.shape[a],u=o.shape[a];if(l!=null&&u!=null&&l!==u)throw new ue(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${o.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=xr(e),o=!0;for(let s of n)if(!(s instanceof Qn)){o=!1;break}let i=!0;for(let s of n)if(s instanceof Qn){i=!1;break}if(o===i)throw new ue("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ji(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let s=[];for(let a of xr(e))s.push(a.shape);this.build(bn(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let s=this.call(e,t),a=xr(s),l=[];for(let u of a)n.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(s=bn(l),this.activityRegularizer!=null)throw new lt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=Ij(e),a=this.computeOutputShape(s),l,u=kj(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,x)=>new Qn(u,c,this,xr(e),t,this.name,x)):l=new Qn(u,a,this,xr(e),t,this.name),this.addInboundNode(e,l,null,null,s,a,t),this._refCount++,this.activityRegularizer!=null)throw new lt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,o)=>{n!=null&&e[o]!=null&&e[o]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new zo(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new zo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Yn(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Yp(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Mf(e?this.trainableWeights:this.weights)}setWeights(e){pe(()=>{let t=this.weights;if(t.length!==e.length)throw new ue(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;let n=[],o=Mf(t);for(let i=0;i<o.length;++i){let s=o[i],a=t[i],l=e[i];if(!I.arraysEqual(s.shape,l.shape))throw new ue(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);n.push([a,l])}Zp(n)})}addWeight(e,t,n,o,i,s,a){if(this._addedWeightNames.indexOf(e)!==-1)throw new ue(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(o=cr("zeros"));let l=o.apply(t,n),u=new Ff(l,n,e,s,a);return l.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=xr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(n=>{if(n!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}addInboundNode(e,t,n,o,i,s,a=null){let l=xr(e);t=xr(t),n=xr(n),o=xr(o),i=Xp(i),s=Xp(s);let u=[],c=[],x=[];for(let f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),x.push(f.tensorIndex);new el({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:x,inputTensors:l,outputTensors:t,inputMasks:n,outputMasks:o,inputShapes:i,outputShapes:s},a);for(let f=0;f<t.length;f++)t[f].sourceLayer=this,t[f].nodeIndex=this.inboundNodes.length-1,t[f].tensorIndex=f}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function Ij(r){r=xr(r);let e=[];for(let t of r)e.push(t.shape);return bn(e)}function kj(r){return"float32"}function Bg(r,e,t){if((e==null||t!=null&&t>0)&&(e=r.sourceLayer,t=r.nodeIndex),e.inboundNodes.length===0)return[r];{let n=e.inboundNodes[t];if(n.inboundLayers.length===0)return n.inputTensors;{let o=[];for(let i=0;i<n.inboundLayers.length;i++){let s=n.inputTensors[i],a=n.inboundLayers[i],l=n.nodeIndices[i],u=Bg(s,a,l);for(let c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}var Sa=class extends yt{constructor(e){super({dtype:e.dtype,name:e.name!=null?e.name:Q2("input").toString()});if(e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ue("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new ue("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ue("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let o=new Qn(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new el({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ue(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};Sa.className="InputLayer";Re.registerClass(Sa);function S1(r){if(r.batchShape==null&&r.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(r.batchShape!=null&&r.shape!=null)throw new ue("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=r.batchShape;r.shape!=null&&e==null&&(e=[null].concat(r.shape));let t=r.dtype;return t==null&&(t="float32"),new Sa({batchInputShape:e,name:r.name,dtype:t,sparse:r.sparse}).inboundNodes[0].outputTensors[0]}p();p();p();async function Ta(r){if(r==null)return;let e=[],t=[],n=[];for(let o in r){let i=r[o];if(typeof i!="number"){let s=i;e.push(s.data()),t.push(o),n.push(s)}}if(e.length>0){let o=await Promise.all(e);for(let i=0;i<o.length;++i)r[t[i]]=o[i][0];ct(n)}}function T1(r){if(r!=null)for(let e in r){let t=r[e];typeof t!="number"&&t.dispose()}}var fI;(function(r){r[r.SILENT=0]="SILENT",r[r.VERBOSE=1]="VERBOSE"})(fI||(fI={}));var Ej=125,tl=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},I1=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},mI=class extends tl{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let n=t.size==null?0:t.size;this.seen+=n;for(let o in t){let i=t[o];if(typeof i=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+i*n;else{let s;o in this.totals?s=this.totals[o]:this.totals[o]=0;let a=pe(()=>$e(this.totals[o],re(i,n)));this.totals[o]=a,s?.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?t[n]=this.totals[n]/this.seen:pe(()=>{let o=re(He(1,this.seen),this.totals[n]);t[n]=o,this.totals[n].dispose(),Er(t[n])}))}},k1=class extends tl{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let n in t)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let i in this.history){let s=this.history[i];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];e.push(l.data()),t.push(i),n.push(a)}}let o=await Promise.all(e);for(let i=0;i<o.length;++i)this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=o[i][0]}},E1=class extends tl{constructor(e,t){super();if(this.currentEpoch=0,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Ej),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");I.isNumber(this.yieldEvery)&&(this.maybeWait=VT(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let o=[];this.yield!=null&&(await Ta(n),o.push(this.yield(e,t,n))),o.push(zp()),await Promise.all(o)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Ta(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];this.epochEnd!=null&&(await Ta(t),n.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&n.push(zp()),await Promise.all(n)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Ta(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];this.batchEnd!=null&&(await Ta(t),n.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?n.push(zp()):I.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await Ta(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ta(e),await this.trainEnd(e))}};function A1(r,e){return r==null&&(r={}),r instanceof tl?[r]:Array.isArray(r)&&r[0]instanceof tl?r:xr(r).map(n=>new E1(n,e))}var wo=class{constructor(){}static registerCallbackConstructor(e,t){I.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),wo.checkForDuplicate(t),wo.constructors[e]==null&&(wo.constructors[e]=[]),wo.constructors[e].push(t)}static checkForDuplicate(e){for(let t in wo.constructors)wo.constructors[+t].forEach(o=>{if(o===e)throw new ue("Duplicate callback constructor.")})}static clear(){wo.constructors={}}static createCallbacks(e){let t=[];for(let n in wo.constructors){let o=+n;e>=o&&t.push(...wo.constructors[o])}return t.map(n=>new n)}};wo.constructors={};function D1(r,e,t,n,o,i,s,a,l){let u=new k1,c=[new mI,...wo.createCallbacks(e)];r!=null&&c.push(...r),c.push(u);let x=new I1(c);return x.setParams({epochs:t,initialEpoch:n,samples:o,steps:i,batchSize:s,verbose:e,doValidation:a,metrics:l}),{callbackList:x,history:u}}p();p();function lo(r,e={},t=!1){return Na(r,Re.SerializationMap.getMap().classNameMap,e,"layer",t)}p();function zf(r,e){return pe(()=>{r.dtype!=="float32"&&(r=r.asType("float32"));let t=Qe(Vu(r),e,!0),n=ma(t.shape,en()),o=ur(Xn(t,n));return He(r,o)})}function Ia(r,e){return pe(()=>ar(Vu(Ge(e,r)),-1))}function Jp(r,e){return pe(()=>ar(gr(Ge(e,r)),-1))}function rl(r,e){return pe(()=>{let t=Ge(r,e),n=on(gr(r),en(),Number.MAX_VALUE),o=gr(He(t,n));return re(100,ar(o,-1))})}function Aj(r,e){return pe(()=>{let t=on(e,en(),Number.MAX_VALUE),n=an($e(1,t)),o=on(r,en(),Number.MAX_VALUE),i=an($e(1,o));return ar(Vu(Ge(n,i)),-1)})}function Dj(r,e){return pe(()=>{let t=Xn(0,Ge(1,re(r,e)));return ar(Vu(t),-1)})}function Rj(r,e){return pe(()=>{let t=Xn(0,Ge(1,re(r,e)));return ar(t,-1)})}function $j(r,e){return pe(()=>{let t=Qe(re(r,e),-1),n=ln(re(Ge(1,r),e),-1);return Xn(0,$e(1,Ge(n,t)))})}function Oj(r,e){return pe(()=>{let t=Math.log(2),n=Ge(e,r),o=Ge($e(n,gi(re(-2,n))),t);return ar(o,-1)})}function Wu(r,e,t=!1){return pe(()=>{if(t)e=va(e);else{let n=Qe(e,e.shape.length-1,!0);e=He(e,n)}return e=on(e,en(),1-en()),Dt(Qe(re(r.toFloat(),an(e)),e.shape.length-1))})}function Qp(r,e,t=!1){return pe(()=>{let n=di(rI(r)).toInt();e=on(e,en(),1-en());let o=e.shape,i=fi(n,o[o.length-1]).reshape(o);return Wu(i,e,t)})}function Fj(r,e){if(!I.arraysEqual(r.shape,e.shape))throw new ue(`logits and labels must have the same shape, but got shapes ${JSON.stringify(r.shape)} and ${JSON.stringify(e.shape)}`);return pe(()=>{let t=e.relu(),n=e.abs().neg();return t.sub(e.mul(r)).add(n.exp().log1p())})}function ex(r,e){return pe(()=>{let t;return t=on(e,en(),1-en()),t=an(He(t,Ge(1,t))),ar(Fj(r,t),-1)})}function Mj(r,e){return pe(()=>{let t=on(r,en(),1),n=on(e,en(),1);return Qe(re(r,an(He(t,n))),-1)})}function zj(r,e){return pe(()=>{let t=an($e(en(),e));return ar(Ge(e,re(r,t)),-1)})}function Pf(r,e){return pe(()=>{let t=zf(r,-1),n=zf(e,-1),o=re(t,n);return Dt(Qe(o,-1))})}var Lf={meanSquaredError:Ia,meanAbsoluteError:Jp,meanAbsolutePercentageError:rl,meanSquaredLogarithmicError:Aj,squaredHinge:Dj,hinge:Rj,categoricalHinge:$j,logcosh:Oj,categoricalCrossentropy:Wu,sparseCategoricalCrossentropy:Qp,binaryCrossentropy:ex,kullbackLeiblerDivergence:Mj,poisson:zj,cosineProximity:Pf};function R1(r){if(typeof r=="string"){if(r in Lf)return Lf[r];let e=`Unknown loss ${r}`;throw r.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${r}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ue(e)}else return r}p();function Bf(r,e){return pe(()=>{let t=re(.5,Qr(e)),n=e2(Jr(e,t),r.dtype);return ar(go(r,n),-1)})}function Uf(r,e){return pe(()=>e2(go(H0(r,-1),H0(e,-1)),"float32"))}function dI(r,e){return pe(()=>hn(r.equal(1),e.equal(1)).sum().cast("float32"))}function Lj(r,e){return pe(()=>hn(r.equal(1),e.equal(0)).sum().cast("float32"))}function Pj(r,e){return pe(()=>hn(r.equal(0),e.equal(1)).sum().cast("float32"))}function Ug(r,e){return pe(()=>{let t=dI(r,e),n=Pj(r,e),o=t.add(n);return Ar(Jr(o,0),t.div(o),0).cast("float32")})}function gI(r,e){return pe(()=>{let t=dI(r,e),n=Lj(r,e),o=t.add(n);return Ar(Jr(o,0),t.div(o),0).cast("float32")})}function O1(r,e){return ex(r,e)}function F1(r,e){return r.rank===e.rank&&(r=r.squeeze([r.rank-1])),e=e.argMax(-1),e.dtype!==r.dtype&&(e=e.asType(r.dtype)),go(r,e).asType("float32")}var Bj=Ia,Uj=Ia,Vj=Jp,Gj=Jp,Wj=rl,qj=rl,Vf=Wu,Hj=Pf,Vg=Qp,$1={binaryAccuracy:Bf,categoricalAccuracy:Uf,precision:Ug,categoricalCrossentropy:Vf,sparseCategoricalCrossentropy:Vg,mse:Bj,MSE:Uj,mae:Vj,MAE:Gj,mape:Wj,MAPE:qj,cosine:Hj};function yI(r){if(typeof r=="string"&&r in $1)return $1[r];if(typeof r!="string"&&r!=null)return r;throw new ue(`Unknown metric ${r}`)}function Gf(r){if(ti(r!==null,`Unknown LossOrMetricFn ${r}`),typeof r=="string")return r;{let e;for(let t of Object.keys(Lf))if(Lf[t]===r){e=t;break}if(e!==void 0)return e;for(let t of Object.keys($1))if($1[t]===r){e=t;break}return e!==void 0?e:r.name}}p();function vI(r){let e={Adagrad:()=>Z2.adagrad(.01),Adadelta:()=>Z2.adadelta(1,.95,en()),Adam:()=>Z2.adam(.001,.9,.999,en()),Adamax:()=>Z2.adamax(.002,.9,.999,en(),0),RMSProp:()=>Z2.rmsprop(.001,.9,0,en()),SGD:()=>Z2.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,r in e)return e[r]();throw new ue(`Unknown Optimizer ${r}`)}p();function Wg(r,e,t=!1){if(r==null||typeof r!="object"||Object.getPrototypeOf(r)!==Object.prototype||!Gg(r))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){let n=JSON.stringify(r);n.length>1048576&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${1048576}.`)}}function Gg(r){if(r===null)return!0;if(typeof r=="object")if(Object.getPrototypeOf(r)===Object.prototype){let e=Object.keys(r);for(let t of e)if(typeof t!="string"||!Gg(r[t]))return!1;return!0}else if(Array.isArray(r)){for(let e of r)if(!Gg(e))return!1;return!0}else return!1;else{let e=typeof r;return e==="string"||e==="number"||e==="boolean"}}p();function wI(r,e,t,n=console.log){let o=Xj(r),i=["Layer (type)","Output shape","Param #"];o?(e=e||65,t=t||[.45,.85,1]):(e=e||98,t=t||[.33,.55,.67,1]),t[t.length-1]<=1&&(t=t.map(c=>Math.floor(e*c)));let s;if(!o){i.push("Receives inputs"),s=[];for(let c in r.nodesByDepth)s.push(...r.nodesByDepth[c])}n("_".repeat(e)),M1(i,t,n),n("=".repeat(e));let a=r.layers;for(let c=0;c<a.length;++c)o?Yj(a[c],t,n):Zj(a[c],t,s,n),n((c===a.length-1?"=":"_").repeat(e));r.checkTrainableWeightsConsistency();let l=jj(r),u=Yp(r.nonTrainableWeights);n(`Total params: ${l+u}`),n(`Trainable params: ${l}`),n(`Non-trainable params: ${u}`),n("_".repeat(e))}function jj(r){let e;return r.collectedTrainableWeights!=null?e=Yp(r.collectedTrainableWeights):e=Yp(r.trainableWeights),e}function Xj(r){let e=!0,t=[],n=[];for(let o in r.nodesByDepth)t.push(r.nodesByDepth[o]);for(let o of t){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}n.push(...o)}if(e)for(let o of r.layers){let i=!1;for(let s of o.inboundNodes)if(n.indexOf(s)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function M1(r,e,t=console.log){let n="";for(let o=0;o<r.length;++o)o>0&&(n=n.slice(0,n.length-1)+" "),n+=r[o],n=n.slice(0,e[o]),n+=" ".repeat(e[o]-n.length);t(n)}function Yj(r,e,t){let n;try{n=JSON.stringify(r.outputShape)}catch{n="multiple"}let o=r.name,i=r.getClassName(),s=[`${o} (${i})`,n,r.countParams().toString()];M1(s,e,t)}function Zj(r,e,t,n){let o;try{o=JSON.stringify(r.outputShape)}catch{o="multiple"}let i=[];for(let c of r.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(c)===-1))for(let x=0;x<c.inboundLayers.length;++x){let f=c.inboundLayers[x].name,h=c.nodeIndices[x],g=c.tensorIndices[x];i.push(`${f}[${h}][${g}]`)}let s=r.name,a=r.getClassName(),l=i.length===0?"":i[0],u=[`${s} (${a})`,o,r.countParams().toString(),l];M1(u,e,n);for(let c=1;c<i.length;++c)M1(["","","",i[c]],e,n)}p();function CI(r,e,t){return(r==="inboundNodes"||r==="outputLayers"||r==="inputLayers")&&e===0&&typeof t=="string"}function qu(r,e){if(r===null)return null;if(typeof r=="string")return J0(r);if(typeof r=="number"||typeof r=="boolean")return r;if(r instanceof Array){let t=[],n=r.length;for(let o=0;o<n;++o){let i=r[o];CI(e,o,i)?t.push(i):t.push(qu(i,e))}return t}else{let t={};for(let n of Object.keys(r)){let o=r[n];if(n==="name"&&typeof o=="string")t[n]=o;else{let i=J0(n);t[i]=qu(o,i)}}return t}}function z1(r,e){if(r==null)return null;if(typeof r=="string")return Si(r);if(typeof r=="number"||typeof r=="boolean")return r;if(r instanceof Array){let t=[],n=r.length;for(let o=0;o<n;++o){let i=r[o];CI(e,o,i)?t.push(i):t.push(z1(i,e))}return t}else{let t={};for(let n of Object.keys(r)){let o=r[n],i=Si(n);(n==="name"||n==="className")&&typeof o=="string"?t[i]=o:t[i]=z1(o,n)}return t}}p();var nl="3.1.0";p();p();function Jj(r,e){if(r.dtype==null||r.dtype===e.dtype)return e;try{return Le(e,r.dtype)}catch{throw new ue(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${r.name}' (${r.dtype}).`)}}var es=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof es)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Jj(e,t),this.name2Id[e.name]=e.id,n!=null&&(this.id2Mask[e.id]=n);else throw new ue(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Qn){if(this.id2Value[e.id]==null)throw new ue(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ue(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Qn){if(this.id2Value[e.id]==null)throw new ue(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{let t=this.name2Id[e];if(t==null)throw new ue(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&ct(this.id2Mask)}},qg={},NI={};function Hu(r,e,t,n){let o=t==null?!1:t.training,i=Array.isArray(r),s=i?r:[r],a=s.map(g=>g.name),l=[],u=e.names();for(let g of a)u.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);n!=null&&(n.maxNumTensors=-1/0,n.minNumTensors=1/0);let c=a.join(",")+"|"+e.names().join(","),x,f;if(qg[c]==null){let g=Qj(s,e);x=g.sorted,f=g.recipientCounts,qg[c]=x,NI[c]=f}x=qg[c],f={},o||Object.assign(f,NI[c]);let h=new es(e);for(let g=0;g<x.length;++g){if(n!=null){let D=ep().numTensors;D>n.maxNumTensors&&(n.maxNumTensors=D),D<n.minNumTensors&&(n.minNumTensors=D)}let m=x[g],b=m.sourceLayer;if(b instanceof Sa)continue;let v=[],w=[],C=[],N=!1;for(let D of m.inputs){let R=h.getValue(D),K=h.getMask(D);v.push(R),w.push(K),K!=null&&(N=!0),o||(f[D.name]--,f[D.name]===0&&!e.hasKey(D)&&a.indexOf(D.name)===-1&&!R.isDisposed&&D.sourceLayer.stateful!==!0&&C.push(R))}N&&(t=t||{},t.mask=w[0]);let _=xr(b.apply(v,t)),E=null;b.supportsMasking&&(E=b.computeMask(v,w));let T=tX(m),k=Array.isArray(T)?T:[T];for(let D=0;D<k.length;++D){h.hasKey(k[D])||h.add(k[D],_[D],Array.isArray(E)?E[0]:E);let R=a.indexOf(k[D].name);R!==-1&&(l[R]=_[D])}o||ct(C)}return h.disposeMasks(),i?l:l[0]}function Qj(r,e){I.assert(r!=null&&r.length>0,()=>"Expected at least one fetch, got none");let t=[],n={};if(r.length===1){let o=_I(r[0],e);t=o.sorted,n=o.recipientMap}else{let o=new Set;for(let i of r){let{sorted:s,recipientMap:a}=_I(i,e);for(let l of s)o.has(l.name)||(t.push(l),o.add(l.name));for(let l in a)n[l]==null&&(n[l]=new Set),a[l].forEach(u=>n[l].add(u))}}return{sorted:t,recipientCounts:eX(n)}}function eX(r){let e={};for(let t in r)e[t]=r[t].size;return e}function _I(r,e){let t=new Set,n=[],o={};for(let a of e.names())t.add(a);let i=[],s=[];for(i.push(r);i.length>0;){let a=i[i.length-1];if(t.has(a.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),n.push(a),t.add(a.name),l&&s.pop();else{s.push(i.length-1);for(let u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!t.has(u.name)&&i.push(u)}}return{sorted:n,recipientMap:o}}function tX(r){let e;if(r.sourceLayer.inboundNodes.length===1)e=r.sourceLayer.output;else{let t=null;for(let n=0;n<r.sourceLayer.inboundNodes.length;++n)for(let o of r.sourceLayer.inboundNodes[n].outputTensors)if(o.id===r.id){t=n;break}e=r.sourceLayer.getOutputAt(t)}return e}var ri=class extends yt{constructor(e){super({});if(this.containerNodes=new Set,this.name=e.name,this.name==null){let w=this.getClassName().toLowerCase();this.name=Q2(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Ti(this.inputs).length!==this.inputs.length)throw new ue(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);Ti(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let w of this.outputs){let C=w.sourceLayer,N=w.nodeIndex,_=w.tensorIndex;this.outputLayers.push(C),this.outputLayersNodeIndices.push(N),this.outputLayersTensorIndices.push(_)}for(let w of this.inputs){let C=w.sourceLayer,N=w.nodeIndex,_=w.tensorIndex;ti(N===0,"input layer has >1 nodes"),ti(_===0,"input layer has >1 tensors"),this.inputLayers.push(C),this.inputLayersNodeIndices.push(N),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){let C=this.inputLayers[w];if(!(C instanceof Sa))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${w} (0-based) originates from layer type ${C.getClassName()}.`);this.inputNames.push(C.name),this.feedInputShapes.push(C.batchInputShape),this.feedInputNames.push(C.name)}for(let w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);let t={},n={},o={},i={},s={},a=[],l=(w,C,N,_,E,T)=>{(_==null||E==null||T==null)&&(_=w.sourceLayer,E=w.nodeIndex,T=w.tensorIndex);let k=_.inboundNodes[E];if(N.indexOf(k)!==-1)throw new Yn(`The tensor ${w.name} at layer "${_.name}" is part of a cycle.`);if(C.indexOf(k)!==-1)return;this.containerNodes.add(ri.nodeKey(_,E)),_.id in s||(s[_.id]=Object.keys(s).length),N.indexOf(k)===-1&&N.push(k);let D=k.inboundLayers.length;for(let R=0;R<D;R++){let K=k.inputTensors[R],M=k.inboundLayers[R],j=k.nodeIndices[R],X=k.tensorIndices[R];l(K,C,N,M,j,X)}for(C.push(k);N.indexOf(k)>=0;)N.splice(N.indexOf(k),1);a.push(k)},u=[],c=[];for(let w of this.outputs)l(w,u,c);let x=a.slice().reverse();for(let w of x){n[w.id]=w,w.id in t||(t[w.id]=0);let C=t[w.id],N=o[w.outboundLayer.id]==null?0:o[w.outboundLayer.id];C=Math.max(C,N),o[w.outboundLayer.id]=C,i[w.outboundLayer.id]=w.outboundLayer,t[w.id]=C;for(let _=0;_<w.inboundLayers.length;_++){let E=w.inboundLayers[_],T=w.nodeIndices[_],k=E.inboundNodes[T],D=t[k.id]==null?0:t[k.id];t[k.id]=Math.max(C+1,D),n[k.id]=k}}let f={};for(let w in t){let C=t[w];C in f||(f[C]=[]),f[C].push(n[w])}let h={};for(let w in o){let C=o[w];C in h||(h[C]=[]),h[C].push(i[w])}let g=Object.keys(h).map(w=>parseInt(w,10)).sort(wf);this.layers=[];for(let w of g){let C=h[w];C.sort((N,_)=>{let E=s[N.id],T=s[_.id];return E<T?-1:E>T?1:0});for(let N of C)N instanceof ri&&this.internalContainerRefs.push(N),this.layers.push(N)}this.layersByDepth=h,g=Object.keys(f).map(w=>parseInt(w,10)).sort(wf);let m=this.inputs.slice(),b=[];for(let w of g)for(let C of f[w]){let N=C.outboundLayer;if(N!=null){for(let _ of C.inputTensors)if(m.indexOf(_)===-1)throw new Yn(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${N.name}". The following previous layers were accessed without issue: ${b}`);for(let _ of C.outputTensors)m.push(_);b.push(N.name)}}this.nodesByDepth=f;let v=this.layers.map(w=>w.name);for(let w of v){let C=v.filter(N=>N===w).length;if(C!==1)throw new Yn(`The name "${w}" is used ${C} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new el({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(n=>n.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ue("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.layers)t.push(...n.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},o=0;for(let s of this.layers)for(let a of s.weights){if(n[a.originalName]!=null)throw new ue(`Duplicate weight name: ${a.originalName}`);n[a.originalName]=a,o++}let i=[];for(let s in e){let a=s;if(n[s]==null){let l=s.split("/");a=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(n[a]!=null)i.push([n[a],e[s]]);else if(t)throw new ue(`Provided weight data has no target variable: ${s}`);delete n[a]}if(t){let s=[];for(let a in n)s.push(a);if(s.length>0)throw new ue(`${s.length} of ${o} weights are not set: ${s}`)}Zp(i)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${nl}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=z1(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return pe(()=>{e=xr(e);let n=new es;for(let o=0;o<this.inputs.length;++o)n.add(this.inputs[o],e[o]);return Hu(this.outputs,n,t)})}computeMask(e,t){return pe(()=>{e=xr(e);let n;return t==null?n=_i(null,e.length):n=xr(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=Xp(e);if(t.length!==this.inputLayers.length)throw new ue(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let n={};for(let a=0;a<t.length;a++){let l=this.inputLayers[a],u=t[a],c=l.name+"_0_0";n[c]=u}let o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(wf);if(o.length>1)for(let a of o){let l=this.nodesByDepth[a];for(let u of l){let c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;let x=[];for(let m=0;m<u.inboundLayers.length;m++){let b=u.inboundLayers[m],v=u.nodeIndices[m],w=u.tensorIndices[m],C=`${b.name}_${v}_${w}`,N=n[C];x.push(N)}let f=c.computeOutputShape(bn(x)),h=Xp(f),g=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){let b=`${c.name}_${g}_${m}`;n[b]=h[m]}}}let i=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],x=`${l.name}_${u}_${c}`;s.push(x)}for(let a=0;a<s.length;a++){let l=s[a];ti(l in n),i.push(n[l])}return bn(i)}runInternalGraph(e,t){t==null&&(t=_i(null,e.length));let n={};for(let l=0;l<this.inputs.length;++l){let u=this.inputs[l],c=e[l],x=t[l];n[u.id]=[c,x]}let o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(wf);for(let l of o){let u=this.nodesByDepth[l];for(let c of u){let x=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,g=new Array;for(let m of f)m.id in n&&g.push(n[m.id]);if(g.length===f.length){let m={},b,v,w,C;if(c.callArgs!=null&&(m=c.callArgs),g.length===1){let[N,_]=g[0];m.mask==null&&(m.mask=_),w=xr(x.call(N,m)),C=xr(x.computeMask(N,_)),b=[N],v=[_]}else b=g.map(N=>N[0]),v=g.map(N=>N[1]),m.mask==null&&(m.mask=v),w=xr(x.call(b,m)),C=xr(x.computeMask(b,v));if(x.activityRegularizer)throw new lt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let N=0;N<h.length;++N){let _=h[N],E=w[N],T=C[N];n[_.id]=[E,T]}}}}let i=[],s=[],a=[];for(let l of this.outputs){ti(l.id in n,`Could not compute output ${l.name} : ${l.id}`);let[u,c]=n[l.id];a.push(u.shape),i.push(u),s.push(c)}return[i,s,a]}buildNodeConversionMap(e){let t={},n;for(let o of this.layers){n=o instanceof ri?1:0;for(let i=0;i<o.inboundNodes.length;i++){let s=ri.nodeKey(o,i);this.containerNodes.has(s)&&(t[s]=n,n+=1)}}return t}getLayer(e,t){if(t!=null){if(this.layers.length<=t)throw new ue(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}else if(e==null)throw new ue("Provide either a layer name or layer index");for(let n of this.layers)if(n.name===e)return n;throw new ue(`No such layer: ${e}`)}calculateLosses(){return pe(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let o=ri.nodeKey(t,n);this.containerNodes.has(o)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),u=[];for(let x=0;x<s.inboundNodes.length;x++){let f=s.inboundNodes[x],h=ri.nodeKey(s,x),g={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),g=f.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(f.inboundLayers.length>0){let m=[];for(let b=0;b<f.inboundLayers.length;b++){let v=f.inboundLayers[b],w=f.nodeIndices[b],C=f.tensorIndices[b],N=ri.nodeKey(v,w),_=t[N];_==null&&(_=0),m.push([v.name,_,C,g])}u.push(m)}}}let c={};c.name=s.name,c.className=a,c.config=l,c.inboundNodes=u,n.push(c)}e.layers=n;let o=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],u=ri.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=t[u];c==null&&(c=0);let x=this.inputLayersTensorIndices[s];o.push([a.name,c,x])}e.inputLayers=o;let i=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],u=ri.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=t[u];c==null&&(c=0);let x=this.outputLayersTensorIndices[s];i.push([a.name,c,x])}return e.outputLayers=i,e}static fromConfig(e,t,n={},o=!1){let i={},s={};function a(b,v){b.name in s?s[b.name].push(v):s[b.name]=[v]}function l(b,v){let w=[],C;for(let N of v){let _=N[0],E=N[1],T=N[2];if(C=N[3]==null?{}:N[3],!(_ in i)){a(b,v);return}let k=i[_];if(k.inboundNodes.length<=E){a(b,v);return}let D=k.inboundNodes[E];w.push(D.outputTensors[T])}w.length>0&&b.apply(bn(w),C)}function u(b){let v=b.name,w=lo(b,t.customObjects!=null?t.customObjects:{});w.setFastWeightInitDuringBuild(o),i[v]=w,b.inboundNodes.forEach(N=>{if(!(N instanceof Array))throw new ue(`Corrupted configuration, expected array for nodeData: ${N}`);a(w,N)})}let c=t.name,x=t.layers;for(let b of x)u(b);for(;!BT(s);)for(let b of x){let v=i[b.name];if(v.name in s){let w=s[v.name];delete s[v.name];for(let C of w)l(v,C)}}let f=[],h=[],g=t.inputLayers;for(let b of g){let v=b[0],w=b[1],C=b[2];ti(v in i);let _=i[v].inboundNodes[w].outputTensors;f.push(_[C])}let m=t.outputLayers;for(let b of m){let v=b[0],w=b[1],C=b[2];ti(v in i);let _=i[v].inboundNodes[w].outputTensors;h.push(_[C])}return new e({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new ue("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){pe(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};p();p();function rX(r,e,t){let n=e.length;if(r==null||Array.isArray(r)&&r.length===0)return e.map(o=>null);if(n===1)return Array.isArray(r)&&r.length===1?r:typeof r=="object"&&e[0]in r?[r[e[0]]]:[r];if(Array.isArray(r)){if(r.length!==n)throw new Error(`Provided ${t} is an array of ${r.length} element(s), but the model has ${n} outputs. Make sure a set of weights is provided for each model output.`);return r}else if(typeof r=="object"&&Object.keys(r).length>0&&typeof r[Object.keys(r)[0]]=="object"){let o=[];return e.forEach(i=>{i in r?o.push(r[i]):o.push(null)}),o}else throw new Error(`The model has multiple (${n}) outputs, so ${t} must be either an array with ${n} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(r)}`)}function L1(r,e){return rX(r,e,"classWeight")}async function P1(r,e,t,n){if(e!=null||n!=null)throw new Error("Support sampleWeight is not implemented yet");if(t!=null){let o=pe(()=>{if(r.shape.length===1)return r.clone();if(r.shape.length===2){if(r.shape[1]>1)return r.argMax(1);if(r.shape[1]===1)return r.reshape([r.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${r.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${r.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await o.data());ct(o);let s=[];return i.forEach(a=>{if(t[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(t[a])}),Br(s,"float32")}else return null}function SI(r,e){return re(r,e)}var nX=32;function kI(r,e){let t,n,o=e;t=o.xs,n=o.ys,I.assert(t!=null&&n!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);let i=TI("input",r.inputNames,t),s=TI("output",r.outputNames,n),a=i[0].shape[0];I.assert(i.length===r.inputs.length,()=>`LayersModel has ${r.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(r.inputNames)})`),I.assert(s.length===r.outputs.length,()=>`LayersModel has ${r.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(r.outputNames)})`);for(let l=0;l<i.length;l++)I.assert(i[l].shape[0]===a,()=>`Batch size mismatch: input ${r.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${r.inputNames[0]}.`);for(let l=0;l<s.length;l++)I.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${r.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${r.inputNames[0]}.`);return{xs:i,ys:s}}function TI(r,e,t){if(t instanceof Ct)return[t];if(Array.isArray(t))return I.assert(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${r} keys ${e}.`),t;{let n=[];for(let o of e){if(t[o]==null)throw new ue(`The feature data generated by the dataset lacks the required ${r} key '${o}'.`);n.push(t[o])}return n}}function oX(r){if(r.length===3)throw new lt("Validation with sample weights is not implemented yet.");return{xs:r[0],ys:r[1]}}async function EI(r,e,t){let n=t.batchesPerEpoch!=null;if(I.assert(r.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),I.assert(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),I.assert(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),I.assert(!n||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),I.assert(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");r.isTraining=!0;try{let o=t.validationData!=null,i,s;if(o)if(II(t.validationData))I.assert(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{let b=oX(t.validationData);i=b.xs,s=b.ys}let a=r.makeTrainFunction(),l=r.getDedupedMetricsNames(),u;o?u=l.slice().concat(l.map(b=>"val_"+b)):u=l.slice();let c=A1(t.callbacks,t.yieldEvery),x=t.verbose==null?1:t.verbose,{callbackList:f,history:h}=D1(c,x,t.epochs,null,null,iX(e,t),null,o,u);f.setModel(r),r.history=h,await f.onTrainBegin(),r.stopTraining_=!1;let g=t.initialEpoch==null?0:t.initialEpoch,m=await e.iterator();for(;g<t.epochs;){let b={};await f.onEpochBegin(g);let v=0,w=0;for(n||(m=await e.iterator());!n||v<t.batchesPerEpoch;){let C=await m.next();if(n&&C.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(C.value!=null){let{xs:N,ys:_}=kI(r,C.value),E={};E.batch=w,E.size=N[0].shape[0],await f.onBatchBegin(w,E);let T=[];if(t.classWeight!=null){let R=L1(t.classWeight,r.outputNames);for(let K=0;K<R.length;++K)T.push(await P1(_[K],null,R[K]))}let k=N.concat(_).concat(T),D=a(k);ct(k);for(let R=0;R<l.length;++R){let K=l[R],M=D[R];E[K]=M,Er(M)}await f.onBatchEnd(w,E),T1(E),w++,v++}if(n?v>=t.batchesPerEpoch:C.done){if(o){let N;II(t.validationData)?N=xr(await r.evaluateDataset(t.validationData,{batches:t.validationBatches})):N=xr(r.evaluate(i,s,{batchSize:t.validationBatchSize==null?nX:t.validationBatchSize,verbose:0}));for(let _=0;_<r.metricsNames.length;++_)b[`val_${r.metricsNames[_]}`]=N[_]}break}if(r.stopTraining_)break}if(await f.onEpochEnd(g,b),g++,r.stopTraining_)break}return await f.onTrainEnd(),await r.history.syncData(),r.history}finally{r.isTraining=!1}}function iX(r,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(r.size)&&(t=r.size),t}function II(r){return typeof r.iterator=="function"}function sX(r){return typeof r.next=="function"}async function AI(r,e,t){t=t||{};let n=t.batches!=null,o=r.testFunction,i=[];if(t.verbose>0)throw new lt("Verbose mode is not implemented yet.");I.assert(!n||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);let s=sX(e)?e:await e.iterator(),a=0,l=0;for(;!n||l<t.batches;){let u=await s.next();if(i=pe(()=>{if(u.value){let{xs:c,ys:x}=kI(r,u.value),f=c.concat(x),h=pe(()=>o(f));if(ct(f),l===0)for(let m=0;m<h.length;++m)i.push(Ve(0));let g=f[0].shape[0];for(let m=0;m<h.length;++m){let b=h[m],v=i[m];i[m]=pe(()=>$e(i[m],re(g,b))),l>0&&ct(v)}ct(h),a+=g,++l}return i}),u.done){n&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){let c=i[u];i[u]=He(i[u],a),ct(c)}return bn(i)}p();function B1(r){I.assert(r>0&&Number.isInteger(r),()=>`batchSize is required to be a positive integer, but got ${r}`)}function tx(r,e,t){return r==null?[null]:Array.isArray(r)?r.map(n=>Q0(n,e,t-e)):Q0(r,e,t-e)}function U1(r,e){return pe(()=>r==null?null:Array.isArray(r)?r.map(t=>U1(t,e)):v1(r,e.dtype==="int32"?e:e.toInt()))}function V1(r,e){let t=[],n=0,o=null;for(;n<r;)o=n+e,o>=r&&(o=r),t.push([n,o]),n=o;return t}async function aX(r,e,t,n,o,i,s,a,l,u,c,x,f,h,g){o==null&&(o=32),i==null&&(i=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),g!=null&&(m=!0,h==null))throw new ue("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let b=r.checkNumSamples(t,o,h,"steps_per_epoch"),v;b!=null&&(v=Zn(0,b)),s==null&&(s=1);let{callbackList:w,history:C}=D1(a,s,i,f,b,h,o,m,x);w.setModel(r),r.history=C,await w.onTrainBegin(),r.stopTraining_=!1;for(let N=f;N<i;++N){await w.onEpochBegin(N);let _={};if(h!=null)throw new lt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new lt("batch shuffling is not implemneted yet");c&&I.shuffle(v);let E=Br(v),T=V1(b,o);for(let k=0;k<T.length;++k){let D={};if(await w.onBatchBegin(k,D),pe(()=>{let R=T[k][0],K=T[k][1],M=Q0(E,R,K-R);D.batch=k,D.size=K-R;let j=U1(t,M),X=e(j);for(let Z=0;Z<n.length;++Z){let Y=n[Z],ce=X[Z];D[Y]=ce,Er(ce)}if(k===T.length-1&&m){let Z=r.testLoop(l,u,o);for(let Y=0;Y<n.length;++Y){let ce=n[Y],Q=Z[Y];Er(Q),_["val_"+ce]=Q}}}),await w.onBatchEnd(k,D),T1(D),r.stopTraining_)break}E.dispose()}if(await w.onEpochEnd(N,_),r.stopTraining_)break}return await w.onTrainEnd(),await r.history.syncData(),r.history}async function DI(r,e,t,n={}){if(r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");r.isTraining=!0;let o,i,s,a,l,u,c;try{let x=n.batchSize==null?32:n.batchSize;B1(x);let f=!1,h=await r.standardizeUserData(e,t,n.sampleWeight,n.classWeight,f,x);o=h[0],i=h[1],c=h[2];let g=!1,m;if(n.validationData!=null&&n.validationData.length>0){if(g=!0,n.validationData.length===2)s=n.validationData[0],a=n.validationData[1];else throw n.validationData.length===3?new lt("validationData including sample weights is not supported yet."):new ue(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);let T=!0,k=await r.standardizeUserData(s,a,null,null,T,x);l=k[0],u=k[1],m=l.concat(u)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){g=!0;let T=Math.floor(o[0].shape[0]*(1-n.validationSplit)),k=o[0].shape[0];l=tx(o,T,k),o=tx(o,0,T),u=tx(i,T,k),i=tx(i,0,T),m=l.concat(u)}else n.validationSteps!=null&&(g=!0);let b=o.concat(i).concat(c);r.checkTrainableWeightsConsistency();let v=r.makeTrainFunction(),w=r.getDedupedMetricsNames(),C,N;g?(r.makeTestFunction(),C=r.testFunction,N=w.slice().concat(w.map(T=>"val_"+T))):(C=null,m=[],N=w.slice());let _=A1(n.callbacks,n.yieldEvery);return await aX(r,v,b,w,x,n.epochs,n.verbose,_,C,m,n.shuffle,N,n.initialEpoch,null,null)}finally{r.isTraining=!1,ol(o,e),ol(i,t),ol(l,s),ol(u,a),c!=null&&ct(c)}}function Hg(r){let e=[];r instanceof Ct&&(r=[r]);for(let t=0;t<r.length;++t){let n=r[t];if(n.rank===1)e.push(t2(n,1));else{if(n.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(n)}}return e}function ol(r,e){if(r==null)return;let t=[];if(e instanceof Ct)t.push(e.id);else if(Array.isArray(e))e.forEach(o=>t.push(o.id));else if(e!=null)for(let o in e){let i=e[o];t.push(i.id)}let n=[];if(r instanceof Ct)t.indexOf(r.id)===-1&&n.push(r);else if(Array.isArray(r))r.forEach(o=>{t.indexOf(o.id)===-1&&n.push(o)});else if(r!=null)for(let o in r){let i=r[o];t.indexOf(i.id)===-1&&n.push(i)}n.forEach(o=>{o.isDisposed||o.dispose()})}function lX(r){return r instanceof Ct}function Kg(r){return Array.isArray(r)}function RI(r){return!lX(r)&&!Kg(r)}function $I(r,e,t,n=!0,o=""){if(e==null||e.length===0){if(r!=null){let s=!1;if(Kg(r)&&r.length>0)s=!0;else if(RI(r)){for(let a in r)if(r.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new ue(`Error when checking model ${o} expected no data, but got ${r}`)}return[]}if(r==null)return e.map(s=>null);let i;if(RI(r)){r=r,i=[];for(let s of e){if(r[s]==null)throw new ue(`No data provided for "${s}". Need data for each key in: ${e}`);i.push(r[s])}}else if(Kg(r)){if(r=r,r.length!==e.length)throw new ue(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${r}`);i=r}else{if(r=r,e.length>1)throw new ue(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${r.shape}`);i=[r]}if(i=Hg(i),t!=null)for(let s=0;s<e.length;++s){if(t[s]==null)continue;let a=i[s];if(a.shape.length!==t[s].length)throw new ue(`Error when checking ${o}: expected ${e[s]} to have ${t[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<t[s].length;++l){if(l===0&&!n)continue;let u=a.shape[l],c=t[s][l];if(c!=null&&c>=0&&u!==c)throw new ue(`Error when checking ${o}: expected ${e[s]} to have shape [${t[s]}], but got array with shape [${a.shape}].`)}}return i}function uX(r,e,t){let n=Ti(r.map(i=>i.shape[0]));n.sort();let o=Ti(e.map(i=>i.shape[0]));if(o.sort(),n.length>1)throw new ue(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(i=>i.shape))}`);if(o.length>1)throw new ue(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(n.length>0&&o.length>0&&!I.arraysEqual(n,o))throw new ue(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${o[0]} target sample(s).`)}function cX(r,e,t){let n=[Ia,ex,Wu];for(let o=0;o<r.length;++o){let i=r[o],s=e[o],a=t[o];if(s!=null){if(s===Wu&&i.shape[i.shape.length-1]===1)throw new ue(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(n.indexOf(s)!==-1){let l=i.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){let x=l[c],f=u[c];if(f!=null&&x!==f)throw new ue(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function OI(r,e,t,n=!0,o=""){let i;if(Array.isArray(r)){if(r.length!==e.length)throw new ue(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${r.length} Tensors(s).`);i=r}else{if(e.length>1)throw new ue(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(r.shape)}.`);i=[r]}if(t!=null)for(let s=0;s<e.length;++s){if(t[s]==null)continue;let a=i[s];if(a.shape.length!==t[s].length)throw new ue(`Error when checking ${o}: expected ${e[s]} to have ${t[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<t[s].length;++l){if(l===0&&!n)continue;let u=a.shape[l],c=t[s][l];if(c!=null&&c!==u)throw new ue(`Error when checking ${o}: expected ${e[s]} to have shape ${JSON.stringify(t[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function pX(r,e){if(r==null||Array.isArray(r)&&r.length===0)return e.map(n=>[]);let t;if(typeof r=="string"||typeof r=="function")t=[r];else if(Array.isArray(r)||typeof r=="object")t=r;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${r}`);if(Array.isArray(t))return e.map(n=>t);{let n=[];for(let o of e){let i=t.hasOwnProperty(o)?t[o]:[];Array.isArray(i)||(i=[i]),n.push(i)}return n}}var xX="layers-model",Lo=class extends ri{constructor(e){super(e);this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new ue("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");wI(this,e,t,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=vI(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Pn))throw new ue("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new ue(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(let s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),t.push(R1(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ue(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(a=>R1(a))}else{let s=R1(e.loss);this.outputs.forEach(a=>{t.push(s)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){let a=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[s])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ji("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(n.indexOf(s)!==-1)continue;let a=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([a,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});let o=pX(e.metrics,this.outputNames),i=(s,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[s]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,s])};Ji("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(n.indexOf(s)!==-1)continue;let a=o[s];(u=>{let c="",x,f,h;for(let g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let b=this.internalOutputShapes[s];b[b.length-1]===1||this.lossFunctions[s]===ex?["accuracy","acc"].indexOf(g)!==-1?f=Bf:["crossentropy","ce"].indexOf(g)!==-1&&(f=O1):this.lossFunctions[s]===Qp?["accuracy","acc"].indexOf(g)!==-1?f=F1:["crossentropy","ce"].indexOf(g)!==-1&&(f=Vg):["accuracy","acc"].indexOf(g)!==-1?f=Uf:["crossentropy","ce"].indexOf(g)!==-1&&(f=Vf);let v;["accuracy","acc"].indexOf(g)!==-1?v="acc":["crossentropy","ce"].indexOf(g)!==-1&&(v="ce"),h=f,x=c+v}else h=yI(g),x=c+Gf(g);let m;Ji(x,()=>{m=h}),i(s,x,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let o=n.batchSize==null?32:n.batchSize;B1(o);let i=!0,s=this.standardizeUserDataXY(e,t,i,o);try{let a=s[0].concat(s[1]);this.makeTestFunction();let l=this.testFunction,u=this.testLoop(l,a,o,n.verbose,n.steps);return bn(u)}finally{ol(s[0],e),ol(s[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),AI(this,e,t)}checkNumSamples(e,t,n,o="steps"){let i;if(n!=null){if(i=null,t!=null)throw new ue(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ue(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return i}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new ue("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),o=n?t:[t],i=this.retrieveSymbolicTensors(o),s=new es;if(e instanceof Ct&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ue(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)s.add(this.inputs[l],e[l])}else for(let l of this.inputs){let u=e[l.name];if(u==null)throw new ue(`No value is provided for the model's input ${l.name}`);s.add(l,u)}let a=Hu(i,s);return n?a:a[0]}retrieveSymbolicTensors(e){let t=_i(null,e.length),n=e.length;for(let o of this.layers){let i=Array.isArray(o.output)?o.output:[o.output],s=i.map(a=>a.name);for(let a=0;a<e.length;++a){let l=s.indexOf(e[a]);if(l!==-1&&(t[a]=i[l],n--),n===0)break}if(n===0)break}if(n>0){let o=[];throw t.forEach((i,s)=>{i==null&&o.push(e[s])}),new ue(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return t}predictLoop(e,t=32,n=!1){return pe(()=>{let o=this.checkNumSamples(e);if(n)throw new lt("Verbose predictLoop() is not implemented yet.");let i=V1(o,t),s=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)pe(()=>{let u=i[a][0],c=i[a][1],x=tx(e,u,c),f=[];if(Array.isArray(x))for(let g=0;g<x.length;++g)f.push({key:this.inputs[g],value:x[g]});else f.push({key:this.inputs[0],value:x});let h=new es(f);return Hu(this.outputs,h)}).forEach((u,c)=>s[c].push(u));return bn(s.map(a=>Mt(a,0)))})}predict(e,t={}){let n=Hg(e);OI(n,this.inputNames,this.feedInputShapes,!1);try{let o=t.batchSize==null?32:t.batchSize;return B1(o),this.predictLoop(n,o)}finally{ol(n,e)}}predictOnBatch(e){OI(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,o){if(this.optimizer_==null)throw new Yn("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let i=[];for(let s=0;s<this.feedOutputShapes.length;++s){let a=this.feedOutputShapes[s];this.feedLossFns[s]===Qp?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=$I(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$I(t,this.feedOutputNames,i,!1,"target"),uX(e,t,null),cX(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new ue(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,o,i=!0,s){let[a,l]=this.standardizeUserDataXY(e,t,i,s);if(n!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){let c=L1(o,this.outputNames);u=[];for(let x=0;x<c.length;++x)u.push(await P1(l[x],null,c[x]))}return[a,l,u]}testLoop(e,t,n,o=0,i){return pe(()=>{let s=this.checkNumSamples(t,n,i,"steps"),a=[];if(o>0)throw new lt("Verbose mode is not implemented yet.");if(i!=null)throw new lt("steps mode in testLoop() is not implemented yet");{let l=V1(s,n),u=Br(Zn(0,s));for(let c=0;c<l.length;++c){let x=l[c][0],f=l[c][1],h=Q0(u,x,f-x),g=U1(t,h),m=e(g);if(c===0)for(let b=0;b<m.length;++b)a.push(Ve(0));for(let b=0;b<m.length;++b){let v=m[b];a[b]=$e(a[b],re(f-x,v))}}for(let c=0;c<a.length;++c)a[c]=He(a[c],s)}return a})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let o=e[n],i=o;Rg(e,o)>1&&(i+=`_${Rg(e.slice(0,n),o)}`),t.push(i)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],a=()=>{let x=[];for(let m=0;m<this.inputs.length;++m)x.push({key:this.inputs[m],value:n[m]});let f=new es(x),h=Hu(this.outputs,f,{training:!0}),g;for(let m=0;m<this.lossFunctions.length;++m){let v=this.lossFunctions[m](o[m],h[m]);i[m]!=null&&(v=SI(v,i[m]));let w=ar(v);t.push(w),m===0?g=v:g=$e(g,v)}for(let m=0;m<this.metricsTensors.length;++m){let b;if(this.outputs.length>1&&m<this.outputs.length)b=t[m];else{let v=this.metricsTensors[m][0],w=this.metricsTensors[m][1];b=ar(v(o[w],h[w]))}Er(b),s.push(b)}return g=ar(g),this.calculateLosses().forEach(m=>{g=$e(g,m)}),g},l=this.collectedTrainableWeights.map(x=>x.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(s)}}makeTestFunction(){this.testFunction=e=>pe(()=>{let t=[],n,o=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let u=0;u<this.inputs.length;++u)s.push({key:this.inputs[u],value:o[u]});let a=new es(s),l=Hu(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){let c=this.lossFunctions[u],x=ar(c(i[u],l[u]));u===0?n=x:n=$e(n,x),t.push(n)}for(let u=0;u<this.metricsTensors.length;++u){let c=this.metricsTensors[u][0],x=this.metricsTensors[u][1],f=ar(c(i[x],l[x]));t.push(f)}return t})}async fit(e,t,n={}){return DI(this,e,t,n)}async fitDataset(e,t){return EI(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),o=n[0],i=n[1],a=this.makeTrainFunction()(o.concat(i)),l=[];for(let u of a){let c=await u.data();l.push(c[0])}return ct(a),bn(l)}getNamedWeights(e){let t=[],n=e!=null&&e.trainableOnly,o=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let s=0;s<o.length;++s)n&&!o[s].trainable||t.push({name:o[s].originalName,tensor:i[s]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=ep().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-ep().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Si(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Si(t))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let o of t)if(typeof n[o]=="string")e[o]=Si(n[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Si(Gf(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Si(Gf(e)));{let e={};for(let t in this.metrics)e[t]=Si(Gf(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=qu(e.optimizer_config),n=lo(t),o;if(typeof e.loss=="string")o=J0(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(s=>J0(s));else if(e.loss!=null){o={};for(let s in e.loss)o[s]=J0(e.loss[s])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(s=>J0(s));else if(e.metrics!=null){i={};for(let s in e.metrics)i[s]=J0(e.metrics[s])}this.compile({loss:o,metrics:i,optimizer:n})}async save(e,t){if(typeof e=="string"){let u=Sn.getSaveHandlers(e);if(u.length===0)throw new ue(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new ue(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new ue("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Sn.encodeWeights(this.getNamedWeights(t)),o=!1,i=null,a={modelTopology:this.toJSON(i,o),format:xX,generatedBy:`TensorFlow.js tfjs-layers v${nl}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:c,specs:x}=await Sn.encodeWeights(await this.optimizer.getWeights(),u);n.specs.push(...x),n.data=Sn.concatenateArrayBuffers([n.data,c])}return this.userDefinedMetadata!=null&&(Wg(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=n.data,a.weightSpecs=n.specs,e.save(a)}setUserDefinedMetadata(e){Wg(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Lo.className="Model";Re.registerClass(Lo);var jg=class extends Lo{};jg.className="Functional";Re.registerClass(jg);p();async function FI(r,e){"modelTopology"in r||(r={modelTopology:r}),r=r;let t=r.modelTopology;t.model_config!=null&&(t=t.model_config);let n=qu(t),o=lo(n,e);if(r.weightsManifest!=null){let i=await Sn.loadWeights(r.weightsManifest,r.pathPrefix,o.weights.map(a=>a.originalName)),s={};for(let a of o.weights)s[a.originalName]=i[a.originalName];o.loadWeights(s),ct(i)}return o}async function MI(r,e){if(e==null&&(e={}),typeof r=="string"){let t=Sn.getLoadHandlers(r,e);if(t.length===0)t.push(Sn.browserHTTPRequest(r,e));else if(t.length>1)throw new ue(`Found more than one (${t.length}) load handlers for URL '${r}'`);r=t[0]}return fX(r,void 0,e)}async function fX(r,e,t){if(t==null&&(t={}),r.load==null)throw new ue("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let n=await r.load(),o=n.modelTopology;o.model_config!=null&&(o=o.model_config);let i=t.strict==null?!0:t.strict,s=n.weightData!=null&&n.weightSpecs!=null&&i,a=lo(qu(o),e,s),l=n.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),n.userDefinedMetadata!=null&&a.setUserDefinedMetadata(n.userDefinedMetadata),n.weightData!=null){if(n.weightSpecs==null)throw new ue("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:u,optimizerWeights:c}=mX(n.weightData,n.weightSpecs);a.loadWeights(u,i),a.optimizer!=null&&c.length>0&&await a.optimizer.setWeights(c),ct(u),ct(c.map(x=>x.tensor))}return a}function mX(r,e){let t=Sn.decodeWeights(r,e),n={},o=[];return e.forEach(i=>{i.group==="optimizer"?o.push({name:i.name,tensor:t[i.name]}):n[i.name]=t[i.name]}),{modelWeights:n,optimizerWeights:o}}var ka=class extends Lo{constructor(e){super({inputs:[],outputs:[]});if(e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Q2("sequential_"),e.layers!=null)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(n=>n<0))throw new ue(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t=e instanceof ka||e instanceof Lo,n;if(t){if(n=e,n.outputs.length!==1)throw new ue("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(n.inputs.length!==1)throw new ue("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ue("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let o=S1({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(e.inboundNodes.length!==1)throw new ue(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ue("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Bg(this.outputs[0])}this.inboundNodes=[],new el({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_i(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{let o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(Bt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Lo({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Yn("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Yn("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Yn("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Yn("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},o=!1){let i,s={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new ue("Legacy serialization format not supported yet.");i=t}else I.assert(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=t.layers,delete t.layers,s=t;let a=new e(s);if(!(a instanceof ka))throw new lt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(let l of i){let c=lo(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new ue("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ue("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};ka.className="Sequential";Re.registerClass(ka);function zI(r){return new Lo(r)}function LI(r){return new ka(r)}function G1(r,e){return e==null&&(e={}),MI(r,e)}function W1(r){return S1(r)}function PI(r,e){wo.registerCallbackConstructor(r,e)}p();p();var Co=class extends Re.Serializable{getConfig(){return{}}},Yg=class extends Co{apply(e,t=1){return oI(e,t)}};Yg.className="elu";Re.registerClass(Yg);var Zg=class extends Co{apply(e){return q2(e)}};Zg.className="selu";Re.registerClass(Zg);var Jg=class extends Co{apply(e){return En(e)}};Jg.className="relu";Re.registerClass(Jg);var Qg=class extends Co{apply(e){return pe(()=>bi(6,En(e)))}};Qg.className="relu6";Re.registerClass(Qg);var e6=class extends Co{apply(e){return e}};e6.className="linear";Re.registerClass(e6);var t6=class extends Co{apply(e){return Hn(e)}};t6.className="sigmoid";Re.registerClass(t6);var r6=class extends Co{apply(e){return sI(e)}};r6.className="hardSigmoid";Re.registerClass(r6);var n6=class extends Co{apply(e){return gi(e)}};n6.className="softplus";Re.registerClass(n6);var o6=class extends Co{apply(e){return iI(e)}};o6.className="softsign";Re.registerClass(o6);var i6=class extends Co{apply(e){return Hi(e)}};i6.className="tanh";Re.registerClass(i6);var Wf=class extends Co{apply(e,t=-1){return va(e,t)}};Wf.className="softmax";Re.registerClass(Wf);var s6=class extends Co{apply(e,t=-1){return B2(e,t)}};s6.className="logSoftmax";Re.registerClass(s6);var a6=class extends Co{apply(e,t=1){return pe(()=>Hn(e.mul(t)).mul(e))}};a6.className="swish";Re.registerClass(a6);function ts(r){return r.getClassName()}function Xg(r,e={}){return Na(r,Re.SerializationMap.getMap().classNameMap,e,"activation")}function rs(r){if(r==null){let e={};return e.className="linear",e.config={},Xg(e)}if(typeof r=="string"){let e={};return e.className=r,e.config={},Xg(e)}else return r instanceof Co?r:Xg(r)}p();function l6(r){if(r!=null&&typeof r!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${r}`)}var u6=class extends Re.Serializable{},Ku=class extends u6{constructor(e){super();l6(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return pe(()=>{let t=lr([1]);return this.hasL1&&(t=$e(t,Qe(re(this.l1,gr(e))))),this.hasL2&&(t=$e(t,Qe(re(this.l2,Vu(e))))),t.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};Ku.className="L1L2";Re.registerClass(Ku);function VI(r){return l6(r),new Ku({l1:r!=null?r.l1:null,l2:0})}function GI(r){return l6(r),new Ku({l2:r!=null?r.l2:null,l1:0})}var BI={l1l2:"L1L2"};function Qt(r){return Lp(r)}function UI(r,e={}){return Na(r,Re.SerializationMap.getMap().classNameMap,e,"regularizer")}function fr(r){if(r==null)return null;if(typeof r=="string"){let t={className:r in BI?BI[r]:r,config:{}};return UI(t)}else return r instanceof u6?r:UI(r)}var qf=class extends yt{constructor(e){super(e??{});this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=dt(e);let n=En(e);return this.maxValue!=null&&(n=on(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};qf.className="ReLU";Re.registerClass(qf);var Hf=class extends yt{constructor(e){super(e??{});this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=dt(e);return ha(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};Hf.className="LeakyReLU";Re.registerClass(Hf);var Kf=class extends yt{constructor(e){super(e??{});if(this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=cr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fr(e.alphaRegularizer),this.alphaConstraint=Mr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ue(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Bt(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let o of this.sharedAxes)t[o-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)n[o]=e[o];this.inputSpec=[new Sr({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=dt(e),ba(e,this.alpha.read())}getConfig(){let e={alphaInitializer:br(this.alphaInitializer),alphaRegularizer:Qt(this.alphaRegularizer),alphaConstraint:Fr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};Kf.className="PReLU";Re.registerClass(Kf);var jf=class extends yt{constructor(e){super(e??{});if(this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new lt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=dt(e);return hi(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};jf.className="ELU";Re.registerClass(jf);var Xf=class extends yt{constructor(e){super(e??{});this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let n=dt(e);return n.mul(e2(n.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};Xf.className="ThresholdedReLU";Re.registerClass(Xf);var Yf=class extends yt{constructor(e){super(e??{});this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new Wf().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){let n=dt(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};Yf.className="Softmax";Re.registerClass(Yf);p();p();function il(r,e,t){if(typeof r=="number")return _i(r,e);if(r.length!==e)throw new ue(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${r.length} elements.`);for(let n=0;n<e;++n){let o=r[n];if(!QT(o))throw new ue(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(r)} including a non-integer number ${o}`)}return r}function No(r,e,t,n,o=1){if(r==null)return r;let i=e+(e-1)*(o-1),s;return t==="same"?s=r:s=r-i+1,Math.floor((s+n-1)/n)}function Zf(r,e,t,n){if(r==null)return null;if(n==="valid")r=r*e+Qi([t-e,0]);else if(n==="same")r=r*e;else throw new ue(`Unsupport padding mode: ${n}.`);return r}function Jf(r,e){return pe(()=>(Or(e),e==="channelsFirst"?Rt(r,[0,2,3,1]):r))}function c6(r,e){return pe(()=>(Or(e),e==="channelsFirst"?Rt(r,[0,2,3,4,1]):r))}function dX(r,e,t,n=1,o="valid",i,s=1){return pe(()=>{if(i==null&&(i=io()),Or(i),r.shape.length!==3)throw new ue(`The input of a conv1dWithBias operation should be 3, but is ${r.shape.length} instead.`);if(e.shape.length!==3)throw new ue(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new ue(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(i==="channelsFirst"&&(r=Rt(r,[0,2,1])),o==="causal")throw new lt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=R2(r,e,n,o==="same"?"same":"valid","NWC",s);return t!=null&&(a=bo(a,t)),a})}function WI(r,e,t,n=[1,1],o="valid",i,s,a=null){return pe(()=>{if(i==null&&(i=io()),Or(i),r.rank!==3&&r.rank!==4)throw new ue(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${r.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ue(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${r.rank}.`);let l=Jf(r,i);if(o==="causal")throw new lt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=ei.conv2d({x:l,filter:e,strides:n,pad:o==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:t,activation:a}),i==="channelsFirst"&&(l=Rt(l,[0,3,1,2])),l})}function gX(r,e,t,n=[1,1,1],o="valid",i,s){return pe(()=>{if(i==null&&(i=io()),Or(i),r.rank!==4&&r.rank!==5)throw new ue(`conv3dWithBias expects input to be of rank 4 or 5, but received ${r.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ue(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${r.rank}.`);let a=c6(r,i);if(o==="causal")throw new lt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=fp(a,e,n,o==="same"?"same":"valid","NDHWC",s),t!=null&&(a=bo(a,t)),i==="channelsFirst"&&(a=Rt(a,[0,4,1,2,3])),a})}var rx=class extends yt{constructor(e,t){super(t);if(this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",rx.verifyArgs(t),this.rank=e,Hr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new lt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=il(t.kernelSize,e,"kernelSize"),this.strides=il(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,so(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Or(this.dataFormat),this.activation=rs(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=cr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Mr(t.biasConstraint),this.biasRegularizer=fr(t.biasRegularizer),this.activityRegularizer=fr(t.activityRegularizer),this.dilationRate=il(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ue(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ue(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ue(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(ti("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!m1(e.kernelSize,"number",1,3))throw new ue(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ts(this.activation),useBias:this.useBias,biasInitializer:br(this.biasInitializer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),biasConstraint:Fr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},ju=class extends rx{constructor(e,t){super(e,t);this.kernel=null,ju.verifyArgs(t),this.filters=t.filters,Hr(this.filters,"filters"),this.kernelInitializer=cr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Mr(t.kernelConstraint),this.kernelRegularizer=fr(t.kernelRegularizer)}build(e){e=Bt(e);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ue(`The channel dimension of the input should be defined. Found ${e[t]}`);let n=e[t],o=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return pe(()=>{e=dt(e);let n,o=this.bias==null?null:this.bias.read(),i=h1(this.activation.getClassName());if(i!=null&&this.rank===2)n=WI(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)n=dX(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)n=WI(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)n=gX(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new lt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(n=this.activation.apply(n))}return n})}computeOutputShape(e){e=Bt(e);let t=[],n=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){let s=No(n[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);t.push(s)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(t),o.push(this.filters)):(o.push(this.filters),o=o.concat(t)),o}getConfig(){let e={filters:this.filters,kernelInitializer:br(this.kernelInitializer),kernelRegularizer:Qt(this.kernelRegularizer),kernelConstraint:Fr(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ue(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}},sl=class extends ju{constructor(e){super(2,e);sl.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!m1(e.kernelSize,"number",1,2))throw new ue(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};sl.className="Conv2D";Re.registerClass(sl);var Xu=class extends ju{constructor(e){super(3,e);Xu.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ue(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};Xu.className="Conv3D";Re.registerClass(Xu);var Qf=class extends sl{constructor(e){super(e);if(this.inputSpec=[new Sr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ue(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Bt(e),e.length!==4)throw new ue("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ue("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],o=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Sr({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return pe(()=>{let n=dt(e);if(n.shape.length!==4)throw new ue(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let o=n.shape,i=o[0],s,a;this.dataFormat==="channelsFirst"?(s=2,a=3):(s=1,a=2);let l=o[s],u=o[a],c=this.kernelSize[0],x=this.kernelSize[1],f=this.strides[0],h=this.strides[1],g=Zf(l,f,c,this.padding),m=Zf(u,h,x,this.padding),b=[i,g,m,this.filters];this.dataFormat!=="channelsLast"&&(n=Rt(n,[0,2,3,1]));let v=$2(n,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Rt(v,[0,3,1,2])),this.bias!=null&&(v=bo(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=Bt(e);let t=e.slice(),n,o,i;this.dataFormat==="channelsFirst"?(n=1,o=2,i=3):(n=3,o=1,i=2);let s=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return t[n]=this.filters,t[o]=Zf(t[o],l,s,this.padding),t[i]=Zf(t[i],u,a,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};Qf.className="Conv2DTranspose";Re.registerClass(Qf);var p6=class extends ju{constructor(e,t){super(e,t);if(this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new ue("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new ue("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new ue(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fr(t.depthwiseRegularizer),this.depthwiseConstraint=Mr(t.depthwiseConstraint),this.pointwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fr(t.pointwiseRegularizer),this.pointwiseConstraint=Mr(t.pointwiseConstraint)}build(e){if(e=Bt(e),e.length<this.rank+2)throw new ue(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new ue(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);let n=e[t],o=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(n*this.depthMultiplier,this.filters);let s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new Sr({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return pe(()=>{e=dt(e);let n;if(this.rank===1)throw new lt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Rt(e,[0,2,3,1])),n=Ip(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=bo(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=Rt(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=br(this.depthwiseInitializer),e.pointwiseInitializer=br(this.pointwiseInitializer),e.depthwiseRegularizer=Qt(this.depthwiseRegularizer),e.pointwiseRegularizer=Qt(this.pointwiseRegularizer),e.depthwiseConstraint=Fr(this.depthwiseConstraint),e.pointwiseConstraint=Fr(this.pointwiseConstraint),e}};p6.className="SeparableConv";var em=class extends p6{constructor(e){super(2,e)}};em.className="SeparableConv2D";Re.registerClass(em);var Yu=class extends ju{constructor(e){super(1,e);Yu.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!m1(e.kernelSize,"number",1,1))throw new ue(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};Yu.className="Conv1D";Re.registerClass(Yu);var tm=class extends yt{constructor(e){super(e);typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return pe(()=>{if(e=dt(e),this.dataFormat==="channelsLast"){let n=If(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return If(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=If(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return If(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};tm.className="Cropping2D";Re.registerClass(tm);var rm=class extends yt{constructor(e){super(e);this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ZT(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,n]}else{let t=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return pe(()=>{let n=dt(e),o=n.shape;if(this.dataFormat==="channelsFirst"){n=Rt(n,[0,2,3,1]);let i=this.size[0]*o[2],s=this.size[1]*o[3],a=this.interpolation==="nearest"?n.resizeNearestNeighbor([i,s]):n.resizeBilinear([i,s]);return Rt(a,[0,3,1,2])}else{let i=this.size[0]*o[1],s=this.size[1]*o[2];return this.interpolation==="nearest"?n.resizeNearestNeighbor([i,s]):n.resizeBilinear([i,s])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};rm.className="UpSampling2D";Re.registerClass(rm);p();function yX(r,e,t=[1,1],n="valid",o,i){return pe(()=>{o==null&&(o=io()),Or(o);let s=Jf(r,o);if(r.rank!==4)throw new ue(`Input for depthwiseConv2d is required to be 4-D, but is instead ${r.rank}-D`);if(e.rank!==4)throw new ue(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=mi(s,e,t,n==="same"?"same":"valid","NHWC",i),o==="channelsFirst"&&(s=Rt(s,[0,3,1,2])),s})}var nm=class extends rx{constructor(e){super(2,e);this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=cr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Mr(e.depthwiseConstraint),this.depthwiseRegularizer=fr(e.depthwiseRegularizer)}build(e){if(e=Bt(e),e.length<4)throw new ue(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new ue(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],o=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return pe(()=>{e=dt(e);let n=yX(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=bo(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=Bt(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=No(t,this.kernelSize[0],this.padding,this.strides[0]),s=No(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,i,s]:[e[0],i,s,o]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=br(this.depthwiseInitializer),e.depthwiseRegularizer=Qt(this.depthwiseRegularizer),e.depthwiseConstraint=Fr(this.depthwiseRegularizer),e}};nm.className="DepthwiseConv2D";Re.registerClass(nm);p();p();function x6(r,e,t,n){if(Array.isArray(r)){if(e!=null||t!=null)throw new ue("When inputs is an array, neither initialState or constants should be provided");n!=null&&(t=r.slice(r.length-n,r.length),r=r.slice(0,r.length-n)),r.length>1&&(e=r.slice(1,r.length)),r=r[0]}function o(i){return i==null||Array.isArray(i)?i:[i]}return e=o(e),t=o(t),{inputs:r,initialState:e,constants:t}}function f6(r,e,t,n=!1,o,i,s=!1,a=!1){return pe(()=>{let l=e.shape.length;if(l<3)throw new ue(`Input should be at least 3D, but is ${l}D.`);let u=[1,0].concat(Zn(2,l));if(e=Rt(e,u),i!=null)throw new lt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=o.asType("bool").asType("float32"),o.rank===l-1&&(o=sn(o,-1)),o=Rt(o,u)),n&&(e=qr(e,0),o!=null&&(o=qr(o,0)));let c=[],x,f=t,h=e.shape[0],g=cn(e),m;o!=null&&(m=cn(o));for(let v=0;v<h;++v){let w=g[v],C=pe(()=>r(w,f));if(o==null)x=C[0],f=C[1];else{let N=pe(()=>{let _=m[v],E=Qr(_).sub(_),T=C[0].mul(_).add(f[0].mul(E)),k=f.map((D,R)=>C[1][R].mul(_).add(D.mul(E)));return{output:T,newStates:k}});x=N.output,f=N.newStates}a&&c.push(x)}let b;return a&&(b=Pr(c,1)),[x,b,f]})}var _o=class extends yt{constructor(e){super(e);let t;if(e.cell==null)throw new ue("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new ix({cells:e.cell}):t=e.cell,t.stateSize==null)throw new ue("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Sr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Zn(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){_1(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n=t[0],o;if(this.returnSequences?o=[e[0],e[1],n]:o=[e[0],n],this.returnState){let i=[];for(let s of t)i.push([e[0],s]);return[o].concat(i)}else return o}computeMask(e,t){return pe(()=>{Array.isArray(t)&&(t=t[0]);let n=this.returnSequences?t:null;if(this.returnState){let o=this.states.map(i=>null);return[n].concat(o)}else return n})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new lt("Constants support is not implemented in RNN yet.");_1(e)&&(e=e[0]),e=e;let n=this.stateful?e[0]:null,o=e.slice(2);this.inputSpec[0]=new Sr({shape:[n,null,...o]});let i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!I.arraysEqual(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new ue(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new Sr({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){pe(()=>{if(!this.stateful)throw new zo("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(n==null)throw new ue("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>lr([n,o])):this.states_=[lr([n,this.cell.stateSize])];else if(e==null)ct(this.states_),this.keptStates!=null&&(ct(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>lr([n,o])):this.states_[0]=lr([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ue(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):ct(this.states_);for(let o=0;o<this.states_.length;++o){let i=e[o],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[n,s];if(!I.arraysEqual(i.shape,a))throw new ue(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[o]=i}}this.states_=this.states_.map(o=>Er(o.clone()))})}apply(e,t){let n=t==null?null:t.initialState,o=t==null?null:t.constants;t==null&&(t={});let i=x6(e,n,o,this.numConstants);e=i.inputs,n=i.initialState,o=i.constants;let s=[],a=[];if(n!=null){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(let u of n)this.stateSpec.push(new Sr({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(t.constants=o,s=s.concat(o),this.numConstants=o.length),s[0]instanceof Qn){let u=[e].concat(s),c=this.inputSpec.concat(a),x=this.inputSpec;this.inputSpec=c;let f=super.apply(u,t);return this.inputSpec=x,f}else return super.apply(e,t)}call(e,t){return pe(()=>{let n=t==null?null:t.mask,o=t==null?null:t.training,i=t==null?null:t.initialState;e=dt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));let s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new ue(`RNN Layer has ${s} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let a={training:o},u=f6((g,m)=>{let b=this.cell.call([g].concat(m),a);return[b[0],b.slice(1)]},e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),c=u[0],x=u[1],f=u[2];this.stateful&&this.resetStates(f,o);let h=this.returnSequences?x:c;return this.returnState?[h].concat(f):h})}getInitialState(e){return pe(()=>{let t=lr(e.shape);return t=Qe(t,[1,2]),t=t2(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(n=>n>1?b1(t,[1,n]):t):this.cell.stateSize>1?[b1(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===_o.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){let o=t.cell,i=lo(o,n);return new e(Object.assign(t,{cell:i}))}};_o.className="RNN";Re.registerClass(_o);var al=class extends yt{},nx=class extends al{constructor(e){super(e);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Hr(this.units,"units"),this.activation=rs(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fr(e.kernelRegularizer),this.recurrentRegularizer=fr(e.recurrentRegularizer),this.biasRegularizer=fr(e.biasRegularizer),this.kernelConstraint=Mr(e.kernelConstraint),this.recurrentConstraint=Mr(e.recurrentConstraint),this.biasConstraint=Mr(e.biasConstraint),this.dropout=Uu([1,Qi([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Uu([1,Qi([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Bt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return pe(()=>{if(e=e,e.length!==2)throw new ue(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let o=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=r2({ones:()=>Qr(e),rate:this.dropout,training:o})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=r2({ones:()=>Qr(n),rate:this.recurrentDropout,training:o}));let i,s=this.dropoutMask,a=this.recurrentDropoutMask;s!=null?i=ki(re(e,s),this.kernel.read()):i=ki(e,this.kernel.read()),this.bias!=null&&(i=bo(i,this.bias.read())),a!=null&&(n=re(n,a));let l=$e(i,ki(n,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ts(this.activation),useBias:this.useBias,kernelInitializer:br(this.kernelInitializer),recurrentInitializer:br(this.recurrentInitializer),biasInitializer:br(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}};nx.className="SimpleRNNCell";Re.registerClass(nx);var om=class extends _o{constructor(e){e.cell=new nx(e);super(e)}call(e,t){return pe(()=>{this.cell.dropoutMask!=null&&(ct(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ct(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,o=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:o,initialState:i})})}static fromConfig(e,t){return new e(t)}};om.className="SimpleRNN";Re.registerClass(om);var ox=class extends al{constructor(e){super(e);if(this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ue("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Hr(this.units,"units"),this.activation=rs(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=rs(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fr(e.kernelRegularizer),this.recurrentRegularizer=fr(e.recurrentRegularizer),this.biasRegularizer=fr(e.biasRegularizer),this.kernelConstraint=Mr(e.kernelConstraint),this.recurrentConstraint=Mr(e.recurrentConstraint),this.biasConstraint=Mr(e.biasConstraint),this.dropout=Uu([1,Qi([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Uu([1,Qi([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Bt(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return pe(()=>{if(e=e,e.length!==2)throw new ue(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training==null?!1:t.training,o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=r2({ones:()=>Qr(e),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=r2({ones:()=>Qr(o),rate:this.recurrentDropout,training:n,count:3}));let i=this.dropoutMask,s=this.recurrentDropoutMask,a,l,u;0<this.dropout&&this.dropout<1&&(e=re(e,i[0]));let c=ki(e,this.kernel.read());this.useBias&&(c=bo(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=re(o,s[0]));let x=this.recurrentKernel.read(),[f,h]=un(x,[2*this.units,this.units],x.rank-1),g=ki(o,f),[m,b,v]=un(c,3,c.rank-1),[w,C]=un(g,2,g.rank-1);a=this.recurrentActivation.apply($e(m,w)),l=this.recurrentActivation.apply($e(b,C));let N=ki(re(l,o),h);u=this.activation.apply($e(v,N));let _=$e(re(a,o),re($e(1,Dt(a)),u));return[_,_]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ts(this.activation),recurrentActivation:ts(this.recurrentActivation),useBias:this.useBias,kernelInitializer:br(this.kernelInitializer),recurrentInitializer:br(this.recurrentInitializer),biasInitializer:br(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}};ox.className="GRUCell";Re.registerClass(ox);var im=class extends _o{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ox(e);super(e)}call(e,t){return pe(()=>{this.cell.dropoutMask!=null&&(ct(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ct(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,o=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:o,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};im.className="GRU";Re.registerClass(im);var ll=class extends al{constructor(e){super(e);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Hr(this.units,"units"),this.activation=rs(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=rs(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=fr(e.kernelRegularizer),this.recurrentRegularizer=fr(e.recurrentRegularizer),this.biasRegularizer=fr(e.biasRegularizer),this.kernelConstraint=Mr(e.kernelConstraint),this.recurrentConstraint=Mr(e.recurrentConstraint),this.biasConstraint=Mr(e.biasConstraint),this.dropout=Uu([1,Qi([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Uu([1,Qi([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=Bt(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){let i=this.biasInitializer,s=this.units;o=new(t=class extends vo{apply(l,u){let c=i.apply([s]),x=new Gu().apply([s]),f=i.apply([s*2]);return Lg(Lg(c,x),f)}},t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return pe(()=>{let n=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new ue(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1],i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=r2({ones:()=>Qr(e),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=r2({ones:()=>Qr(o),rate:this.recurrentDropout,training:n,count:4}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,u,c,x;0<this.dropout&&this.dropout<1&&(e=re(e,s[0]));let f=ki(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=re(o,a[0])),f=$e(f,ki(o,this.recurrentKernel.read())),this.useBias&&(f=bo(f,this.bias.read()));let[h,g,m,b]=un(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(g),c=$e(re(u,i),re(l,this.activation.apply(m))),x=this.recurrentActivation.apply(b);let v=re(x,this.activation.apply(c));return[v,v,c]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ts(this.activation),recurrentActivation:ts(this.recurrentActivation),useBias:this.useBias,kernelInitializer:br(this.kernelInitializer),recurrentInitializer:br(this.recurrentInitializer),biasInitializer:br(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}};ll.className="LSTMCell";Re.registerClass(ll);var sm=class extends _o{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ll(e);super(e)}call(e,t){return pe(()=>{this.cell.dropoutMask!=null&&(ct(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ct(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,o=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:o,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};sm.className="LSTM";Re.registerClass(sm);var ix=class extends al{constructor(e){super(e);this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return pe(()=>{e=e;let n=e.slice(1),o=[];for(let a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(n.splice(0,a.stateSize.length)):o.push(n.splice(0,1));o.reverse();let i=[],s;for(let a=0;a<this.cells.length;++a){let l=this.cells[a];n=o[a],a===0?s=[e[0]].concat(n):s=[s[0]].concat(n),s=l.call(s,t),i.push(s.slice(1))}n=[];for(let a of i.slice().reverse())n.push(...a);return[s[0]].concat(n)})}build(e){_1(e)&&(e=e[0]),e=e;let t;this.cells.forEach((n,o)=>{Ji(`RNNCell_${o}`,()=>{n.build(e),Array.isArray(n.stateSize)?t=n.stateSize[0]:t=n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=i=>({className:i.getClassName(),config:i.getConfig()}),o={cells:this.cells.map(t)};return Object.assign({},e,o)}static fromConfig(e,t,n={}){let o=[];for(let i of t.cells)o.push(lo(i,n));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.cells)t.push(...n.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return Mf(e)}setWeights(e){let t=[];for(let n of this.cells){let o=n.weights.length,i=e.splice(o);for(let s=0;s<n.weights.length;++s)t.push([n.weights[s],i[s]])}Zp(t)}};ix.className="StackedRNNCells";Re.registerClass(ix);function r2(r){let{ones:e,rate:t,training:n=!1,count:o=1}=r,i=()=>w1(e(),t),s=()=>J2(i,e,n);return!o||o<=1?Er(s().clone()):Array(o).fill(void 0).map(s).map(l=>Er(l.clone()))}var bX=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]]);return t};var m6=class extends _o{constructor(e){if(e.unroll)throw new lt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new lt("It is not possible at the moment to stack convolutional cells.");super(e);this.inputSpec=[new Sr({ndim:5})]}call(e,t){return pe(()=>{if(this.cell.dropoutMask!=null&&(ct(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ct(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ue("ConvRNN2D cell does not support constants");let n=t==null?null:t.mask,o=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:o,initialState:i})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return pe(()=>{let{stateSize:t}=this.cell,n=e.shape,o=this.computeSingleOutputShape(n),i=[o[0],...o.slice(2)],s=lr(i);return Array.isArray(t)?Array(t.length).fill(s):[s]})}resetStates(e,t=!1){pe(()=>{if(!this.stateful)throw new zo("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,o=this.computeSingleOutputShape(n),i=[o[0],...o.slice(2)];if(n[0]==null)throw new ue("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>lr(i)):this.states_=[lr(i)];else if(e==null)ct(this.states_),this.keptStates!=null&&(ct(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>lr(i)):this.states_[0]=lr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ue(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):ct(this.states_);for(let a=0;a<this.states_.length;++a){let l=e[a],u=i;if(!I.arraysEqual(l.shape,u))throw new ue(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Er(a.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:o,padding:i,strides:s,dilationRate:a}=this.cell,l=t==="channelsFirst",u=e[l?3:2],c=e[l?4:3],x=No(u,o[0],i,s[0],a[0]),f=No(c,o[1],i,s[1],a[1]);return[...e.slice(0,2),...l?[n,x,f]:[x,f,n]]}};m6.className="ConvRNN2D";var sx=class extends ll{constructor(e){let{filters:t,kernelSize:n,strides:o,padding:i,dataFormat:s,dilationRate:a}=e;super(Object.assign({},e,{units:t}));this.filters=t,Hr(this.filters,"filters"),this.kernelSize=il(n,2,"kernelSize"),this.kernelSize.forEach(l=>Hr(l,"kernelSize")),this.strides=il(o||1,2,"strides"),this.strides.forEach(l=>Hr(l,"strides")),this.padding=i||"valid",so(this.padding),this.dataFormat=s||"channelsLast",Or(this.dataFormat),this.dilationRate=il(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Hr(l,"dilationRate"))}build(e){var t;e=Bt(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ue(`The channel dimension of the input should be defined. Found ${e[n]}`);let o=e[n],i=4,s=this.kernelSize.concat([o,this.filters*i]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){let u=this.biasInitializer,c=this.filters;l=new(t=class extends vo{apply(f,h){let g=u.apply([c]),m=kn([c]),b=u.apply([c*2]);return Up([g,m,b])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return pe(()=>{if(e.length!==3)throw new ue(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,o=e[0],i=e[1],s=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=r2({ones:()=>Qr(o),rate:this.dropout,training:n,count:a}));let l=this.dropoutMask,u=(te,ae,ge)=>!ae||!ae[ge]?te:re(ae[ge],te),c=u(o,l,0),x=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=r2({ones:()=>Qr(i),rate:this.recurrentDropout,training:n,count:a}));let g=this.recurrentDropoutMask,m=u(i,g,0),b=u(i,g,1),v=u(i,g,2),w=u(i,g,3),C=3,[N,_,E,T]=un(this.kernel.read(),a,C),[k,D,R,K]=this.useBias?un(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,N,k,this.padding),x=this.inputConv(x,_,D,this.padding),f=this.inputConv(f,E,R,this.padding),h=this.inputConv(h,T,K,this.padding);let[M,j,X,Z]=un(this.recurrentKernel.read(),a,C);m=this.recurrentConv(m,M),b=this.recurrentConv(b,j),v=this.recurrentConv(v,X),w=this.recurrentConv(w,Z);let Y=this.recurrentActivation.apply($e(c,m)),ce=this.recurrentActivation.apply($e(x,b)),Q=$e(re(ce,s),re(Y,this.activation.apply($e(f,v)))),J=re(this.recurrentActivation.apply($e(h,w)),this.activation.apply(Q));return[J,J,Q]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=bX(e,["units"]),o={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,o)}inputConv(e,t,n,o){let i=Kn(e,t,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?bo(i,n,this.dataFormat):i}recurrentConv(e,t){return Kn(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};sx.className="ConvLSTM2DCell";Re.registerClass(sx);var am=class extends m6{constructor(e){let t=new sx(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}};am.className="ConvLSTM2D";Re.registerClass(am);p();var ax=class extends yt{constructor(e){super(e);this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,n=[];for(let o=0;o<this.noiseShape.length;++o)n.push(this.noiseShape[o]==null?t[o]:this.noiseShape[o]);return n}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);if(0<this.rate&&this.rate<1){let o=t.training==null?!1:t.training,i=this.getNoiseShape(n);return J2(()=>w1(n,this.rate,i,this.seed),()=>n,o)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};ax.className="Dropout";Re.registerClass(ax);var lm=class extends ax{constructor(e){super(e);this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};lm.className="SpatialDropout1D";Re.registerClass(lm);var um=class extends yt{constructor(e){super(e);if(this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Hr(this.units,"units"),this.activation=rs(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Mr(e.kernelConstraint),this.biasConstraint=Mr(e.biasConstraint),this.kernelRegularizer=fr(e.kernelRegularizer),this.biasRegularizer=fr(e.biasRegularizer),this.activityRegularizer=fr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Bt(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=Bt(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e),o=h1(this.activation.getClassName()),i;return o!=null?i=ki(n,this.kernel.read(),o,this.bias?this.bias.read():null):(i=ki(n,this.kernel.read()),this.bias!=null&&(i=bo(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){let e={units:this.units,activation:ts(this.activation),useBias:this.useBias,kernelInitializer:br(this.kernelInitializer),biasInitializer:br(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),biasConstraint:Fr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};um.className="Dense";Re.registerClass(um);var cm=class extends yt{constructor(e){e=e||{};super(e);this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Bt(e);for(let t of e.slice(1))if(t==null)throw new ue(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ii(e,1)]}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let o=[0];for(let i=2;i<n.rank;++i)o.push(i);o.push(1),n=n.transpose(o)}return nI(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};cm.className="Flatten";Re.registerClass(cm);var pm=class extends yt{constructor(e){super(e);this.supportsMasking=!0,this.activation=rs(e.activation)}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);return this.activation.apply(n)})}getConfig(){let e={activation:ts(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};pm.className="Activation";Re.registerClass(pm);var xm=class extends yt{constructor(e){super(e);this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return pe(()=>(e=dt(e),tI(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};xm.className="RepeatVector";Re.registerClass(xm);var fm=class extends yt{constructor(e){super(e);this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",o=t.slice(),i=1,s=null;for(let l=0;l<o.length;++l){let u=o[l];if(this.isUnknown(u))if(s===null)s=l;else throw new ue("Can only specifiy one unknown dimension.");else i*=u}let a=Ii(e);if(s!==null){if(i===0||a%i!==0)throw new ue(n);o[s]=a/i}else if(a!==i)throw new ue(n);return o}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e),o=n.shape,i=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};fm.className="Reshape";Re.registerClass(fm);var mm=class extends yt{constructor(e){super(e);if(e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=Zn(1,e.dims.length+1);if(!I.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Sr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Bt(e);let t=e.slice();return this.dims.forEach((n,o)=>{t[o+1]=e[n]}),t}call(e,t){return Rt(dt(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};mm.className="Permute";Re.registerClass(mm);var hm=class extends yt{constructor(e){super(e??{});this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=dt(e),o=-1;return q0(Qo(n,this.maskValue),o)}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e),o=-1,i=!0,s=q0(Qo(n,this.maskValue),o,i);return n.mul(s.asType(n.dtype))})}};hm.className="Masking";Re.registerClass(hm);p();var dm=class extends yt{constructor(e){super(e);if(this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(xr(e.inputLength))}this.inputDim=e.inputDim,Hr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Hr(this.outputDim,"outputDim"),this.embeddingsInitializer=cr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fr(e.embeddingsRegularizer),this.activityRegularizer=fr(e.activityRegularizer),this.embeddingsConstraint=Mr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return pe(()=>this.maskZero?(e=dt(e),Qo(e,st(e))):null)}computeOutputShape(e){if(e=Bt(e),this.inputLength==null)return[...e,this.outputDim];let t=xr(this.inputLength);if(t.length!==e.length-1)throw new ue(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let o=0;o<t.length;++o){let i=t[o],s=e[o+1];if(i!=null&&s!=null&&i!==s)throw new ue(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);return n.dtype!=="int32"&&(n=e2(n,"int32")),v1(this.embeddings.read(),n.as1D()).reshape(Bt(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:br(this.embeddingsInitializer),embeddingsRegularizer:Qt(this.embeddingsRegularizer),activityRegularizer:Qt(this.activityRegularizer),embeddingsConstraint:Fr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};dm.className="Embedding";Re.registerClass(dm);p();var ul=class extends yt{constructor(e){super(e||{});this.supportsMasking=!0}mergeFunction(e){throw new lt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let n=e.slice(0,e.length-t.length);for(let o=0;o<t.length;++o){let i=e[e.length-t.length+o],s=t[o];if(i==null||s==null||i<0||s<0)n.push(null);else if(i===1)n.push(s);else if(s===1)n.push(i);else{if(i!==s)throw new ue("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Bt(e)]),e=e,e.length<2)throw new ue(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let i of e)i!=null&&i[0]!==null&&t.push(i[0]);if(t=Ti(t),t.length>1)throw new ue(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){let s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let o=e.map(i=>i.length);e.indexOf(null)===-1&&Ti(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return pe(()=>{if(e=e,this.reshapeRequired){let n=[],o=e.map(i=>i.rank);if(o.indexOf(null)===-1){let i=Qi(o);for(let s of e){let a=s.rank;for(let l=0;l<i-a;++l)s=t2(s,1);n.push(s)}return this.mergeFunction(n)}else{let i=!1;for(let l of e){let u=l.rank;if(u==null){let c=l.shape,x=c[0],f=c.slice(1).concat([x]),h=l.reshape([x].concat(Ii(c.slice(1))));h=Rt(h,[1,0]),h=h.reshape(f),n.push(h),i=!0}else if(u>1){let c=Zn(1,u).concat([0]);n.push(Rt(l,c)),i=!0}else n.push(l)}let s=this.mergeFunction(n),a=s.rank;if(i){if(a==null){let l=s.shape,u=l.length,c=l[u-1],x=[c].concat(l.slice(0,l.length-1));s=Rt(s.reshape([-1,c]),[1,0]).reshape(x)}else if(a>1){let l=[a-1].concat(Zn(0,a-1));s=Rt(s,l)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let o=1;o<e.length;++o){let i=e[o]==null?null:e[o].slice(1);t=this.computeElementwiseOpOutputShape(t,i)}let n=[];for(let o of e)o!=null&&o[0]!==null&&n.push(o[0]);return n=Ti(n),n.length===1?t=n.concat(t):t=[null].concat(t),t}computeMask(e,t){return pe(()=>{if(t==null)return null;if(!Array.isArray(t))throw new ue("`mask` should be an Array");if(!Array.isArray(e))throw new ue("`inputs` should be an Array");if(t.length!==e.length)throw new ue(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(o=>o==null))return null;t=t.map(o=>o==null?o:sn(o,0));let n=t[0];for(let o=1;o<t.length-1;++o)n=hn(n,t[o]);return n})}},ym=class extends ul{constructor(e){super(e)}mergeFunction(e){return pe(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=$e(t,e[n]);return t})}};ym.className="Add";Re.registerClass(ym);var bm=class extends ul{constructor(e){super(e)}mergeFunction(e){return pe(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=re(t,e[n]);return t})}};bm.className="Multiply";Re.registerClass(bm);var vm=class extends ul{constructor(e){super(e)}mergeFunction(e){return pe(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=$e(t,e[n]);return re(1/e.length,t)})}};vm.className="Average";Re.registerClass(vm);var wm=class extends ul{constructor(e){super(e)}mergeFunction(e){return pe(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Xn(t,e[n]);return t})}};wm.className="Maximum";Re.registerClass(wm);var Cm=class extends ul{constructor(e){super(e)}mergeFunction(e){return pe(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=bi(t,e[n]);return t})}};Cm.className="Minimum";Re.registerClass(Cm);var Nm=class extends ul{constructor(e){super(e);this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ue("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let o of e)if(o!=null){t=!1;break}if(t)return;let n=[];for(let o=0;o<e.length;++o){let i=e[o].slice();i.splice(this.axis,1);let s=!1;for(let a of n)if(I.arraysEqual(a,i)){s=!0;break}s||n.push(i)}if(n.length>1)throw new ue("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return pe(()=>Up(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ue("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),o=this.axis<0?n.length+this.axis:this.axis;for(let i of t.slice(1)){if(n[o]==null||i[o]==null){n[o]=null;break}n[o]+=i[o]}return n}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new ue("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ue("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ue(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return pe(()=>{let n=!0;if(t.forEach(s=>{if(s!=null){n=!1;return}}),n)return null;let o=[];for(let s=0;s<e.length;++s)t[s]==null?o.push(Qr(e[s]).asType("bool")):t[s].rank<e[s].rank?o.push(sn(t[s],-1)):o.push(t[s]);let i=Mt(o,this.axis);return D2(i,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};Nm.className="Concatenate";Re.registerClass(Nm);function gm(r,e){for(;r<0;)r+=e;return r}function vX(r,e,t){if(r.shape.length>3||e.shape.length>3)throw new lt("batchDot is not implemented for tensors of 4D or higher rank yet");if(I.assert(r.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${r.shape.length}`),I.assert(r.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),r.dtype==="complex64"||e.dtype==="complex64")throw new lt("batchDot is not implemented for complex64-type Tensors yet.");let n=r.shape.length,o=e.shape.length;t==null&&(t=[n-1,o-2]);let i=t;return pe(()=>{let s;if(n>o){s=n-o;let l=[];for(let u=0;u<s;++u)l.push(1);e=e.reshape(e.shape.concat(l))}else if(o>n){s=o-n;let l=[];for(let u=0;u<s;++u)l.push(1);r=r.reshape(r.shape.concat(l))}else s=0;let a;if(r.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=r.mul(e).sum(i[0]):a=r.transpose([1,0]).mul(e).sum(i[1]);else{let l=i[0]!==r.shape.length-1,u=i[1]===e.shape.length-1;a=r.matMul(e,l,u)}if(s>0){let l;n>o?l=n+o-3:l=n-1;let u=[];for(let c=l;c<l+s;++c)u.push(c);a=a.squeeze(u)}return a.shape.length===1&&(a=a.expandDims(1)),a})}var _m=class extends ul{constructor(e){super(e);this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){I.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new lt("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(t,n);if(t[o[0]]!==n[o[1]])throw new ue(`Dimension incompatibility: ${t[o[0]]} !== ${n[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ue(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],n=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((i,s)=>gm(i,e[s].shape.length)):o=[gm(this.axes,t.shape.length),gm(this.axes,n.shape.length)],this.normalize&&(t=zf(t,o[0]),n=zf(n,o[1])),vX(t,n,o)}interpretAxes(e,t){let n;return Array.isArray(this.axes)?n=this.axes:n=[gm(this.axes,e.length),gm(this.axes,t.length)],n}computeOutputShape(e){I.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new lt("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(t,n);t.splice(o[0],1),n.splice(o[1],1),n.splice(0,1);let i=t.concat(n);return i.length===1&&i.push(1),i}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};_m.className="Dot";Re.registerClass(_m);p();var Sm=class extends yt{constructor(e){super(e);this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);return J2(()=>Vp(n.shape,0,this.stddev).add(n),()=>n,t.training||!1)})}};Sm.className="GaussianNoise";Re.registerClass(Sm);var Tm=class extends yt{constructor(e){super(e);this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return pe(()=>{this.invokeCallHook(e,t);let n=dt(e);return this.rate>0&&this.rate<1?J2(()=>{let i=Math.sqrt(this.rate/(1-this.rate));return n.mul(Vp(n.shape,1,i))},()=>n,t.training||!1):n})}};Tm.className="GaussianDropout";Re.registerClass(Tm);var Im=class extends yt{constructor(e){super(e);this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||dt(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return pe(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return J2(()=>{let i=dt(e),s=1.6732632423543772,a=1.0507009873554805,l=-s*a,u=oo(vi(n),this.rate);u=e2(u,"float32");let c=((1-this.rate)*(1+this.rate*l**2))**-.5,x=-c*l*this.rate;return i.mul(u).add(u.add(-1).mul(l)).mul(c).add(x)},()=>dt(e),t.training||!1)}return e})}};Im.className="AlphaDropout";Re.registerClass(Im);p();function km(r,e,t,n,o,i=.001){let s;if(r.rank===2)s=Ad(r,e,t,n,o,i);else if(r.rank===3)s=Dd(r,e,t,n,o,i);else if(r.rank===4)s=Rd(r,e,t,n,o,i);else throw new lt(`batchNormalization is not implemented for array of rank ${r.rank} yet`);return s}function wX(r,e,t,n,o=.001){return pe(()=>{let i=Su(r,n),s=i.mean,a=i.variance;return[km(r,s,a,t,e,o),s,a]})}function CX(r,e,t,n,o=.001){return pe(()=>{let i=Su(r,n),s=i.mean,a=i.variance,l=[];for(let g of Zn(0,r.rank))n.indexOf(g)!==-1?l.push(1):l.push(r.shape[g]);let u=s.reshape(l),c=a.reshape(l),x=e==null?null:e.reshape(l),f=t==null?null:t.reshape(l);return[km(r,u,c,f,x,o),s,a]})}function NX(r,e,t,n,o=.001){return I.arraysEqual(n.slice().sort(),Zn(0,r.rank-1))?wX(r,e,t,n,o):CX(r,e,t,n,o)}var Em=class extends yt{constructor(e){e==null&&(e={});super(e);this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.movingMeanInitializer=cr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=cr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Mr(e.betaConstraint),this.gammaConstraint=Mr(e.gammaConstraint),this.betaRegularizer=fr(e.betaRegularizer),this.gammaRegularizer=fr(e.gammaRegularizer)}build(e){e=Bt(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(n==null)throw new ue(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Sr({ndim:e.length,axes:{[t]:n}})];let o=[n];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return pe(()=>{let n=t.training==null?!1:t.training,o=dt(e),i=o.shape,s=i.length,a=Zn(0,s),l=this.axis>=0?this.axis:this.axis+s;a.splice(l,1);let u=_i(1,s);u[l]=i[l];let c=a.slice();c.sort();let x=!I.arraysEqual(c,Zn(0,s).slice(0,s-1)),f=()=>{if(x){let w=this.movingMean.read().reshape(u),C=this.movingVariance.read().reshape(u),N=this.center?this.beta.read().reshape(u):null,_=this.scale?this.gamma.read().reshape(u):null;return km(o,w,C,N,_,this.epsilon)}else return km(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return f();let[h,g,m]=NX(o,this.gamma.read(),this.beta.read(),a,this.epsilon),b=(w,C,N)=>{pe(()=>{let _=1-N,E=w.read(),T=E.sub(C).mul(_);w.write(E.sub(T))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,m,this.momentum)})(),h})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:br(this.betaInitializer),gammaInitializer:br(this.gammaInitializer),movingMeanInitializer:br(this.movingMeanInitializer),movingVarianceInitializer:br(this.movingVarianceInitializer),betaRegularizer:Qt(this.betaRegularizer),gammaRegularizer:Qt(this.gammaRegularizer),betaConstraint:Fr(this.betaConstraint),gammaConstraint:Fr(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};Em.className="BatchNormalization";Re.registerClass(Em);var Am=class extends yt{constructor(e){e==null&&(e={});super(e);if(this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.betaRegularizer=fr(e.betaRegularizer),this.gammaRegularizer=fr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Bt(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(let i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Ti(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(i=>e[i]),o=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,t){let n=dt(e),o=n.shape,i=o.length;return pe(()=>{let{mean:a,variance:l}=Su(n,this.axis,!0),u=_i(1,i);for(let m of this.axis)u[m]=o[m];let c=m=>m!=null&&m.shape.length!==i&&this.axis!==[i-1]?m.reshape(u):m,x=c(this.gamma.read()),f=c(this.beta.read()),h=[],g=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),g.push(1)):(h.push(1),g.push(o[m]));return a=a.tile(h),l=l.tile(h),x=x.tile(g),f=f.tile(g),km(n,a,l,f,x,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:br(this.betaInitializer),gammaInitializer:br(this.gammaInitializer),betaRegularizer:Qt(this.betaRegularizer),gammaRegularizer:Qt(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};Am.className="LayerNormalization";Re.registerClass(Am);p();function _X(r,e,t){return pe(()=>{if(r.rank!==4)throw new ue(`temporalPadding expects input tensor to be 4-D, but received a ${r.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ue("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=io()),t!=="channelsLast"&&t!=="channelsFirst")throw new ue(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let n;return t==="channelsFirst"?n=[[0,0],[0,0],e[0],e[1]]:n=[[0,0],e[0],e[1],[0,0]],Mn(r,n)})}var Dm=class extends yt{constructor(e){e==null&&(e={});super(e);if(this.dataFormat=e.dataFormat==null?io():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ue(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ue(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new ue(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new Sr({ndim:4})]}computeOutputShape(e){e=Bt(e);let t,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],t,n]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],t,n,e[3]])}call(e,t){return pe(()=>_X(dt(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};Dm.className="ZeroPadding2D";Re.registerClass(Dm);p();function q1(r,e,t,n,o,i){return pe(()=>{Or(o),Fg(i),so(n),t==null&&(t=[1,1]),n==null&&(n="valid"),o==null&&(o=io()),i==null&&(i="max"),r=Jf(r,o);let s,a=n==="same"?"same":"valid";return i==="max"?s=ga(r,e,t,a):s=pa(r,e,t,a),o==="channelsFirst"&&(s=Rt(s,[0,3,1,2])),s})}function qI(r,e,t,n,o,i){return pe(()=>{Or(o),Fg(i),so(n),t==null&&(t=[1,1,1]),n==null&&(n="valid"),o==null&&(o=io()),i==null&&(i="max"),r=c6(r,o);let s,a=n==="same"?"same":"valid";return i==="max"?s=wp(r,e,t,a):s=cp(r,e,t,a),o==="channelsFirst"&&(s=Rt(s,[0,4,1,2,3])),s})}var h6=class extends yt{constructor(e){e.poolSize==null&&(e.poolSize=2);super(e);if(typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ue(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Hr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ue(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,so(this.padding),this.inputSpec=[new Sr({ndim:3})]}computeOutputShape(e){e=Bt(e);let t=No(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return pe(()=>{this.invokeCallHook(e,t),e=t2(dt(e),2);let n=this.poolingFunction(dt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return yo(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},Rm=class extends h6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),q1(e,t,n,o,i,"max")}};Rm.className="MaxPooling1D";Re.registerClass(Rm);var $m=class extends h6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),q1(e,t,n,o,i,"avg")}};$m.className="AveragePooling1D";Re.registerClass($m);var d6=class extends yt{constructor(e){e.poolSize==null&&(e.poolSize=[2,2]);super(e);if(this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ue(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Hr(this.poolSize,"poolSize"),Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),so(this.padding),this.inputSpec=[new Sr({ndim:4})]}computeOutputShape(e){e=Bt(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=No(t,this.poolSize[0],this.padding,this.strides[0]),n=No(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return pe(()=>(this.invokeCallHook(e,t),this.poolingFunction(dt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},Om=class extends d6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),q1(e,t,n,o,i,"max")}};Om.className="MaxPooling2D";Re.registerClass(Om);var Fm=class extends d6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),q1(e,t,n,o,i,"avg")}};Fm.className="AveragePooling2D";Re.registerClass(Fm);var g6=class extends yt{constructor(e){e.poolSize==null&&(e.poolSize=[2,2,2]);super(e);if(this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ue(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Hr(this.poolSize,"poolSize"),Hr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),so(this.padding),this.inputSpec=[new Sr({ndim:5})]}computeOutputShape(e){e=Bt(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=No(t,this.poolSize[0],this.padding,this.strides[0]),n=No(n,this.poolSize[1],this.padding,this.strides[1]),o=No(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n,o]:[e[0],t,n,o,e[4]]}call(e,t){return pe(()=>(this.invokeCallHook(e,t),this.poolingFunction(dt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},Mm=class extends g6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),qI(e,t,n,o,i,"max")}};Mm.className="MaxPooling3D";Re.registerClass(Mm);var zm=class extends g6{constructor(e){super(e)}poolingFunction(e,t,n,o,i){return Or(i),so(o),qI(e,t,n,o,i,"avg")}};zm.className="AveragePooling3D";Re.registerClass(zm);var y6=class extends yt{constructor(e){super(e);this.inputSpec=[new Sr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new lt}},Lm=class extends y6{constructor(e){super(e||{})}call(e,t){return pe(()=>{let n=dt(e);return ar(n,1)})}};Lm.className="GlobalAveragePooling1D";Re.registerClass(Lm);var Pm=class extends y6{constructor(e){super(e||{})}call(e,t){return pe(()=>{let n=dt(e);return ln(n,1)})}};Pm.className="GlobalMaxPooling1D";Re.registerClass(Pm);var b6=class extends yt{constructor(e){super(e);this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.inputSpec=[new Sr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new lt}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},Bm=class extends b6{call(e,t){return pe(()=>{let n=dt(e);return this.dataFormat==="channelsLast"?ar(n,[1,2]):ar(n,[2,3])})}};Bm.className="GlobalAveragePooling2D";Re.registerClass(Bm);var Um=class extends b6{call(e,t){return pe(()=>{let n=dt(e);return this.dataFormat==="channelsLast"?ln(n,[1,2]):ln(n,[2,3])})}};Um.className="GlobalMaxPooling2D";Re.registerClass(Um);p();var v6=class extends yt{constructor(e){super(e);this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let o=t.layer,i=lo(o,n);delete t.layer;let s={layer:i};return Object.assign(s,t),new e(s)}},Vm=class extends v6{constructor(e){super(e);this.supportsMasking=!0}build(e){if(e=Bt(e),e.length<3)throw new ue(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Bt(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),o=e[1];return[n[0],o].concat(n.slice(1))}call(e,t){return pe(()=>(e=dt(e),f6((s,a)=>[dt(this.layer.call(s,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};Vm.className="TimeDistributed";Re.registerClass(Vm);function SX(r){_a(XT,"BidirectionalMergeMode",r)}var TX="concat",Gm=class extends v6{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=lo(n),t.goBackwards=t.goBackwards!==!0;let o={};if(o.className=e.layer.getClassName(),o.config=t,this.backwardLayer=lo(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?TX:e.mergeMode,SX(this.mergeMode),e.weights)throw new lt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let n,o,i;return this.returnState&&(i=t.slice(1)),n=t[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,o=[n]):this.mergeMode==null?o=[n,n.slice()]:o=[n],this.returnState?this.mergeMode==null?o.concat(i).concat(i.slice()):[n].concat(i).concat(i.slice()):bn(o)}apply(e,t){let n=t==null?null:t.initialState,o=t==null?null:t.constants;t==null&&(t={});let i=x6(e,n,o,this.numConstants);if(e=i.inputs,n=i.initialState,o=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&o==null)return super.apply(e,t);let s=[],a=[];if(n!=null){let u=n.length;if(u%2>0)throw new ue("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);let c=n.map(x=>new Sr({shape:x.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new lt("Support for constants in Bidirectional layers is not implemented yet.");let l=s[0]instanceof Qn;for(let u of s)if(u instanceof Qn!==l)throw new ue("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){let u=[e].concat(s),c=this.inputSpec.concat(a),x=this.inputSpec;this.inputSpec=c;let f=super.apply(u,t);return this.inputSpec=x,f}else return super.apply(e,t)}call(e,t){return pe(()=>{let n=t.initialState,o,i;if(n==null)o=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{let l=n.slice(0,n.length/2),u=n.slice(n.length/2);o=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:u}))}let s;this.returnState&&(Array.isArray(o)&&(s=o.slice(1).concat(i.slice(1))),o=o[0],i=i[0]),this.returnSequences&&(i=qr(i,1));let a;return this.mergeMode==="concat"?a=Up([o,i]):this.mergeMode==="sum"?a=$e(o,i):this.mergeMode==="ave"?a=re(.5,$e(o,i)):this.mergeMode==="mul"?a=re(o,i):this.mergeMode==null&&(a=[o,i]),this.returnState?this.mergeMode==null?a.concat(s):[a].concat(s):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ji(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ji(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[t,t]:n=t:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let i=this.forwardLayer.states.map(s=>null);return Array.isArray(n)?n.concat(i).concat(i):[n].concat(i).concat(i)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=lo(t.layer);if(delete t.layer,t.numConstants!=null)throw new lt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let o=t;return o.layer=n,new e(o)}};Gm.className="Bidirectional";Re.registerClass(Gm);function IX(r){return new Sa(r)}function kX(r){return new jf(r)}function EX(r){return new qf(r)}function AX(r){return new Hf(r)}function DX(r){return new Kf(r)}function RX(r){return new Yf(r)}function $X(r){return new Xf(r)}function OX(r){return new Yu(r)}function FX(r){return new sl(r)}function MX(r){return new Qf(r)}function zX(r){return new Xu(r)}function LX(r){return new em(r)}function PX(r){return new tm(r)}function BX(r){return new rm(r)}function UX(r){return new nm(r)}function VX(r){return new pm(r)}function GX(r){return new um(r)}function WX(r){return new ax(r)}function qX(r){return new lm(r)}function HX(r){return new cm(r)}function KX(r){return new xm(r)}function jX(r){return new fm(r)}function XX(r){return new mm(r)}function YX(r){return new dm(r)}function ZX(r){return new ym(r)}function JX(r){return new vm(r)}function QX(r){return new Nm(r)}function eY(r){return new wm(r)}function tY(r){return new Cm(r)}function rY(r){return new bm(r)}function nY(r){return new _m(r)}function oY(r){return new Em(r)}function iY(r){return new Am(r)}function sY(r){return new Dm(r)}function w6(r){return new $m(r)}function aY(r){return w6(r)}function lY(r){return w6(r)}function C6(r){return new Fm(r)}function uY(r){return C6(r)}function cY(r){return C6(r)}function N6(r){return new zm(r)}function pY(r){return N6(r)}function xY(r){return N6(r)}function fY(r){return new Lm(r)}function mY(r){return new Bm(r)}function HI(r){return new Pm(r)}function KI(r){return new Um(r)}function jI(r){return new Rm(r)}function XI(r){return new Om(r)}function hY(r){return new Mm(r)}function dY(r){return new im(r)}function gY(r){return new ox(r)}function yY(r){return new sm(r)}function bY(r){return new ll(r)}function vY(r){return new om(r)}function wY(r){return new nx(r)}function CY(r){return new am(r)}function NY(r){return new sx(r)}function _Y(r){return new _o(r)}function SY(r){return new ix(r)}function TY(r){return new Gm(r)}function IY(r){return new Vm(r)}var kY=HI,EY=KI,AY=jI,DY=XI;function RY(r){return new Sm(r)}function $Y(r){return new Tm(r)}function OY(r){return new Im(r)}function FY(r){return new hm(r)}var S6={};Pt(S6,{MAPE:()=>HY,MSE:()=>XY,binaryAccuracy:()=>MY,binaryCrossentropy:()=>zY,categoricalAccuracy:()=>PY,categoricalCrossentropy:()=>BY,cosineProximity:()=>GY,mape:()=>KY,meanAbsoluteError:()=>WY,meanAbsolutePercentageError:()=>qY,meanSquaredError:()=>jY,mse:()=>YY,precision:()=>UY,recall:()=>VY,sparseCategoricalAccuracy:()=>LY});p();function MY(r,e){return Bf(r,e)}function zY(r,e){return O1(r,e)}function LY(r,e){return F1(r,e)}function PY(r,e){return Uf(r,e)}function BY(r,e){return Vf(r,e)}function UY(r,e){return Ug(r,e)}function VY(r,e){return gI(r,e)}function GY(r,e){return Pf(r,e)}function WY(r,e){return Jp(r,e)}function qY(r,e){return rl(r,e)}function HY(r,e){return rl(r,e)}function KY(r,e){return rl(r,e)}function jY(r,e){return Ia(r,e)}function XY(r,e){return Ia(r,e)}function YY(r,e){return Ia(r,e)}var T6={};Pt(T6,{modelFromJSON:()=>FI});p();var I6={};Pt(I6,{l1:()=>JY,l1l2:()=>ZY,l2:()=>QY});p();function ZY(r){return new Ku(r)}function JY(r){return VI(r)}function QY(r){return GI(r)}p();var K1=class extends tl{constructor(){super(...arguments);this.model=null}setModel(e){if(!(e instanceof Lo))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function H1(r,e){return r<e}function YI(r,e){return r>e}var j1=class extends K1{constructor(e){super();if(e==null&&(e={}),e.restoreBestWeights)throw new lt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=H1:this.mode==="max"?this.monitorFunc=YI:this.monitor.indexOf("acc")!==-1?this.monitorFunc=YI:this.monitorFunc=H1,this.monitorFunc===H1&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===H1?1/0:-1/0}async onEpochEnd(e,t){await Ta(t);let n=this.getMonitorValue(t);n!=null&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){e==null&&(e={});let t=e[this.monitor];return t==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}};function eZ(r){return new j1(r)}var ZI={earlyStopping:eZ};p();p();p();p();var Ei;(function(r){r[r.DT_INVALID=0]="DT_INVALID",r[r.DT_FLOAT=1]="DT_FLOAT",r[r.DT_DOUBLE=2]="DT_DOUBLE",r[r.DT_INT32=3]="DT_INT32",r[r.DT_UINT8=4]="DT_UINT8",r[r.DT_INT16=5]="DT_INT16",r[r.DT_INT8=6]="DT_INT8",r[r.DT_STRING=7]="DT_STRING",r[r.DT_COMPLEX64=8]="DT_COMPLEX64",r[r.DT_INT64=9]="DT_INT64",r[r.DT_BOOL=10]="DT_BOOL",r[r.DT_QINT8=11]="DT_QINT8",r[r.DT_QUINT8=12]="DT_QUINT8",r[r.DT_QINT32=13]="DT_QINT32",r[r.DT_BFLOAT16=14]="DT_BFLOAT16",r[r.DT_FLOAT_REF=101]="DT_FLOAT_REF",r[r.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",r[r.DT_INT32_REF=103]="DT_INT32_REF",r[r.DT_UINT8_REF=104]="DT_UINT8_REF",r[r.DT_INT16_REF=105]="DT_INT16_REF",r[r.DT_INT8_REF=106]="DT_INT8_REF",r[r.DT_STRING_REF=107]="DT_STRING_REF",r[r.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",r[r.DT_INT64_REF=109]="DT_INT64_REF",r[r.DT_BOOL_REF=110]="DT_BOOL_REF",r[r.DT_QINT8_REF=111]="DT_QINT8_REF",r[r.DT_QUINT8_REF=112]="DT_QUINT8_REF",r[r.DT_QINT32_REF=113]="DT_QINT32_REF",r[r.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(Ei||(Ei={}));var JI;(function(r){let e;(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e=r.CheckpointFormatVersion||(r.CheckpointFormatVersion={}))})(JI||(JI={}));p();var k6={};function QI(r,e){let t={tfOpName:r,category:"custom",inputs:[],attrs:[],customExecutor:e};k6[r]=t}function X1(r){return k6[r]}function ek(r){delete k6[r]}p();function z(r,e,t,n,o){let i=e.inputParams[r];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd;if(i.type==="tensor")return vn(e.inputNames[i.inputIndexStart],t,n,o);if(i.type==="tensors")return e.inputNames.slice(a,l).map(f=>vn(f,t,n,o));let u=vn(e.inputNames.slice(a)[0],t,n,o),c=u.dataSync();return i.type==="number"?c[0]:I.toNestedArray(u.shape,c)}let s=e.attrParams[r];return s&&s.value}function vn(r,e,t,n){let[o,i]=uo(r);if(n!=null){let a=n.getHashTableHandleByName(o);if(a!=null)return a}let s=t.currentContextIds.find(a=>!!e[Y1(o,a)]);return s!==void 0?e[Y1(o,s)][i]:void 0}function tk(r,e,t){return e[Y1(r,t.currentContextId)]}function ns(r,e){let[t,n]=uo(r);return[Y1(t,e&&e.currentContextId),n]}function Y1(r,e){return e?`${r}-${e}`:r}function uo(r){let e=r.split(":");return e.length===1?[r,0]:[e[0],Number(e[e.length-1])]}function Wm(r,e,t){let n=z("pad",r,e,t);if(n==="explicit"){n=z("explicitPaddings",r,e,t);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=n[i*2],o[i][1]=n[i*2+1];return o}return n}function os(r){return r.kept?r:$o(r)}var E6={};Pt(E6,{json:()=>rZ});p();var rZ=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var A6={};Pt(A6,{json:()=>nZ});p();var nZ=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var D6={};Pt(D6,{json:()=>oZ});p();var oZ=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}];var R6={};Pt(R6,{json:()=>iZ});p();var iZ=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var $6={};Pt($6,{json:()=>sZ});p();var sZ=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var O6={};Pt(O6,{json:()=>aZ});p();var aZ=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var F6={};Pt(F6,{json:()=>lZ});p();var lZ=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var M6={};Pt(M6,{json:()=>uZ});p();var uZ=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var z6={};Pt(z6,{json:()=>cZ});p();var cZ=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}];var L6={};Pt(L6,{json:()=>pZ});p();var pZ=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}];var P6={};Pt(P6,{json:()=>xZ});p();var xZ=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var B6={};Pt(B6,{json:()=>fZ});p();var fZ=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var U6={};Pt(U6,{json:()=>mZ});p();var mZ=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}];var V6={};Pt(V6,{json:()=>hZ});p();var hZ=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var G6={};Pt(G6,{json:()=>dZ});p();var dZ=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}];var W6={};Pt(W6,{json:()=>gZ});p();var gZ=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var q6={};Pt(q6,{json:()=>yZ});p();var yZ=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];var a3=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[E6,A6,D6,R6,$6,O6,F6,P6,L6,M6,B6,U6,V6,G6,W6,q6,z6],t=[].concat(...e.map(n=>n.json));this.opMappers=t.reduce((n,o)=>(n[o.tfOpName]=o,n),{})}transformGraph(e,t={}){let n=e.node,o=[],i=[],s=[],a=n.reduce((m,b)=>(m[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?o.push(m[b.name]):b.op==="Const"?i.push(m[b.name]):(b.input==null||b.input.length===0)&&s.push(m[b.name]),m),{}),l=[],u=[],c={},x={};t!=null&&(c=this.mapSignatureEntries(t.inputs),x=this.mapSignatureEntries(t.outputs));let f=Object.keys(a);f.forEach(m=>{let b=a[m];b.inputNames.forEach(v=>{let[w]=ns(v);b.inputs.push(a[w]),a[w].children.push(b)})}),Object.keys(x).length===0?f.forEach(m=>{let b=a[m];b.children.length===0&&u.push(b)}):Object.keys(x).forEach(m=>{let[b]=ns(m),v=a[b];v!=null&&(v.signatureKey=x[m],u.push(v))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{let[b]=ns(m),v=a[b];v&&(v.signatureKey=c[m],l.push(v))}):l=o;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((m,b)=>(m[b.signature.name]=this.mapFunction(b),m),{}));let g={nodes:a,inputs:l,outputs:u,weights:i,placeholders:o,signature:t,functions:h};return s.length>0&&(g.initNodes=s),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=X1(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.substr(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return t.inputs!=null&&(n.inputParams=t.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),t.attrs!=null&&(n.attrParams=t.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=Z1(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=Z1(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=o3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=o3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Q1(e.attr,i.tfName,i.defaultValue||0),a===void 0&&!!i.tfDeprecatedName&&(a=Q1(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=n3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=n3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=J1(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=J1(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=s3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=s3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=r3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=r3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=i3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=i3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=e3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=e3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=t3(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=t3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=rk(e.attr,i.tfName,i.defaultValue),a===void 0&&!!i.tfDeprecatedName&&(a=rk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return o[i.name]={value:a,type:s},o},{})),n}mapFunction(e){let t=e.nodeDef,n=[],o=[],i={};t!=null&&(i=t.reduce((x,f)=>(x[f.name]=this.mapNode(f),f.op==="Const"&&o.push(x[f.name]),x),{}));let s=[],a=[];e.signature.inputArg.forEach(x=>{let[f]=ns(x.name),h={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:H6(x.type),type:"dtype"}},children:[]};h.signatureKey=x.name,s.push(h),i[f]=h}),Object.keys(i).forEach(x=>{let f=i[x];f.inputNames.forEach(h=>{let[g]=ns(h);f.inputs.push(i[g]),i[g].children.push(f)})});let u=e.ret;e.signature.outputArg.forEach(x=>{let[f,h]=ns(u[x.name]),g=i[f];g!=null&&(g.defaultOutput=h,a.push(g))});let c=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:n,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n),t),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return t!=null&&(n=t[n]),{name:n,dtype:e.type}}};function bZ(r){let e=we().global;if(typeof e.atob<"u")return e.atob(r);if(typeof Buffer<"u")return new Buffer(r,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function nk(r,e){let t=Array.isArray(r)?String.fromCharCode.apply(null,r):bZ(r);return e?t:t.toLowerCase()}function Z1(r,e,t,n=!1){let o=r[e];return o!=null?nk(o.s,n):t}function J1(r,e,t){let n=r[e];return n?n.b:t}function Q1(r,e,t){let n=r[e]||{},o=n.i!=null?n.i:n.f!=null?n.f:t;return typeof o=="number"?o:parseInt(o,10)}function H6(r){switch(typeof r=="string"&&(r=Ei[r]),r){case Ei.DT_FLOAT:return"float32";case Ei.DT_INT32:case Ei.DT_INT64:case Ei.DT_INT8:case Ei.DT_UINT8:return"int32";case Ei.DT_BOOL:return"bool";case Ei.DT_DOUBLE:return"float32";case Ei.DT_STRING:return"string";default:return null}}function rk(r,e,t){let n=r[e];return n&&n.func?n.func.name:t}function e3(r,e,t){let n=r[e];return n&&n.type?H6(n.type):t}function t3(r,e,t){let n=r[e];return n&&n.list&&n.list.type?n.list.type.map(o=>H6(o)):t}function ok(r){if(!r.unknownRank)return r.dim!=null?r.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function r3(r,e,t){let n=r[e];return n&&n.shape?ok(n.shape):t}function n3(r,e,t){let n=r[e];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):t}function o3(r,e,t,n=!1){let o=r[e];return o&&o.list&&o.list.s?o.list.s.map(i=>nk(i,n)):t}function i3(r,e,t){let n=r[e];return n&&n.list&&n.list.shape?n.list.shape.map(o=>ok(o)):t}function s3(r,e,t){let n=r[e];return n&&n.list&&n.list.b?n.list.b:t}p();p();p();var K6=class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(e){return vn(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(n.tensor!=null)return vn(e,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return Q1(this.node.rawAttrs,e,t);if(n.s!=null)return Z1(this.node.rawAttrs,e,t);if(n.b!=null)return J1(this.node.rawAttrs,e,t);if(n.shape!=null)return r3(this.node.rawAttrs,e,t);if(n.type!=null)return e3(this.node.rawAttrs,e,t);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return n3(this.node.rawAttrs,e,t);if(n.list.s!=null)return o3(this.node.rawAttrs,e,t);if(n.list.shape!=null)return i3(this.node.rawAttrs,e,t);if(n.list.b!=null)return s3(this.node.rawAttrs,e,t);if(n.list.type!=null)return t3(this.node.rawAttrs,e,t)}return t}};p();var ik=(r,e,t)=>{switch(r.op){case"BiasAdd":case"AddV2":case"Add":return[$e(z("a",r,e,t),z("b",r,e,t))];case"AddN":return[kd(z("tensors",r,e,t))];case"FloorMod":case"Mod":return[Np(z("a",r,e,t),z("b",r,e,t))];case"Mul":return[re(z("a",r,e,t),z("b",r,e,t))];case"RealDiv":case"Div":return[He(z("a",r,e,t),z("b",r,e,t))];case"DivNoNan":return[dp(z("a",r,e,t),z("b",r,e,t))];case"FloorDiv":return[A2(z("a",r,e,t),z("b",r,e,t))];case"Sub":return[Ge(z("a",r,e,t),z("b",r,e,t))];case"Minimum":return[bi(z("a",r,e,t),z("b",r,e,t))];case"Maximum":return[Xn(z("a",r,e,t),z("b",r,e,t))];case"Pow":return[zn(z("a",r,e,t),z("b",r,e,t))];case"SquaredDifference":return[X2(z("a",r,e,t),z("b",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var sk=(r,e,t)=>{switch(r.op){case"Abs":case"ComplexAbs":return[gr(z("x",r,e,t))];case"Acos":return[tp(z("x",r,e,t))];case"Acosh":return[rp(z("x",r,e,t))];case"Asin":return[op(z("x",r,e,t))];case"Asinh":return[ip(z("x",r,e,t))];case"Atan":return[sp(z("x",r,e,t))];case"Atan2":return[ap(z("x",r,e,t),z("y",r,e,t))];case"Atanh":return[lp(z("x",r,e,t))];case"Ceil":return[pp(z("x",r,e,t))];case"Complex":return[mo(z("real",r,e,t),z("imag",r,e,t))];case"Cos":return[fa(z("x",r,e,t))];case"Cosh":return[O2(z("x",r,e,t))];case"Elu":return[hi(z("x",r,e,t))];case"Erf":return[gp(z("x",r,e,t))];case"Exp":return[Yr(z("x",r,e,t))];case"Expm1":return[yp(z("x",r,e,t))];case"Floor":return[di(z("x",r,e,t))];case"Log":return[an(z("x",r,e,t))];case"Log1p":return[P2(z("x",r,e,t))];case"Imag":return[z2(z("x",r,e,t))];case"Neg":return[Dt(z("x",r,e,t))];case"Reciprocal":return[Sp(z("x",r,e,t))];case"Real":return[X0(z("x",r,e,t))];case"Relu":return[En(z("x",r,e,t))];case"Round":return[Tp(z("x",r,e,t))];case"Selu":return[q2(z("x",r,e,t))];case"Sigmoid":return[Hn(z("x",r,e,t))];case"Sin":return[H2(z("x",r,e,t))];case"Sign":return[kp(z("x",r,e,t))];case"Sinh":return[K2(z("x",r,e,t))];case"Softplus":return[gi(z("x",r,e,t))];case"Sqrt":return[ur(z("x",r,e,t))];case"Square":return[gt(z("x",r,e,t))];case"Tanh":return[Hi(z("x",r,e,t))];case"Tan":return[Rp(z("x",r,e,t))];case"ClipByValue":return[on(z("x",r,e,t),z("clipValueMin",r,e,t),z("clipValueMax",r,e,t))];case"Relu6":return[G2(z("x",r,e,t))];case"Rsqrt":return[W2(vn(r.inputNames[0],e,t))];case"Prod":return[V2(z("x",r,e,t),z("axes",r,e,t))];case"LeakyRelu":return[ha(z("x",r,e,t),z("alpha",r,e,t))];case"Prelu":return[ba(z("x",r,e,t),z("alpha",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();p();p();function Bo(r,e,t=""){if(!(typeof r=="number"||typeof e=="number")){I.assert(r.length===e.length,()=>t+` Shapes ${r} and ${e} must match`);for(let n=0;n<r.length;n++){let o=r[n],i=e[n];I.assert(o<0||i<0||o===i,()=>t+` Shapes ${r} and ${e} must match`)}}}function ak(r){return!(typeof r=="number"||r.some(e=>e<0))}function lx(r,e,t){let n=l3(r,t),o=!ak(n);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${n}`);if(o&&e.forEach(i=>{n=l3(i.shape,n)}),!ak(n))throw new Error(`Non-fully-defined elementShape: ${n}`);return n}function l3(r,e){if(typeof r=="number")return e;if(typeof e=="number")return r;if(r.length!==e.length)throw new Error(`Incompatible ranks during merge: ${r} vs. ${e}`);let t=[];for(let n=0;n<r.length;++n){let o=r[n],i=e[n];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${r} vs. ${e}`);t[n]=o>=0?o:i}return t}var j6=class{constructor(e,t,n,o,i,s,a){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ve(0),Er(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Bo(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Er(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((n,o)=>this.write(n,t[o]))}gather(e,t){if(!!t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return yn([],[0].concat(this.elementShape));let n=this.readMany(e);return Bo(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Pr(n,0)}concat(e){if(!!e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return yn([],[0].concat(this.elementShape));let t=[];for(let o=0;o<this.size();o++)t.push(o);let n=this.readMany(t);return Bo(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Mt(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,cn(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,o=e.map(l=>(n+=l,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=n===0?0:t.size/n,s=[];pe(()=>{t=ie(t,[1,n,i]);for(let l=0;l<e.length;++l){let u=l===0?0:o[l-1],c=[0,u,0],x=[1,e[l],i];s[l]=ie(ht(t,c,x),this.elementShape)}return s});let a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,s)}};p();var Zu=class{constructor(e,t,n,o=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,e?.forEach(i=>{if(n!==i.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${i.dtype}`);Bo(t,i.shape,"TensorList shape mismatch: "),Er(i)}),this.idTensor=Ve(0),this.maxNumElements=o,Er(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Zu([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(n!==-1&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Bo(e,this.elementShape,"TensorList shape mismatch: ");let o=lx(this.elementShape,this.tensors,e);return pe(()=>{let i=this.tensors.map(s=>ie(s,o));return Pr(i,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let n=lx(this.elementShape,this.tensors,e),o=this.tensors.pop();return Bo(o.shape,e,"TensorList shape mismatch: "),ie(o,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Bo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Er(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Bo(this.tensors[e].shape,t,"TensorList shape mismatch: ");let o=lx(this.elementShape,this.tensors,t);return ie(this.tensors[e],o)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Bo(this.elementShape,t.shape,"TensorList shape mismatch: "),Er(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Bo(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let o=lx(this.elementShape,this.tensors,n);return e.length===0?yn([],[0].concat(o)):pe(()=>{let i=e.map(s=>ie(this.tensors[s],o));return Pr(i,0)})}concat(e,t){if(!!e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Bo(this.elementShape,t,"TensorList shape mismatch: ");let n=lx(this.elementShape,this.tensors,t);return this.size()===0?yn([],[0].concat(n)):pe(()=>{let o=this.tensors.map(i=>ie(i,n));return Mt(o,0)})}};function lk(r,e,t){let n=r.dtype;if(r.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${r.shape}`);if(r.dtype!==t)throw new Error(`Invalid data types; op elements ${r.dtype}, but list elements ${t}`);let o=r.shape.slice(1);Bo(o,e,"TensorList shape mismatch: ");let i=cn(r);return new Zu(i,e,n)}function uk(r,e,t){return new Zu([],r,e,t)}function ck(r,e,t,n){if(e.length!==r.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${r.shape[0]}`);let o=Math.max(...e);if(n!=null&&n!==-1&&o>=n)throw new Error(`Max index must be < array size (${o}  vs. ${n})`);let i=new Zu([],t,r.dtype,n),s=cn(r,0);return e.forEach((a,l)=>{i.setItem(a,s[l])}),i}function pk(r,e,t){let n=0,o=e.map(c=>(n+=c,n));if(n!==r.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${r.shape}`);let i=r.shape.slice(1),s=l3(i,t),a=n===0?0:r.size/n,l=pe(()=>{let c=[];r=ie(r,[1,n,a]);for(let x=0;x<e.length;++x){let f=x===0?0:o[x-1],h=[0,f,0],g=[1,e[x],a];c[x]=ie(ht(r,h,g),s)}return r.dispose(),c}),u=new Zu([],t,r.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}var xk=async(r,e,t)=>{switch(r.op){case"If":case"StatelessIf":{let n=z("thenBranch",r,e,t),o=z("elseBranch",r,e,t),i=z("cond",r,e,t),s=z("args",r,e,t);return(await i.data())[0]?t.functionMap[n].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap):t.functionMap[o].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{let n=z("body",r,e,t),o=z("cond",r,e,t),i=z("args",r,e,t),s=await t.functionMap[o].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap),a=i.map(c=>c.id),l=await s[0].data();s.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){let c=u;u=await t.functionMap[n].executeFunctionAsync(u,t.tensorArrayMap,t.tensorListMap);let x=u.map(h=>h.id);c.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&x.indexOf(h.id)===-1&&h.dispose()});let f=await t.functionMap[o].executeFunctionAsync(u,t.tensorArrayMap,t.tensorListMap);l=await f[0].data(),f.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&x.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{let n=z("pred",r,e,t);return[os(n)]}case"Switch":{let n=z("pred",r,e,t),o=z("data",r,e,t);return o.kept||(o=os(o)),(await n.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let n=r.inputNames.find(o=>vn(o,e,t)!==void 0);if(n){let o=vn(n,e,t);return[os(o)]}return}case"Enter":{let n=z("frameName",r,e,t),o=z("tensor",r,e,t);return t.enterFrame(n),[os(o)]}case"Exit":{let n=z("tensor",r,e,t);return t.exitFrame(),[os(n)]}case"NextIteration":{let n=z("tensor",r,e,t);return t.nextIteration(),[os(n)]}case"TensorArrayV3":{let n=z("size",r,e,t),o=z("dtype",r,e,t),i=z("elementShape",r,e,t),s=z("dynamicSize",r,e,t),a=z("clearAfterRead",r,e,t),l=z("identicalElementShapes",r,e,t),u=z("name",r,e,t),c=new j6(u,o,n,i,l,s,a);return t.addTensorArray(c),[c.idTensor,Ve(1)]}case"TensorArrayWriteV3":{let n=z("tensorArrayId",r,e,t),o=z("index",r,e,t),i=z("tensor",r,e,t),s=t.getTensorArray(n.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let n=z("tensorArrayId",r,e,t),o=z("index",r,e,t);return[t.getTensorArray(n.id).read(o)]}case"TensorArrayGatherV3":{let n=z("tensorArrayId",r,e,t),o=z("indices",r,e,t),i=z("dtype",r,e,t);return[t.getTensorArray(n.id).gather(o,i)]}case"TensorArrayScatterV3":{let n=z("tensorArrayId",r,e,t),o=z("indices",r,e,t),i=z("tensor",r,e,t),s=t.getTensorArray(n.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let n=z("tensorArrayId",r,e,t),o=t.getTensorArray(n.id),i=z("dtype",r,e,t);return[o.concat(i)]}case"TensorArraySplitV3":{let n=z("tensorArrayId",r,e,t),o=z("tensor",r,e,t),i=z("lengths",r,e,t),s=t.getTensorArray(n.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let n=z("tensorArrayId",r,e,t),o=t.getTensorArray(n.id);return[Ve(o.size(),"int32")]}case"TensorArrayCloseV3":{let n=z("tensorArrayId",r,e,t),o=t.getTensorArray(n.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let n=z("tensorListId",r,e,t),o=z("index",r,e,t),i=z("tensor",r,e,t),s=t.getTensorList(n.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let n=z("tensorListId",r,e,t),o=z("index",r,e,t),i=z("elementShape",r,e,t),s=z("elementDType",r,e,t);return[t.getTensorList(n.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let n=z("indices",r,e,t),o=z("tensor",r,e,t),i=z("elementShape",r,e,t),s=z("numElements",r,e,t),a=ck(o,n,i,s);return t.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let n=z("elementShape",r,e,t),o=z("elementDType",r,e,t),i;r.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=z(i,r,e,t),a=uk(n,o,s);return t.addTensorList(a),[a.idTensor]}case"TensorListGather":{let n=z("tensorListId",r,e,t),o=z("indices",r,e,t),i=z("elementShape",r,e,t),s=z("elementDType",r,e,t);return[t.getTensorList(n.id).gather(o,s,i)]}case"TensorListStack":{let n=z("tensorListId",r,e,t),o=z("elementShape",r,e,t),i=z("elementDType",r,e,t),s=z("numElements",r,e,t);return[t.getTensorList(n.id).stack(o,i,s)]}case"TensorListFromTensor":{let n=z("tensor",r,e,t),o=z("elementShape",r,e,t),i=z("elementDType",r,e,t),s=lk(n,o,i);return t.addTensorList(s),[s.idTensor]}case"TensorListConcat":{let n=z("tensorListId",r,e,t),o=t.getTensorList(n.id),i=z("dtype",r,e,t),s=z("elementShape",r,e,t);return[o.concat(i,s)]}case"TensorListPushBack":{let n=z("tensorListId",r,e,t),o=z("tensor",r,e,t),i=t.getTensorList(n.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let n=z("tensorListId",r,e,t),o=z("elementShape",r,e,t),i=z("elementDType",r,e,t);return[t.getTensorList(n.id).popBack(o,i)]}case"TensorListSplit":{let n=z("tensor",r,e,t),o=z("elementShape",r,e,t),i=z("lengths",r,e,t),s=pk(n,i,o);return t.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();function fk(r,e,t){let[n,o]=z("fusedOps",r,e,t),i=n==="biasadd",s=o==="prelu",a=n==="fusedbatchnorm",l=z("numArgs",r,e,t);if(i){if(s&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(a)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");let u=z("strides",r,e,t),c=Wm(r,e,t),x=z("dataFormat",r,e,t).toUpperCase(),f=z("dilations",r,e,t),[h,g]=z("args",r,e,t),m=z("leakyreluAlpha",r,e,t);return{stride:u,pad:c,dataFormat:x,dilations:f,biasArg:h,preluArg:g,activationFunc:o,leakyreluAlpha:m}}var mk=(r,e,t)=>{switch(r.op){case"Conv1D":{let n=z("stride",r,e,t),o=z("pad",r,e,t),i=z("dataFormat",r,e,t).toUpperCase(),s=z("dilation",r,e,t);return[R2(z("x",r,e,t),z("filter",r,e,t),n,o,i,s)]}case"Conv2D":{let n=z("strides",r,e,t),o=Wm(r,e,t),i=z("dataFormat",r,e,t).toUpperCase(),s=z("dilations",r,e,t);return[Kn(z("x",r,e,t),z("filter",r,e,t),[n[1],n[2]],o,i,[s[1],s[2]])]}case"_FusedConv2D":{let{stride:n,pad:o,dataFormat:i,dilations:s,biasArg:a,preluArg:l,activationFunc:u,leakyreluAlpha:c}=fk(r,e,t);return[ei.conv2d({x:z("x",r,e,t),filter:z("filter",r,e,t),strides:[n[1],n[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:a,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{let{stride:n,pad:o,dataFormat:i,dilations:s,biasArg:a,preluArg:l,activationFunc:u,leakyreluAlpha:c}=fk(r,e,t);return[ei.depthwiseConv2d({x:z("x",r,e,t),filter:z("filter",r,e,t),strides:[n[1],n[2]],pad:o,dataFormat:i,dilations:[s[1],s[2]],bias:a,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let n=z("outputShape",r,e,t),o=z("strides",r,e,t),i=Wm(r,e,t);return[$2(z("x",r,e,t),z("filter",r,e,t),n,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let n=z("strides",r,e,t),o=Wm(r,e,t),i=z("dilations",r,e,t),s=z("dataFormat",r,e,t).toUpperCase();return[mi(z("input",r,e,t),z("filter",r,e,t),[n[1],n[2]],o,s,[i[1],i[2]])]}case"Conv3D":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("dataFormat",r,e,t).toUpperCase(),s=z("dilations",r,e,t);return[fp(z("x",r,e,t),z("filter",r,e,t),[n[1],n[2],n[3]],o,i,[s[1],s[2],s[3]])]}case"AvgPool":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("kernelSize",r,e,t);return[pa(z("x",r,e,t),[i[1],i[2]],[n[1],n[2]],o)]}case"MaxPool":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("kernelSize",r,e,t);return[ga(z("x",r,e,t),[i[1],i[2]],[n[1],n[2]],o)]}case"MaxPoolWithArgmax":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("kernelSize",r,e,t),s=z("includeBatchInIndex",r,e,t),{result:a,indexes:l}=jd(z("x",r,e,t),[i[1],i[2]],[n[1],n[2]],o,s);return[a,l]}case"AvgPool3D":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("kernelSize",r,e,t);return[cp(z("x",r,e,t),[i[1],i[2],i[3]],[n[1],n[2],n[3]],o)]}case"MaxPool3D":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("kernelSize",r,e,t);return[wp(z("x",r,e,t),[i[1],i[2],i[3]],[n[1],n[2],n[3]],o)]}case"Dilation2D":{let n=z("strides",r,e,t),o=z("pad",r,e,t),i=z("dilations",r,e,t),s=n[1],a=n[2],l=i[1],u=i[2];return[hp(z("x",r,e,t),z("filter",r,e,t),[s,a],o,[l,u],"NHWC")]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var hk=(r,e,t)=>{switch(r.op){case"Fill":{let n=z("shape",r,e,t),o=z("dtype",r,e,t),i=z("value",r,e,t);return[ma(n,i,o)]}case"LinSpace":{let n=z("start",r,e,t),o=z("stop",r,e,t),i=z("num",r,e,t);return[Wd(n,o,i)]}case"Multinomial":{let n=z("logits",r,e,t),o=z("numSamples",r,e,t),i=z("seed",r,e,t);return[Xd(n,o,i)]}case"OneHot":{let n=z("indices",r,e,t),o=z("depth",r,e,t),i=z("onValue",r,e,t),s=z("offValue",r,e,t);return[fi(n,o,i,s)]}case"Ones":return[kn(z("shape",r,e,t),z("dtype",r,e,t))];case"OnesLike":return[Qr(z("x",r,e,t))];case"RandomUniform":return[vi(z("shape",r,e,t),z("minval",r,e,t),z("maxval",r,e,t),z("dtype",r,e,t))];case"Range":{let n=z("start",r,e,t),o=z("stop",r,e,t),i=z("step",r,e,t);return[Iu(n,o,i,z("dtype",r,e,t))]}case"TruncatedNormal":{let n=z("shape",r,e,t),o=z("mean",r,e,t),i=z("stdDev",r,e,t),s=z("seed",r,e,t);return[Y2(n,o,i,z("dtype",r,e,t),s)]}case"Zeros":return[lr(z("shape",r,e,t),z("dtype",r,e,t))];case"ZerosLike":return[st(z("x",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();function X6(r,e,t){let n=z("boxes",r,e,t),o=z("scores",r,e,t),i=z("maxOutputSize",r,e,t),s=z("iouThreshold",r,e,t),a=z("scoreThreshold",r,e,t),l=z("softNmsSigma",r,e,t);return{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var dk=async(r,e,t)=>{switch(r.op){case"NonMaxSuppressionV5":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}=X6(r,e,t),u=await Yi.nonMaxSuppressionWithScoreAsync(n,o,i,s,a,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a}=X6(r,e,t),l=z("padToMaxOutputSize",r,e,t),u=await Yi.nonMaxSuppressionPaddedAsync(n,o,i,s,a,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:n,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a}=X6(r,e,t);return[await Yi.nonMaxSuppressionAsync(n,o,i,s,a)]}case"Where":{let n=Le(z("condition",r,e,t),"bool"),o=[await Fp(n)];return n.dispose(),o}case"ListDiff":return Qd(z("x",r,e,t),z("y",r,e,t));default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var gk=(r,e,t)=>{switch(r.op){case"TopKV2":{let n=z("x",r,e,t),o=z("k",r,e,t),i=z("sorted",r,e,t),s=$p(n,o,i);return[s.values,s.indices]}case"Unique":{let n=z("x",r,e,t),o=Eu(n);return[o.values,o.indices]}case"UniqueV2":{let n=z("x",r,e,t),o=z("axis",r,e,t),i=Eu(n,o);return[i.values,i.indices]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var yk=(r,e,t)=>{switch(r.op){case"Const":return e[r.name];case"PlaceholderWithDefault":let n=z("default",r,e,t);return[vn(r.name,e,t)||n];case"Placeholder":return[vn(r.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=z("x",r,e,t);return[os(u)]}case"IdentityN":return z("x",r,e,t).map(u=>os(u));case"Snapshot":let o=z("x",r,e,t);return[os(o)];case"Shape":return[Br(z("x",r,e,t).shape,"int32")];case"ShapeN":return z("x",r,e,t).map(u=>Br(u.shape));case"Size":return[Ve(z("x",r,e,t).size,"int32")];case"Rank":return[Ve(z("x",r,e,t).rank,"int32")];case"NoOp":return[Ve(1)];case"Print":let i=z("x",r,e,t),s=z("data",r,e,t),a=z("message",r,e,t),l=z("summarize",r,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(let u=0;u<s.length;u++)console.log(Array.prototype.slice.call(s[u].dataSync()).slice(0,l));return[i];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();p();var Y6=class{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Ve(0),this.tensorMap=new Map,Er(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),pe(()=>{let o=cn(t),i=n.length,s=o.length;I.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=n[a],u=o[a];Er(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return pe(()=>{let o=[];for(let i=0;i<n.length;i++){let s=n[i],a=this.findWithDefault(s,t);o.push(a)}return Pr(o)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return n??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}};var bk=async(r,e,t,n)=>{switch(r.op){case"HashTable":case"HashTableV2":{let o=z("keyDType",r,e,t),i=z("valueDType",r,e,t),s=new Y6(o,i);return n.addHashTable(r.name,s),[s.handle]}case"LookupTableImport":case"LookupTableImportV2":{let o=z("tableHandle",r,e,t,n),i=z("keys",r,e,t),s=z("values",r,e,t);return[await n.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=z("tableHandle",r,e,t,n),i=z("keys",r,e,t),s=z("defaultValue",r,e,t);return[await n.getHashTableById(o.id).find(i,s)]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var vk=(r,e,t)=>{switch(r.op){case"ResizeBilinear":{let n=z("images",r,e,t),o=z("size",r,e,t),i=z("alignCorners",r,e,t),s=z("halfPixelCenters",r,e,t);return[Yi.resizeBilinear(n,[o[0],o[1]],i,s)]}case"ResizeNearestNeighbor":{let n=z("images",r,e,t),o=z("size",r,e,t),i=z("alignCorners",r,e,t),s=z("halfPixelCenters",r,e,t);return[Yi.resizeNearestNeighbor(n,[o[0],o[1]],i,s)]}case"CropAndResize":{let n=z("image",r,e,t),o=z("boxes",r,e,t),i=z("boxInd",r,e,t),s=z("cropSize",r,e,t),a=z("method",r,e,t),l=z("extrapolationValue",r,e,t);return[Yi.cropAndResize(n,o,i,s,a,l)]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var wk=(r,e,t)=>{switch(r.op){case"Equal":return[go(z("a",r,e,t),z("b",r,e,t))];case"NotEqual":return[Qo(z("a",r,e,t),z("b",r,e,t))];case"Greater":return[Jr(z("a",r,e,t),z("b",r,e,t))];case"GreaterEqual":return[oo(z("a",r,e,t),z("b",r,e,t))];case"Less":return[L2(z("a",r,e,t),z("b",r,e,t))];case"LessEqual":return[Mo(z("a",r,e,t),z("b",r,e,t))];case"LogicalAnd":return[hn(z("a",r,e,t),z("b",r,e,t))];case"LogicalNot":return[da(z("a",r,e,t))];case"LogicalOr":return[U2(z("a",r,e,t),z("b",r,e,t))];case"Select":case"SelectV2":return[Ar(z("condition",r,e,t),z("a",r,e,t),z("b",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var Ck=(r,e,t)=>{switch(r.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[kt(z("a",r,e,t),z("b",r,e,t),z("transposeA",r,e,t),z("transposeB",r,e,t))];case"Transpose":return[Rt(z("x",r,e,t),z("perm",r,e,t))];case"_FusedMatMul":let[n,o]=z("fusedOps",r,e,t),i=n==="biasadd",s=o==="prelu",a=z("numArgs",r,e,t),l=z("leakyreluAlpha",r,e,t);if(i){if(s&&a!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,c]=z("args",r,e,t);return[ei.matMul({a:z("a",r,e,t),b:z("b",r,e,t),transposeA:z("transposeA",r,e,t),transposeB:z("transposeB",r,e,t),bias:u,activation:o,preluActivationWeights:c,leakyreluAlpha:l})];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var Nk=(r,e,t)=>{switch(r.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[Zo(z("x",r,e,t),z("mean",r,e,t),z("variance",r,e,t),z("offset",r,e,t),z("scale",r,e,t),z("epsilon",r,e,t))];case"FusedBatchNormV3":return[Zo(z("x",r,e,t),z("mean",r,e,t),z("variance",r,e,t),z("offset",r,e,t),z("scale",r,e,t),z("epsilon",r,e,t))];case"LRN":return[bp(z("x",r,e,t),z("radius",r,e,t),z("bias",r,e,t),z("alpha",r,e,t),z("beta",r,e,t))];case"Softmax":return[va(z("x",r,e,t))];case"LogSoftmax":return[B2(z("x",r,e,t))];case"SparseToDense":return[yf(z("sparseIndices",r,e,t),z("outputShape",r,e,t),z("sparseValues",r,e,t),z("defaultValue",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var _k=(r,e,t)=>{switch(r.op){case"Max":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[ln(z("x",r,e,t),s,a)]}case"Mean":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[ar(z("x",r,e,t),s,a)]}case"Min":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[Ki(z("x",r,e,t),s,a)]}case"Sum":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[Qe(z("x",r,e,t),s,a)]}case"All":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[D2(z("x",r,e,t),s,a)]}case"Any":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[q0(z("x",r,e,t),s,a)]}case"ArgMax":{let s=z("axis",r,e,t);return[H0(z("x",r,e,t),s)]}case"ArgMin":{let s=z("axis",r,e,t);return[np(z("x",r,e,t),s)]}case"Prod":{let s=z("axis",r,e,t),a=z("keepDims",r,e,t);return[V2(z("x",r,e,t),s,a)]}case"Cumsum":{let s=z("axis",r,e,t),a=z("exclusive",r,e,t),l=z("reverse",r,e,t);return[F2(z("x",r,e,t),s,a,l)]}case"Bincount":let n=z("x",r,e,t),o=z("weights",r,e,t),i=z("size",r,e,t);return[$d(n,o,i)];case"DenseBincount":{let s=z("x",r,e,t),a=z("weights",r,e,t),l=z("size",r,e,t),u=z("binaryOutput",r,e,t);return[Pd(s,a,l,u)]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var Sk=(r,e,t)=>{switch(r.op){case"ConcatV2":case"Concat":{let n=z("n",r,e,t),o=z("axis",r,e,t),i=z("tensors",r,e,t);return i=i.slice(0,n),[Mt(i,o)]}case"Gather":{let n=z("x",r,e,t),o=z("indices",r,e,t);return[Jo(n,Le(o,"int32"),0)]}case"GatherV2":{let n=z("axis",r,e,t),o=z("batchDims",r,e,t),i=z("x",r,e,t),s=z("indices",r,e,t);return[Jo(i,Le(s,"int32"),n,o)]}case"Reverse":{let n=z("dims",r,e,t),o=[];for(let s=0;s<n.length;s++)n[s]&&o.push(s);let i=z("x",r,e,t);return[qr(i,o)]}case"ReverseV2":{let n=z("axis",r,e,t),o=z("x",r,e,t);return[qr(o,n)]}case"Slice":{let n=z("begin",r,e,t),o=z("size",r,e,t);return[ht(z("x",r,e,t),n,o)]}case"StridedSlice":{let n=z("begin",r,e,t),o=z("end",r,e,t),i=z("strides",r,e,t),s=z("beginMask",r,e,t),a=z("endMask",r,e,t),l=z("ellipsisMask",r,e,t),u=z("newAxisMask",r,e,t),c=z("shrinkAxisMask",r,e,t),x=z("x",r,e,t);return[Dp(x,n,o,i,s,a,l,u,c)]}case"Pack":return pe(()=>{let n=z("axis",r,e,t),o=z("tensors",r,e,t),i=o[0].shape,s=yo(o[0]).shape,a=o.map(l=>{let u=I.arraysEqual(l.shape,i);if(!u&&!I.arraysEqual(yo(l).shape,s))throw new Error("the input tensors shape does not match");return u?l:ie(l,i)});return[Pr(a,n)]});case"Unpack":{let n=z("axis",r,e,t),o=z("tensor",r,e,t);return cn(o,n)}case"Tile":{let n=z("reps",r,e,t);return[Fo(z("x",r,e,t),n)]}case"Split":case"SplitV":{let n=z("axis",r,e,t),o=z("numOrSizeSplits",r,e,t),i=z("x",r,e,t);return un(i,o,n)}case"ScatterNd":{let n=z("indices",r,e,t),o=z("values",r,e,t),i=z("shape",r,e,t);return[gg(n,o,i)]}case"GatherNd":{let n=z("x",r,e,t),o=z("indices",r,e,t);return[yg(n,o)]}case"SparseToDense":{let n=z("sparseIndices",r,e,t),o=z("outputShape",r,e,t),i=z("sparseValues",r,e,t),s=z("defaultValue",r,e,t);return[yf(n,i,o,i.dtype===s.dtype?s:Le(s,i.dtype))]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var Tk=(r,e,t)=>{switch(r.op){case"FFT":return[wa(z("x",r,e,t))];case"IFFT":return[ji(z("x",r,e,t))];case"RFFT":return[Ca(z("x",r,e,t))];case"IRFFT":return[j2(z("x",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};p();var Ik=(r,e,t)=>{switch(r.op){case"Cast":return[Le(z("x",r,e,t),z("dtype",r,e,t))];case"ExpandDims":{let n=z("axis",r,e,t);return[sn(z("x",r,e,t),n)]}case"Squeeze":{let n=z("axis",r,e,t);return[yo(z("x",r,e,t),n)]}case"Reshape":return[ie(z("x",r,e,t),z("shape",r,e,t))];case"MirrorPad":return[Cp(z("x",r,e,t),z("padding",r,e,t),z("mode",r,e,t))];case"PadV2":case"Pad":return[Mn(z("x",r,e,t),z("padding",r,e,t),z("constantValue",r,e,t))];case"SpaceToBatchND":{let n=z("blockShape",r,e,t),o=z("paddings",r,e,t);return[ya(z("x",r,e,t),n,o)]}case"BatchToSpaceND":{let n=z("blockShape",r,e,t),o=z("crops",r,e,t);return[xa(z("x",r,e,t),n,o)]}case"DepthToSpace":{let n=z("blockSize",r,e,t),o=z("dataFormat",r,e,t).toUpperCase();return[mp(z("x",r,e,t),n,o)]}case"BroadcastTo":return[j0(z("x",r,e,t),z("shape",r,e,t))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};function Z6(r,e,t,n){let o=((i,s,a)=>{switch(i.category){case"arithmetic":return pe(()=>ik(i,s,a));case"basic_math":return pe(()=>sk(i,s,a));case"control":return xk(i,s,a);case"convolution":return pe(()=>mk(i,s,a));case"creation":return pe(()=>hk(i,s,a));case"dynamic":return dk(i,s,a);case"evaluation":return pe(()=>gk(i,s,a));case"image":return pe(()=>vk(i,s,a));case"graph":return pe(()=>yk(i,s,a));case"logical":return pe(()=>wk(i,s,a));case"matrices":return pe(()=>Ck(i,s,a));case"normalization":return pe(()=>Nk(i,s,a));case"reduction":return pe(()=>_k(i,s,a));case"slice_join":return pe(()=>Sk(i,s,a));case"spectral":return pe(()=>Tk(i,s,a));case"transformation":return pe(()=>Ik(i,s,a));case"hash_table":return bk(i,s,a,n);case"custom":let l=X1(i.op);if(l&&l.customExecutor)return l.customExecutor(new K6(i,s,a));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(r,e,t);return I.isPromise(o)?o.then(i=>[].concat(i)):[].concat(o)}p();var u3=class{constructor(e={},t={},n={},o={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};p();function J6(r,e,t,n){let o=new Set,i=[],s=null,a=null,l=new Set,u=Object.keys(r).map(f=>uo(f)[0]),c=[];n!=null&&(c=n.map(f=>uo(f.name)[0]));let x=[...e];for(;x.length>0;){let f=x.pop();if((Q6(f)||BZ(f)||UZ(f))&&s==null&&(s=f,a=s.children.map(h=>h.name).filter(h=>o.has(h))),o.add(f.name),t[f.name]==null&&u.indexOf(f.name)===-1&&c.indexOf(f.name)===-1){if(f.inputs.length===0){i.push(f.name);continue}f.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),x.push(h))})}}return{inputs:r,outputs:e,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function kk(r,e,t){let{usedNodes:n,inputs:o}=t,i=[],s=Object.keys(o).map(c=>uo(c)[0]).map(c=>r.nodes[c]),a=r.initNodes;s.forEach(c=>{n.has(c.name)&&i.push(c)}),r.weights.forEach(c=>{n.has(c.name)&&i.push(c)}),a?.forEach(c=>{n.has(c.name)&&i.push(c)});let l=new Set,u=[];for(;i.length>0;){let c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(x=>{!l.has(x.name)&&n.has(x.name)&&x.inputs.every(f=>l.has(f.name))&&i.push(x)})}return u}var zZ=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],LZ=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],PZ=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function Q6(r){return zZ.indexOf(r.op)>=0}function BZ(r){return LZ.indexOf(r.op)>=0}function UZ(r){return PZ.indexOf(r.op)>=0}var ux=class{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(n=>{this._functionExecutorMap[n]=new ux(e.functions[n],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(n=>e[n].map(o=>o.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){let n=e.map(i=>i.name).sort(),o=t.map(i=>i.name).sort();return n.join(this.SEPERATOR)+"--"+o.join(this.SEPERATOR)}compile(e,t){let n=J6(e,t,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=n;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let a=t.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${a}] from the provided inputs [${l}]. Missing the following inputs: [${o}]`)}return kk(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let o=n.map(x=>this.graph.nodes[uo(x)[0]]),i=t.map(x=>uo(x)[0]),s=i.map(x=>this.graph.nodes[x]);s.length===0&&(s=this._outputs);let a=this.getCompilationKey(o,s),l=this.compiledMap.get(a);l==null&&(l=this.compile(e,s),this.compiledMap.set(a,l));let u={},c={};return pe(()=>{let x=new u3(this.weightMap,u,c,this.functionExecutorMap),f=Object.assign({},this.weightMap);Object.keys(e).forEach(m=>{let[b,v]=uo(m),w=[];w[v]=e[m],f[b]=w});let h=this.getFrozenTensorIds(f),g={};for(let m=0;m<l.length;m++){let b=l[m];if(!f[b.name]){let v=Z6(b,f,x,this._resourceManager);if(I.isPromise(v))throw new Error(`The execution of the op '${b.op}' returned a promise. Please use model.executeAsync() instead.`);f[b.name]=v,this.checkTensorForDisposal(b.name,b,f,x,h,i,g)}}return this.parent==null&&x.dispose(h),t.map(m=>vn(m,f,x))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(n=>e[n]).map(n=>n.map(o=>o.id)));return new Set(t)}checkTensorForDisposal(e,t,n,o,i,s,a){t.category==="control"||s.indexOf(e)!==-1||(n[e].forEach(l=>{l!=null&&(a[l.id]=(a[l.id]||0)+t.children.length)}),t.inputs.forEach(l=>{if(l.category!=="control"){let u=tk(l.name,n,o);u?.forEach(c=>{if(c&&!i.has(c.id)){let x=a[c.id];x===1?(c.dispose(),delete a[c.id]):x!=null&&a[c.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,o={},i={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));let s=new u3(this.weightMap,o,i,this.functionExecutorMap),a=await this.executeWithControlFlow(e,s,t,n),l=t.map(f=>vn(f,a,s)),u=l.map(f=>f.id),c=Object.keys(e).map(f=>e[f].id),x=new Set([...u,...c,...this.weightIds]);return Object.keys(a).forEach(f=>{a[f].forEach(g=>{g&&!g.isDisposed&&!x.has(g.id)&&g.dispose()})}),this.parent==null&&s.dispose(x),l}async executeFunctionAsync(e,t,n){let o=e.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,o){let i=Object.keys(e),s=i.map(C=>this.graph.nodes[uo(C)[0]]),a=n.map(C=>uo(C)[0]),l=a.map(C=>this.graph.nodes[C]);l.length===0&&(l=this._outputs);let{usedNodes:u,missingInputs:c,dynamicNode:x,syncInputs:f}=J6(e,l,this.weightMap,this._initNodes),h=[...s,...this.graph.weights,...this._initNodes||[]].map(C=>({node:C,contexts:t.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(C=>{let[N,_]=uo(C),E=[];E[_]=e[C],g[N]=E});let m={},b=this.getFrozenTensorIds(g),v={};for(;h.length>0;){let C=this.processStack(s,h,t,g,v,b,a,m,u);await Promise.all(C)}x==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let w=l.filter(C=>!Q6(C)&&!vn(C.name,g,t)).map(C=>C.name);if(w.length>0){let C="";throw x!=null&&(C=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${C}`)}return g}processStack(e,t,n,o,i,s,a,l,u){let c=[];for(;t.length>0;){let x=t.pop();n.currentContext=x.contexts;let f="";if(x.node.op==="Enter"&&z("isConstant",x.node,o,n)&&([f]=ns(x.node.name,n)),o[x.node.name]==null){let h=Z6(x.node,o,n,this._resourceManager);f||([f]=ns(x.node.name,n));let g=n.currentContext;I.isPromise(h)?c.push(h.then(m=>(o[f]=m,n.currentContext=g,this.checkTensorForDisposal(f,x.node,o,n,s,a,l),this.processChildNodes(x.node,t,n,o,i,u),m))):(o[f]=h,this.checkTensorForDisposal(f,x.node,o,n,s,a,l),this.processChildNodes(x.node,t,n,o,i,u))}else this.processChildNodes(x.node,t,n,o,i,u)}return c}processChildNodes(e,t,n,o,i,s){e.children.forEach(a=>{let[l]=ns(a.name,n);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!vn(u,o,n))&&(i[l]=!0,t.push({contexts:n.currentContext,node:a})):a.inputNames.every(u=>!!vn(u,o,n))&&(i[l]=!0,t.push({contexts:n.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[o]=uo(t),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===n.shape.length&&n.shape.every((l,u)=>s[u]===-1||s[u]===l);I.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${n.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&I.assert(n.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){let t={};for(let n in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[n]!=null){let o=this._signature.inputs[n];t[o.name]=e[n]}else t[n]=e[n];return t}checkInputs(e){let t=Object.keys(e).filter(n=>{let[o]=uo(n);return this.graph.nodes[o]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[t]!=null?this._signature.outputs[t].name:t,{})}checkOutputs(e){e.forEach(t=>{let[n]=uo(t);if(!this.graph.nodes[n])throw new Error(`The output '${t}' is not found in the graph`)})}};p();var e7=class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}};var VZ="?tfjs-format=file",GZ="model.json",c3=class{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",t==null&&(this.loadOptions={}),this.resourceManager=new e7}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=Sn.browserHTTPRequest(e,this.loadOptions);else{let t=Sn.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(Sn.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,n;this.artifacts.userDefinedMetadata!=null&&this.artifacts.userDefinedMetadata.signature!=null?n=this.artifacts.userDefinedMetadata.signature:n=this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;let o=Sn.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new ux(a3.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let i=a3.Instance.transformGraph(e.modelInitializer);this.initializer=new ux(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if(typeof e=="string"){let n=Sn.getSaveHandlers(e);if(n.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(n.length>1)throw new Error(`Found more than one (${n.length}) save handlers for URL '${e}'`);e=n[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof Ct)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,o)=>(t[n]=e[o],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}};async function Ek(r,e={}){if(r==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&r.load==null&&(r.endsWith("/")||(r=r+"/"),r=`${r}${GZ}${VZ}`);let t=new c3(r,e);return await t.load(),t}p();var p3="3.1.0";var l7={};Pt(l7,{CSVDataset:()=>Xm,Dataset:()=>Ea,FileDataSource:()=>eh,TextLineDataset:()=>Km,URLDataSource:()=>th,array:()=>Zk,csv:()=>lE,func:()=>uE,generator:()=>cE,microphone:()=>xE,version_data:()=>y3,webcam:()=>pE,zip:()=>Jk});p();p();var Yk=Ho(hf());p();var Fk=Ho(hf());p();p();function Ak(r,e){return x3(r,e)}function x3(r,e,t=new Map,n=new Set){if(r==null)return null;if(n.has(r))throw new Error("Circular references are not supported.");if(t.has(r))return t.get(r);let o=e(r);if(o.recurse&&o.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse)if(cl(r)){let i=Array.isArray(r)?[]:{};n.add(r);for(let s in r){let a=r[s],l=x3(a,e,t,n);i[s]=l}return n.delete(r),i}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return t.set(r,o.value),o.value}function Dk(r,e=t7){return Rk(r,e)}function Rk(r,e,t=new Set){let n=r[0];if(t.has(n))throw new Error("Circular references are not supported.");let o=e(r);if(o.recurse&&o.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse)if(cl(n)){let i=Array.isArray(n)?[]:{};t.add(n);for(let s in n){let a=r.map(u=>u[s]),l=Rk(a,e,t);i[s]=l}return t.delete(n),i}else throw new Error(`Can't recurse into non-iterable type: ${n}`);else return o.value}function t7(r){return r===null?null:cl(r[0])?{value:null,recurse:!0}:{value:r,recurse:!1}}async function f3(r,e){let t=new Map;x3(r,e,t);for(let o of Array.from(t.keys())){let i=t.get(o);if(I.isPromise(i)){let s=await i;t.set(o,s)}}return x3(r,e,t)}function cl(r){return r!=null&&!ArrayBuffer.isView(r)&&(Array.isArray(r)||typeof r=="object"&&!(r instanceof Ct))}function $k(r){return r==null||WZ(r)||Array.isArray(r)||typeof r=="object"&&r instanceof Ct||I.isTypedArray(r)}function WZ(r){return r===null||typeof r!="object"&&typeof r!="function"}function Ok(r){return Ak(r,qZ)}function qZ(r){return r instanceof Ct?{value:r.clone(),recurse:!1}:cl(r)?{value:null,recurse:!0}:{value:r,recurse:!1}}p();p();var qm=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}};var cx=class extends qm{constructor(){super(cx.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,t=new Array(e),n=this.length();for(let o=0;o<n;o++)t[o]=this.get(this.wrap(this.begin+o));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};cx.INITIAL_CAPACITY=32;function n7(r){return new Lk(r)}function Hm(r){return new Pk(r)}function Mk(r,e){return new o7(r,e)}function zk(r,e=n2.FAIL){return new jk(r,e)}var Zr=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Hk(this,e)}filter(e){return new Wk(this,e)}map(e){return new qk(this,e)}mapAsync(e){return new r7(this,e)}serialMapAsync(e){return new r7(this,e).serial()}flatmap(e){return new Kk(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new Gk(this,e,t)}columnMajorBatch(e,t=!0,n=t7){return this.rowMajorBatch(e,t).map(i=>Dk(i,n))}concatenate(e,t){return new o7(n7([this,e]),t)}take(e){return e<0||e==null?this:new Vk(this,e)}skip(e){return e<0||e==null?this:new Uk(this,e)}prefetch(e){return new i7(this,e)}shuffle(e,t){return new Xk(this,e,t)}serial(){return new Bk(this)}},Lk=class extends Zr{constructor(e){super();this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:Ok(e),done:!1}}},Pk=class extends Zr{constructor(e){super();this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}},Bk=class extends Zr{constructor(e){super();this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},Uk=class extends Zr{constructor(e,t){super();this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;ct(e.value)}return this.upstream.next()}},Vk=class extends Zr{constructor(e,t){super();this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},Gk=class extends Zr{constructor(e,t,n=!0){super();this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},Wk=class extends Zr{constructor(e,t){super();this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;ct(e.value)}}},qk=class extends Zr{constructor(e,t){super();this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Xo.getTensorsInContainer(e.value),n=this.transform(e.value),o=Xo.getTensorsInContainer(n);for(let i of t)Xo.isTensorInList(i,o)||i.dispose();return{value:n,done:!1}}},Hk=class extends Zr{constructor(e,t){super();this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},r7=class extends Zr{constructor(e,t){super();this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Xo.getTensorsInContainer(e.value),n=await this.transform(e.value),o=Xo.getTensorsInContainer(n);for(let i of t)Xo.isTensorInList(i,o)||i.dispose();return{value:n,done:!1}}},px=class extends Zr{constructor(){super();this.outputQueue=new cx,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},Kk=class extends px{constructor(e,t){super();this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=Xo.getTensorsInContainer(e.value),n=this.transform(e.value),o=Xo.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let i of t)Xo.isTensorInList(i,o)||i.dispose();return!0}},o7=class extends Zr{constructor(e,t){super();this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){let n=await this.moreIterators.next();if(n.done)return{value:null,done:!0};this.iterator=n.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}},n2;(function(r){r[r.FAIL=0]="FAIL",r[r.SHORTEST=1]="SHORTEST",r[r.LONGEST=2]="LONGEST"})(n2||(n2={}));var jk=class extends Zr{constructor(e,t=n2.FAIL){super();this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;function o(s){return s instanceof Zr?{value:s.next().then(l=>(t++,l.done&&n++,l.value)),recurse:!1}:{value:null,recurse:!0}}let i=await f3(this.iterators,o);if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case n2.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case n2.SHORTEST:return{value:null,done:!0};case n2.LONGEST:default:}return this.count++,{value:i,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},i7=class extends Zr{constructor(e,t){super();this.upstream=e,this.bufferSize=t,this.buffer=new qm(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},Xk=class extends i7{constructor(e,t,n){super(e,t);this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Fk.alea(n||I.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}};var Ea=class{constructor(){this.size=null}batch(e,t=!0){let n=this;I.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let o;return this.size===1/0||this.size==null?o=this.size:t?o=Math.ceil(this.size/e):o=Math.floor(this.size/e),So(async()=>(await n.iterator()).columnMajorBatch(e,t,HZ),o)}concatenate(e){let t=this,n;return this.size===1/0||e.size===1/0?n=1/0:this.size!=null&&e.size!=null?n=this.size+e.size:n=null,So(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){let t=this,n;return this.size===1/0?n=1/0:n=null,So(async()=>(await t.iterator()).filter(o=>pe(()=>e(o))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return So(async()=>(await t.iterator()).map(n=>pe(()=>e(n))),this.size)}mapAsync(e){let t=this;return So(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return So(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this,n;return this.size!=null&&e>0?n=this.size*e:e===0?n=0:this.size!=null&&(e===void 0||e<0)?n=1/0:n=null,So(async()=>{let o=Hm(async()=>({value:await t.iterator(),done:!1}));return Mk(o.take(e))},n)}skip(e){let t=this,n;return this.size!=null&&e>=0&&this.size>=e?n=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?n=0:n=null,So(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let o=this,i=Yk.alea(t||I.now().toString());return So(async()=>{let s=i.int32();return n&&(s+=i.int32()),(await o.iterator()).shuffle(e,s.toString())},this.size)}take(e){let t=this,n;return this.size!=null&&this.size>e?n=e:this.size!=null&&this.size<=e?n=this.size:n=null,So(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};Ea.MAX_BUFFER_SIZE=1e4;function So(r,e=null){return new class extends Ea{constructor(){super(...arguments);this.size=e}async iterator(){return r()}}}function Zk(r){return So(async()=>n7(r),r.length)}function Jk(r){if(!cl(r))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(r))for(let t=0;t<r.length;t++)e=e==null?r[t].size:Math.min(e,r[t].size);else if(r instanceof Object)for(let t in r)e=e==null?r[t].size:Math.min(e,r[t].size);return So(async()=>{let t=await f3(r,n=>{if(n instanceof Ea)return{value:n.iterator(),recurse:!1};if(cl(n))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return zk(t,n2.SHORTEST)},e)}function HZ(r){if(r===null)return null;let e=r[0];return $k(e)?{value:KZ(r),recurse:!1}:{value:null,recurse:!0}}function KZ(r){if(r.length===0)throw new Error("Can't make a batch of zero elements.");return r[0]instanceof Ct?Pr(r):yn(r)}p();p();var Km=class extends Ea{constructor(e){super();this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(o=>(o.endsWith("\r")&&(o=o.slice(0,-1)),o))}};var m3='"',jm=Symbol("out"),Qk=Symbol("field"),h3=Symbol("quote"),s7=Symbol("quoteafterquote"),eE=Symbol("quoteinquote"),Xm=class extends Ea{constructor(e,t){super();this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new Km(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(I.assert(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&I.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((o,i)=>(o[i]=o[i]+1||1,o),{}),n=Object.keys(t).filter(o=>t[o]>1);if(I.assert(n.length===0,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs){for(let o of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(o)===-1)throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let t=await(await this.base.iterator()).next();if(t.done)throw new Error("No data was found for CSV parsing.");let n=t.value;return this.parseRow(n,!1)}else return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){let t=this.parseRow(e),n={},o={};for(let i=0;i<this.fullColumnNames.length;i++){let s=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[s]:null;if(!(this.configuredColumnsOnly&&!a)){let l=t[i],u=null;if(l==="")if(a&&a.default!==void 0)u=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${s} is empty in this line: ${e}`);u=void 0}else{let c=Number(l);if(isNaN(c))a&&a.dtype==="bool"?u=this.getBoolean(l):u=l;else if(!a||!a.dtype)u=c;else switch(a.dtype){case"float32":u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(l);break;default:u=c}}a&&a.isLabel?o[s]=u:n[s]=u}}return Object.keys(o).length===0?n:{xs:n,ys:o}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){let n=[],o=0,i=e.length,s=jm;for(let a=0;a<i;a++)switch(s){case jm:switch(e.charAt(a)){case m3:o=a+1,s=h3;break;case this.delimiter:if(o=a+1,this.delimiter===" "&&this.delimWhitespace)break;n.push(""),s=jm;break;default:s=Qk,o=a;break}break;case Qk:switch(e.charAt(a)){case this.delimiter:n.push(e.substring(o,a)),s=jm,o=a+1;break;default:}break;case h3:switch(e.charAt(a)){case m3:s=s7;break;default:}break;case s7:switch(e.charAt(a)){case this.delimiter:n.push(e.substring(o,a-1)),s=jm,o=a+1;break;case m3:s=h3;break;default:s=eE;break}break;case eE:switch(e.charAt(a)){case m3:s=h3;break;default:}break;default:}if(s===s7?n.push(e.substring(o,i-1)):n.push(e.substring(o)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}};p();p();var Ym=class extends Zr{constructor(e){super();this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(we().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");let t=new Ym(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(n){throw new Error(`Error thrown while initializing video stream: ${n.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let o=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let o=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(o=>{let i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&o({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),o({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((o,i)=>n.set(o,i*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(I.sizeFromShape(t));return n.set(e,n.length-e.length),yn(n,t)}};p();var Zm=class extends Zr{constructor(e,t){super();if(this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Br([0],"int32"),this.webcamConfig.centerCrop){let n=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,o=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,i=(1-n)/2,s=(1-o)/2,a=i+n,l=o+s;this.cropBox=Xi([s,i,l,a],[1,4])}else this.cropBox=Xi([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(we().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new Zm(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&I.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=pf.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return pe(()=>{let t=sn(Le(e,"float32"),0),n;n=Yi.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let o=n.shape;return ie(n,o.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}};p();p();var Jm=class{};p();p();p();p();var d3=class extends Zr{split(e){return new tE(this,e)}},tE=class extends d3{constructor(e,t){super();this.upstream=e,this.impl=new rE(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},rE=class extends px{constructor(e,t){super();this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}};var a7=class extends Zr{decodeUTF8(){return new oE(this)}},oE=class extends d3{constructor(e){super();this.upstream=e,this.impl=new iE(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},iE=class extends px{constructor(e){super();if(this.upstream=e,we().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:t}=nE();this.decoder=new t("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){let e=await this.upstream.next(),t;if(e.done)return!1;t=e.value;let n;return we().get("IS_BROWSER")?n=this.decoder.decode(t,{stream:!0}):n=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0}};var Qm=class extends a7{constructor(e,t={}){super();this.file=e,this.options=t,I.assert(e instanceof Uint8Array||(we().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((t,n)=>{let o=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,o)));else{let i=new FileReader;i.onload=a=>{let l=i.result;if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),!(l instanceof Uint8Array))return n(new TypeError("FileReader returned unknown type."));t(l)},i.onabort=a=>n(new Error("Aborted")),i.onerror=a=>n(new Error(a.type));let s=this.file.slice(this.offset,o);i.readAsArrayBuffer(s)}this.offset=o}),done:!1}}};async function sE(r,e={}){let t,n;typeof r=="string"?t=r:(t=r.url,n=jZ(r));let o=await I.fetch(t,n);if(o.ok){let i=new Uint8Array(await o.arrayBuffer());return new Qm(i,e)}else throw new Error(o.statusText)}var jZ=r=>({method:r.method,headers:r.headers,body:r.body,mode:r.mode,credentials:r.credentials,cache:r.cache,redirect:r.redirect,referrer:r.referrer,integrity:r.integrity});p();function g3(r){return typeof r=="string"&&r.substr(0,7)==="file://"}p();var eh=class extends Jm{constructor(e,t={}){super();this.input=e,this.options=t}async iterator(){if(g3(this.input)&&we().get("IS_NODE")){let e=aE();this.input=e.readFileSync(this.input.substr(7))}return new Qm(this.input,this.options)}};var th=class extends Jm{constructor(e,t={}){super();this.url=e,this.fileOptions=t}async iterator(){return g3(this.url)?new eh(this.url,this.fileOptions).iterator():sE(this.url,this.fileOptions)}};function lE(r,e={}){return new Xm(new th(r),e)}function uE(r){let e=Hm(r);return So(async()=>e)}function cE(r){return So(async()=>{let e=await r();return Hm(()=>e.next())})}async function pE(r,e){return Zm.create(r,e)}async function xE(r){return Ym.create(r)}p();var y3="3.1.0";p();p();p();p();function Fe(r,e){Array.isArray(r)||(r=[r]),r.forEach(t=>{t!=null&&I.assert(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}var XZ=An.whereImpl,xx=class extends qa{constructor(){super();this.blockSize=48,this.firstUse=!0,this.data=new Il(this,Oo())}nextDataId(){return xx.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,we().get("IS_NODE")&&H.warn(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));let o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:n,refCount:1}),o}makeTensorInfo(e,t,n){let o;if(t==="string"&&n!=null&&n.length>0&&I.isString(n[0])){let i=n.map(s=>I.encodeString(s));o=this.write(i,e,t)}else o=this.write(n,e,t);return{dataId:o,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,o,i){this.data.set(e,{values:t,dtype:o,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if(t==="complex64"){let o=this.readSync(n.real.dataId),i=this.readSync(n.imag.dataId);return H.mergeRealAndImagArrays(o,i)}return this.data.get(e).values}bufferSync(e){let t=this.readSync(e.dataId),n=t;if(e.dtype==="string")try{n=t.map(o=>I.decodeString(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return it(e.shape,e.dtype,n)}makeOutput(e,t,n){let o=this.write(e,t,n);return Oo().makeTensorFromDataId(o,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);n!=null&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=I.now();return e(),{kernelMs:I.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Fe([e],"where");let t=this.readSync(e.dataId);return XZ(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};xx.nextDataId=0;var k7={};Pt(k7,{addImpl:()=>c7,bincountImpl:()=>hx,bincountReduceImpl:()=>b3,ceilImpl:()=>p7,concatImpl:()=>v3,expImpl:()=>x7,expm1Impl:()=>m7,floorImpl:()=>h7,gatherV2Impl:()=>w3,greaterImpl:()=>d7,lessImpl:()=>g7,linSpaceImpl:()=>C3,logImpl:()=>y7,maxImpl:()=>N3,maximumImpl:()=>b7,minimumImpl:()=>v7,multiplyImpl:()=>rh,negImpl:()=>w7,notEqualImpl:()=>C7,prodImpl:()=>N7,rangeImpl:()=>_3,rsqrtImpl:()=>_7,simpleAbsImpl:()=>u7,sliceImpl:()=>S7,squaredDifferenceImpl:()=>T7,stridedSliceImpl:()=>S3,subImpl:()=>I7,tileImpl:()=>T3,topKImpl:()=>I3,transposeImpl:()=>dx,uniqueImpl:()=>k3});p();p();function u7(r){let e=new Float32Array(r.length);for(let t=0;t<r.length;++t)e[t]=Math.abs(r[t]);return e}var YZ=r=>{let{x:e}=r.inputs,t=r.backend;Fe(e,"abs");let n=new Float32Array(I.sizeFromShape(e.shape)),o=t.data.get(e.dataId).values;return n=u7(o),t.makeOutput(n,e.shape,"float32")},fE={kernelName:Ha,backendName:"cpu",kernelFunc:YZ};p();p();function zt(r){return(e,t,n,o,i)=>{let s=H.assertAndGetBroadcastShape(e,t),a=s.length,l=I.computeStrides(s),u=I.sizeFromShape(s),c=I.getTypedArrayFromDType(i,u),x=e.length,f=t.length,h=I.computeStrides(e),g=I.computeStrides(t),m=H.getBroadcastDims(e,s),b=H.getBroadcastDims(t,s);if(m.length+b.length===0)for(let v=0;v<c.length;++v)c[v]=r(n[v%n.length],o[v%o.length]);else for(let v=0;v<c.length;++v){let w=I.indexToLoc(v,a,l),C=w.slice(-x);m.forEach(T=>C[T]=0);let N=I.locToIndex(C,x,h),_=w.slice(-f);b.forEach(T=>_[T]=0);let E=I.locToIndex(_,f,g);c[v]=r(n[N],o[E])}return[c,s]}}p();p();p();p();function dn(r){let{inputs:e,backend:t}=r,{real:n,imag:o}=e,i=t.data.get(n.dataId).values,s=t.data.get(o.dataId).values,a=t.makeTensorInfo(n.shape,"complex64"),l=t.data.get(a.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(n.shape,"float32",i),imag:t.makeTensorInfo(o.shape,"float32",s)},a}var mE={kernelName:Fl,backendName:"cpu",kernelFunc:dn};function fx(r,e,t="float32"){if(t==="complex64"){let o=fx(r,e,"float32"),i=fx(r,e,"float32");return dn({inputs:{real:o,imag:i},backend:r})}let n=I.makeZerosTypedArray(I.sizeFromShape(e),t);return r.makeTensorInfo(e,t,n)}p();function Bn(r){let{inputs:e,backend:t}=r,{x:n}=e;return t.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}var hE={kernelName:Wi,backendName:"cpu",kernelFunc:Bn};p();function Ai(r){let{inputs:e,backend:t}=r,{input:n}=e,o=t.data.get(n.dataId).complexTensorInfos.real,i=t.data.get(o.dataId).values;return t.makeTensorInfo(o.shape,o.dtype,i)}var dE={kernelName:uu,backendName:"cpu",kernelFunc:Ai};function Di(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{dtype:i}=n;if(i==="complex64"){if(o.dtype==="complex64")return Bn({inputs:{x:o},backend:t});let s=fx(t,o.shape,o.dtype),a=Di({inputs:{x:o},backend:t,attrs:{dtype:"float32"}}),l=dn({inputs:{real:a,imag:s},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let s=Ai({inputs:{input:o},backend:t}),a=Di({inputs:{x:s},backend:t,attrs:{dtype:i}});return t.disposeIntermediateTensorInfo(s),a}if(!I.hasEncodingLoss(o.dtype,i)){let s=Bn({inputs:{x:o},backend:t});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(i==="int32"){let s=t.data.get(o.dataId).values,a=Int32Array.from(s);return t.makeTensorInfo(o.shape,"int32",a)}if(i==="bool"){let s=t.data.get(o.dataId).values,a=I.toTypedArray([0],o.dtype),[l,u]=zt((c,x)=>c!==x?1:0)(o.shape,[],s,a,"bool");return t.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var gE={kernelName:Gi,backendName:"cpu",kernelFunc:Di};function Kt(r,e,t,n){return t==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;Fe([s,a],r);let u=l.data.get(s.dataId).values,c=l.data.get(a.dataId).values,x=n||s.dtype,[f,h]=e(s.shape,a.shape,u,c,x);return l.makeTensorInfo(h,x,f)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let u=Di({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),x=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(x.dataId).values,g=l.data.get(f.dataId).values,m=Di({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(m.dataId),v=b.complexTensorInfos.real,w=b.complexTensorInfos.imag,C=l.data.get(v.dataId).values,N=l.data.get(w.dataId).values,[_,E,T]=t(s.shape,a.shape,h,g,C,N),k=l.makeTensorInfo(T,"float32",_),D=l.makeTensorInfo(T,"float32",E),R=dn({inputs:{real:k,imag:D},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(k),l.disposeIntermediateTensorInfo(D),R}else{let u=l.data.get(s.dataId).values,c=l.data.get(a.dataId).values,x=n||s.dtype,[f,h]=e(s.shape,a.shape,u,c,x);return l.makeTensorInfo(h,x,f)}}}function mx(r){return(e,t,n,o,i,s)=>{let a=H.assertAndGetBroadcastShape(e,t),l=I.sizeFromShape(a),u=a.length,c=I.computeStrides(a),x=I.getTypedArrayFromDType("float32",l),f=I.getTypedArrayFromDType("float32",l),h=H.getBroadcastDims(e,a),g=H.getBroadcastDims(t,a),m=H.mergeRealAndImagArrays(n,o),b=H.mergeRealAndImagArrays(i,s),v=e.length,w=I.computeStrides(e),C=t.length,N=I.computeStrides(t);if(h.length+g.length===0)for(let _=0;_<x.length;_++){let E=_%m.length,T=_%b.length,k=r(m[E*2],m[E*2+1],b[T*2],b[T*2+1]);x[_]=k.real,f[_]=k.imag}else for(let _=0;_<x.length;_++){let E=I.indexToLoc(_,u,c),T=E.slice(-v);h.forEach(M=>T[M]=0);let k=I.locToIndex(T,v,w),D=E.slice(-C);g.forEach(M=>D[M]=0);let R=I.locToIndex(D,C,N),K=r(m[k*2],m[k*2+1],b[R*2],b[R*2+1]);x[_]=K.real,f[_]=K.imag}return[x,f,a]}}var c7=zt((r,e)=>r+e),ZZ=mx((r,e,t,n)=>({real:r+t,imag:e+n})),o2=Kt(xi,c7,ZZ),yE={kernelName:xi,backendName:"cpu",kernelFunc:o2};p();function hx(r,e,t,n,o){let i=I.sizeFromShape(n),s=I.makeZerosTypedArray(o,t);for(let a=0;a<r.length;a++){let l=r[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(i>0?s[l]+=e[a]:s[l]+=1)}return s}function b3(r,e,t,n=!1){let o=r.shape[0],i=r.shape[1],s=it([o,t],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<i;l++){let u=r.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=t||(n?s.set(1,a,u):e.size>0?s.set(s.get(a,u)+e.get(a,l),a,u):s.set(s.get(a,u)+1,a,u))}return s}p();p();function Ri(r){return(e,t,n)=>{let o=I.getTypedArrayFromDType(t,e.length);for(let i=0;i<e.length;++i)o[i]=r(e[i],n);return o}}p();function xt(r,e,t){return({inputs:n,attrs:o,backend:i})=>{let{x:s}=n;if(Fe(s,r),s.dtype==="string"||t==="string")throw new Error("unaryKernelFunc does not support string input/output");let a=i,l=a.data.get(s.dataId).values,u=I.sizeFromShape(s.shape),c=t||s.dtype,x=I.getArrayFromDType(c,u);for(let f=0;f<u;++f)x[f]=e(l[f],o);return a.makeTensorInfo(s.shape,c,x)}}function $i(r,e,t){return({inputs:n,attrs:o,backend:i})=>{let{x:s}=n;if(Fe(s,r),s.dtype==="string"||t==="string")throw new Error("unaryKernelFunc does not support string input/output");let a=i,l=a.data.get(s.dataId).values,u=t||s.dtype,c=e(l,u,o);return a.makeTensorInfo(s.shape,u,c)}}var p7=Ri(r=>Math.ceil(r)),JZ=$i(Ns,p7),bE={kernelName:Ns,backendName:"cpu",kernelFunc:JZ};p();function v3(r,e,t,n){let o=I.getArrayFromDType(t,I.sizeFromShape(e));if(n&&t!=="string"){let i=0;r.forEach(s=>{let a=I.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;r.forEach(s=>{let a=t==="string"?H.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let u=0;u<s.shape[0];++u){let c=u*e[1]+i;for(let x=0;x<s.shape[1];++x)o[c+x]=a[l++]}i+=s.shape[1]})}return o}p();var x7=Ri(r=>Math.exp(r)),f7=$i(As,x7),vE={kernelName:As,backendName:"cpu",kernelFunc:f7};p();var m7=Ri(r=>Math.expm1(r)),QZ=$i(Ds,m7),wE={kernelName:Ds,backendName:"cpu",kernelFunc:QZ};p();var h7=Ri(r=>Math.floor(r)),eJ=$i(Rs,h7),CE={kernelName:Rs,backendName:"cpu",kernelFunc:eJ};p();function w3(r,e,t){let n=it(t,r.dtype);for(let o=0;o<n.size;++o){let s=n.indexToLoc(o).slice(),a=s[0],l=s[2],u=e.locToIndex([a,l]);s[2]=e.values[u];let c=r.locToIndex(s);n.values[o]=r.values[c]}return n}p();var d7=zt((r,e)=>r>e?1:0),tJ=Kt(h2,d7,null,"bool"),NE={kernelName:h2,backendName:"cpu",kernelFunc:tJ};p();var g7=zt((r,e)=>r<e?1:0),rJ=Kt(d2,g7,null,"bool"),_E={kernelName:d2,backendName:"cpu",kernelFunc:rJ};p();function C3(r,e,t){let n=(e-r)/(t-1),o=I.makeZerosTypedArray(t,"float32");o[0]=r;for(let i=1;i<o.length;i++)o[i]=o[i-1]+n;return o}p();var y7=Ri(r=>Math.log(r)),nJ=$i(Ls,y7),SE={kernelName:Ls,backendName:"cpu",kernelFunc:nJ};p();function N3(r,e,t,n){let o=I.getTypedArrayFromDType(n,I.sizeFromShape(t));for(let i=0;i<o.length;++i){let s=i*e,a=r[s];for(let l=0;l<e;++l){let u=r[s+l];u>a&&(a=u)}o[i]=a}return o}p();var b7=zt((r,e)=>Math.max(r,e)),oJ=Kt(Bs,b7),TE={kernelName:Bs,backendName:"cpu",kernelFunc:oJ};p();var v7=zt((r,e)=>Math.min(r,e)),iJ=Kt(Us,v7),IE={kernelName:Us,backendName:"cpu",kernelFunc:iJ};p();var rh=zt((r,e)=>r*e),sJ=mx((r,e,t,n)=>({real:r*t-e*n,imag:r*n+e*t})),nh=Kt(Gs,rh,sJ),kE={kernelName:Gs,backendName:"cpu",kernelFunc:nh};p();function w7(r,e,t){let n=I.createScalarValue(-1,t);return rh([],e,n,r,t)}function aJ(r){let{inputs:e,backend:t}=r,{x:n}=e;Fe(n,"neg");let o=t.data.get(n.dataId).values,[i,s]=w7(o,n.shape,n.dtype);return t.makeTensorInfo(s,n.dtype,i)}var EE={kernelName:b0,backendName:"cpu",kernelFunc:aJ};p();var C7=zt((r,e)=>r!==e?1:0),lJ=Kt(w2,C7,null,"bool"),AE={kernelName:w2,backendName:"cpu",kernelFunc:lJ};p();p();p();function dx(r,e,t,n,o){let i=e.length,s=I.sizeFromShape(e),a=I.computeStrides(e),l=I.computeStrides(o),u=I.getTypedArrayFromDType(t,I.sizeFromShape(o));for(let c=0;c<s;++c){let x=I.indexToLoc(c,i,a),f=new Array(x.length);for(let g=0;g<f.length;g++)f[g]=x[n[g]];let h=I.locToIndex(f,i,l);u[h]=r[c]}return u}function pn(r){let{inputs:e,attrs:t,backend:n}=r,{x:o}=e,{perm:i}=t;Fe(o,"transpose");let s=o.shape.length,a=new Array(s);for(let x=0;x<a.length;x++)a[x]=o.shape[i[x]];let l=n.data.get(o.dataId).values,u=dx(l,o.shape,o.dtype,i,a);return{dataId:n.write(u,a,o.dtype),shape:a,dtype:o.dtype}}var DE={kernelName:F0,backendName:"cpu",kernelFunc:pn};function N7(r,e,t,n){let[o,i]=H.computeOutAndReduceShapes(r,n),s=nn(e,"int32"),a=I.makeZerosTypedArray(I.sizeFromShape(o),s),l=I.sizeFromShape(i);for(let u=0;u<a.length;++u){let c=u*l,x=1;for(let f=0;f<l;++f)x*=t[c+f];a[u]=x}return{outVals:a,outShape:o,outDtype:s}}function uJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;Fe(o,"prod");let a=o.shape.length,l=I.parseAxisParam(i,o.shape),u=H.getAxesPermutation(l,a),c=l,x=o,f=[];u!=null&&(x=pn({inputs:{x:o},backend:t,attrs:{perm:u}}),f.push(x),c=H.getInnerMostAxes(c.length,a));let h=t.data.get(x.dataId).values,{outVals:g,outShape:m,outDtype:b}=N7(x.shape,x.dtype,h,c),v=m;return s&&(v=H.expandShapeToKeepDim(m,l)),f.forEach(w=>t.disposeIntermediateTensorInfo(w)),t.makeTensorInfo(v,b,g)}var RE={kernelName:au,backendName:"cpu",kernelFunc:uJ};p();function _3(r,e,t,n){let o=r===e,i=r<e&&t<0,s=e<r&&t>1;if(o||i||s)return I.makeZerosTypedArray(0,n);let a=Math.abs(Math.ceil((e-r)/t)),l=I.makeZerosTypedArray(a,n);e<r&&t===1&&(t=-1),l[0]=r;for(let u=1;u<l.length;u++)l[u]=l[u-1]+t;return l}p();var _7=Ri(r=>1/Math.sqrt(r)),cJ=$i(Xs,_7),$E={kernelName:Xs,backendName:"cpu",kernelFunc:cJ};p();function S7(r,e,t,n,o){let i=Tn.isSliceContinous(n,e,t),s=I.sizeFromShape(t),a=I.computeStrides(n);if(i){let x=Tn.computeFlatOffset(e,a);return o==="string"?r.slice(x,x+s):r.subarray(x,x+s)}let l=o==="string"?H.fromUint8ToStringArray(r):r,u=it(n,o,l),c=it(t,o);for(let x=0;x<c.size;++x){let f=c.indexToLoc(x),h=f.map((g,m)=>g+e[m]);c.set(u.get(...h),...f)}return o==="string"?H.fromStringArrayToUint8(c.values):c.values}function Oi(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{begin:i,size:s}=n;Fe(o,"slice");let[a,l]=Tn.parseSliceParams(o,i,s);Tn.assertParamsValid(o,a,l);let u=t.data.get(o.dataId).values,c=S7(u,a,l,o.shape,o.dtype);return t.makeTensorInfo(l,o.dtype,c)}var OE={kernelName:A0,backendName:"cpu",kernelFunc:Oi};p();var T7=zt((r,e)=>{let t=r-e;return t*t}),pJ=Kt(na,T7),FE={kernelName:na,backendName:"cpu",kernelFunc:pJ};p();function S3(r,e,t,n){let o=it(r,e.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*t[l]+n[l];o.set(e.get(...a),...s)}return o}p();var I7=zt((r,e)=>r-e),xJ=mx((r,e,t,n)=>({real:r-t,imag:e-n})),oh=Kt(oa,I7,xJ),ME={kernelName:oa,backendName:"cpu",kernelFunc:oh};p();function T3(r,e){let t=new Array(r.rank);for(let o=0;o<t.length;o++)t[o]=r.shape[o]*e[o];let n=it(t,r.dtype);for(let o=0;o<n.values.length;++o){let i=n.indexToLoc(o),s=new Array(r.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%r.shape[l];let a=r.locToIndex(s);n.values[o]=r.values[a]}return n}p();function I3(r,e,t,n,o){let i=e[e.length-1],[s,a]=[r.length/i,i],l=I.getTypedArrayFromDType(t,s*n),u=I.getTypedArrayFromDType("int32",s*n);for(let x=0;x<s;x++){let f=x*a,h=r.subarray(f,f+a),g=[];for(let w=0;w<h.length;w++)g.push({value:h[w],index:w});g.sort((w,C)=>C.value-w.value);let m=x*n,b=l.subarray(m,m+n),v=u.subarray(m,m+n);for(let w=0;w<n;w++)b[w]=g[w].value,v[w]=g[w].index}let c=e.slice();return c[c.length-1]=n,[it(c,t,l),it(c,"int32",u)]}p();function k3(r,e,t,n){let o=I.parseAxisParam(e,t)[0],i=[1,t[0],1];for(let g=0;g<o;g++)i[0]*=t[g];i[1]=t[o];for(let g=o+1;g<t.length;g++)i[2]*=t[g];let s={},a=new Int32Array(t[o]),l=new Jt(i,n,r),u=[],c=i[0]===1&&i[2]===1;for(let g=0;g<t[o];g++){let m;if(c)m=r[g].toString();else{let b=[];for(let v=0;v<i[0];v++)for(let w=0;w<i[2];w++)b.push(l.get(v,g,w));m=b.join(",")}if(s[m]!==void 0)a[g]=s[m];else{let b=Object.keys(s).length;s[m]=b,a[g]=b,u.push(g)}}let x=i.slice();x[1]=Object.keys(s).length;let f=new Jt(x,n);u.forEach((g,m)=>{for(let b=0;b<i[0];b++)for(let v=0;v<i[2];v++)f.set(l.get(b,g,v),b,m,v)});let h=t.slice();return h[o]=x[1],{outputValues:f.values,outputShape:h,indices:a}}p();var E7="3.1.0";xf("cpu",()=>new xx,1);p();p();p();p();var A7=xt(ks,r=>r>=0?r:Math.exp(r)-1),zE={kernelName:ks,backendName:"cpu",kernelFunc:A7};p();function D7(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{alpha:i}=n;Fe([o],"leakyRelu");let s=I.sizeFromShape(o.shape),a=t.data.get(o.dataId).values,l=I.getTypedArrayFromDType("float32",s);for(let u=0;u<a.length;u++)l[u]=a[u]<0?i*a[u]:a[u];return t.makeTensorInfo(o.shape,"float32",l)}var LE={kernelName:p0,backendName:"cpu",kernelFunc:D7};p();var fJ=zt((r,e)=>r<0?e*r:r);function R7(r){let{inputs:e,backend:t}=r,{x:n,alpha:o}=e;Fe([n,o],"prelu");let i=t.data.get(n.dataId).values,s=t.data.get(o.dataId).values,[a,l]=fJ(n.shape,o.shape,i,s,n.dtype);return t.makeTensorInfo(l,n.dtype,a)}var PE={kernelName:_0,backendName:"cpu",kernelFunc:R7};p();var $7=xt(Hs,r=>Math.max(0,r)),BE={kernelName:Hs,backendName:"cpu",kernelFunc:$7};p();var O7=xt(Ks,r=>Math.min(Math.max(0,r),6)),UE={kernelName:Ks,backendName:"cpu",kernelFunc:O7};function gx(r,e,t,n,o){if(t==="linear")return Bn({inputs:{x:e},backend:r});if(t==="relu")return $7({inputs:{x:e},backend:r});if(t==="elu")return A7({inputs:{x:e},backend:r});if(t==="relu6")return O7({inputs:{x:e},backend:r});if(t==="prelu")return R7({inputs:{x:e,alpha:n},backend:r});if(t==="leakyrelu")return D7({inputs:{x:e},backend:r,attrs:{alpha:o}});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}p();p();function Vt(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{shape:i}=n,s=I.sizeFromShape(o.shape),a=I.inferFromImplicitShape(i,s),l=I.sizeFromShape(a);I.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),t.incRef(o.dataId);let u=t.data.get(o.dataId);if(u.complexTensorInfos!=null){let c=u.complexTensorInfos.real,x=u.complexTensorInfos.imag;c.shape=a,x.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}var VE={kernelName:S0,backendName:"cpu",kernelFunc:Vt};function F7(r){let{inputs:e,backend:t,attrs:n}=r,{a:o,b:i}=e,{transposeA:s,transposeB:a}=n;Fe([o,i],"matMul");let l=o.shape.length,u=i.shape.length,c=s?o.shape[l-2]:o.shape[l-1],x=a?i.shape[u-1]:i.shape[u-2],f=s?o.shape[l-1]:o.shape[l-2],h=a?i.shape[u-2]:i.shape[u-1],g=o.shape.slice(0,-2),m=i.shape.slice(0,-2),b=I.sizeFromShape(g),v=I.sizeFromShape(m),w=b===v||b===1||v===1;I.assert(l>=2&&u>=2&&w,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${g}) and (${m}).`);let N=(b>v?o.shape.slice(0,-2):i.shape.slice(0,-2)).concat([f,h]);I.assert(c===x,()=>`Error in matMul: inner shapes (${c}) and (${x}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${a} must match.`);let _=s?[b,c,f]:[b,f,c],E=a?[v,h,x]:[v,x,h],T=Vt({inputs:{x:o},backend:t,attrs:{shape:_}}),k=Vt({inputs:{x:i},backend:t,attrs:{shape:E}}),D=s?T.shape[1]:T.shape[2],R=s?T.shape[2]:T.shape[1],K=a?k.shape[1]:k.shape[2],M=Math.max(b,v),j=t.data.get(T.dataId).values,X=t.data.get(k.dataId).values,Z=I.computeStrides(T.shape),Y=I.computeStrides(k.shape),[ce,Q,J]=s?[Z[0],1,Z[1]]:[Z[0],Z[1],1],[te,ae,ge]=a?[1,Y[1],Y[0]]:[Y[1],1,Y[0]],le=R*K,xe=it([M,R,K],T.dtype),me=xe.values,ve=t.blockSize;for(let Te=0;Te<M;Te++)for(let De=0;De<R;De+=ve)for(let Ae=0;Ae<K;Ae+=ve)for(let _e=0;_e<D;_e+=ve){let Ke=Math.min(De+ve,R),Xe=Math.min(Ae+ve,K),qe=Math.min(_e+ve,D);for(let tt=De;tt<Ke;tt++)for(let et=Ae;et<Xe;et++){let rt=0;for(let oe=_e;oe<qe;oe++){let he=Math.min(Te,b-1)*ce,Ne=Math.min(Te,v-1)*ge,ye=j[he+tt*Q+oe*J],Ue=X[oe*te+et*ae+Ne];rt+=ye*Ue}me[Te*le+(tt*K+et)]+=rt}}return t.disposeIntermediateTensorInfo(T),t.disposeIntermediateTensorInfo(k),t.makeTensorInfo(N,xe.dtype,xe.values)}var GE={kernelName:Ja,backendName:"cpu",kernelFunc:F7};function mJ(r){let{inputs:e,backend:t,attrs:n}=r,{a:o,b:i,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:x}=n,f,h,g,m=[];f=F7({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:u},backend:t}),s&&(h=o2({inputs:{a:f,b:s},backend:t}),m.push(f),f=h),c&&(g=gx(t,f,c,a,x),m.push(f),f=g);for(let v of m)t.disposeIntermediateTensorInfo(v);return f}var WE={kernelName:C2,backendName:"cpu",kernelFunc:mJ};p();var hJ=xt(ds,r=>Math.acos(r)),qE={kernelName:ds,backendName:"cpu",kernelFunc:hJ};p();var dJ=xt(gs,r=>Math.acosh(r)),HE={kernelName:gs,backendName:"cpu",kernelFunc:dJ};p();function gJ(r){let{inputs:e,backend:t}=r,n=e;Fe(e,"addN");let o=n.map(a=>t.data.get(a.dataId).values),i=it(n[0].shape,n[0].dtype),s=i.values;for(let a=0;a<n.length;a++){let l=o[a];for(let u=0;u<s.length;u++)s[u]+=l[u]}return t.makeTensorInfo(i.shape,i.dtype,i.values)}var KE={kernelName:Ka,backendName:"cpu",kernelFunc:gJ};p();function yJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;Fe(o,"all");let a=I.parseAxisParam(i,o.shape),l=a,u=H.getAxesPermutation(l,o.shape.length),c=o;u!=null&&(c=pn({inputs:{x:o},backend:t,attrs:{perm:u}}),l=H.getInnerMostAxes(l.length,o.shape.length)),H.assertAxesAreInnerMostDims("all",l,c.shape.length);let[x,f]=H.computeOutAndReduceShapes(c.shape,l),h=I.sizeFromShape(f),g=I.makeZerosTypedArray(I.sizeFromShape(x),c.dtype),m=t.data.get(c.dataId).values;for(let v=0;v<g.length;++v){let w=v*h,C=m[w];for(let N=0;N<h;++N){let _=m[w+N];C=C&&_}g[v]=C}u!=null&&t.disposeIntermediateTensorInfo(c);let b=t.makeTensorInfo(x,c.dtype,g);if(s){let v=H.expandShapeToKeepDim(x,a),w=Vt({inputs:{x:b},backend:t,attrs:{shape:v}});return t.disposeIntermediateTensorInfo(b),w}return b}var jE={kernelName:Al,backendName:"cpu",kernelFunc:yJ};p();function bJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;Fe(o,"any");let a=I.parseAxisParam(i,o.shape),l=a,u=H.getAxesPermutation(l,o.shape.length),c=o;u!=null&&(c=pn({inputs:{x:o},backend:t,attrs:{perm:u}}),l=H.getInnerMostAxes(l.length,o.shape.length)),H.assertAxesAreInnerMostDims("any",l,c.shape.length);let[x,f]=H.computeOutAndReduceShapes(c.shape,l),h=I.sizeFromShape(f),g=I.makeZerosTypedArray(I.sizeFromShape(x),c.dtype),m=t.data.get(c.dataId).values;for(let v=0;v<g.length;++v){let w=v*h,C=m[w];for(let N=0;N<h;++N){let _=m[w+N];C=C||_}g[v]=C}u!=null&&t.disposeIntermediateTensorInfo(c);let b=t.makeTensorInfo(x,c.dtype,g);if(s){let v=H.expandShapeToKeepDim(x,a),w=Vt({inputs:{x:b},backend:t,attrs:{shape:v}});return t.disposeIntermediateTensorInfo(b),w}return b}var XE={kernelName:Dl,backendName:"cpu",kernelFunc:bJ};p();function vJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i}=n;Fe(o,"argMax");let s=I.parseAxisParam(i,o.shape),a=H.getAxesPermutation(s,o.shape.length),l=o,u=[];a!=null&&(l=pn({inputs:{x:o},backend:t,attrs:{perm:a}}),u.push(l),s=H.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],H.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[c,x]=H.computeOutAndReduceShapes(l.shape,s),f=I.sizeFromShape(c),h=I.makeZerosTypedArray(f,"int32"),g=I.sizeFromShape(x),m=t.data.get(l.dataId).values;for(let b=0;b<h.length;++b){let v=b*g,w=m[v],C=0;for(let N=0;N<g;++N){let _=m[v+N];_>w&&(w=_,C=N)}h[b]=C}return u.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(c,"int32",h)}var YE={kernelName:ja,backendName:"cpu",kernelFunc:vJ};p();function wJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i}=n;Fe(o,"argMin");let s=I.parseAxisParam(i,o.shape),a=H.getAxesPermutation(s,o.shape.length),l=o,u=[];a!=null&&(l=pn({inputs:{x:o},backend:t,attrs:{perm:a}}),u.push(l),s=H.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],H.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[c,x]=H.computeOutAndReduceShapes(l.shape,s),f=I.sizeFromShape(c),h=I.makeZerosTypedArray(f,"int32"),g=I.sizeFromShape(x),m=t.data.get(l.dataId).values;for(let b=0;b<h.length;++b){let v=b*g,w=m[v],C=0;for(let N=0;N<g;++N){let _=m[v+N];_<w&&(w=_,C=N)}h[b]=C}return u.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(c,"int32",h)}var ZE={kernelName:Xa,backendName:"cpu",kernelFunc:wJ};p();var CJ=xt(ys,r=>Math.asin(r)),JE={kernelName:ys,backendName:"cpu",kernelFunc:CJ};p();var NJ=xt(bs,r=>Math.asinh(r)),QE={kernelName:bs,backendName:"cpu",kernelFunc:NJ};p();var _J=xt(vs,r=>Math.atan(r)),eA={kernelName:vs,backendName:"cpu",kernelFunc:_J};p();var SJ=zt((r,e)=>Math.atan2(r,e)),TJ=Kt(Cs,SJ),tA={kernelName:Cs,backendName:"cpu",kernelFunc:TJ};p();var IJ=xt(ws,r=>Math.atanh(r)),rA={kernelName:ws,backendName:"cpu",kernelFunc:IJ};p();p();function yx(r,e,t,n,o,i){let s=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,x=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=it(o.outShape,t),b=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],w=o.outShape[2]*o.outShape[3],C=o.outShape[3];for(let N=0;N<o.batchSize;++N){let _=N*v,E=N*n[0];for(let T=0;T<o.inChannels;++T)for(let k=0;k<o.outHeight;++k){let D=k*s-f,R=Math.max(0,D),K=Math.min(o.inHeight,c+D),M=_+k*w;for(let j=0;j<o.outWidth;++j){let X=j*a-h,Z=Math.max(0,X),Y=Math.min(o.inWidth,x+X),ce=g,Q=0,J=0;for(let ae=R;ae<K;ae+=l){let ge=E+ae*n[1];for(let le=Z;le<Y;le+=u){let xe=ge+le*n[2],me=r[xe+T];i==="max"&&me>ce?ce=me:i==="avg"&&(Q+=me,J++)}if(isNaN(ce))break}let te=M+j*C+T;b[te]=i==="avg"?Q/J:ce}}}return m}function E3(r,e,t,n,o=!1,i=!1){let s=it(n.outShape,"int32"),a=n.strideHeight,l=n.strideWidth,u=n.dilationHeight,c=n.dilationWidth,x=n.effectiveFilterHeight,f=n.effectiveFilterWidth,h=n.padInfo.top,g=n.padInfo.left,m=it(e,t,r);for(let b=0;b<n.batchSize;++b)for(let v=0;v<n.inChannels;++v)for(let w=0;w<n.outHeight;++w){let C=w*a-h,N=C;for(;N<0;)N+=u;let _=Math.min(n.inHeight,x+C);for(let E=0;E<n.outWidth;++E){let T=E*l-g,k=T;for(;k<0;)k+=c;let D=Math.min(n.inWidth,f+T),R=Number.NEGATIVE_INFINITY,K=-1;for(let M=N;M<_;M+=u){let j=M-C;for(let X=k;X<D;X+=c){let Z=X-T,Y=m.get(b,M,X,v);Y>R&&(R=Y,o?K=i?((b*n.inHeight+M)*n.inWidth+X)*n.inChannels+v:(M*n.inWidth+X)*n.inChannels+v:K=j*f+Z)}}s.set(K,b,w,E,v)}}return s}function A3(r,e,t,n,o,i){let s=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,x=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,g=o.effectiveFilterWidth,m=o.padInfo.front,b=o.padInfo.top,v=o.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=it(o.outShape,t),N=C.values,_=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],E=o.outShape[2]*o.outShape[3]*o.outShape[4],T=o.outShape[3]*o.outShape[4],k=o.outShape[4];for(let D=0;D<o.batchSize;++D){let R=D*_,K=D*n[0];for(let M=0;M<o.inChannels;++M)for(let j=0;j<o.outDepth;++j){let X=j*s-m,Z=X;for(;Z<0;)Z+=u;let Y=Math.min(o.inDepth,f+X),ce=R+j*E;for(let Q=0;Q<o.outHeight;++Q){let J=Q*a-b,te=J;for(;te<0;)te+=c;let ae=Math.min(o.inHeight,h+J),ge=ce+Q*T;for(let le=0;le<o.outWidth;++le){let xe=le*l-v,me=xe;for(;me<0;)me+=x;let ve=Math.min(o.inWidth,g+xe),Te=ge+le*k,De=w,Ae=0,_e=0;for(let Xe=Z;Xe<Y;Xe+=u){let qe=K+Xe*n[1];for(let tt=te;tt<ae;tt+=c){let et=qe+tt*n[2];for(let rt=me;rt<ve;rt+=x){let oe=et+rt*n[3],he=r[oe+M];if(i==="max"&&he>De?De=he:i==="avg"&&(Ae+=he,_e++),isNaN(De))break}if(isNaN(De))break}if(isNaN(De))break}let Ke=Te+M;N[Ke]=i==="avg"?Ae/_e:De}}}}return C}function nA(r,e){let t=it(e.outShape,"int32"),n=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,x=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,g=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let b=0;b<e.inChannels;++b)for(let v=0;v<e.outDepth;++v){let w=v*n-f,C=w;for(;C<0;)C+=s;let N=Math.min(e.inDepth,u+w);for(let _=0;_<e.outHeight;++_){let E=_*o-h,T=E;for(;T<0;)T+=a;let k=Math.min(e.inHeight,c+E);for(let D=0;D<e.outWidth;++D){let R=D*i-g,K=R;for(;K<0;)K+=l;let M=Math.min(e.inWidth,x+R),j=Number.NEGATIVE_INFINITY,X=-1;for(let Z=C;Z<N;Z+=s){let Y=Z-w;for(let ce=T;ce<k;ce+=a){let Q=ce-E;for(let J=K;J<M;J+=l){let te=J-R,ae=r.get(m,Z,ce,J,b);ae>=j&&(j=ae,X=Y*c*x+Q*c+te)}}}t.set(X,m,v,_,D,b)}}}return t}function kJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e;Fe(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n,u=1;I.assert(H.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=H.computePool2DInfo(o.shape,i,s,u,a,l),x;if(c.filterWidth===1&&c.filterHeight===1&&I.arraysEqual(c.inShape,c.outShape))x=Bn({inputs:{x:o},backend:t});else{let f=t.data.get(o.dataId).values,h=I.computeStrides(o.shape),g=yx(f,o.shape,o.dtype,h,c,"avg");x=t.makeTensorInfo(c.outShape,o.dtype,g.values)}return x}var oA={kernelName:Ya,backendName:"cpu",kernelFunc:kJ};p();function EJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=n;Fe(o,"avgPool3d");let c=H.computePool3DInfo(o.shape,i,s,1,a,l,u),x=t.data.get(o.dataId).values,f=A3(x,o.shape,o.dtype,I.computeStrides(o.shape),c,"avg");return t.makeTensorInfo(f.shape,"float32",f.values)}var iA={kernelName:Za,backendName:"cpu",kernelFunc:EJ};p();function AJ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;Fe([o,i],"avgPool3DGrad");let c=H.computePool3DInfo(i.shape,s,a,1,l,u),x=c.strideDepth,f=c.strideHeight,h=c.strideWidth,g=c.filterDepth,m=c.filterHeight,b=c.filterWidth,v=c.dilationDepth,w=c.dilationHeight,C=c.dilationWidth,N=c.effectiveFilterDepth,_=c.effectiveFilterHeight,E=c.effectiveFilterWidth,T=N-1-c.padInfo.front,k=E-1-c.padInfo.left,D=_-1-c.padInfo.top,R=it(i.shape,"float32"),K=1/(g*m*b),M=t.bufferSync(o);for(let j=0;j<c.batchSize;++j)for(let X=0;X<c.inChannels;++X)for(let Z=0;Z<c.inDepth;++Z)for(let Y=0;Y<c.inHeight;++Y)for(let ce=0;ce<c.inWidth;++ce){let Q=Z-T,J=Y-D,te=ce-k,ae=0;for(let ge=0;ge<N;ge+=v){let le=(Q+ge)/x;if(!(le<0||le>=c.outDepth||Math.floor(le)!==le))for(let xe=0;xe<_;xe+=w){let me=(J+xe)/f;if(!(me<0||me>=c.outHeight||Math.floor(me)!==me))for(let ve=0;ve<E;ve+=C){let Te=(te+ve)/h;if(Te<0||Te>=c.outWidth||Math.floor(Te)!==Te)continue;ae+=M.get(j,le,me,Te,X)}}}R.set(ae*K,j,Z,Y,ce,X)}return t.makeTensorInfo(R.shape,R.dtype,R.values)}var sA={kernelName:$l,backendName:"cpu",kernelFunc:AJ};p();function DJ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,s=i;Fe([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:u}=n,c=H.computePool2DInfo(s.shape,a,l,1,u),x=c.strideHeight,f=c.strideWidth,h=c.filterHeight,g=c.filterWidth,m=c.dilationHeight,b=c.dilationWidth,v=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=w-1-c.padInfo.left,N=v-1-c.padInfo.top,_=it(s.shape,"float32"),E=1/(h*g),T=t.data.get(o.dataId).values,k=it(o.shape,"float32",T);for(let D=0;D<c.batchSize;++D)for(let R=0;R<c.inChannels;++R)for(let K=0;K<c.inHeight;++K)for(let M=0;M<c.inWidth;++M){let j=K-N,X=M-C,Z=0;for(let Y=0;Y<v;Y+=m){let ce=(j+Y)/x;if(!(ce<0||ce>=c.outHeight||Math.floor(ce)!==ce))for(let Q=0;Q<w;Q+=b){let J=(X+Q)/f;if(J<0||J>=c.outWidth||Math.floor(J)!==J)continue;Z+=k.get(D,ce,J,R)}}_.set(Z*E,D,K,M,R)}return t.makeTensorInfo(_.shape,_.dtype,_.values)}var aA={kernelName:Rl,backendName:"cpu",kernelFunc:DJ};p();function RJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,scale:i,offset:s,mean:a,variance:l}=e;I.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I.assert(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Fe([o,a,l,i,s],"batchNorm");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=t.data.get(o.dataId).values,x=t.data.get(a.dataId).values,f=t.data.get(l.dataId).values,h=i?t.data.get(i.dataId).values:new Float32Array([1]),g=s?t.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),b=g.length,v=h.length,w=f.length,C=x.length,N=0,_=0,E=0,T=0;for(let k=0;k<c.length;++k)m[k]=g[N++]+(c[k]-x[_++])*h[E++]/Math.sqrt(f[T++]+u),N>=b&&(N=0),_>=C&&(_=0),E>=v&&(E=0),T>=w&&(T=0);return t.makeTensorInfo(o.shape,o.dtype,m)}var lA={kernelName:u0,backendName:"cpu",kernelFunc:RJ};p();function $J(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockShape:i,crops:s}=n;Fe([o],"batchToSpaceND");let a=i.reduce((v,w)=>v*w),l=H.getReshaped(o.shape,i,a),u=H.getPermuted(l.length,i.length),c=H.getReshapedPermuted(o.shape,i,a),x=H.getSliceBeginCoords(s,i.length),f=H.getSliceSize(c,s,i.length),h=Vt({inputs:{x:o},backend:t,attrs:{shape:l}}),g=pn({inputs:{x:h},backend:t,attrs:{perm:u}}),m=Vt({inputs:{x:g},backend:t,attrs:{shape:c}}),b=Oi({inputs:{x:m},backend:t,attrs:{begin:x,size:f}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),b}var uA={kernelName:Qa,backendName:"cpu",kernelFunc:$J};p();function OJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,weights:i}=e,{size:s}=n,a=t.data.get(o.dataId).values,l=t.data.get(i.dataId).values,u=hx(a,l,i.dtype,i.shape,s);return t.makeTensorInfo([s],i.dtype,u)}var cA={kernelName:Ol,backendName:"cpu",kernelFunc:OJ};p();var FJ=xt(_s,(r,e)=>{let t=e;return r>t.clipValueMax?t.clipValueMax:r<t.clipValueMin?t.clipValueMin:r}),pA={kernelName:_s,backendName:"cpu",kernelFunc:FJ};p();var MJ=r=>{let{x:e}=r.inputs,t=r.backend,n=new Float32Array(I.sizeFromShape(e.shape)),o=t.data.get(e.dataId),i=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values;for(let u=0;u<a.length;u++){let c=a[u],x=l[u];n[u]=Math.hypot(c,x)}return t.makeOutput(n,e.shape,"float32")},xA={kernelName:e0,backendName:"cpu",kernelFunc:MJ};p();p();function Aa(r){let{inputs:e,backend:t}=r,{input:n}=e,o=t.data.get(n.dataId).complexTensorInfos.imag,i=t.data.get(o.dataId).values;return t.makeTensorInfo(o.shape,o.dtype,i)}var fA={kernelName:Zl,backendName:"cpu",kernelFunc:Aa};function pl(r){let{inputs:e,backend:t,attrs:n}=r,{axis:o}=n,i=I.parseAxisParam(o,e[0].shape)[0],s=H.computeOutShape(e.map(m=>m.shape),i);if(I.sizeFromShape(s)===0)return t.makeTensorInfo(s,e[0].dtype,[]);let a=e.filter(m=>I.sizeFromShape(m.shape)>0);if(a.length===1)return Bn({inputs:{x:a[0]},backend:t});let l=a.map(m=>m.shape);if(H.assertParamsConsistent(l,i),a[0].dtype==="complex64"){let m=a.map(N=>Ai({inputs:{input:N},backend:t})),b=a.map(N=>Aa({inputs:{input:N},backend:t})),v=pl({inputs:m,backend:t,attrs:{axis:i}}),w=pl({inputs:b,backend:t,attrs:{axis:i}}),C=dn({inputs:{real:v,imag:w},backend:t});return m.forEach(N=>t.disposeIntermediateTensorInfo(N)),b.forEach(N=>t.disposeIntermediateTensorInfo(N)),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(w),C}let u=a.map(m=>{let b=I.sizeFromShape(m.shape.slice(i));return Vt({inputs:{x:m},backend:t,attrs:{shape:[-1,b]}})}),c=u.map(m=>({vals:t.data.get(m.dataId).values,shape:m.shape}));s=H.computeOutShape(u.map(m=>m.shape),1);let x=u[0].shape[0]===1,f=v3(c,s,e[0].dtype,x),h=H.computeOutShape(a.map(m=>m.shape),i),g=t.makeTensorInfo(h,e[0].dtype,f);return u.forEach(m=>t.disposeIntermediateTensorInfo(m)),g}var mA={kernelName:t0,backendName:"cpu",kernelFunc:pl};p();function M7(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=n;Fe([o,i],"conv2d");let x=H.convertConv2DDataFormat(l),f=H.computeConv2DInfo(o.shape,i.shape,s,u,a,c,!1,x),h=f.filterHeight,g=f.filterWidth,m=f.dilationHeight,b=f.dilationWidth,v=f.padInfo.left,w=f.padInfo.top,C=f.dataFormat==="channelsLast",N=new Jt(f.outShape,o.dtype),_=I.computeStrides(o.shape),E=I.computeStrides(i.shape),T=_[0],k=C?_[1]:_[2],D=C?_[2]:1,R=C?1:_[1],K=N.strides[0],M=C?N.strides[1]:N.strides[2],j=C?N.strides[2]:1,X=C?1:N.strides[1],Z=t.data.get(o.dataId).values,Y=t.data.get(i.dataId).values,ce=N.values;for(let Q=0;Q<f.batchSize;++Q){let J=Q*T,te=Q*K;for(let ae=0;ae<f.outHeight;++ae){let ge=te+ae*M,le=ae*f.strideHeight-w;for(let xe=0;xe<h;++xe){let me=le+xe*m;if(me<0||me>=f.inHeight)continue;let ve=xe*E[0],Te=J+me*k;for(let De=0;De<f.outWidth;++De){let Ae=ge+De*j,_e=De*f.strideWidth-v;for(let Ke=0;Ke<g;++Ke){let Xe=_e+Ke*b;if(Xe<0||Xe>=f.inWidth)continue;let qe=ve+Ke*E[1],tt=Te+Xe*D,et=qe;for(let rt=0;rt<f.inChannels;++rt){let oe=Z[tt+rt*R];for(let he=0;he<f.outChannels;++he)ce[Ae+he*X]+=oe*Y[et+he];et+=f.outChannels}}}}}}return t.makeTensorInfo(N.shape,N.dtype,ce)}var hA={kernelName:r0,backendName:"cpu",kernelFunc:M7};p();function zJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=n;Fe([o,i],"conv2dBackpropFilter");let x=H.convertConv2DDataFormat(l),f=H.computeConv2DInfo(o.shape,c,s,1,a,u,!1,x),{strideHeight:h,strideWidth:g,filterHeight:m,filterWidth:b}=f,v=f.dataFormat==="channelsLast",w=new Jt(f.filterShape,"float32"),C=f.padInfo.left,N=f.padInfo.top,_=t.data.get(o.dataId).values,E=t.data.get(i.dataId).values,T=new Jt(o.shape,o.dtype,_),k=new Jt(i.shape,i.dtype,E);for(let D=0;D<m;++D){let R=Math.max(0,Math.ceil((N-D)/h)),K=Math.min(f.outHeight,(f.inHeight+N-D)/h);for(let M=0;M<b;++M){let j=Math.max(0,Math.ceil((C-M)/g)),X=Math.min(f.outWidth,(f.inWidth+C-M)/g);for(let Z=0;Z<f.inChannels;++Z)for(let Y=0;Y<f.outChannels;++Y){let ce=0;for(let Q=0;Q<f.batchSize;++Q)for(let J=R;J<K;++J){let te=D+J*h-N;for(let ae=j;ae<X;++ae){let ge=M+ae*g-C;v?ce+=T.get(Q,te,ge,Z)*k.get(Q,J,ae,Y):ce+=T.get(Q,Z,te,ge)*k.get(Q,Y,J,ae)}}w.set(ce,D,M,Z,Y)}}}return t.makeTensorInfo(w.shape,w.dtype,w.values)}var dA={kernelName:Ml,backendName:"cpu",kernelFunc:zJ};p();function LJ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{inputShape:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=n;Fe([o,i],"conv2dBackpropInput");let x=I.computeStrides(i.shape),f=I.computeStrides(o.shape),h=H.convertConv2DDataFormat(u),g=H.computeConv2DInfo(s,i.shape,a,1,l,c,!1,h),m=new Jt(g.inShape,"float32"),b=m.values,v=t.data.get(o.dataId).values,w=t.data.get(i.dataId).values,[C,N,_]=x,{batchSize:E,filterHeight:T,filterWidth:k,inChannels:D,inHeight:R,inWidth:K,outChannels:M,outHeight:j,outWidth:X,strideHeight:Z,strideWidth:Y}=g;h=g.dataFormat;let ce=T-1-g.padInfo.top,Q=k-1-g.padInfo.left,J=h==="channelsLast",te=m.strides[0],ae=J?m.strides[1]:m.strides[2],ge=J?m.strides[2]:1,le=J?1:m.strides[1],xe=f[0],me=J?f[1]:f[2],ve=J?f[2]:1,Te=J?1:f[1];for(let De=0;De<E;++De)for(let Ae=0;Ae<D;++Ae)for(let _e=0;_e<R;++_e){let Ke=_e-ce,Xe=Math.max(0,Math.ceil(Ke/Z)),qe=Math.min(j,(T+Ke)/Z);for(let tt=0;tt<K;++tt){let et=tt-Q,rt=Math.max(0,Math.ceil(et/Y)),oe=Math.min(X,(k+et)/Y),he=0;for(let ye=Xe;ye<qe;++ye){let Ue=ye*Z-Ke;for(let Ze=rt;Ze<oe;++Ze){let ot=Ze*Y-et,je=xe*De+me*ye+ve*Ze,Je=C*(T-1-Ue)+N*(k-1-ot)+_*Ae;for(let ut=0;ut<M;++ut){let hr=v[je+Te*ut],tr=w[Je+ut];he+=hr*tr}}}let Ne=te*De+ae*_e+ge*tt+le*Ae;b[Ne]=he}}return t.makeTensorInfo(m.shape,m.dtype,m.values)}var gA={kernelName:n0,backendName:"cpu",kernelFunc:LJ};p();function PJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=n;Fe([o,i],"conv3d");let u=H.computeConv3DInfo(o.shape,i.shape,s,l,a),{filterDepth:c,filterHeight:x,filterWidth:f,dilationDepth:h,dilationHeight:g,dilationWidth:m,padInfo:b}=u,v=b.front,w=b.left,C=b.top,N=new Jt(u.outShape,o.dtype),_=t.data.get(o.dataId).values,E=t.data.get(i.dataId).values,T=N.values,k=I.computeStrides(o.shape),D=I.computeStrides(i.shape);for(let R=0;R<u.batchSize;++R){let K=R*k[0],M=R*N.strides[0];for(let j=0;j<u.outDepth;++j){let X=M+j*N.strides[1],Z=j*u.strideDepth-v;for(let Y=0;Y<c;++Y){let ce=Z+Y*h;if(ce<0||ce>=u.inDepth)continue;let Q=Y*D[0],J=K+ce*k[1];for(let te=0;te<u.outHeight;++te){let ae=X+te*N.strides[2],ge=te*u.strideHeight-C;for(let le=0;le<x;++le){let xe=ge+le*g;if(xe<0||xe>=u.inHeight)continue;let me=Q+le*D[1],ve=J+xe*k[2];for(let Te=0;Te<u.outWidth;++Te){let De=ae+Te*u.outChannels,Ae=Te*u.strideWidth-w;for(let _e=0;_e<f;++_e){let Ke=Ae+_e*m;if(Ke<0||Ke>=u.inWidth)continue;let Xe=me+_e*D[2],qe=ve+Ke*u.inChannels,tt=Xe;for(let et=0;et<u.inChannels;++et){let rt=_[qe+et];for(let oe=0;oe<u.outChannels;++oe)T[De+oe]+=rt*E[tt+oe];tt+=u.outChannels}}}}}}}}return t.makeTensorInfo(N.shape,N.dtype,N.values)}var yA={kernelName:o0,backendName:"cpu",kernelFunc:PJ};p();function BJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,pad:a,filterShape:l}=n;Fe([o,i],"conv3dBackpropFilterV2");let u=I.computeStrides(o.shape),c=I.computeStrides(i.shape),x=H.computeConv3DInfo(o.shape,l,s,1,a),f=x.strideDepth,h=x.strideHeight,g=x.strideWidth,m=x.filterDepth,b=x.filterHeight,v=x.filterWidth,w=new Jt(x.filterShape,"float32"),C=w.values,[N,_,E,T]=w.strides,k=t.data.get(i.dataId).values,[D,R,K,M]=c,j=t.data.get(o.dataId).values,[X,Z,Y,ce]=u,Q=x.padInfo.front,J=x.padInfo.left,te=x.padInfo.top;for(let ae=0;ae<m;++ae){let ge=Math.max(0,Math.ceil((Q-ae)/f)),le=Math.min(x.outDepth,(x.inDepth+Q-ae)/f),xe=ae*N;for(let me=0;me<b;++me){let ve=Math.max(0,Math.ceil((te-me)/h)),Te=Math.min(x.outHeight,(x.inHeight+te-me)/h),De=me*_+xe;for(let Ae=0;Ae<v;++Ae){let _e=Math.max(0,Math.ceil((J-Ae)/g)),Ke=Math.min(x.outWidth,(x.inWidth+J-Ae)/g),Xe=Ae*E+De;for(let qe=0;qe<x.inChannels;++qe){let tt=qe*T+Xe;for(let et=0;et<x.outChannels;++et){let rt=0;for(let oe=0;oe<x.batchSize;++oe){let he=oe*X,Ne=oe*D;for(let ye=ge;ye<le;++ye){let Ze=(ae+ye*f-Q)*Z+he,ot=ye*R+Ne;for(let je=ve;je<Te;++je){let ut=(me+je*h-te)*Y+Ze,hr=je*K+ot;for(let tr=_e;tr<Ke;++tr){let ai=(Ae+tr*g-J)*ce+ut,ps=tr*M+hr;rt+=j[ai+qe]*k[ps+et]}}}}C[tt+et]=rt}}}}}return t.makeTensorInfo(w.shape,w.dtype,w.values)}var bA={kernelName:zl,backendName:"cpu",kernelFunc:BJ};p();function UJ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{pad:s,strides:a,inputShape:l}=n;Fe([o],"conv3dBackpropInputV2");let u=I.computeStrides(o.shape),c=I.computeStrides(i.shape),x=H.computeConv3DInfo(l,i.shape,a,1,s),f=new Jt(x.inShape,"float32"),h=f.values,[g,m,b,v]=f.strides,w=t.data.get(o.dataId).values,[C,N,_,E]=u,T=t.data.get(i.dataId).values,[k,D,R,K]=c,{batchSize:M,filterDepth:j,filterHeight:X,filterWidth:Z,inChannels:Y,inDepth:ce,inHeight:Q,inWidth:J,outChannels:te,outDepth:ae,outHeight:ge,outWidth:le,strideDepth:xe,strideHeight:me,strideWidth:ve}=x,Te=j-1-x.padInfo.front,De=X-1-x.padInfo.top,Ae=Z-1-x.padInfo.left;for(let _e=0;_e<M;++_e)for(let Ke=0;Ke<Y;++Ke)for(let Xe=0;Xe<ce;++Xe){let qe=Xe-Te,tt=Math.max(0,Math.ceil(qe/xe)),et=Math.min(ae,(j+qe)/xe);for(let rt=0;rt<Q;++rt){let oe=rt-De,he=Math.max(0,Math.ceil(oe/me)),Ne=Math.min(ge,(X+oe)/me);for(let ye=0;ye<J;++ye){let Ue=ye-Ae,Ze=Math.max(0,Math.ceil(Ue/ve)),ot=Math.min(le,(Z+Ue)/ve),je=0;for(let Je=tt;Je<et;++Je){let ut=Je*xe-qe;for(let hr=he;hr<Ne;++hr){let tr=hr*me-oe;for(let xn=Ze;xn<ot;++xn){let ai=xn*ve-Ue,ps=C*_e+N*Je+_*hr+E*xn,wl=k*(j-1-ut)+D*(X-1-tr)+R*(Z-1-ai)+K*Ke;for(let xs=0;xs<te;++xs){let zi=w[ps+xs],Ba=T[wl+xs];je+=zi*Ba}}}}h[g*_e+m*Xe+b*rt+v*ye+Ke]=je}}}return t.makeTensorInfo(f.shape,f.dtype,f.values)}var vA={kernelName:Ll,backendName:"cpu",kernelFunc:UJ};p();var VJ=xt(Ss,r=>Math.cos(r)),wA={kernelName:Ss,backendName:"cpu",kernelFunc:VJ};p();var GJ=xt(Ts,r=>Math.cosh(r)),CA={kernelName:Ts,backendName:"cpu",kernelFunc:GJ};p();function WJ(r){let{inputs:e,backend:t,attrs:n}=r,{image:o,boxes:i,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:u}=n,[c,x,f,h]=o.shape,g=i.shape[0],[m,b]=a,v=it([g,m,b,h],"float32"),w=t.data.get(i.dataId).values,C=t.data.get(s.dataId).values,N=t.data.get(o.dataId).values,_=I.computeStrides(o.shape),E=I.computeStrides(v.shape);for(let T=0;T<g;T++){let k=T*4,D=w[k],R=w[k+1],K=w[k+2],M=w[k+3],j=C[T];if(j>=c)continue;let X=m>1?(K-D)*(x-1)/(m-1):0,Z=b>1?(M-R)*(f-1)/(b-1):0;for(let Y=0;Y<m;Y++){let ce=m>1?D*(x-1)+Y*X:.5*(D+K)*(x-1);if(ce<0||ce>x-1){for(let Q=0;Q<b;Q++)for(let J=0;J<h;J++){let te=J+Q*E[2]+Y*E[1]+T*E[0];v.values[te]=u}continue}if(l==="bilinear"){let Q=Math.floor(ce),J=Math.ceil(ce),te=ce-Q;for(let ae=0;ae<b;ae++){let ge=b>1?R*(f-1)+ae*Z:.5*(R+M)*(f-1);if(ge<0||ge>f-1){for(let ve=0;ve<h;ve++){let Te=ve+ae*E[2]+Y*E[1]+T*E[0];v.values[Te]=u}continue}let le=Math.floor(ge),xe=Math.ceil(ge),me=ge-le;for(let ve=0;ve<h;ve++){let Te=ve+le*_[2]+Q*_[1]+j*_[0],De=N[Te];Te=ve+xe*_[2]+Q*_[1]+j*_[0];let Ae=N[Te];Te=ve+le*_[2]+J*_[1]+j*_[0];let _e=N[Te];Te=ve+xe*_[2]+J*_[1]+j*_[0];let Ke=N[Te],Xe=De+(Ae-De)*me,qe=_e+(Ke-_e)*me;Te=ve+ae*E[2]+Y*E[1]+T*E[0],v.values[Te]=Xe+(qe-Xe)*te}}}else for(let Q=0;Q<b;++Q){let J=b>1?R*(f-1)+Q*Z:.5*(R+M)*(f-1);if(J<0||J>f-1){for(let ge=0;ge<h;ge++){let le=ge+Q*E[2]+Y*E[1]+T*E[0];v.values[le]=u}continue}let te=Math.round(J),ae=Math.round(ce);for(let ge=0;ge<h;ge++){let le=ge+te*_[2]+ae*_[1]+j*_[0],xe=ge+Q*E[2]+Y*E[1]+T*E[0];v.values[xe]=N[le]}}}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}var NA={kernelName:Pl,backendName:"cpu",kernelFunc:WJ};p();function qJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,exclusive:s,reverse:a}=n;Fe(o,"cumsum");let l=H.getAxesPermutation([i],o.shape.length),u=o;l!=null&&(u=pn({inputs:{x:o},backend:t,attrs:{perm:l}}));let c=H.getInnerMostAxes(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let x=nn(u.dtype,"int32"),f=I.makeZerosTypedArray(I.sizeFromShape(u.shape),x),h=t.data.get(u.dataId).values,g=u.shape[u.shape.length-1],m=a?(v,w)=>v+g-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=g)for(let w=0;w<g;w++){let C=m(v,w);if(w===0)f[C]=s?0:h[C];else{let N=m(v,w-1);f[C]=s?h[N]+f[N]:h[C]+f[N]}}let b=t.makeTensorInfo(u.shape,x,f);if(l!=null){let v=H.getUndoAxesPermutation(l),w=pn({inputs:{x:b},backend:t,attrs:{perm:v}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(u),w}return b}var _A={kernelName:i0,backendName:"cpu",kernelFunc:qJ};p();function HJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,weights:i}=e,{size:s,binaryOutput:a}=n;if(o.shape.length===1){let l=t.data.get(o.dataId).values,u=t.data.get(i.dataId).values,c=hx(l,u,i.dtype,i.shape,s);return t.makeTensorInfo([s],i.dtype,c)}else if(o.shape.length===2){let l=t.bufferSync(o),u=t.bufferSync(i),c=b3(l,u,s,a);return t.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var SA={kernelName:Bl,backendName:"cpu",kernelFunc:HJ};p();function KJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockSize:i,dataFormat:s}=n;I.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`),I.assert(i>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${i}`);let a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],x=l*i,f=u*i,h=c/(i*i),g=t.data.get(o.dataId).values,m=new Float32Array(a*x*f*h),b=0;for(let v=0;v<a;++v)for(let w=0;w<x;++w){let C=Math.floor(w/i),N=w%i;for(let _=0;_<f;++_){let E=Math.floor(_/i),T=_%i,k=(N*i+T)*h;for(let D=0;D<h;++D){let K=D+k+c*(E+u*(C+l*v));m[b++]=g[K]}}}return t.makeTensorInfo([a,x,f,h],o.dtype,m)}var TA={kernelName:Ul,backendName:"cpu",kernelFunc:KJ};p();function z7(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:u}=n;Fe([o,i],"depthwiseConv2DNative");let c=I.computeStrides(o.shape),x=I.computeStrides(i.shape),f=l;f==null&&(f=[1,1]),I.assert(H.eitherStridesOrDilationsAreOne(s,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${f}'`);let h=H.computeConv2DInfo(o.shape,i.shape,s,f,a,u,!0),{filterHeight:g,filterWidth:m,dilationHeight:b,dilationWidth:v,padInfo:w}=h,C=w.left,N=w.top,_=h.outChannels/h.inChannels,E=new Jt(h.outShape,o.dtype),T=t.data.get(o.dataId).values,k=t.data.get(i.dataId).values,D=E.values;for(let R=0;R<h.batchSize;++R){let K=R*c[0],M=R*E.strides[0];for(let j=0;j<h.outHeight;++j){let X=M+j*E.strides[1],Z=j*h.strideHeight-C;for(let Y=0;Y<g;++Y){let ce=Z+Y*b;if(ce<0||ce>=h.inHeight)continue;let Q=Y*x[0],J=K+ce*c[1];for(let te=0;te<h.outWidth;++te){let ae=X+te*E.strides[2],ge=te*h.strideWidth-N;for(let le=0;le<m;++le){let xe=ge+le*v;if(xe<0||xe>=h.inWidth)continue;let me=Q+le*x[1],ve=J+xe*h.inChannels,Te=ae,De=me;for(let Ae=0;Ae<h.inChannels;++Ae){let _e=T[ve+Ae];for(let Ke=0;Ke<_;++Ke)D[Te+Ke]+=_e*k[De+Ke];Te+=_,De+=_}}}}}}return t.makeTensorInfo(E.shape,E.dtype,E.values)}var IA={kernelName:s0,backendName:"cpu",kernelFunc:z7};p();function jJ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=n;Fe([o,i],"depthwiseConv2dNativeBackpropFilter");let x=H.computeConv2DInfo(o.shape,c,s,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:g,filterWidth:m}=x,b=new Jt(x.filterShape,"float32"),v=x.padInfo.left,w=x.padInfo.top,C=x.outChannels/x.inChannels,N=t.data.get(o.dataId).values,_=new Jt(o.shape,o.dtype,N),E=t.data.get(i.dataId).values,T=new Jt(i.shape,i.dtype,E);for(let k=0;k<g;++k){let D=Math.max(0,Math.ceil((w-k)/f)),R=Math.min(x.outHeight,(x.inHeight+w-k)/f);for(let K=0;K<m;++K){let M=Math.max(0,Math.ceil((v-K)/h)),j=Math.min(x.outWidth,(x.inWidth+v-K)/h);for(let X=0;X<x.outChannels;++X){let Z=Math.trunc(X/C),Y=X%C,ce=0;for(let Q=0;Q<x.batchSize;++Q)for(let J=D;J<R;++J){let te=k+J*f-w;for(let ae=M;ae<j;++ae){let ge=K+ae*h-v;ce+=_.get(Q,te,ge,Z)*T.get(Q,J,ae,X)}}b.set(ce,k,K,Z,Y)}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}var kA={kernelName:Vl,backendName:"cpu",kernelFunc:jJ};p();function XJ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=n;Fe([o,i],"depthwiseConv2DNativeBackpropInput");let x=I.computeStrides(o.shape),f=I.computeStrides(i.shape),h=H.computeConv2DInfo(c,i.shape,s,a,l,u,!0),g=new Jt(h.inShape,"float32"),m=g.values,[b,v,w]=g.strides,C=t.data.get(o.dataId).values,[N,_,E]=x,T=t.data.get(i.dataId).values,[k,D,R]=f,{batchSize:K,filterHeight:M,filterWidth:j,inChannels:X,inHeight:Z,inWidth:Y,outChannels:ce,outHeight:Q,outWidth:J,strideHeight:te,strideWidth:ae}=h,ge=M-1-h.padInfo.top,le=j-1-h.padInfo.left,xe=ce/X;for(let me=0;me<K;++me)for(let ve=0;ve<X;++ve)for(let Te=0;Te<Z;++Te){let De=Te-ge,Ae=Math.max(0,Math.ceil(De/te)),_e=Math.min(Q,(M+De)/te);for(let Ke=0;Ke<Y;++Ke){let Xe=Ke-le,qe=Math.max(0,Math.ceil(Xe/ae)),tt=Math.min(J,(j+Xe)/ae),et=0;for(let rt=Ae;rt<_e;++rt){let oe=rt*te-De;for(let he=qe;he<tt;++he){let Ne=he*ae-Xe,ye=N*me+_*rt+E*he,Ue=k*(M-1-oe)+D*(j-1-Ne)+R*ve;for(let Ze=0;Ze<xe;++Ze){let ot=ve*xe+Ze,je=C[ye+ot],Je=T[Ue+Ze];et+=je*Je}}}m[b*me+v*Te+w*Ke+ve]=et}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}var EA={kernelName:Gl,backendName:"cpu",kernelFunc:XJ};p();function YJ(r){let{inputs:e,backend:t}=r,{x:n}=e,o=I.sizeFromShape(n.shape),i=t.data.get(n.dataId).values,s=it([o,o],n.dtype),a=s.values;for(let u=0;u<i.length;u++)a[u*o+u]=i[u];let l=[...n.shape,...n.shape];return t.makeTensorInfo(l,s.dtype,s.values)}var AA={kernelName:Wl,backendName:"cpu",kernelFunc:YJ};p();var DA={kernelName:a0,backendName:"cpu",kernelFunc:({inputs:r,backend:e,attrs:t})=>{let{x:n,filter:o}=r,{strides:i,pad:s,dilations:a}=t,l=e,u=l.data.get(n.dataId).values,c=n.shape.length,x=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:g,inWidth:m,inChannels:b,outHeight:v,outWidth:w,padInfo:C,strideHeight:N,strideWidth:_,filterHeight:E,filterWidth:T,dilationHeight:k,dilationWidth:D,outShape:R}=H.computeDilation2DInfo(n.shape,o.shape,i,s,"NHWC",a),K=I.sizeFromShape(R),M=R.length,j=I.getArrayFromDType(n.dtype,K);for(let Z=0;Z<h;++Z)for(let Y=0;Y<v;++Y){let ce=Y*N-C.top;for(let Q=0;Q<w;++Q){let J=Q*_-C.left;for(let te=0;te<b;++te){let ae=Number.MIN_SAFE_INTEGER;for(let le=0;le<E;++le){let xe=ce+le*k;if(xe>=0&&xe<g)for(let me=0;me<T;++me){let ve=J+me*D;if(ve>=0&&ve<m){let Te=I.locToIndex([Z,xe,ve,te],c,I.computeStrides(n.shape)),De=I.locToIndex([le,me,te],f,I.computeStrides(o.shape)),Ae=u[Te]+x[De];Ae>ae&&(ae=Ae)}}}let ge=I.locToIndex([Z,Y,Q,te],M,I.computeStrides(R));j[ge]=ae}}}return{dataId:l.write(I.toTypedArray(j,n.dtype),R,n.dtype),shape:R,dtype:n.dtype}}};p();var RA={kernelName:Vc,backendName:"cpu",kernelFunc:({inputs:r,backend:e,attrs:t})=>{let{x:n,filter:o,dy:i}=r,{strides:s,pad:a,dilations:l}=t,u=e,c=I.toNestedArray(n.shape,u.data.get(n.dataId).values),x=I.toNestedArray(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:m,outHeight:b,outWidth:v,padInfo:w,strideHeight:C,strideWidth:N,filterHeight:_,filterWidth:E,dilationHeight:T,dilationWidth:k,outShape:D}=H.computeDilation2DInfo(n.shape,o.shape,s,a,"NHWC",l);I.assert(i.rank===D.length,()=>`Error in ${Vc}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);let R=I.toNestedArray(D,u.data.get(i.dataId).values),K=I.makeZerosNestedTypedArray(o.shape,o.dtype);for(let j=0;j<f;++j)for(let X=0;X<b;++X){let Z=X*C-w.top;for(let Y=0;Y<v;++Y){let ce=Y*N-w.left;for(let Q=0;Q<m;++Q){let J=Number.MIN_SAFE_INTEGER,te=0,ae=0;for(let ge=0;ge<_;++ge){let le=Z+ge*T;if(le>=0&&le<h)for(let xe=0;xe<E;++xe){let me=ce+xe*k;if(me>=0&&me<g){let ve=c[j][le][me][Q]+x[ge][xe][Q];ve>J&&(J=ve,te=ge,ae=xe)}}}K[te][ae][Q]+=R[j][X][Y][Q]}}}return{dataId:u.write(I.toTypedArray(K,n.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};p();var $A={kernelName:Uc,backendName:"cpu",kernelFunc:({inputs:r,backend:e,attrs:t})=>{let{x:n,filter:o,dy:i}=r,{strides:s,pad:a,dilations:l}=t,u=e,c=I.toNestedArray(n.shape,u.data.get(n.dataId).values),x=I.toNestedArray(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:m,outHeight:b,outWidth:v,padInfo:w,strideHeight:C,strideWidth:N,filterHeight:_,filterWidth:E,dilationHeight:T,dilationWidth:k,outShape:D}=H.computeDilation2DInfo(n.shape,o.shape,s,a,"NHWC",l);I.assert(i.rank===D.length,()=>`Error in ${Uc}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);let R=I.toNestedArray(D,u.data.get(i.dataId).values),K=I.makeZerosNestedTypedArray(n.shape,n.dtype);for(let j=0;j<f;++j)for(let X=0;X<b;++X){let Z=X*C-w.top;for(let Y=0;Y<v;++Y){let ce=Y*N-w.left;for(let Q=0;Q<m;++Q){let J=Number.MIN_SAFE_INTEGER,te=Z<0?0:Z,ae=ce<0?0:ce;for(let ge=0;ge<_;++ge){let le=Z+ge*T;if(le>=0&&le<h)for(let xe=0;xe<E;++xe){let me=ce+xe*k;if(me>=0&&me<g){let ve=c[j][le][me][Q]+x[ge][xe][Q];ve>J&&(J=ve,te=le,ae=me)}}}K[j][te][ae][Q]+=R[j][X][Y][Q]}}}return{dataId:u.write(I.toTypedArray(K,n.dtype),n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};p();function ZJ(r){let{inputs:e,backend:t}=r,{dy:n,y:o}=e;Fe([n,o],"eluGrad");let i=new Float32Array(I.sizeFromShape(o.shape)),s=t.data.get(o.dataId).values,a=t.data.get(n.dataId).values;for(let l=0;l<s.length;++l){let u=s[l];u>=1?i[l]=a[l]:i[l]=a[l]*(u+1)}return t.makeTensorInfo(o.shape,"float32",i)}var OA={kernelName:ql,backendName:"cpu",kernelFunc:ZJ};p();var JJ=zt((r,e)=>r===e?1:0),L7=Kt(m2,JJ,null,"bool"),FA={kernelName:m2,backendName:"cpu",kernelFunc:L7};p();var QJ=H.ERF_P,eQ=H.ERF_A1,tQ=H.ERF_A2,rQ=H.ERF_A3,nQ=H.ERF_A4,oQ=H.ERF_A5,iQ=xt(Es,r=>{let e=Math.sign(r),t=Math.abs(r),n=1/(1+QJ*t);return e*(1-((((oQ*n+nQ)*n+rQ)*n+tQ)*n+eQ)*n*Math.exp(-t*t))}),MA={kernelName:Es,backendName:"cpu",kernelFunc:iQ};p();function bx(r){let{inputs:e,backend:t,attrs:n}=r,{input:o}=e,{dim:i}=n,s=o.shape.length,a=o.shape.slice(),l=i;return i<0&&(I.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),Vt({inputs:{x:o},backend:t,attrs:{shape:a}})}var zA={kernelName:l0,backendName:"cpu",kernelFunc:bx};p();p();p();var sQ=zt((r,e)=>r/e),ih=Kt(Is,sQ),sh={kernelName:Is,backendName:"cpu",kernelFunc:ih};function D3(r,e,t){let n=r.shape,o=n[0],i=n[1],s=t.data.get(r.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,u=[o,i],c=I.sizeFromShape(u),x=I.getTypedArrayFromDType("float32",c),f=I.getTypedArrayFromDType("float32",c);for(let b=0;b<o;b++){let v=Oi({inputs:{x:a},backend:t,attrs:{begin:[b,0],size:[1,i]}}),w=Oi({inputs:{x:l},backend:t,attrs:{begin:[b,0],size:[1,i]}}),C=dn({inputs:{real:v,imag:w},backend:t}),{real:N,imag:_}=aQ(C,e,t),E=H.mergeRealAndImagArrays(N,_);for(let T=0;T<i;T++){let k=H.getComplexWithIndex(E,T);x[b*i+T]=k.real,f[b*i+T]=k.imag}t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(w),t.disposeIntermediateTensorInfo(C)}let h=t.makeTensorInfo(u,"float32",x),g=t.makeTensorInfo(u,"float32",f),m=dn({inputs:{real:h,imag:g},backend:t});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(g),m}function aQ(r,e,t){let n=I.sizeFromShape(r.shape),o=t.data.get(r.dataId),i=t.data.get(o.complexTensorInfos.real.dataId).values,s=t.data.get(o.complexTensorInfos.imag.dataId).values;if(lQ(n)){let a=P7(i,s,n,e,t),l=[r.shape[0],r.shape[1]];if(e){let u=t.makeTensorInfo(l,"float32",a.real),c=t.makeTensorInfo(l,"float32",a.imag),x=t.makeTensorInfo([],"float32",I.createScalarValue(n,"float32")),f=Bn({inputs:{x},backend:t}),h=sh.kernelFunc({inputs:{a:u,b:x},backend:t}),g=sh.kernelFunc({inputs:{a:c,b:f},backend:t}),m=t.data.get(h.dataId).values,b=t.data.get(g.dataId).values;return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(g),{real:m,imag:b}}return a}else{let a=H.mergeRealAndImagArrays(i,s),l=uQ(a,n,e);return H.splitRealAndImagArrays(l)}}function lQ(r){return(r&r-1)===0}function P7(r,e,t,n,o){if(t===1)return{real:r,imag:e};let i=H.mergeRealAndImagArrays(r,e),s=t/2,a=H.complexWithEvenIndex(i),l=a.real,u=a.imag,c=[l.length],x=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=dn({inputs:{real:x,imag:f},backend:o}),g=H.complexWithOddIndex(i),m=g.real,b=g.imag,v=[m.length],w=o.makeTensorInfo(v,"float32",m),C=o.makeTensorInfo(v,"float32",b),N=dn({inputs:{real:w,imag:C},backend:o}),_=P7(l,u,s,n,o),E=_.real,T=_.imag,k=[E.length],D=o.makeTensorInfo(k,"float32",E),R=o.makeTensorInfo(k,"float32",T),K=dn({inputs:{real:D,imag:R},backend:o}),M=P7(m,b,s,n,o),j=M.real,X=M.imag,Z=[j.length],Y=o.makeTensorInfo(Z,"float32",j),ce=o.makeTensorInfo(Z,"float32",X),Q=dn({inputs:{real:Y,imag:ce},backend:o}),J=H.exponents(t,n),te=[J.real.length],ae=o.makeTensorInfo(te,"float32",J.real),ge=o.makeTensorInfo(te,"float32",J.imag),le=dn({inputs:{real:ae,imag:ge},backend:o}),xe=nh({inputs:{a:le,b:Q},backend:o}),me=o2({inputs:{a:K,b:xe},backend:o}),ve=oh({inputs:{a:K,b:xe},backend:o}),Te=Ai({inputs:{input:me},backend:o}),De=Ai({inputs:{input:ve},backend:o}),Ae=Aa({inputs:{input:me},backend:o}),_e=Aa({inputs:{input:ve},backend:o}),Ke=pl({inputs:[Te,De],backend:o,attrs:{axis:0}}),Xe=pl({inputs:[Ae,_e],backend:o,attrs:{axis:0}}),qe=o.data.get(Ke.dataId).values,tt=o.data.get(Xe.dataId).values;return o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(C),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(ge),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(xe),o.disposeIntermediateTensorInfo(me),o.disposeIntermediateTensorInfo(ve),o.disposeIntermediateTensorInfo(Te),o.disposeIntermediateTensorInfo(Ae),o.disposeIntermediateTensorInfo(De),o.disposeIntermediateTensorInfo(_e),o.disposeIntermediateTensorInfo(Ke),o.disposeIntermediateTensorInfo(Xe),{real:qe,imag:tt}}function uQ(r,e,t){let n=new Float32Array(e*2);for(let o=0;o<e;o++){let i=0,s=0;for(let a=0;a<e;a++){let l=H.exponent(o*a,e,t),u=H.getComplexWithIndex(r,a);i+=u.real*l.real-u.imag*l.imag,s+=u.real*l.imag+u.imag*l.real}t&&(i/=e,s/=e),H.assignToTypedArray(n,i,s,o)}return n}function cQ(r){let{inputs:e,backend:t}=r,{input:n}=e,o=I.sizeFromShape(n.shape),i=n.shape[n.shape.length-1],s=o/i,a=Vt({inputs:{x:n},backend:t,attrs:{shape:[s,i]}}),l=D3(a,!1,t),u=Vt({inputs:{x:l},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),u}var LA={kernelName:Hl,backendName:"cpu",kernelFunc:cQ};p();function ah(r){let{backend:e,attrs:t}=r,{shape:n,value:o,dtype:i}=t,s=i||I.inferDtype(o),a=I.getArrayFromDType(s,I.sizeFromShape(n));return pQ(a,o,s),e.makeTensorInfo(n,s,a)}var PA={kernelName:Kl,backendName:"cpu",kernelFunc:ah};function pQ(r,e,t){r.fill(e)}p();var BA={kernelName:jl,backendName:"cpu",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{image:n}=r,o=t,i=I.getTypedArrayFromDType(n.dtype,I.sizeFromShape(n.shape)),[s,a,l,u]=n.shape,c=o.data.get(n.dataId).values;for(let f=0;f<s;f++){let h=f*l*a*u;for(let g=0;g<a;g++){let m=g*(l*u);for(let b=0;b<l;b++){let v=b*u;for(let w=0;w<u;w++){let N=[s,g,b,w][2],_=Math.round(l-N),E=h+m+v+w,T=c[E];if(_>=0&&_<l){let k=_*u,D=h+m+k+w;T=c[D]}i[E]=T}}}}return{dataId:o.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};p();var xQ=zt((r,e)=>Math.floor(r/e)),fQ=Kt($s,xQ,null,"int32"),UA={kernelName:$s,backendName:"cpu",kernelFunc:fQ};p();function mQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:x,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=n,m=M7({inputs:{x:o,filter:i},backend:t,attrs:{strides:l,pad:u,dataFormat:c,dilations:x,dimRoundingMode:f}});if(s){let b=m;m=o2({inputs:{a:m,b:s},backend:t}),t.disposeIntermediateTensorInfo(b)}if(h){let b=m;m=gx(t,m,h,a,g),t.disposeIntermediateTensorInfo(b)}return m}var VA={kernelName:N2,backendName:"cpu",kernelFunc:mQ};p();function hQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:x,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=n,m=z7({inputs:{x:o,filter:i},backend:t,attrs:{strides:l,pad:u,dataFormat:c,dilations:x,dimRoundingMode:f}});if(s){let b=m;m=o2({inputs:{a:m,b:s},backend:t}),t.disposeIntermediateTensorInfo(b)}if(h){let b=m;m=gx(t,m,h,a,g),t.disposeIntermediateTensorInfo(b)}return m}var GA={kernelName:_2,backendName:"cpu",kernelFunc:hQ};p();function dQ(r){let{inputs:e,backend:t}=r,{params:n,indices:o}=e,i=I.sizeFromShape(n.shape),s=o.shape,a=s[s.length-1],[l,u,c,x]=H.prepareAndValidate(n,o);if(u===0)return t.makeTensorInfo(l,n.dtype,[]);let f=it([u,c],n.dtype),h=t.data.get(o.dataId).values,g=t.data.get(n.dataId).values;for(let m=0;m<u;m++){let b=[],v=0;for(let w=0;w<a;w++){let C=h[m*a+w];v+=C*x[w],b.push(C)}if(v<0||v>=i/c)throw new Error(`Invalid indices: ${b} does not index into ${n.shape}`);for(let w=0;w<c;w++)f.values[m*c+w]=g[v*c+w]}return t.makeTensorInfo(l,f.dtype,f.values)}var WA={kernelName:Xl,backendName:"cpu",kernelFunc:dQ};p();function gQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,indices:i}=e,{axis:s,batchDims:a}=n;Fe([o,i],"gatherV2");let l=a;a==null&&(l=0);let u=I.sizeFromShape(i.shape),c=I.parseAxisParam(s,o.shape)[0],x=H.segment_util.collectGatherOpShapeInfo(o,i,c,l),f=Vt({inputs:{x:o},backend:t,attrs:{shape:[x.batchSize,x.outerSize,x.dimSize,x.sliceSize]}}),h=Vt({inputs:{x:i},backend:t,attrs:{shape:[x.batchSize,u/x.batchSize]}}),g=[x.batchSize,x.outerSize,u/x.batchSize,x.sliceSize],m=t.bufferSync(h),b=t.bufferSync(f),v=w3(b,m,g);return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),t.makeTensorInfo(x.outputShape,v.dtype,v.values)}var qA={kernelName:c0,backendName:"cpu",kernelFunc:gQ};p();var yQ=zt((r,e)=>r>=e?1:0),bQ=Kt(Os,yQ,null,"bool"),HA={kernelName:Os,backendName:"cpu",kernelFunc:bQ};p();function vQ(r){let{inputs:e,backend:t}=r,{input:n}=e,o=I.sizeFromShape(n.shape),i=n.shape[n.shape.length-1],s=o/i,a=Vt({inputs:{x:n},backend:t,attrs:{shape:[s,i]}}),l=D3(a,!0,t),u=Vt({inputs:{x:l},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),u}var KA={kernelName:Yl,backendName:"cpu",kernelFunc:vQ};p();var wQ=xt(Fs,r=>Number.isFinite(r)?1:0,"bool"),jA={kernelName:Fs,backendName:"cpu",kernelFunc:wQ};p();var CQ=xt(Ms,r=>Math.abs(r)===1/0?1:0,"bool"),XA={kernelName:Ms,backendName:"cpu",kernelFunc:CQ};p();var NQ=xt(zs,r=>Number.isNaN(r)?1:0,"bool"),YA={kernelName:zs,backendName:"cpu",kernelFunc:NQ};p();var _Q=zt((r,e)=>r<=e?1:0),SQ=Kt(g2,_Q,null,"bool"),ZA={kernelName:g2,backendName:"cpu",kernelFunc:SQ};p();function TQ(r){let{backend:e,attrs:t}=r,{start:n,stop:o,num:i}=t,s=C3(n,o,i);return e.makeTensorInfo([s.length],"float32",s)}var JA={kernelName:Jl,backendName:"cpu",kernelFunc:TQ};p();var IQ=xt(Ps,r=>Math.log1p(r)),QA={kernelName:Ps,backendName:"cpu",kernelFunc:IQ};p();var kQ=zt((r,e)=>r&&e),EQ=Kt(y2,kQ,null,"bool"),eD={kernelName:y2,backendName:"cpu",kernelFunc:EQ};p();var AQ=xt(b2,r=>r?0:1,"bool"),tD={kernelName:b2,backendName:"cpu",kernelFunc:AQ};p();var DQ=zt((r,e)=>r||e),RQ=Kt(v2,DQ,null,"bool"),rD={kernelName:v2,backendName:"cpu",kernelFunc:RQ};p();function $Q(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{depthRadius:i,bias:s,alpha:a,beta:l}=n;Fe(o,"LRN");let u=o.shape[3],c=u-1,x=t.data.get(o.dataId).values,f=I.sizeFromShape(o.shape),h=new Float32Array(f);function g(m){let b=m%u,v=m-b+Math.max(0,b-i),w=m-b+Math.min(b+i,c),C=0;for(;v<=w;v++){let N=x[v];C+=N*N}return C}for(let m=0;m<f;m++){let b=g(m),v=x[m]*Math.pow(s+a*b,-l);h[m]=v}return t.makeTensorInfo(o.shape,o.dtype,h)}var nD={kernelName:x0,backendName:"cpu",kernelFunc:$Q};p();function OQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,y:i,dy:s}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=n;Fe(s,"LRNGrad");let x=I.sizeFromShape(s.shape),f=s.shape[3],h=t.data.get(s.dataId).values,g=t.data.get(o.dataId).values,m=t.data.get(i.dataId).values,b=new Float32Array(x),v=x;for(let w=0;w<v;w++){let C=w%f,N=w-C+Math.max(0,C-a),_=w-C+Math.min(f,C+a+1),E=0;for(let T=N;T<_;T++)E+=Math.pow(g[T],2);E=u*E+l;for(let T=N;T<_;T++){let k=-2*u*c*g[T]*m[w]/E;w===T&&(k+=Math.pow(E,-c)),k*=h[w],b[T]+=k}}return t.makeTensorInfo(s.shape,o.dtype,b)}var oD={kernelName:Ql,backendName:"cpu",kernelFunc:OQ};p();function B7(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{reductionIndices:i,keepDims:s}=n,a=t,l=o.shape,u=l.length,c=I.parseAxisParam(i,l),x=c,f=H.getAxesPermutation(x,u),h=a.data.get(o.dataId).values;if(f!=null){let N=new Array(u);for(let _=0;_<N.length;_++)N[_]=l[f[_]];h=dx(h,l,o.dtype,f,N),x=H.getInnerMostAxes(x.length,u),l=N}Fe(o,"max"),H.assertAxesAreInnerMostDims("max",x,u);let[g,m]=H.computeOutAndReduceShapes(l,x),b=I.sizeFromShape(m),v=N3(h,b,g,o.dtype),w=a.write(v,g,o.dtype),C=g;return s&&(C=H.expandShapeToKeepDim(g,c)),{dataId:w,shape:C,dtype:o.dtype}}var iD={kernelName:f0,backendName:"cpu",kernelFunc:B7};p();function FQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e;Fe(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n,u=1;I.assert(H.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=H.computePool2DInfo(o.shape,i,s,u,a,l),x;if(c.filterWidth===1&&c.filterHeight===1&&I.arraysEqual(c.inShape,c.outShape))x=Bn({inputs:{x:o},backend:t});else{let f=t.data.get(o.dataId).values,h=I.computeStrides(o.shape),g=yx(f,o.shape,o.dtype,h,c,"max");x=t.makeTensorInfo(c.outShape,o.dtype,g.values)}return x}var sD={kernelName:m0,backendName:"cpu",kernelFunc:FQ};p();function MQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=n;Fe(o,"maxPool3d");let c=H.computePool3DInfo(o.shape,i,s,1,a,l,u),x=t.data.get(o.dataId).values,f=A3(x,o.shape,o.dtype,I.computeStrides(o.shape),c,"max");return t.makeTensorInfo(f.shape,"float32",f.values)}var aD={kernelName:h0,backendName:"cpu",kernelFunc:MQ};p();function zQ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;Fe([o,i],"maxPool3DGrad");let c=H.computePool3DInfo(i.shape,s,a,1,l,u),x=t.bufferSync(i),f=nA(x,c),h=c.strideDepth,g=c.strideHeight,m=c.strideWidth,b=c.dilationDepth,v=c.dilationHeight,w=c.dilationWidth,C=c.effectiveFilterDepth,N=c.effectiveFilterHeight,_=c.effectiveFilterWidth,E=C-1-c.padInfo.front,T=_-1-c.padInfo.left,k=N-1-c.padInfo.top,D=it(i.shape,"float32"),R=t.bufferSync(o);for(let K=0;K<c.batchSize;++K)for(let M=0;M<c.inChannels;++M)for(let j=0;j<c.inDepth;++j)for(let X=0;X<c.inHeight;++X)for(let Z=0;Z<c.inWidth;++Z){let Y=j-E,ce=X-k,Q=Z-T,J=0;for(let te=0;te<C;te+=b){let ae=(Y+te)/h;if(!(ae<0||ae>=c.outDepth||Math.floor(ae)!==ae))for(let ge=0;ge<N;ge+=v){let le=(ce+ge)/g;if(!(le<0||le>=c.outHeight||Math.floor(le)!==le))for(let xe=0;xe<_;xe+=w){let me=(Q+xe)/m;if(me<0||me>=c.outWidth||Math.floor(me)!==me)continue;let ve=C*N*_-1-f.get(K,ae,le,me,M),Te=te*N*_+ge*_+xe,De=ve===Te?1:0;if(De===0)continue;J+=R.get(K,ae,le,me,M)*De}}}D.set(J,K,j,X,Z,M)}return t.makeTensorInfo(D.shape,D.dtype,D.values)}var lD={kernelName:tu,backendName:"cpu",kernelFunc:zQ};p();function LQ(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i,output:s}=e,a=i;Fe([i,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:x}=n,f=H.computePool2DInfo(a.shape,l,u,1,c,x),h=t.data.get(a.dataId).values,g=it(f.outShape,a.dtype,E3(h,a.shape,a.dtype,f).values),m=f.strideHeight,b=f.strideWidth,v=f.dilationHeight,w=f.dilationWidth,C=f.effectiveFilterHeight,N=f.effectiveFilterWidth,_=N-1-f.padInfo.left,E=C-1-f.padInfo.top,T=it(a.shape,"float32"),k=t.data.get(o.dataId).values,D=it(o.shape,"float32",k);for(let R=0;R<f.batchSize;++R)for(let K=0;K<f.inChannels;++K)for(let M=0;M<f.inHeight;++M)for(let j=0;j<f.inWidth;++j){let X=M-E,Z=j-_,Y=0;for(let ce=0;ce<C;ce+=v){let Q=(X+ce)/m;if(!(Q<0||Q>=f.outHeight||Math.floor(Q)!==Q))for(let J=0;J<N;J+=w){let te=(Z+J)/b;if(te<0||te>=f.outWidth||Math.floor(te)!==te)continue;let ae=C*N-1-g.get(R,Q,te,K),ge=ce*N+J,le=ae===ge?1:0;if(le===0)continue;Y+=D.get(R,Q,te,K)*le}}T.set(Y,R,M,j,K)}return t.makeTensorInfo(T.shape,T.dtype,T.values)}var uD={kernelName:eu,backendName:"cpu",kernelFunc:LQ};p();p();function cD(r,e,t,n,o){let i=I.computeStrides(e),s=yx(r,e,t,i,o,"max"),a=E3(r,e,t,o,!0,n);return[s.values,a.values]}var pD={kernelName:ru,backendName:"cpu",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{x:n}=r,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=e,l=t;Fe(n,"MaxPoolWithArgmax");let u=l.data.get(n.dataId).values,c=H.computePool2DInfo(n.shape,o,i,[1,1],s),[x,f]=cD(u,n.shape,n.dtype,a,c),h=l.write(x,c.outShape,n.dtype),g=l.write(f,c.outShape,n.dtype);return[{dataId:h,shape:c.outShape,dtype:n.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};p();p();function Ju(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;Fe(o,"sum");let a;o.dtype==="bool"?a=Di({inputs:{x:o},backend:t,attrs:{dtype:"int32"}}):a=Bn({inputs:{x:o},backend:t});let l=a.shape.length,u=I.parseAxisParam(i,a.shape),c=H.getAxesPermutation(u,l),x=u,f=a;c!=null&&(f=pn({inputs:{x:a},backend:t,attrs:{perm:c}}),x=H.getInnerMostAxes(x.length,l)),H.assertAxesAreInnerMostDims("sum",x,f.shape.length);let[h,g]=H.computeOutAndReduceShapes(f.shape,x),m=H.upcastType(f.dtype,"int32"),b=fx(t,h,m),v=I.sizeFromShape(g),w=t.data.get(b.dataId).values,C=t.data.get(f.dataId).values;for(let N=0;N<w.length;++N){let _=N*v,E=0;for(let T=0;T<v;++T)E+=C[_+T];w[N]=E}if(s){let N=H.expandShapeToKeepDim(b.shape,u),_=b;b=Vt({inputs:{x:b},backend:t,attrs:{shape:N}}),t.disposeIntermediateTensorInfo(_)}return t.disposeIntermediateTensorInfo(a),c!=null&&t.disposeIntermediateTensorInfo(f),b}var xD={kernelName:D0,backendName:"cpu",kernelFunc:Ju};function PQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n,a=I.parseAxisParam(i,o.shape),u=H.computeOutAndReduceShapes(o.shape,a)[1],c=I.sizeFromShape(u),x=[],f=t.makeTensorInfo([],"float32",new Float32Array([c]));x.push(f);let h=Di({inputs:{x:o},backend:t,attrs:{dtype:"float32"}});x.push(h);let g=ih({inputs:{a:h,b:f},backend:t});x.push(g);let m=Ju({inputs:{x:g},backend:t,attrs:{axis:i,keepDims:s}});return x.forEach(b=>t.disposeIntermediateTensorInfo(b)),m}var fD={kernelName:d0,backendName:"cpu",kernelFunc:PQ};p();function BQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;Fe(o,"min");let a=I.parseAxisParam(i,o.shape),l=a,u=H.getAxesPermutation(l,o.shape.length),c=o;u!=null&&(c=pn({inputs:{x:o},backend:t,attrs:{perm:u}}),l=H.getInnerMostAxes(l.length,o.shape.length)),H.assertAxesAreInnerMostDims("min",l,c.shape.length);let[x,f]=H.computeOutAndReduceShapes(c.shape,l),h=I.sizeFromShape(f),g=I.makeZerosTypedArray(I.sizeFromShape(x),c.dtype),m=t.data.get(c.dataId).values;for(let v=0;v<g.length;++v){let w=v*h,C=m[w];for(let N=0;N<h;++N){let _=m[w+N];_<C&&(C=_)}g[v]=C}u!=null&&t.disposeIntermediateTensorInfo(c);let b=t.makeTensorInfo(x,c.dtype,g);if(s){let v=H.expandShapeToKeepDim(x,a),w=Vt({inputs:{x:b},backend:t,attrs:{shape:v}});return t.disposeIntermediateTensorInfo(b),w}return b}var mD={kernelName:g0,backendName:"cpu",kernelFunc:BQ};p();function UQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{paddings:i,mode:s}=n;Fe(o,"mirrorPad");let a=i.map((C,N)=>C[0]+o.shape[N]+C[1]),l=i.map(C=>C[0]),u=i.map((C,N)=>C[0]+o.shape[N]),c=s==="reflect"?0:1,x=t.data.get(o.dataId).values,f=o.shape.length,h=I.computeStrides(o.shape),g=I.sizeFromShape(a),m=a.length,b=I.computeStrides(a),v=I.getTypedArrayFromDType(o.dtype,g);for(let C=0;C<g;C++){let N=I.indexToLoc(C,m,b);for(let E=0;E<m;E++)N[E]<l[E]?N[E]=l[E]*2-N[E]-c:N[E]>=u[E]&&(N[E]=(u[E]-1)*2-N[E]+c);N=N.map((E,T)=>E-l[T]);let _=I.locToIndex(N,f,h);v[C]=x[_]}return{dataId:t.write(v,a,o.dtype),shape:a,dtype:o.dtype}}var hD={kernelName:y0,backendName:"cpu",kernelFunc:UQ};p();var VQ=zt((r,e)=>{let t=r%e;return r<0&&e<0||r>=0&&e>=0?t:(t+e)%e}),GQ=Kt(Vs,VQ),dD={kernelName:Vs,backendName:"cpu",kernelFunc:GQ};p();var yD=Ho(hf());p();function U7(r){let{inputs:e,backend:t,attrs:n}=r,{logits:o}=e,{dim:i}=n,s=o.shape.length,a=i;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=I.parseAxisParam([a],o.shape),u=B7({inputs:{x:o},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),c=H.expandShapeToKeepDim(u.shape,l),x=Vt({inputs:{x:u},backend:t,attrs:{shape:c}}),f=oh({inputs:{a:o,b:x},backend:t}),h=f7({inputs:{x:f},backend:t}),g=Ju({inputs:{x:h},backend:t,attrs:{axis:l,keepDims:!1}}),m=Vt({inputs:{x:g},backend:t,attrs:{shape:c}}),b=ih({inputs:{a:h,b:m},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),b}var gD={kernelName:O0,backendName:"cpu",kernelFunc:U7};function WQ(r){let{inputs:e,backend:t,attrs:n}=r,{logits:o}=e,{numSamples:i,seed:s,normalized:a}=n;Fe(o,"multinomial");let l=a?o:U7({inputs:{logits:o},backend:t,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],x=t.data.get(l.dataId).values,f=[u,i],h=I.makeZerosTypedArray(I.sizeFromShape(f),"int32");for(let g=0;g<u;++g){let m=g*c,b=new Float32Array(c-1);b[0]=x[m];for(let C=1;C<b.length;++C)b[C]=b[C-1]+x[m+C];let v=yD.alea(s.toString()),w=g*i;for(let C=0;C<i;++C){let N=v();h[w+C]=b.length;for(let _=0;_<b.length;_++)if(N<b[_]){h[w+C]=_;break}}}return a||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(f,"int32",h)}var bD={kernelName:nu,backendName:"cpu",kernelFunc:WQ};p();var qQ=An.nonMaxSuppressionV3Impl;function HQ(r){let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=n;Fe(o,"NonMaxSuppression");let u=t.data.get(o.dataId).values,c=t.data.get(i.dataId).values,{selectedIndices:x}=qQ(u,c,s,a,l);return t.makeTensorInfo([x.length],"int32",new Int32Array(x))}var vD={kernelName:ou,backendName:"cpu",kernelFunc:HQ};p();var KQ=An.nonMaxSuppressionV4Impl;function jQ(r){let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=n;Fe(o,"NonMaxSuppressionPadded");let c=t.data.get(o.dataId).values,x=t.data.get(i.dataId).values,{selectedIndices:f,validOutputs:h}=KQ(c,x,s,a,l,u);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([h]))]}var wD={kernelName:iu,backendName:"cpu",kernelFunc:jQ};p();var XQ=An.nonMaxSuppressionV5Impl;function YQ(r){let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=n;Fe(o,"NonMaxSuppressionWithScore");let c=t.data.get(o.dataId).values,x=t.data.get(i.dataId).values,f=s,h=a,g=l,m=u,{selectedIndices:b,selectedScores:v}=XQ(c,x,f,h,g,m);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var CD={kernelName:su,backendName:"cpu",kernelFunc:YQ};p();function ZQ(r){let{inputs:e,backend:t,attrs:n}=r,{indices:o}=e,{depth:i,onValue:s,offValue:a}=n;Fe(o,"oneHot");let l=I.sizeFromShape(o.shape),u=new Float32Array(l*i);u.fill(a);let c=t.data.get(o.dataId).values;for(let x=0;x<l;++x)c[x]>=0&&c[x]<i&&(u[x*i+c[x]]=s);return t.makeTensorInfo([...o.shape,i],"int32",u)}var ND={kernelName:w0,backendName:"cpu",kernelFunc:ZQ};p();p();function lh(r){let{inputs:e,backend:t}=r,{x:n}=e;if(n.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(n.dtype==="complex64"){let o=Ai({inputs:{input:n},backend:t}),i=lh({inputs:{x:o},backend:t}),s=Aa({inputs:{input:n},backend:t}),a=lh({inputs:{x:s},backend:t}),l=dn({inputs:{real:i,imag:a},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),l}else return ah({backend:t,attrs:{shape:n.shape,value:0,dtype:n.dtype}})}var _D={kernelName:L0,backendName:"cpu",kernelFunc:lh};function SD(r){let{inputs:e,backend:t}=r,{x:n}=e;if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(n.dtype==="complex64"){let o=Ai({inputs:{input:n},backend:t}),i=SD({inputs:{x:o},backend:t}),s=Aa({inputs:{input:n},backend:t}),a=lh({inputs:{x:s},backend:t}),l=dn({inputs:{real:i,imag:a},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),l}else return ah({backend:t,attrs:{shape:n.shape,value:1,dtype:n.dtype}})}var TD={kernelName:v0,backendName:"cpu",kernelFunc:SD};p();function V7(r){let{inputs:e,backend:t,attrs:n}=r,{axis:o}=n;if(e.length===1)return bx({inputs:{input:e[0]},backend:t,attrs:{dim:o}});let i=e[0].shape,s=e[0].dtype;e.forEach(c=>{I.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),I.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=e.map(c=>{let x=bx({inputs:{input:c},backend:t,attrs:{dim:o}});return a.push(x),x}),u=pl({inputs:l,backend:t,attrs:{axis:o}});return a.forEach(c=>t.disposeIntermediateTensorInfo(c)),u}var ID={kernelName:C0,backendName:"cpu",kernelFunc:V7};p();function JQ(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{paddings:i,constantValue:s}=n;Fe(o,"pad");let a=i.map((w,C)=>w[0]+o.shape[C]+w[1]),l=i.map(w=>w[0]),u=t.data.get(o.dataId).values,c=I.sizeFromShape(o.shape),x=o.shape.length,f=I.computeStrides(o.shape),h=I.sizeFromShape(a),g=a.length,m=I.computeStrides(a),b=I.getTypedArrayFromDType(o.dtype,h);s!==0&&b.fill(s);for(let w=0;w<c;w++){let N=I.indexToLoc(w,x,f).map((E,T)=>E+l[T]),_=I.locToIndex(N,g,m);b[_]=u[w]}return{dataId:t.write(b,a,o.dtype),shape:a,dtype:o.dtype}}var R3={kernelName:N0,backendName:"cpu",kernelFunc:JQ};p();var QQ=zt((r,e)=>Math.pow(r,e)),eee=Kt(Ws,QQ),kD={kernelName:Ws,backendName:"cpu",kernelFunc:eee};p();function tee(r){let{backend:e,attrs:t}=r,{start:n,stop:o,dtype:i,step:s}=t,a=_3(n,o,s,i);return e.makeTensorInfo([a.length],i,a)}var ED={kernelName:lu,backendName:"cpu",kernelFunc:tee};p();var ree=xt(qs,r=>1/r),AD={kernelName:qs,backendName:"cpu",kernelFunc:ree};p();function nee(r){let{inputs:e,backend:t,attrs:n}=r,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=n;Fe(o,"resizeBilinear");let l=I.computeStrides(o.shape),[u,c]=a,[x,f,h,g]=o.shape,m=t.data.get(o.dataId).values,b=new Float32Array(I.sizeFromShape([x,u,c,g])),v=[i&&u>1?f-1:f,i&&c>1?h-1:h],w=[i&&u>1?u-1:u,i&&c>1?c-1:c],C=0,N=v[0]/w[0],_=v[1]/w[1];for(let E=0;E<x;E++)for(let T=0;T<u;T++){let k;s?k=N*(T+.5)-.5:k=N*T;let D=Math.max(0,Math.floor(k)),R=k-D,K=Math.min(f-1,Math.ceil(k)),M=E*l[0]+D*l[1],j=E*l[0]+K*l[1];for(let X=0;X<c;X++){let Z;s?Z=_*(X+.5)-.5:Z=_*X;let Y=Math.max(0,Math.floor(Z)),ce=Z-Y,Q=Math.min(h-1,Math.ceil(Z)),J=M+Y*l[2],te=j+Y*l[2],ae=M+Q*l[2],ge=j+Q*l[2];for(let le=0;le<g;le++){let xe=m[J+le],me=m[te+le],ve=m[ae+le],Te=m[ge+le],De=xe+(ve-xe)*ce,Ae=me+(Te-me)*ce,_e=De+(Ae-De)*R;b[C++]=_e}}}return t.makeTensorInfo([x,u,c,g],"float32",b)}var DD={kernelName:I0,backendName:"cpu",kernelFunc:nee};p();function oee(r){let{inputs:e,backend:t,attrs:n}=r,{images:o,dy:i}=e,{alignCorners:s}=n;Fe([i,o],"resizeBilinearGrad");let a=I.computeStrides(o.shape),[l,u,c,x]=o.shape,[,f,h]=i.shape,g=new Float32Array(l*u*c*x),m=[s&&f>1?u-1:u,s&&h>1?c-1:c],b=[s&&f>1?f-1:f,s&&h>1?h-1:h],v=m[0]/b[0],w=m[1]/b[1],C=t.data.get(i.dataId).values,N=0;for(let _=0;_<l;_++){let E=_*a[0];for(let T=0;T<f;T++){let k=T*v,D=Math.floor(k),R=Math.min(Math.ceil(k),u-1),K=E+D*a[1],M=E+R*a[1],j=k-D,X=1-j;for(let Z=0;Z<h;Z++){let Y=Z*w,ce=Math.floor(Y),Q=Math.min(Math.ceil(Y),c-1),J=Y-ce,te=1-J,ae=K+ce*a[2],ge=K+Q*a[2],le=M+ce*a[2],xe=M+Q*a[2],me=X*te,ve=X*J,Te=j*te,De=j*J;for(let Ae=0;Ae<x;Ae++){let _e=C[N++];g[ae+Ae]+=_e*me,g[ge+Ae]+=_e*ve,g[le+Ae]+=_e*Te,g[xe+Ae]+=_e*De}}}}return t.makeTensorInfo([l,c,u,x],"float32",g)}var RD={kernelName:pu,backendName:"cpu",kernelFunc:oee};p();function iee(r){let{inputs:e,backend:t,attrs:n}=r,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=n;Fe(o,"resizeNearestNeighbor");let l=I.computeStrides(o.shape),[u,c]=a,[x,f,h,g]=o.shape,m=t.data.get(o.dataId).values,b=new Float32Array(x*u*c*g),v=[i&&u>1?f-1:f,i&&c>1?h-1:h],w=[i&&u>1?u-1:u,i&&c>1?c-1:c],C=v[0]/w[0],N=v[1]/w[1],_=0;for(let E=0;E<x;E++){let T=E*l[0];for(let k=0;k<u;k++){let D=s?C*(k+.5):C*k,R=Math.min(f-1,i?Math.round(D):Math.floor(D));s&&(R=Math.max(0,R));let K=T+R*l[1];for(let M=0;M<c;M++){let j=s?N*(M+.5):N*M,X=Math.min(h-1,i?Math.round(j):Math.floor(j));s&&(X=Math.max(0,X));let Z=K+X*l[2];for(let Y=0;Y<g;Y++){let ce=m[Z+Y];b[_++]=ce}}}}return t.makeTensorInfo([x,u,c,g],o.dtype,b)}var $D={kernelName:T0,backendName:"cpu",kernelFunc:iee};p();function see(r){let{inputs:e,backend:t,attrs:n}=r,{images:o,dy:i}=e,{alignCorners:s}=n;Fe([i,o],"resizeNearestNeighborGrad");let a=I.computeStrides(o.shape),l=I.computeStrides(i.shape),[u,c,x,f]=o.shape,[,h,g]=i.shape,m=new Float32Array(u*c*x*f),b=t.data.get(i.dataId).values,v=[s&&h>1?c-1:c,s&&g>1?x-1:x],w=[s&&h>1?h-1:h,s&&g>1?g-1:g],C=v[0]/w[0],N=v[1]/w[1],_=1/C,E=1/N,T=Math.ceil(_)*2+2,k=Math.ceil(E)*2+2;for(let D=0;D<u;D++){let R=D*a[0];for(let K=0;K<c;K++){let M=R+K*a[1],j=Math.floor(K*_),X=Math.floor(j-T/2);for(let Z=0;Z<x;Z++){let Y=M+Z*a[2],ce=Math.floor(Z*E),Q=Math.floor(ce-k/2);for(let J=0;J<f;J++){let te=0;for(let ae=0;ae<T;ae++){let ge=ae+X;if(ge<0||ge>=h)continue;let le=R+ge*l[1],xe=ge*C,me=Math.min(c-1,s?Math.round(xe):Math.floor(xe));if(K===me)for(let ve=0;ve<k;ve++){let Te=ve+Q;if(Te<0||Te>=g)continue;let De=le+Te*l[2],Ae=Te*N,_e=Math.min(x-1,s?Math.round(Ae):Math.floor(Ae));Z===_e&&(te+=b[De+J])}}m[Y+J]=te}}}}return t.makeTensorInfo(o.shape,o.dtype,m)}var OD={kernelName:cu,backendName:"cpu",kernelFunc:see};p();function aee(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{dims:i}=n;Fe(o,"reverse");let s=o.shape.length,a=I.parseAxisParam(i,o.shape);if(s===0)return Bn({inputs:{x:o},backend:t});let l=new Jt(o.shape,o.dtype),u=t.bufferSync(o);for(let c=0;c<l.size;c++){let x=l.indexToLoc(c),f=x.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...x)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}var FD={kernelName:k0,backendName:"cpu",kernelFunc:aee};p();var MD={kernelName:yu,backendName:"cpu",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{image:n}=r,{radians:o,fillValue:i,center:s}=e,a=t,l=I.getTypedArrayFromDType(n.dtype,I.sizeFromShape(n.shape)),[u,c,x,f]=n.shape,[h,g]=H.getImageCenter(s,c,x),m=255,b=Math.sin(o),v=Math.cos(o),w=a.data.get(n.dataId).values;for(let N=0;N<u;N++){let _=N*x*c*f;for(let E=0;E<c;E++){let T=E*(x*f);for(let k=0;k<x;k++){let D=k*f;for(let R=0;R<f;R++){let K=[u,E,k,R],M=K[2],j=K[1],X=(M-h)*v-(j-g)*b,Z=(M-h)*b+(j-g)*v;X=Math.round(X+h),Z=Math.round(Z+g);let Y=i;if(typeof i!="number"&&(R===3?Y=m:Y=i[R]),X>=0&&X<x&&Z>=0&&Z<c){let Q=Z*(x*f),J=X*f,te=_+Q+J+R;Y=w[te]}let ce=_+T+D+R;l[ce]=Y}}}}return{dataId:a.write(l,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};p();var lee=xt(js,r=>{let e=Math.floor(r);return r-e<.5?Math.floor(r):r-e>.5?Math.ceil(r):e%2===0?e:e+1}),zD={kernelName:js,backendName:"cpu",kernelFunc:lee};p();p();function $3(r,e,t,n,o,i,s,a,l,u){let c=[n/o,o],x=r.values,f=e.values;if(n===0)return it(t,e.dtype);let h=it(c,e.dtype);h.values.fill(l);for(let g=0;g<i;g++){let m=[],b=0;for(let v=0;v<s;v++){let w=x[g*s+v];m.push(w),b+=w*a[v]}if(b<0||b>=n/o)throw new Error(`Invalid indices: ${m} does not index into ${t}`);for(let v=0;v<o;v++)u?h.values[b*o+v]+=f[g*o+v]:h.values[b*o+v]=e.rank===0?f[0]:f[g*o+v]}return h}function uee(r){let{inputs:e,backend:t,attrs:n}=r,{indices:o,updates:i}=e,{shape:s}=n,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:x}=H.calculateShapes(i,o,s),f=!0,h=t.bufferSync(o),g=t.bufferSync(i),m=$3(h,g,s,x,u,l,a,c,0,f);return t.makeTensorInfo(s,m.dtype,m.values)}var LD={kernelName:xu,backendName:"cpu",kernelFunc:uee};p();function cee(r){let{inputs:e,backend:t}=r,{condition:n,t:o,e:i}=e;Fe([n,o,i],"select");let s=n.shape.length,a=t.data.get(n.dataId).values,l=t.data.get(o.dataId).values,u=t.data.get(i.dataId).values,c=nn(o.dtype,i.dtype),x=I.makeZerosTypedArray(I.sizeFromShape(o.shape),c),f=0,h=s===0||s>1||o.shape.length===1?1:I.sizeFromShape(o.shape.slice(1));for(let g=0;g<a.length;g++)for(let m=0;m<h;m++)a[g]===1?x[f++]=l[g]:x[f++]=u[g];return t.makeTensorInfo(o.shape,c,x)}var PD={kernelName:E0,backendName:"cpu",kernelFunc:cee};p();var pee=H.SELU_SCALEALPHA,xee=H.SELU_SCALE,fee=xt(Ys,r=>r>=0?xee*r:pee*(Math.exp(r)-1)),BD={kernelName:Ys,backendName:"cpu",kernelFunc:fee};p();var mee=xt(ea,r=>1/(1+Math.exp(-r))),UD={kernelName:ea,backendName:"cpu",kernelFunc:mee};p();var hee=xt(Qs,r=>r<0?-1:r>0?1:0),VD={kernelName:Qs,backendName:"cpu",kernelFunc:hee};p();var dee=xt(Zs,r=>Math.sin(r)),GD={kernelName:Zs,backendName:"cpu",kernelFunc:dee};p();var gee=xt(Js,r=>Math.sinh(r)),WD={kernelName:Js,backendName:"cpu",kernelFunc:gee};p();var yee=11920928955078125e-23,qD=Math.log(yee)+2,bee=xt(ta,r=>{let e=r>-qD,t=r<qD,n=Math.exp(r),o;return t?o=n:e?o=r:o=Math.log(1+n),o}),HD={kernelName:ta,backendName:"cpu",kernelFunc:bee};p();function vee(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockShape:i,paddings:s}=n;Fe([o],"spaceToBatchND");let a=I.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let E=1+i.length;E<o.shape.length;++E)l.push([0,0]);let u=R3.kernelFunc({inputs:{x:o},backend:t,attrs:{paddings:l,constantValue:0}}),c=H.getReshaped(u.shape,i,a,!1),x=H.getPermuted(c.length,i.length,!1),f=H.getReshapedPermuted(u.shape,i,a,!1),m=Vt({inputs:{x:u},backend:t,attrs:{shape:c}}),w=pn({inputs:{x:m},backend:t,attrs:{perm:x}}),_=Vt({inputs:{x:w},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(w),_}var KD={kernelName:R0,backendName:"cpu",kernelFunc:vee};p();function wee(r){let{inputs:e,backend:t,attrs:n}=r,{sparseIndices:o,sparseValues:i,defaultValue:s}=e,{outputShape:a}=n,{sliceRank:l,numUpdates:u,sliceSize:c,strides:x,outputSize:f}=H.calculateShapes(i,o,a),h=!1,g=t.bufferSync(o),m=t.bufferSync(i),b=t.data.get(s.dataId).values[0],v=$3(g,m,a,f,c,u,l,x,b,h);return t.makeTensorInfo(a,v.dtype,v.values)}var jD={kernelName:mu,backendName:"cpu",kernelFunc:wee};p();function Cee(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{numOrSizeSplits:i,axis:s}=n,a=I.parseAxisParam(s,o.shape)[0],l=H.prepareSplitSize(o,i,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(x=>{let f=[...c];f[a]=x;let h=Oi({inputs:{x:o},backend:t,attrs:{begin:u,size:f}});return u[a]+=x,h})}var XD={kernelName:$0,backendName:"cpu",kernelFunc:Cee};p();var Nee=xt(ra,r=>Math.sqrt(r)),YD={kernelName:ra,backendName:"cpu",kernelFunc:Nee};p();var ZD={kernelName:fu,backendName:"cpu",kernelFunc:({inputs:r,backend:e})=>{let{x:t}=r,n=e;Fe(t,"square");let o=n.data.get(t.dataId).values,i=new Float32Array(o.length);for(let a=0;a<o.length;++a){let l=o[a];i[a]=l*l}return{dataId:n.write(i,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};p();var _ee=xt(aa,(r,e)=>{let t=e;return isNaN(r)?NaN:r>0?1:t.alpha}),JD={kernelName:aa,backendName:"cpu",kernelFunc:_ee};p();function See(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{begin:i,end:s,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:x,shrinkAxisMask:f}=n;Fe(o,"stridedSlice");let{nonStrided:h,$begin:g,$strides:m,size:b,newShape:v,outShape:w}=Tn.sliceInfo(o.shape,i,s,a,l,u,c,x,f),C=Vt({inputs:{x:o},backend:t,attrs:{shape:v}}),N;if(h){let E=Oi({inputs:{x:C},backend:t,attrs:{begin:g,size:b}});N=Vt({inputs:{x:E},backend:t,attrs:{shape:w}}),t.disposeIntermediateTensorInfo(E)}else if(w.some(E=>E===0))N=t.makeTensorInfo(w,o.dtype,[]);else{let E=t.bufferSync(C),T=S3(w,E,m,g);N=t.makeTensorInfo(T.shape,T.dtype,T.values)}let _=Vt({inputs:{x:N},backend:t,attrs:{shape:w}});return t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(N),_}var QD={kernelName:hu,backendName:"cpu",kernelFunc:See};p();var Tee=xt(ia,r=>Math.tan(r)),eR={kernelName:ia,backendName:"cpu",kernelFunc:Tee};p();var Iee=xt(sa,r=>Math.tanh(r)),tR={kernelName:sa,backendName:"cpu",kernelFunc:Iee};p();function kee(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{reps:i}=n;Fe(o,"tile");let s=T3(t.bufferSync(o),i);return t.makeTensorInfo(s.shape,s.dtype,s.values)}var rR={kernelName:qi,backendName:"cpu",kernelFunc:kee};p();function Eee(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{k:i,sorted:s}=n;Fe(o,"topk");let a=t.data.get(o.dataId).values,[l,u]=I3(a,o.shape,o.dtype,i,s);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(u.shape,u.dtype,u.values)]}var nR={kernelName:du,backendName:"cpu",kernelFunc:Eee};p();function Aee(r){let{inputs:e,attrs:t,backend:n}=r,{axis:o}=t,{x:i}=e;Fe(i,"unique");let s=n.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:u}=k3(s,o,i.shape,i.dtype);return[n.makeTensorInfo(l,i.dtype,a),n.makeTensorInfo([u.length],"int32",u)]}var oR={kernelName:gu,backendName:"cpu",kernelFunc:Aee};p();function Dee(r){let{inputs:e,backend:t,attrs:n}=r,{value:o}=e,{axis:i}=n;i<0&&(i+=o.shape.length);let s=o.shape.length,a=o.shape[i],l=new Array(s-1),u=0;for(let h=0;h<s;h++)h!==i&&(l[u++]=o.shape[h]);let c=new Array(s).fill(0),x=o.shape.slice();x[i]=1;let f=new Array(a);for(let h=0;h<f.length;h++){c[i]=h;let g=Oi({inputs:{x:o},backend:t,attrs:{begin:c,size:x}});f[h]=Vt({inputs:{x:g},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(g)}return f}var iR={kernelName:M0,backendName:"cpu",kernelFunc:Dee};p();function Ree(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,segmentIds:i}=e,{numSegments:s}=n;Fe(o,"unsortedSegmentSum");let a=o.shape.length,l=i.shape.length,u=[],c=[],x=a-l,f=i;for(let g=0;g<x;++g){let m=bx({inputs:{input:f},backend:t,attrs:{dim:g+1}});f=m,c.push(m)}for(let g=0;g<s;++g){let m=I.createScalarValue(g,"int32"),b=t.makeTensorInfo([],"int32",m),v=L7({inputs:{a:b,b:f},backend:t}),w=Di({inputs:{x:v},backend:t,attrs:{dtype:"float32"}}),C=nh({inputs:{a:w,b:o},backend:t}),N=Ju({inputs:{x:C},backend:t,attrs:{axis:0,keepDims:!1}});u.push(N),c.push(b),c.push(v),c.push(w),c.push(C),c.push(N)}let h=V7({inputs:u,backend:t,attrs:{axis:0}});return c.forEach(g=>t.disposeIntermediateTensorInfo(g)),h}var sR={kernelName:z0,backendName:"cpu",kernelFunc:Ree};var $ee=[WE,fE,qE,HE,yE,KE,jE,XE,YE,ZE,JE,QE,eA,tA,rA,oA,iA,sA,aA,GE,lA,uA,cA,gE,bE,pA,mE,xA,mA,dA,gA,hA,bA,vA,yA,wA,CA,NA,_A,SA,TA,IA,kA,EA,AA,DA,$A,RA,sh,zE,OA,FA,MA,vE,zA,wE,LA,PA,BA,CE,UA,VA,GA,WA,qA,NE,HA,hE,KA,fA,jA,XA,YA,LE,_E,ZA,JA,SE,QA,eD,tD,rD,nD,oD,TE,sD,aD,lD,uD,pD,iD,fD,mD,IE,hD,dD,bD,kE,EE,vD,wD,CD,AE,ND,TD,ID,R3,kD,PE,RE,ED,dE,AD,BE,UE,VE,DD,RD,$D,OD,FD,MD,zD,$E,LD,PD,BD,UD,VD,GD,WD,OE,gD,HD,KD,jD,XD,YD,ZD,FE,JD,QD,ME,xD,eR,tR,rR,nR,DE,oR,iR,sR,_D];for(let r of $ee)Hc(r);p();p();p();p();p();p();var Qu={},G7={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function aR(r,e){Qu[r]=e}function ni(r){if(!(r in Qu)){let t=Fee(r);if(t!==null)Qu[r]=t;else return console.log("Could not get context for WebGL version",r),null}let e=Qu[r];return e.isContextLost()?(delete Qu[r],ni(r)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Qu[r])}function Oee(r){if(typeof OffscreenCanvas<"u"&&r===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Fee(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=Oee(r);return e.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete Qu[r]},!1),r===1?e.getContext("webgl",G7)||e.getContext("experimental-webgl",G7):e.getContext("webgl2",G7)}p();var xl;(function(r){r[r.DENSE=0]="DENSE",r[r.SHARED_BATCH=1]="SHARED_BATCH"})(xl||(xl={}));var Un;(function(r){r[r.RENDER=0]="RENDER",r[r.UPLOAD=1]="UPLOAD",r[r.PIXELS=2]="PIXELS",r[r.DOWNLOAD=3]="DOWNLOAD"})(Un||(Un={}));var Dn;(function(r){r[r.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",r[r.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",r[r.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",r[r.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",r[r.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Dn||(Dn={}));function ec(r,e){return[e,r]}function lR(r,e){return r*e}function fl(r){let e=I.sizeFromShape(r),t=Math.ceil(e/4);return I.sizeToSquarishShape(t)}function Da(r,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(r/2))]}function uR(r,e){let[t,n]=Da(r,e);return t*n*4}function uh(r,e){let t=r,n,o,i,s,a,l,u,c,x,f;return we().getNumber("WEBGL_VERSION")===2?(n=t.R32F,o=t.R16F,i=t.RGBA16F,s=t.RGBA32F,a=t.RED,u=4,c=1,x=t.HALF_FLOAT,f=t.FLOAT):(n=r.RGBA,o=r.RGBA,i=r.RGBA,s=t.RGBA,a=r.RGBA,u=4,c=4,x=e!=null?e.HALF_FLOAT_OES:null,f=r.FLOAT),l=r.RGBA,{internalFormatFloat:n,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:x,textureTypeFloat:f}}function pt(r,e){let t=e();return we().getBool("DEBUG")&&Mee(r),t}function Mee(r){let e=r.getError();if(e!==r.NO_ERROR)throw new Error("WebGL Error: "+Pee(r,e))}var zee=596e-10,Lee=65504;function cR(r){return!!(we().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||r===0||zee<Math.abs(r)&&Math.abs(r)<Lee)}function Pee(r,e){switch(e){case r.NO_ERROR:return"NO_ERROR";case r.INVALID_ENUM:return"INVALID_ENUM";case r.INVALID_VALUE:return"INVALID_VALUE";case r.INVALID_OPERATION:return"INVALID_OPERATION";case r.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case r.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case r.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function ch(r,e){return i2(r,()=>r.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function pR(r,e){let t=i2(r,()=>r.createShader(r.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(pt(r,()=>r.shaderSource(t,e)),pt(r,()=>r.compileShader(t)),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw console.log(r.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function xR(r,e){let t=i2(r,()=>r.createShader(r.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(pt(r,()=>r.shaderSource(t,e)),pt(r,()=>r.compileShader(t)),r.getShaderParameter(t,r.COMPILE_STATUS)===!1)throw Uee(e,r.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}var Bee=/ERROR: [0-9]+:([0-9]+):/g;function Uee(r,e){let t=Bee.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(r);return}let n=+t[1],o=r.split(`
`),i=o.length.toString().length+2,s=o.map((x,f)=>I.rightPad((f+1).toString(),i)+x),a=0;for(let x=0;x<s.length;x++)a=Math.max(s[x].length,a);let l=s.slice(0,n-1),u=s.slice(n-1,n),c=s.slice(n);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${I.rightPad(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function fR(r){return i2(r,()=>r.createProgram(),"Unable to create WebGLProgram.")}function mR(r,e){if(pt(r,()=>r.linkProgram(e)),r.getProgramParameter(e,r.LINK_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function F3(r,e){if(pt(r,()=>r.validateProgram(e)),r.getProgramParameter(e,r.VALIDATE_STATUS)===!1)throw console.log(r.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function hR(r,e){let t=i2(r,()=>r.createBuffer(),"Unable to create WebGLBuffer");return pt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,t)),pt(r,()=>r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)),t}function dR(r,e){let t=i2(r,()=>r.createBuffer(),"Unable to create WebGLBuffer");return pt(r,()=>r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t)),pt(r,()=>r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW)),t}function gR(r){return i2(r,()=>r.createTexture(),"Unable to create WebGLTexture.")}function yR(r,e){let t=we().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||e<=0){let n=`[${r}x${e}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(r>t||e>t){let n=`[${r}x${e}]`,o=`[${t}x${t}]`;throw new Error("Requested texture size "+n+" greater than WebGL maximum on this browser / GPU "+o+".")}}function bR(r){return i2(r,()=>r.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function j7(r,e,t,n,o,i,s){let a=r.getAttribLocation(e,t);return a===-1?!1:(pt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,n)),pt(r,()=>r.vertexAttribPointer(a,o,r.FLOAT,!1,i,s)),pt(r,()=>r.enableVertexAttribArray(a)),!0)}function Vee(r,e,t){Wee(r,t),pt(r,()=>r.activeTexture(r.TEXTURE0+t)),pt(r,()=>r.bindTexture(r.TEXTURE_2D,e))}function vR(r,e,t){return i2(r,()=>r.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function wR(r,e,t){return r.getUniformLocation(e,t)}function CR(r,e,t,n){pt(r,()=>Vee(r,e,n)),pt(r,()=>r.uniform1i(t,n))}function M3(r,e,t){pt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,t)),pt(r,()=>r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0))}function X7(r,e){pt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,e)),pt(r,()=>r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0))}function ph(r){let e=r.checkFramebufferStatus(r.FRAMEBUFFER);if(e!==r.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Gee(r,e))}function Gee(r,e){switch(e){case r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case r.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function i2(r,e,t){let n=pt(r,()=>e());if(n==null)throw new Error(t);return n}function Wee(r,e){let t=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=e+r.TEXTURE0;if(n<r.TEXTURE0||n>t){let o=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${o}.`)}}function ml(r,e=2){return I.sizeFromShape(r.slice(0,r.length-e))}function hl(r){if(r.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[r.length>1?r[r.length-2]:1,r[r.length-1]]}function z3(r){let e=[1,1,1];return r.length===0||r.length===1&&r[0]===1||(e=[ml(r),...hl(r)]),e}function NR(r,e=!1){let t=we().getNumber("WEBGL_MAX_TEXTURE_SIZE");e&&(t=t*2,r=r.map((o,i)=>i>=r.length-2?I.nearestLargerEven(r[i]):r[i]),r.length===1&&(r=[2,r[0]])),r.length!==2&&(r=I.squeezeShape(r).newShape);let n=I.sizeFromShape(r);if(r.length<=1&&n<=t)return[1,n];if(r.length===2&&r[0]<=t&&r[1]<=t)return r;if(r.length===3&&r[0]*r[1]<=t&&r[2]<=t)return[r[0]*r[1],r[2]];if(r.length===3&&r[0]<=t&&r[1]*r[2]<=t)return[r[0],r[1]*r[2]];if(r.length===4&&r[0]*r[1]*r[2]<=t&&r[3]<=t)return[r[0]*r[1]*r[2],r[3]];if(r.length===4&&r[0]<=t&&r[1]*r[2]*r[3]<=t)return[r[0],r[1]*r[2]*r[3]];if(e){let o=ml(r),i=2,s=2;return r.length&&([i,s]=hl(r)),n=o*(i/2)*(s/2),I.sizeToSquarishShape(n).map(a=>a*2)}return I.sizeToSquarishShape(n)}function O3(r){return r%2===0}function tc(r,e){if(r=r.slice(-2),e=e.slice(-2),I.arraysEqual(r,e)||!r.length||!e.length||r[0]===0||r[1]===0||e[0]===0||e[1]===0)return!0;if(r.length!==e.length){let t=r.slice(-1)[0],n=e.slice(-1)[0];if(t===n||O3(t)&&O3(n)&&(r[0]===1||e[0]===1))return!0}return r[1]===e[1]&&O3(r[0])&&O3(e[0])}var q7,H7;function _R(r){if(q7==null){let e=ni(r);q7=e.getParameter(e.MAX_TEXTURE_SIZE)}return q7}function SR(r){if(H7==null){let e=ni(r);H7=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,H7)}function TR(r){if(r===0)return 0;let e,t=ni(r);return oi(t,"EXT_disjoint_timer_query_webgl2")&&r===2?e=2:oi(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function oi(r,e){return r.getExtension(e)!=null}function Y7(r){try{if(ni(r)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function IR(r){if(r===0)return!1;let e=ni(r);if(r===1){if(!oi(e,"OES_texture_float"))return!1}else if(!oi(e,"EXT_color_buffer_float"))return!1;return K7(e)}function kR(r){if(r===0)return!1;let e=ni(r);if(r===1){if(!oi(e,"OES_texture_float")||!oi(e,"WEBGL_color_buffer_float"))return!1}else{if(oi(e,"EXT_color_buffer_float"))return K7(e);let n="EXT_color_buffer_half_float";if(oi(e,n)){let o=e.getExtension(n);return qee(e,o)}return!1}return K7(e)}function K7(r){let e=uh(r),t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);let n=1,o=1;r.texImage2D(r.TEXTURE_2D,0,e.internalFormatFloat,n,o,0,e.textureFormatFloat,e.textureTypeFloat,null);let i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0);let s=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(t),r.deleteFramebuffer(i),s}function qee(r,e){let t=uh(r,e),n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);let o=1,i=1;r.texImage2D(r.TEXTURE_2D,0,t.internalFormatHalfFloat,o,i,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);let s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0);let a=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(n),r.deleteFramebuffer(s),a}function ER(r){return r!==2?!1:ni(r).fenceSync!=null}function Ra(r,e){Array.isArray(r)||(r=[r]),r.forEach(t=>{t!=null&&I.assert(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}var _t=we();_t.registerFlag("HAS_WEBGL",()=>_t.getNumber("WEBGL_VERSION")>0);_t.registerFlag("WEBGL_VERSION",()=>Y7(2)?2:Y7(1)?1:0);_t.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);_t.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>_t.get("WEBGL_VERSION")===2);_t.registerFlag("WEBGL_CPU_FORWARD",()=>!0);_t.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);_t.registerFlag("WEBGL_PACK",()=>_t.getBool("HAS_WEBGL"));_t.registerFlag("WEBGL_PACK_NORMALIZATION",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_CLIP",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);_t.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_PACK_REDUCE",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_LAZILY_UNPACK",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_CONV_IM2COL",()=>_t.getBool("WEBGL_PACK"));_t.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>_R(_t.getNumber("WEBGL_VERSION")));_t.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>SR(_t.getNumber("WEBGL_VERSION")));_t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let r=_t.getNumber("WEBGL_VERSION");return r===0?0:TR(r)});_t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>_t.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!I2.isMobile());_t.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>IR(_t.getNumber("WEBGL_VERSION")));_t.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>_t.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:_t.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));_t.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>kR(_t.getNumber("WEBGL_VERSION")));_t.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ER(_t.getNumber("WEBGL_VERSION")));_t.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>_t.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);_t.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,r=>{if(r<0&&r!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${r}.`)});p();p();function zr(){let r,e,t,n,o,i,s,a,l,u;return we().getNumber("WEBGL_VERSION")===2?(r="#version 300 es",e="in",t="out",n="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(r="",e="attribute",t="varying",n="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:r,attribute:e,varyingVs:t,varyingFs:n,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}p();function is(r,e,t="index"){let n=I.computeStrides(e);return n.map((o,i)=>{let s=`int ${r[i]} = ${t} / ${o}`,a=i===n.length-1?`int ${r[i+1]} = ${t} - ${r[i]} * ${o}`:`index -= ${r[i]} * ${o}`;return`${s}; ${a};`}).join("")}function vx(r){let e=I.computeStrides(r).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}var P3=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var Z7=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=xl.DENSE;let t=fl(e),n=zr();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${is(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${t[0]}, ${t[1]}));
        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};p();var J7=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=xl.DENSE;let t=fl(e),n=zr();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${is(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${t[0]}, ${t[1]}));
        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};p();var Q7=class{constructor(e){this.variableNames=["A"],this.outTexUsage=Un.DOWNLOAD;let t=zr();this.outputShape=e,this.userCode=`
      ${P3}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}};p();var e8=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Un.DOWNLOAD;let t=zr();this.outputShape=e,this.userCode=`
      ${P3}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}};p();var t8=class{constructor(e,t,n=!1){this.variableNames=["A"];let o=zr(),[i,s]=t;this.outputShape=e;let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${vx(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${s};
        int c = imod(flatIndex, ${s});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);
        vec4 values = ${o.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${o.output} = vec4(${a}, 0., 0., 0.);
      }
    `}};p();var r8=class{constructor(e,t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let o=zr(),[i,s]=t;this.outputShape=e;let a="",l="result";n&&(l="floor(result * 255. + 0.5)");for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){let x=u*2+c;a+=`
          localCoords = coords;
          if(localCoords[2] + ${c} < ${e[2]}) {
            localCoords[2] += ${c};
            if(localCoords[1] + ${u} < ${e[1]}) {
              localCoords[1] += ${u};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${s};
              c = imod(flatIndex, ${s});
              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);
              values = ${o.texture2D}(A, uv);

              if(offset == 0) {
                result[${x}] = values[0];
              } else if(offset == 1) {
                result[${x}] = values[1];
              } else if(offset == 2) {
                result[${x}] = values[2];
              } else {
                result[${x}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${vx(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${a}

        ${o.output} = ${l};
      }
    `}};p();p();function AR(r){let e=zr(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return pR(r,t)}function DR(r){let e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return hR(r,e)}function RR(r){let e=new Uint16Array([0,1,2,2,1,3]);return dR(r,e)}function xh(r,e,t,n,o,i){yR(e,t);let s=gR(r),a=r.TEXTURE_2D;return pt(r,()=>r.bindTexture(a,s)),pt(r,()=>r.texParameteri(a,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE)),pt(r,()=>r.texParameteri(a,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE)),pt(r,()=>r.texParameteri(a,r.TEXTURE_MIN_FILTER,r.NEAREST)),pt(r,()=>r.texParameteri(a,r.TEXTURE_MAG_FILTER,r.NEAREST)),pt(r,()=>r.texImage2D(a,0,n,e,t,0,o,i,null)),pt(r,()=>r.bindTexture(r.TEXTURE_2D,null)),s}function n8(r){return r.internalFormatFloat}function $R(r,e,t,n){let[o,i]=ec(e,t);return xh(r,o,i,n8(n),n.textureFormatFloat,r.FLOAT)}function o8(r){return r.internalFormatHalfFloat}function OR(r,e,t,n){let[o,i]=ec(e,t);return xh(r,o,i,o8(n),n.textureFormatFloat,n.textureTypeHalfFloat)}function i8(r){return r.downloadTextureFormat}function FR(r,e,t,n){let[o,i]=ec(e,t);return xh(r,o,i,i8(n),r.RGBA,r.UNSIGNED_BYTE)}function s8(r){return r.internalFormatPackedFloat}function MR(r,e,t,n){let[o,i]=Da(e,t);return xh(r,o,i,s8(n),r.RGBA,r.FLOAT)}function a8(r){return r.internalFormatPackedHalfFloat}function zR(r,e,t,n){let[o,i]=Da(e,t);return xh(r,o,i,a8(n),r.RGBA,n.textureTypeHalfFloat)}function LR(r,e,t){return pt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,t)),j7(r,e,"clipSpacePos",t,3,20,0)&&j7(r,e,"uv",t,2,20,12)}function PR(r,e,t,n,o,i){pt(r,()=>r.bindTexture(r.TEXTURE_2D,e));let s,a,l;o instanceof Uint8Array?(s=new Uint8Array(t*n*4),a=r.UNSIGNED_BYTE,l=r.RGBA):(s=new Float32Array(t*n*4),a=r.FLOAT,l=i.internalFormatPackedFloat),s.set(o),pt(r,()=>r.texImage2D(r.TEXTURE_2D,0,l,t,n,0,r.RGBA,a,s)),pt(r,()=>r.bindTexture(r.TEXTURE_2D,null))}function BR(r,e,t){pt(r,()=>r.bindTexture(r.TEXTURE_2D,e)),t.data instanceof Uint8Array?pt(r,()=>r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width,t.height,0,r.RGBA,r.UNSIGNED_BYTE,t.data)):pt(r,()=>r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)),pt(r,()=>r.bindTexture(r.TEXTURE_2D,null))}function UR(r,e,t,n){let o=r.createBuffer();pt(r,()=>r.bindBuffer(r.PIXEL_PACK_BUFFER,o));let a=4*4*e*t;return pt(r,()=>r.bufferData(r.PIXEL_PACK_BUFFER,a,r.STREAM_READ)),pt(r,()=>r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,0)),pt(r,()=>r.bindBuffer(r.PIXEL_PACK_BUFFER,null)),o}function VR(r,e,t){let n=r,o=new Float32Array(t);return n.bindBuffer(n.PIXEL_PACK_BUFFER,e),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,o),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),o}function GR(r,e,t,n){let[o,i]=ec(e,t),s=4,a=new Uint8Array(lR(e*t,s));return pt(r,()=>r.readPixels(0,0,o,i,n.downloadTextureFormat,r.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function WR(r,e,t,n,o,i,s,a){let l=r,u=new Float32Array(uR(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function qR(r,e,t){let n=new Float32Array(e*t*4);return pt(r,()=>r.readPixels(0,0,t,e,r.RGBA,r.FLOAT,n)),n}var l8=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];let t=we().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,aR(t,e)):this.gl=ni(t);let n="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(we().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=ch(this.gl,i),oi(this.gl,s))this.textureHalfFloatExtension=ch(this.gl,s);else if(we().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),oi(this.gl,o))this.colorBufferHalfFloatExtension=ch(this.gl,o);else if(we().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",oi(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else if(oi(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=DR(this.gl),this.indexBuffer=RR(this.gl),this.framebuffer=bR(this.gl),this.textureConfig=uh(this.gl,this.textureHalfFloatExtension)}get debug(){return we().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;pt(e,()=>e.finish()),pt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),pt(e,()=>e.deleteFramebuffer(this.framebuffer)),pt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),pt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),pt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),$R(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),OR(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),FR(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),BR(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,o){this.throwIfDisposed(),PR(this.gl,e,t,n,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),zR(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),MR(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(X7(this.gl,this.framebuffer),this.outputTexture=null),pt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>GR(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,o,i,s){return WR(this.gl,e,t,n,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return VR(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let o=UR(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(we().getBool("WEBGL_FENCE_API_ENABLED")){let o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},t=i}else we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>qR(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl,n=xR(t,e),o=AR(t),i=fR(t);return pt(t,()=>t.attachShader(i,o)),pt(t,()=>t.attachShader(i,n)),mR(t,i),this.debug&&F3(t,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=LR(t,this.program,this.vertexBuffer)),i}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&pt(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&F3(this.gl,this.program),pt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?vR(this.gl,e,t):wR(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),pt(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),CR(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[o,i]=Da(t,n);this.setOutputMatrixTextureDriver(e,o,i)}setOutputMatrixWriteRegion(e,t,n,o){this.setOutputMatrixWriteRegionDriver(n,e,o,t)}setOutputPackedMatrixWriteRegion(e,t,n,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&F3(this.gl,this.program),ph(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;this.debug&&this.debugValidate(),pt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),pt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ch(this.gl,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=n.createQuery();return n.beginQuery(o.TIME_ELAPSED_EXT,i),i}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await I.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){let n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}else{let n=this.getQueryTimerExtensionWebGL1();return n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let n=this.getQueryTimerExtensionWebGL1(),o=n.getQueryObjectEXT(e,n.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=Kee(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:n}=this.itemsToPoll[t];n()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&I.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),M3(this.gl,e,this.framebuffer),this.debug&&ph(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(M3(this.gl,this.outputTexture,this.framebuffer),this.debug&&ph(this.gl)):X7(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let o=this.gl;M3(o,e,this.framebuffer),this.debug&&ph(o),this.outputTexture=e,pt(o,()=>o.viewport(0,0,t,n)),pt(o,()=>o.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,o){this.throwIfDisposed(),pt(this.gl,()=>this.gl.scissor(e,t,n,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function Kee(r){let e=0;for(;e<r.length&&r[e]();++e);return e-1}p();p();var{getBroadcastDims:HR}=H;function KR(r,e,t,n){let o=[];r.forEach(g=>{let m=I.sizeFromShape(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?o.push(`uniform float ${g.name}${m>1?`[${m}]`:""};`):(o.push(`uniform sampler2D ${g.name};`),o.push(`uniform int offset${g.name};`))});let i=o.join(`
`),s=r.map(g=>jee(g,e,n)).join(`
`),a=e.texShape,l=zr(),u=Zee(l),c,x,f=ete(l);return e.isPacked?(c=Xee(e.logicalShape,a),x=Qee(l)):(c=Yee(e.logicalShape,a),x=Jee(l)),n&&(f+=ote),[f,u,x,i,c,s,t].join(`
`)}function Cx(r){let e=r.shapeInfo.logicalShape;switch(e.length){case 0:return dte(r);case 1:return yte(r);case 2:return vte(r);case 3:return Cte(r);case 4:return _te(r);case 5:return Ste(r);case 6:return Tte(r);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function jR(r){switch(r.shapeInfo.logicalShape.length){case 0:return hte(r);case 1:return gte(r);case 2:return bte(r);case 3:return wte(r);default:return Nte(r)}}function jee(r,e,t=!1){let n="";t?n+=jR(r):n+=Cx(r);let o=r.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(t?n+=Ite(r,e):n+=kte(r,e)),n}function Xee(r,e){switch(r.length){case 0:return XR();case 1:return ite(r,e);case 2:return fte(r,e);case 3:return ate(r,e);default:return ute(r,e)}}function Yee(r,e){switch(r.length){case 0:return XR();case 1:return ste(r,e);case 2:return mte(r,e);case 3:return lte(r,e);case 4:return cte(r,e);case 5:return pte(r,e);case 6:return xte(r,e);default:throw new Error(`${r.length}-D output sampling is not yet supported`)}}function Zee(r){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${r.texture2D}(textureSampler, uv).r;
    }
  `}function Jee(r){return`
    void setOutput(float val) {
      ${r.output} = vec4(val, 0, 0, 0);
    }
  `}function Qee(r){return`
    void setOutput(vec4 val) {
      ${r.output} = val;
    }
  `}function ete(r){return`${r.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${r.varyingFs} vec2 resultUV;
    ${r.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${r.defineSpecialNaN}
    ${r.defineSpecialInf}
    ${r.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${tte}
    ${rte}
    ${nte}
  `}var tte=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rte=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nte=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ote=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function XR(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function ite(r,e){let t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return t[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${t[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return 2 * (resTexRC.x * ${t[1]} + resTexRC.y);
    }
  `}function ste(r,e){return e[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function ate(r,e){let t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],n=Math.ceil(r[2]/2),o=n*Math.ceil(r[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec3(b, r, c);
    }
  `}function lte(r,e){let t=is(["r","c","d"],r);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${t}
      return ivec3(r, c, d);
    }
  `}function ute(r,e){let t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],n=Math.ceil(r[r.length-1]/2),o=n*Math.ceil(r[r.length-2]/2),i=o,s="",a="b, r, c";for(let l=2;l<r.length-1;l++)i*=r[r.length-l-1],s=`
      int b${l} = index / ${i};
      index -= b${l} * ${i};
    `+s,a=`b${l}, `+a;return`
    ivec${r.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${s}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec${r.length}(${a});
    }
  `}function cte(r,e){let t=is(["r","c","d","d2"],r);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${t}
      return ivec4(r, c, d, d2);
    }
  `}function pte(r,e){let t=is(["r","c","d","d2","d3"],r);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function xte(r,e){let t=is(["r","c","d","d2","d3","d4"],r);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function fte(r,e){let t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(I.arraysEqual(r,e))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `;let n=Math.ceil(r[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = 2 * (index / ${n});
      int c = imod(index, ${n}) * 2;

      return ivec2(r, c);
    }
  `}function mte(r,e){return I.arraysEqual(r,e)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:r[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:r[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${r[1]};
      int c = index - r * ${r[1]};
      return ivec2(r, c);
    }
  `}function rc(r){return`offset${r}`}function hte(r){let e=r.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),n=zr();return`
    vec4 ${t}() {
      return ${n.texture2D}(${e}, halfCR);
    }
  `}function dte(r){let e=r.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(r.shapeInfo.isUniform)return`float ${t}() {return ${e};}`;let[n,o]=r.shapeInfo.texShape;if(n===1&&o===1)return`
      float ${t}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let[i,s]=r.shapeInfo.texShape,a=rc(e);return`
    float ${t}() {
      vec2 uv = uvFromFlat(${i}, ${s}, ${a});
      return sampleTexture(${e}, uv);
    }
  `}function gte(r){let e=r.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),n=r.shapeInfo.texShape,o=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],i=zr();return`
    vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }
  `}function yte(r){let e=r.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(r.shapeInfo.isUniform)return`
      float ${t}(int index) {
        ${Nx(r)}
      }
    `;let n=r.shapeInfo.texShape,o=n[0],i=n[1];if(i===1&&o===1)return`
      float ${t}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=rc(e);return i===1?`
      float ${t}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);
        return sampleTexture(${e}, uv);
      }
    `:o===1?`
      float ${t}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
    float ${t}(int index) {
      vec2 uv = uvFromFlat(${o}, ${i}, index + ${s});
      return sampleTexture(${e}, uv);
    }
  `}function bte(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=r.shapeInfo.texShape,i=o[0],s=o[1],a=zr();if(o!=null&&I.arraysEqual(e,o))return`
      vec4 ${n}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${i}.0);

        return ${a.texture2D}(${t}, uv);
      }
    `;let l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${n}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${l[0]}, ${l[1]}, row, col);
      return ${a.texture2D}(${t}, uv);
    }
  `}function vte(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=r.shapeInfo.texShape;if(o!=null&&I.arraysEqual(e,o)){let x=o[0],f=o[1];return`
    float ${n}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${x}.0);
      return sampleTexture(${t}, uv);
    }
  `}let{newShape:i,keptDims:s}=I.squeezeShape(e),a=i;if(a.length<e.length){let x=_x(r,a),f=["row","col"];return`
      ${Cx(x)}
      float ${n}(int row, int col) {
        return ${n}(${Sx(f,s)});
      }
    `}if(r.shapeInfo.isUniform)return`
      float ${n}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${Nx(r)}
      }
    `;let l=o[0],u=o[1],c=rc(t);return u===1?`
    float ${n}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${t}, uv);
    }
  `:l===1?`
    float ${n}(int row, int col) {
      float index = dot(vec3(row, col, ${c}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${t}, uv);
    }
  `:`
  float ${n}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${c};
    vec2 uv = uvFromFlat(${l}, ${u}, index);
    return sampleTexture(${t}, uv);
  }
`}function wte(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=r.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(e[0]===1){let x=e.slice(1),f=[1,2],h=_x(r,x),g=["b","row","col"];return`
        ${jR(h)}
        vec4 ${n}(int b, int row, int col) {
          return ${n}(${Sx(g,f)});
        }
      `}let s=i[0],a=i[1],l=Math.ceil(e[2]/2),u=l*Math.ceil(e[1]/2),c=zr();return`
    vec4 ${n}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${s}, ${a}, ${u}, ${l}, b, row, col);
      return ${c.texture2D}(${t}, uv);
    }
  `}function Cte(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=e[1]*e[2],i=e[2],{newShape:s,keptDims:a}=I.squeezeShape(e),l=s;if(l.length<e.length){let g=_x(r,l),m=["row","col","depth"];return`
        ${Cx(g)}
        float ${n}(int row, int col, int depth) {
          return ${n}(${Sx(m,a)});
        }
      `}if(r.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${i}, 1)));
        ${Nx(r)}
      }
    `;let u=r.shapeInfo.texShape,c=u[0],x=u[1],f=r.shapeInfo.flatOffset;if(x===o&&f==null)return`
        float ${n}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${x}.0, ${c}.0);
          return sampleTexture(${t}, uv);
        }
      `;if(x===i&&f==null)return`
    float ${n}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${x}.0, ${c}.0);
      return sampleTexture(${t}, uv);
    }
  `;let h=rc(t);return`
      float ${n}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${i} + depth + ${h};
        vec2 uv = uvFromFlat(${c}, ${x}, index);
        return sampleTexture(${t}, uv);
      }
  `}function Nte(r){let e=r.shapeInfo.logicalShape,t=e.length,n=r.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],a=s[0],l=s[1],u=Math.ceil(e[t-1]/2),c=u*Math.ceil(e[t-2]/2),x="int b, int row, int col",f=`b * ${c} + (row / 2) * ${u} + (col / 2)`;for(let g=2;g<t-1;g++)x=`int b${g}, `+x,c*=e[t-g-1],f=`b${g} * ${c} + `+f;let h=zr();return`
    vec4 ${o}(${x}) {
      int index = ${f};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${a});
      return ${h.texture2D}(${n}, uv);
    }
  `}function _te(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=e[3],i=e[2]*o,s=e[1]*i,{newShape:a,keptDims:l}=I.squeezeShape(e);if(a.length<e.length){let g=_x(r,a),m=["row","col","depth","depth2"];return`
      ${Cx(g)}
      float ${n}(int row, int col, int depth, int depth2) {
        return ${n}(${Sx(m,l)});
      }
    `}if(r.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${i}, ${o}, 1)));
        ${Nx(r)}
      }
    `;let u=r.shapeInfo.flatOffset,c=r.shapeInfo.texShape,x=c[0],f=c[1];if(f===s&&u==null)return`
      float ${n}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${x}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(f===o&&u==null)return`
      float ${n}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${x}.0);
        return sampleTexture(${t}, uv);
      }
    `;let h=rc(t);return`
    float ${n}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${i} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${x}, ${f}, index + ${h});
      return sampleTexture(${t}, uv);
    }
  `}function Ste(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=e[4],i=e[3]*o,s=e[2]*i,a=e[1]*s,{newShape:l,keptDims:u}=I.squeezeShape(e);if(l.length<e.length){let m=_x(r,l),b=["row","col","depth","depth2","depth3"];return`
      ${Cx(m)}
      float ${n}(int row, int col, int depth, int depth2, int depth3) {
        return ${n}(${Sx(b,u)});
      }
    `}if(r.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${Nx(r)}
      }
    `;let c=r.shapeInfo.flatOffset,x=r.shapeInfo.texShape,f=x[0],h=x[1];if(h===a&&c==null)return`
      float ${n}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${n}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;let g=rc(t);return`
    float ${n}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${g};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Tte(r){let e=r.shapeInfo.logicalShape,t=r.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:o,keptDims:i}=I.squeezeShape(e);if(o.length<e.length){let b=_x(r,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Cx(b)}
      float ${n}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${n}(${Sx(v,i)});
      }
    `}let s=e[5],a=e[4]*s,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(r.shapeInfo.isUniform)return`
      float ${n}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${Nx(r)}
      }
    `;let x=r.shapeInfo.flatOffset,f=r.shapeInfo.texShape,h=f[0],g=f[1];if(g===c&&x==null)return`
      float ${n}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(g===s&&x==null)return`
      float ${n}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;let m=rc(t);return`
    float ${n}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${g}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Nx(r){let e=r.name,t=I.sizeFromShape(r.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Ite(r,e){let t=r.name,n=t.charAt(0).toUpperCase()+t.slice(1),o="get"+n+"AtOutCoords",i=r.shapeInfo.logicalShape.length,s=e.logicalShape.length,a=HR(r.shapeInfo.logicalShape,e.logicalShape),l=wt(s),u=s-i,c,x=["x","y","z","w","u","v"];i===0?c="":s<2&&a.length>=1?c="coords = 0;":c=a.map(w=>`coords.${x[w+u]} = 0;`).join(`
`);let f="";s<2&&i>0?f="coords":f=r.shapeInfo.logicalShape.map((w,C)=>`coords.${x[C+u]}`).join(", ");let h="return outputValue;",m=I.sizeFromShape(r.shapeInfo.logicalShape)===1,v=I.sizeFromShape(e.logicalShape)===1;if(i===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let w=i-2,C=i-1;a.indexOf(w)>-1&&a.indexOf(C)>-1?h="return vec4(outputValue.x);":a.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(C)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${n}(${f});
      ${h}
    }
  `}function kte(r,e){let t=r.name,n=t.charAt(0).toUpperCase()+t.slice(1),o="get"+n+"AtOutCoords",i=e.texShape,s=r.shapeInfo.texShape,a=r.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!r.shapeInfo.isUniform&&a===l&&r.shapeInfo.flatOffset==null&&I.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${t}, resultUV);
      }
    `;let u=wt(l),c=HR(r.shapeInfo.logicalShape,e.logicalShape),x=l-a,f,h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+x]} = 0;`).join(`
`);let g="";return l<2&&a>0?g="coords":g=r.shapeInfo.logicalShape.map((m,b)=>`coords.${h[b+x]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${n}(${g});
    }
  `}function wt(r){if(r<=1)return"int";if(r===2)return"ivec2";if(r===3)return"ivec3";if(r===4)return"ivec4";if(r===5)return"ivec5";if(r===6)return"ivec6";throw Error(`GPU for rank ${r} is not yet supported`)}function _x(r,e){let t=JSON.parse(JSON.stringify(r));return t.shapeInfo.logicalShape=e,t}function Sx(r,e){return e.map(t=>r[t]).join(", ")}function ZR(r,e,t,n){let o=e.userCode,i=t.map((h,g)=>{let m={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(m.flatOffset=h.texData.slice.flatOffset),{name:e.variableNames[g],shapeInfo:m}}),s=i.map(h=>h.shapeInfo),a={logicalShape:n.shape,texShape:n.texData.texShape,isUniform:!1,isPacked:n.texData.isPacked,flatOffset:null},l=KR(i,a,o,e.packedInputs),u=r.createProgram(l),c=null,x=r.getUniformLocation(u,"NAN",!1);we().getNumber("WEBGL_VERSION")===1&&(c=r.getUniformLocation(u,"INFINITY",!1));let f={};for(let h=0;h<e.variableNames.length;h++){let g=e.variableNames[h],m=!1;f[g]=r.getUniformLocation(u,g,m),f[`offset${g}`]=r.getUniformLocation(u,`offset${g}`,m)}return{program:e,source:l,webGLProgram:u,uniformLocations:f,inShapeInfos:s,outShapeInfo:a,infLoc:c,nanLoc:x}}function YR(r,e){if(r.length!==e.length)throw Error(`Binary was compiled with ${r.length} inputs, but was executed with ${e.length} inputs`);r.forEach((t,n)=>{let o=t.logicalShape,i=e[n],s=i.shape;if(!I.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(t.isUniform&&i.isUniform)return;let a=t.texShape,l=i.isUniform?null:i.texData.texShape;if(!I.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function JR(r,e,t,n,o){YR(e.inShapeInfos,t),YR([e.outShapeInfo],[n]);let i=n.texData.texture,s=n.texData.texShape;n.texData.isPacked?r.setOutputPackedMatrixTexture(i,s[0],s[1]):r.setOutputMatrixTexture(i,s[0],s[1]),r.setProgram(e.webGLProgram),we().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&r.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&r.gl.uniform1f(e.nanLoc,NaN),t.forEach((a,l)=>{let u=e.program.variableNames[l],c=e.uniformLocations[u],x=e.uniformLocations[`offset${u}`];if(c!=null){if(a.isUniform){if(I.sizeFromShape(a.shape)<2)r.gl.uniform1f(c,a.uniformValues[0]);else{let f=a.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),r.gl.uniform1fv(c,f)}return}a.texData.slice!=null&&x!=null&&r.gl.uniform1i(x,a.texData.slice.flatOffset),r.setInputMatrixTexture(a.texData.texture,c,l)}}),o?.(r,e.webGLProgram),r.executeProgram()}function QR(r,e,t){let n="";e.concat(t).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0,l=s.isUniform?"uniform":s.texData.texShape;n+=`${s.shape}_${l}_${a}`});let o=r.userCode,i=r.constructor.name;return i+="_"+n+"_"+o,i}p();var{addImpl:e$,bincountImpl:B3,bincountReduceImpl:t$,ceilImpl:r$,concatImpl:n$,expImpl:o$,expm1Impl:i$,floorImpl:s$,gatherV2Impl:a$,greaterImpl:l$,lessImpl:u$,linSpaceImpl:c$,logImpl:p$,maxImpl:x$,maximumImpl:f$,minimumImpl:m$,multiplyImpl:h$,negImpl:d$,prodImpl:g$,rangeImpl:y$,rsqrtImpl:b$,simpleAbsImpl:U3,sliceImpl:v$,stridedSliceImpl:w$,subImpl:C$,tileImpl:N$,topKImpl:_$,transposeImpl:nc,uniqueImpl:S$}=k7;p();p();function u8(r,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${r}.${t}`)}function Kr(r,e){return e===1?[r]:u8(r,e)}function T$(r,e){if(r===1)return"rc";let t="";for(let n=0;n<r;n++)t+=e[n],n<r-1&&(t+=",");return t}var c8=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;let t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=Kr("rc",t),o=wt(t),i=Rte(t,e,n),s=$te(t,e[e.length-1],e[e.length-2],n),a=Ote(e,n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}};function Dte(r,e){let t=[];for(let n=0;n<=1;n++)for(let o=0;o<=1;o++){let i=`${n===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<r;s++)i=`${e[e.length-1-s]},`+i;t.push(i)}return t}function Rte(r,e,t){if(r===1)return`rc > ${e[0]}`;let n="";for(let o=r-2;o<r;o++)n+=`${t[o]} >= ${e[o]}`,o<r-1&&(n+="||");return n}function $te(r,e,t,n){if(r===1)return"";let o=n.slice(-2);return`
    int r = ${o[0]};
    int c = ${o[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${e};
    bool rEdge = rp1 >= ${t};
  `}function Ote(r,e){let t=r.length,n=Dte(t,e);return t===1?`getA(rc),
            rc + 1 >= ${r[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${n[0]}),
          cEdge ? 0. : getA(${n[1]}),
          rEdge ? 0. : getA(${n[2]}),
          rEdge || cEdge ? 0. : getA(${n[3]})`}p();var fh=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),n+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Fte(t)}
      ${vx(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${e[1]};
        int cols = ${e[2]};

        ${n}

        setOutput(result);
      }
    `}};function Fte(r){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${is(["r","c","d"],r)}
      return ivec3(r, c, d);
    }
  `}p();var p8=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){let o=k$(t,n),i=E$(e,o,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=I$(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let a;return o===Dn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Dn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Dn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Dn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Dn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(e,t,n,o){if(this.freeTextures==null)return;let i=k$(n,o),s=E$(t,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=I$(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=we().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=a):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let u=this.usedTextures[s],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(let e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function Mte(r,e){let t=r;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===r.RGBA)return 16;if(e===t.RGBA16F)return 8;throw new Error(`Unknown internal format ${e}`)}function I$(r,e,t,n,o){let i=zte(e,n),s;if(o){let[l,u]=Da(r[0],r[1]);s=l*u}else{let[l,u]=ec(r[0],r[1]);s=l*u}let a=Mte(t,i);return s*a}function zte(r,e){switch(r){case Dn.PACKED_2X2_FLOAT32:return s8(e);case Dn.PACKED_2X2_FLOAT16:return a8(e);case Dn.UNPACKED_FLOAT32:return n8(e);case Dn.UNPACKED_FLOAT16:return o8(e);case Dn.PACKED_4X1_UNSIGNED_BYTE:return i8(e);default:throw new Error(`Unknown physical texture type ${r}`)}}function Lte(r){return we().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?Dn.PACKED_2X2_FLOAT32:Dn.UNPACKED_FLOAT32:r?Dn.PACKED_2X2_FLOAT16:Dn.UNPACKED_FLOAT16}function k$(r,e){if(r===Un.UPLOAD)return Dn.PACKED_2X2_FLOAT32;if(r===Un.RENDER||r==null)return Lte(e);if(r===Un.DOWNLOAD||r===Un.PIXELS)return Dn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${r}`)}function E$(r,e,t){return`${r[0]}_${r[1]}_${e}_${t}`}p();var To=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},wn="if (isnan(x)) return x;",A$="return x;",x8="return abs(x);";var D$="return (x >= 0.0) ? x : (exp(x) - 1.0);",R$=wn+`
  return (x < 0.0) ? 0.0 : x;
`,$$=wn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mh="return x;";p();var F$="return x;",M$=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,z$=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,L$=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ss=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};p();var f8=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;let t=e.length,n=Kr("rc",t),o=wt(t),i=T$(t,n),s=n.slice(-2),a=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var Bte=An.whereImpl,Ute=1e-7,Vte=1e-4,V3={};function Gte(r){return r in V3||(V3[r]={}),V3[r]}var Wte=128,qte=600;function Hte(){return we().global.screen==null?1024:we().global.screen.height*we().global.screen.width*window.devicePixelRatio*qte/1024/1024}var Tx=class extends qa{constructor(e){super();if(this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!we().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){let t=ni(we().getNumber("WEBGL_VERSION"));this.binaryCache=Gte(we().getNumber("WEBGL_VERSION")),this.gpgpu=new l8(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new p8(this.gpgpu),this.numMBBeforeWarning=Hte(),this.texData=new Il(this,Oo())}nextDataId(){return Tx.nextDataId++}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(e,t,n){if((we().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||we().getBool("DEBUG"))&&this.checkNumericalProblems(e),n==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let o={id:this.nextDataId()};return this.texData.set(o,{shape:t,dtype:n,values:e,usage:Un.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){let t=this.texData.get(e);t.refCount--}}move(e,t,n,o,i){if(we().getBool("DEBUG")&&this.checkNumericalProblems(t),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:o,values:t,usage:Un.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:o,complexTensorInfos:i,slice:s,shape:a,isPacked:l}=t;if(s!=null){let f;l?f=new ss(a,mh):f=new To(a,mh);let h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),g=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),g}if(n!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return n;let u=this.activeTimers!=null,c;u&&(c=I.now());let x;if(o==="complex64"){let f=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);x=H.mergeRealAndImagArrays(f,h)}else x=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=I.now()-c),this.convertAndCacheOnCPU(e,x)}async read(e){if(this.pendingRead.has(e)){let g=this.pendingRead.get(e);return new Promise(m=>g.push(m))}let t=this.texData.get(e),{values:n,shape:o,slice:i,dtype:s,complexTensorInfos:a,isPacked:l}=t;if(i!=null){let g;l?g=new ss(o,mh):g=new To(o,mh);let m=this.runWebGLProgram(g,[{dataId:e,shape:o,dtype:s}],s),b=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),b}if(n!=null)return this.convertAndCacheOnCPU(e);if(!we().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&we().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(s!=="complex64"&&we().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);let g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture,...fl(o))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let x;if(s==="complex64"){let g=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=g[0],b=g[1];x=H.mergeRealAndImagArrays(m,b)}else if(u==null)x=this.getValuesFromTexture(e);else{let g=I.sizeFromShape(o);x=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}c!=null&&this.disposeIntermediateTensorInfo(c);let f=this.convertAndCacheOnCPU(e,x),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(g=>g(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Oo().removeDataId(e,this),this.pendingDeletes--),f}bufferSync(e){let t=this.readSync(e.dataId),n=t;if(e.dtype==="string")try{n=t.map(o=>I.decodeString(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return it(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){let n=e[t];if(!cR(n))throw we().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${n} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:o}=this.texData.get(e),i=I.sizeFromShape(t);if(we().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let f=this.decode(e),h=this.texData.get(f.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(h.texture,...fl(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(f),g}let s=we().getBool("WEBGL_PACK")&&o===!0,a=s?z3(t):t,l=s?new e8(a):new Q7(a),u=this.runWebGLProgram(l,[{shape:a,dtype:n,dataId:e}],"float32"),c=this.texData.get(u.dataId),x=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),x}timerAvailable(){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){let t=this.activeTimers,n=[],o=!1;this.programTimersStack==null?(this.programTimersStack=n,o=!0):this.activeTimers.push(n),this.activeTimers=n,e();let i=I.flatten(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=I.flatten(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,o&&(this.programTimersStack=null);let a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let l=await Promise.all(i);a.kernelMs=I.sum(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:s[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:I.now(),endMs:null}}endTimer(e){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=I.now(),e)}async getQueryTime(e){if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return n!=null&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:o,usage:i,isPacked:s,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(o,n),this.textureManager.releaseTexture(t,o,i,s)));let c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return we().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Oo().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(e,t=Wte){let n=this.getCPUBackend();return!we().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&n==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),n!=null&&e.every(o=>this.texData.get(o.dataId).texture==null&&I.sizeFromShape(o.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){H.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return Bte(e.shape,t)}packedUnaryOp(e,t,n){let o=new ss(e.shape,t),i=this.compileAndRun(o,[e],n);return Oo().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let o=U3(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,x8,e.dtype);let t=new To(e.shape,x8),n=this.compileAndRun(t,[e]);return Oo().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let o;if(t==="string"&&n!=null&&n.length>0&&I.isString(n[0])){let i=n.map(s=>I.encodeString(s));o=this.write(i,e,t)}else o=this.write(n,e,t);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:t}}makeOutput(e,t,n){let{dataId:o}=this.makeTensorInfo(e,t,n);return Oo().makeTensorFromDataId(o,e,t,this)}unpackTensor(e){let t=new f8(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new c8(e.shape),n=!0;return this.runWebGLProgram(t,[e],e.dtype,null,n)}packedReshape(e,t){let n=[ml(e.shape),...hl(e.shape)],o={dtype:e.dtype,shape:n,dataId:e.dataId},i=[ml(t),...hl(t)],s=new fh(i,n),a=!0,l=this.runWebGLProgram(s,[o],e.dtype,null,a);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e){let t=this.texData.get(e),{isPacked:n,shape:o,dtype:i}=t,s=z3(o),a;n?a=new J7(s):a=new Z7(s);let l=!0,u=this.runWebGLProgram(a,[{shape:s,dtype:i,dataId:e}],i,null,l);return{dtype:i,shape:o,dataId:u.dataId}}runWebGLProgram(e,t,n,o,i=!1){let s=this.makeTensorInfo(e.outputShape,n),a=this.texData.get(s.dataId);if(e.packedOutput&&(a.isPacked=!0),e.outPackingScheme===xl.DENSE){let m=fl(e.outputShape);a.texShape=m.map(b=>b*2)}if(e.outTexUsage!=null&&(a.usage=e.outTexUsage),I.sizeFromShape(s.shape)===0)return a.values=I.getTypedArrayFromDType(s.dtype,0),s;let l=[],u=t.map(m=>{if(m.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(m.dataId);if(b.texture==null){if(!e.packedInputs&&I.sizeFromShape(m.shape)<=we().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:m.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=m.shape)}else if(!!b.isPacked!=!!e.packedInputs)m=b.isPacked?this.unpackTensor(m):this.packTensor(m),l.push(m),b=this.texData.get(m.dataId);else if(b.isPacked&&!tc(b.shape,m.shape)){let v=m,w=m.shape;m.shape=b.shape,m=this.packedReshape(m,w),l.push(m),b=this.texData.get(m.dataId),v.shape=w}return this.uploadToGPU(m.dataId),{shape:m.shape,texData:b,isUniform:!1}});this.uploadToGPU(s.dataId);let c={shape:s.shape,texData:a,isUniform:!1},x=QR(e,u,c),f=this.getAndSaveBinary(x,()=>ZR(this.gpgpu,e,u,c)),h=this.activeTimers!=null,g;if(h&&(g=this.startTimer()),JR(this.gpgpu,f,u,c,o),l.forEach(m=>this.disposeIntermediateTensorInfo(m)),h&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!we().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&i===!1){let m=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),m}return s}compileAndRun(e,t,n,o,i=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,o,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(we().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=pe(()=>{if(!we().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=we().getBool("DEBUG");we().set("DEBUG",!1);let t=this.abs(Ve(1e-8)).dataSync()[0];if(we().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Ute:Vte}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:o,values:i,texture:s,usage:a,isPacked:l}=t;if(s!=null)return;let u=this.activeTimers!=null,c;u&&(c=I.now());let x=t.texShape;if(x==null&&(x=NR(n,l),t.texShape=x),i!=null){let f=z3(n),h,g=x[1],m=x[0],b=i instanceof Uint8Array;l?([g,m]=Da(x[0],x[1]),h=new r8(f,[m,g],b)):h=new t8(f,[m,g],b);let v=this.makeTensorInfo([m,g],o);b?this.texData.get(v.dataId).usage=Un.PIXELS:this.texData.get(v.dataId).usage=Un.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,m,i);let w=!0,C=this.runWebGLProgram(h,[v],o,null,w),N=this.texData.get(C.dataId);t.texture=N.texture,t.texShape=N.texShape,t.isPacked=N.isPacked,t.usage=N.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(C.dataId),t.values=null,u&&(this.uploadWaitMs+=I.now()-c)}else{let f=this.acquireTexture(x,a,o,l);t.texture=f}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:o}=n;return this.releaseGPUData(e),t!=null&&(n.values=Kte(t,o)),n.values}acquireTexture(e,t,n,o){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,o)}computeBytes(e,t){return e[0]*e[1]*I.bytesPerElement(t)}};Tx.nextDataId=0;function Kte(r,e){if(e==="float32"||e==="complex64")return r;if(e==="int32"||e==="bool"){let t=e==="int32"?new Int32Array(r.length):new Uint8Array(r.length);for(let n=0;n<t.length;++n)t[n]=Math.round(r[n]);return t}else throw new Error(`Unknown dtype ${e}`)}p();var m8="3.1.0";I2.isBrowser()&&xf("webgl",()=>new Tx,2);p();p();p();p();p();var G3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var Fi=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=H.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};p();var dl=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;var as=class{constructor(e,t,n,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=H.assertAndGetBroadcastShape(t,n);let i=this.outputShape.length,s="";if(o)if(i===0||I.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${wt(i)} coords = getOutputCoords();
        `,i===1)s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=Kr("coords",i);s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};p();p();function jr(r){let{inputs:e,backend:t}=r,{x:n}=e;return t.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}var P$={kernelName:Wi,backendName:"webgl",kernelFunc:jr};function Io(r){let{inputs:e,backend:t}=r,{real:n,imag:o}=e,i=t.makeTensorInfo(n.shape,"complex64"),s=t.texData.get(i.dataId),a=jr({inputs:{x:n},backend:t}),l=jr({inputs:{x:o},backend:t});return s.complexTensorInfos={real:a,imag:l},i}var B$={kernelName:Fl,backendName:"webgl",kernelFunc:Io};p();var h8="return (a < 0.) ? b * a : a;",d8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jte(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{alpha:i}=n,s=t.makeTensorInfo([],"float32",I.createScalarValue(i,"float32")),a=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new as(d8,o.shape,s.shape):new Fi(h8,o.shape,s.shape),l=t.runWebGLProgram(a,[o,s],o.dtype);return t.disposeIntermediateTensorInfo(s),l}var U$={kernelName:p0,backendName:"webgl",kernelFunc:jte};p();var g8="return (a < 0.) ? b * a : a;",y8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Xte(r){let{inputs:e,backend:t}=r,{x:n,alpha:o}=e,i=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new as(y8,n.shape,o.shape):new Fi(g8,n.shape,o.shape);return t.runWebGLProgram(i,[n,o],n.dtype)}var V$={kernelName:_0,backendName:"webgl",kernelFunc:Xte};var W3="if (isnan(x)) return x;",G$=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,W$=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function nt({opSnippet:r,packedOpSnippet:e,cpuKernelImpl:t,dtype:n}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,l=n||s.dtype;if(a.shouldExecuteOnCPU([s])&&t!=null){let x=a.texData.get(s.dataId),f=t(x.values,l);return a.makeTensorInfo(s.shape,l,f)}let u=we().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null,c;return u?c=new ss(s.shape,e):c=new To(s.shape,r),a.runWebGLProgram(c,[s],l)}}function Yt({opSnippet:r,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:n=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:l,b:u}=s,c=a;if(n&&l.dtype==="complex64"){let g=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[b,v]=[[g.complexTensorInfos.real,m.complexTensorInfos.real],[g.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(C=>{let[N,_]=C,E={dataId:N.dataId,dtype:N.dtype,shape:l.shape},T={dataId:_.dataId,dtype:_.dtype,shape:u.shape},k=new Fi(r,l.shape,u.shape);return c.runWebGLProgram(k,[E,T],nn(N.dtype,_.dtype))}),w=Io({inputs:{real:b,imag:v},backend:c});return c.disposeIntermediateTensorInfo(b),c.disposeIntermediateTensorInfo(v),w}let x=i||nn(l.dtype,u.dtype);if(c.shouldExecuteOnCPU([l,u])&&o!=null){let g=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[b,v]=o(l.shape,u.shape,g.values,m.values,x),w=c.makeTensorInfo(v,x),C=c.texData.get(w.dataId);return C.values=b,w}let f=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null,h;return f?h=new as(e,l.shape,u.shape,t):h=new Fi(r,l.shape,u.shape),c.runWebGLProgram(h,[l,u],x)}}function gl(r,e=!1){if(r==="linear")return e?F$:A$;if(r==="relu")return e?z$:R$;if(r==="elu")return e?M$:D$;if(r==="relu6")return e?L$:$$;if(r==="prelu")return e?y8:g8;if(r==="leakyrelu")return e?d8:h8;throw new Error(`Activation ${r} has not been implemented for the WebGL backend.`)}p();var hh=class{constructor(e,t,n,o=!1,i=!1,s=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;let c=o?e[1]:e[2],x=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",g=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],b="",v="";a&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:b=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");let w=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let C="rc.x",N="rc.x";e[0]<t[0]?C=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(N=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`
      ${b}

      const float sharedDimension = ${x}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${x}; i++) {
          int batchA = ${C};
          int batchB = ${N};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${m[0]});
          result += (${g[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${v}

        setOutput(result);
      }
    `}};p();p();var b8={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},q3=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=H.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var q$="return a * b;";function v8(r){let{inputs:e,backend:t}=r,{a:n,b:o}=e,i=H.upcastType(n.dtype,o.dtype);if(n.dtype==="complex64"){let a=t.texData.get(n.dataId),l=t.texData.get(o.dataId),u=new q3(b8.REAL,n.shape,o.shape),c=new q3(b8.IMAG,n.shape,o.shape),x=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:n.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:n.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=t.runWebGLProgram(u,x,"float32"),h=t.runWebGLProgram(c,x,"float32"),g=Io({inputs:{real:f,imag:h},backend:t});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),g}if(t.shouldExecuteOnCPU([n,o])){let a=t.texData.get(n.dataId),l=t.texData.get(o.dataId),[u,c]=h$(n.shape,o.shape,a.values,l.values,i),x=t.makeTensorInfo(c,i),f=t.texData.get(x.dataId);return f.values=u,x}let s;return we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new as(q$,n.shape,o.shape):s=new Fi(q$,n.shape,o.shape),t.runWebGLProgram(s,[n,o],i)}var H$={kernelName:Gs,backendName:"webgl",kernelFunc:v8};p();p();function K$(r,e,t){let n=[ml(r.shape),...hl(r.shape)],o={dtype:r.dtype,shape:n,dataId:r.dataId},i=[ml(e),...hl(e)],s=new fh(i,n),a=!0,l=t.runWebGLProgram(s,[o],r.dtype,null,a);return{dataId:l.dataId,shape:e,dtype:l.dtype}}function We(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{shape:i}=n,s=t,a=I.sizeFromShape(o.shape),l=I.inferFromImplicitShape(i,a),u=I.sizeFromShape(l);I.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let c=s.texData.get(o.dataId);return c.isPacked&&!tc(o.shape,l)&&!(c.texture!==null&&tc(c.shape,l))?K$(o,l,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}var j$={kernelName:S0,backendName:"webgl",kernelFunc:We};p();p();p();p();var H3=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:o,inSize:i,outSize:s}=e;this.outputShape=[o,s];let a=Math.floor(n/4)*4,l=n%4,u="sumValue += dot(values, ones);";if(t!=null){let x=1/t;u=`sumValue += dot(values * ${I.isInt(x)?x.toPrecision(2):x}, ones);`}let c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}};p();var w8=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:o,inSize:i,outSize:s}=e;this.outputShape=[o,s];let a="0.0",l="";t==="prod"?a="1.0":t==="min"?(a="1.0 / 1e-20",l="min"):t==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");let c=Math.floor(n/4)*4,x=n%4,f=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
      }
    `,h="vec4";t==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):t==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let g="";i%n>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${x===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${x===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${x===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}};function Zte(r){let e=[];for(;e.length===0||e[e.length-1].outSize!==1;){let t=e.length?e[e.length-1].outSize:r[1],n=H.computeOptimalWindowSize(t);e.push({inSize:t,windowSize:n,outSize:Math.ceil(t/n)})}return e}function Uo(r,e,t,n){let o=Zte(r.shape),i=r;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:l,outSize:u}=o[s],c,x;t==="mean"?c=s===0?new H3({windowSize:l,inSize:a,batchSize:r.shape[0],outSize:u},a):new H3({windowSize:l,inSize:a,batchSize:r.shape[0],outSize:u}):c=new w8({windowSize:l,inSize:a,batchSize:r.shape[0],outSize:u},t),x=i,i=n.runWebGLProgram(c,[i],e),x.dataId!==r.dataId&&n.disposeIntermediateTensorInfo(x)}return i}p();p();var C8=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[t[s]];this.outputShape=n,this.rank=n.length;let o=wt(this.rank),i=Jte(t);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function Jte(r){let e=r.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);let t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],n=new Array(e);for(let o=0;o<r.length;o++)n[r[o]]=t[o];return n.join()}p();var N8=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=wt(this.rank),i=u8("rc",this.rank),s=new Array(this.rank);for(let c=0;c<t.length;c++)s[t[c]]=i[c];let a=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}};function yl(r,e,t){let n=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new N8(r.shape,e):new C8(r.shape,e);return t.runWebGLProgram(n,[r],r.dtype)}function X$(r,e,t,n){let o=e,i=r.shape.length,s=I.parseAxisParam(o,r.shape),a=s,l=H.getAxesPermutation(a,i),u=l!=null,c=r;u&&(c=yl(r,l,n),a=H.getInnerMostAxes(a.length,i)),H.assertAxesAreInnerMostDims("sum",a,i);let[x,f]=H.computeOutAndReduceShapes(c.shape,a),h=x;t&&(h=H.expandShapeToKeepDim(x,s));let g=I.sizeFromShape(f),b=I.sizeFromShape(r.shape)/g,v=We({inputs:{x:c},attrs:{shape:[b,g]},backend:n}),w=T2(r.dtype),C=Uo(v,w,"sum",n),N=We({inputs:{x:C},attrs:{shape:h},backend:n});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(C),u&&n.disposeIntermediateTensorInfo(c),N}function dh(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n;return X$(o,i,s,t)}var Y$={kernelName:D0,backendName:"webgl",kernelFunc:dh};p();function Gr(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{perm:i}=n,s=t,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[i[c]];let u;if(s.shouldExecuteOnCPU([o])){let x=s.texData.get(o.dataId).values,f=nc(x,o.shape,o.dtype,i,l);u=s.makeTensorInfo(l,o.dtype);let h=s.texData.get(u.dataId);h.values=f}else u=yl(o,i,s);return u}var Z$={kernelName:F0,backendName:"webgl",kernelFunc:Gr};var _8=1e3;function oc({a:r,b:e,transposeA:t,transposeB:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let u=r.shape.length,c=e.shape.length,x=t?r.shape[u-2]:r.shape[u-1],f=n?e.shape[c-1]:e.shape[c-2],h=t?r.shape[u-1]:r.shape[u-2],g=n?e.shape[c-2]:e.shape[c-1],m=r.shape.slice(0,-2),b=e.shape.slice(0,-2),v=I.sizeFromShape(m),w=I.sizeFromShape(b),C=v===w||v===1||w===1;I.assert(u>=2&&c>=2&&C,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${b}).`);let _=(v>w?r.shape.slice(0,-2):e.shape.slice(0,-2)).concat([h,g]);I.assert(x===f,()=>`Error in matMul: inner shapes (${x}) and (${f}) of Tensors with shapes ${r.shape} and ${e.shape} and transposeA=${t} and transposeB=${n} must match.`);let E=t?[v,x,h]:[v,h,x],T=n?[w,g,f]:[w,f,g],k=We({inputs:{x:r},backend:o,attrs:{shape:E}}),D=We({inputs:{x:e},backend:o,attrs:{shape:T}}),R=[k,D],K=Math.max(v,w),M=t?k.shape[1]:k.shape[2],j=i!=null,X=s!=null,Z=l==="leakyrelu",Y=l!=null?gl(l,!0):null,ce=j||X||Z||Y!=null,Q;if((h===1||g===1)&&M>_8&&ce===!1){let te=k,ae=D;t&&(te=Gr({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),R.push(te)),n&&(ae=Gr({inputs:{x:D},backend:o,attrs:{perm:[0,2,1]}}),R.push(ae));let ge=g!==1,le=g===1,xe=te;ge&&(xe=We({inputs:{x:te},backend:o,attrs:{shape:[K,M,1]}}),R.push(xe));let me=g===1?2:1,ve=ae;le&&(ve=We({inputs:{x:ae},backend:o,attrs:{shape:[K,1,M]}}),R.push(ve));let Te=v8({inputs:{a:xe,b:ve},backend:o});Q=dh({inputs:{x:Te},backend:o,attrs:{axis:me,keepDims:!0}}),R.push(Te)}else{let te=nn(r.dtype,e.dtype),ae=new hh(E,T,[K,h,g],t,n,j,Y,X,Z),ge=[k,D];if(i!=null&&ge.push(i),X&&ge.push(s),Z){let le=o.makeTensorInfo([],"float32",I.createScalarValue(a,"float32"));ge.push(le),R.push(le)}Q=o.runWebGLProgram(ae,ge,te)}let J=We({inputs:{x:Q},backend:o,attrs:{shape:_}});R.push(Q);for(let te of R)o.disposeIntermediateTensorInfo(te);return J}function Qte(r){let{inputs:e,backend:t,attrs:n}=r,{a:o,b:i,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:x}=n;return oc({a:o,b:i,transposeA:l,transposeB:u,backend:t,bias:s,preluActivationWeights:a,leakyreluAlpha:x,activation:c})}var J$={kernelName:C2,backendName:"webgl",kernelFunc:Qte};p();var Q$="return abs(x);";function ere(r){let{inputs:e,backend:t}=r,{x:n}=e;if(t.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let i=t.texData.get(n.dataId),s=U3(i.values);return t.makeTensorInfo(n.shape,n.dtype,s)}let o;return we().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ss(n.shape,Q$):o=new To(n.shape,Q$),t.runWebGLProgram(o,[n],n.dtype)}var eO={kernelName:Ha,backendName:"webgl",kernelFunc:ere};p();var tre=wn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,rre=nt({opSnippet:tre}),tO={kernelName:ds,backendName:"webgl",kernelFunc:rre};p();var nre=wn+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,ore=nt({opSnippet:nre}),rO={kernelName:gs,backendName:"webgl",kernelFunc:ore};p();var nO="return a + b;",ire=Yt({opSnippet:nO,packedOpSnippet:nO,supportsComplex:!0,cpuKernelImpl:e$}),oO={kernelName:xi,backendName:"webgl",kernelFunc:ire};p();p();var S8=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((i,s)=>`T${s}`);let n=[];this.variableNames.forEach(i=>{n.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${n.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};p();var T8=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((i,s)=>`T${s}`);let n=[];this.variableNames.forEach(i=>{n.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${n.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function K3(r){let{inputs:e,backend:t}=r,n=e;if(n.length===1)return jr({inputs:{x:n[0]},backend:t});if(n.length>we().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(n.length/2),u=K3({inputs:n.slice(0,l),backend:t}),c=K3({inputs:n.slice(l),backend:t});return K3({inputs:[u,c],backend:t})}let o=n.map(l=>l.dtype).reduce((l,u)=>nn(l,u)),i=n.map(l=>l.shape),a=we().getBool("WEBGL_PACK")?new T8(n[0].shape,i):new S8(n[0].shape,i);return t.runWebGLProgram(a,n,o)}var iO={kernelName:Ka,backendName:"webgl",kernelFunc:K3};p();function sre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n,a=o.shape.length,l=I.parseAxisParam(i,o.shape),u=l,c=H.getAxesPermutation(u,a),x=o;c!=null&&(x=Gr({inputs:{x:o},backend:t,attrs:{perm:c}}),u=H.getInnerMostAxes(u.length,a)),H.assertAxesAreInnerMostDims("all",u,a);let[f,h]=H.computeOutAndReduceShapes(x.shape,u),g=I.sizeFromShape(h),m=We({inputs:{x},backend:t,attrs:{shape:[-1,g]}}),b=Uo(m,m.dtype,"all",t),v;if(s){let w=H.expandShapeToKeepDim(f,l);v=We({inputs:{x:b},backend:t,attrs:{shape:w}})}else v=We({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(b),c!=null&&t.disposeIntermediateTensorInfo(x),v}var sO={kernelName:Al,backendName:"webgl",kernelFunc:sre};p();function are(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n,a=o.shape.length,l=I.parseAxisParam(i,o.shape),u=l,c=H.getAxesPermutation(u,a),x=o;c!=null&&(x=Gr({inputs:{x:o},backend:t,attrs:{perm:c}}),u=H.getInnerMostAxes(u.length,a)),H.assertAxesAreInnerMostDims("any",u,a);let[f,h]=H.computeOutAndReduceShapes(x.shape,u),g=I.sizeFromShape(h),m=We({inputs:{x},backend:t,attrs:{shape:[-1,g]}}),b=Uo(m,m.dtype,"any",t),v;if(s){let w=H.expandShapeToKeepDim(f,l);v=We({inputs:{x:b},backend:t,attrs:{shape:w}})}else v=We({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(b),c!=null&&t.disposeIntermediateTensorInfo(x),v}var aO={kernelName:Dl,backendName:"webgl",kernelFunc:are};p();p();p();var I8=class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=t==="max"?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};p();var k8=class{constructor(e,t,n,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,I.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let i=e[e.length-1],s=Math.ceil(i/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,u=wt(l),c=Kr("coords",l),x,f;if(s===1){f=l+1;let k=wt(f);x=`
        ${k} sourceLocR = ${k}(${c.join()}, 0);
        ++${c[l-1]};
        ${k} sourceLocG = ${k}(${c.join()}, 0);
        ++${c[l-2]};
        ${k} sourceLocA = ${k}(${c.join()}, 0);
        --${c[l-1]};
        ${k} sourceLocB = ${k}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,x=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,f),g="."+h[f-1],m=h.map(k=>"int "+k),b=Kr("sourceLocR",f-1).concat("inIdx.r"),v=Kr("sourceLocG",f-1).concat("inIdx.g"),w=Kr("sourceLocB",f-1).concat("inIdx.b"),C=Kr("sourceLocA",f-1).concat("inIdx.a"),N=n==="max"?"greaterThan":"lessThan",_=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${C.join()})));`,E=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${C.join()}) : 0.)`,T=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${x}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${N}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function lO(r,e,t,n=null){let o=e.shape[0],i=e.shape[1];n!=null&&(o=n.shape[0],i=n.shape[1]);let s=H.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},l=new I8(a,t,n==null),u=[e];n!=null&&u.push(n);let c=r.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;let x=lO(r,e,t,c);return r.disposeIntermediateTensorInfo(c),x}function uO(r,e,t,n=null){let o=n!=null?n.shape:e.shape,i=o[o.length-1],s=H.computeOptimalWindowSize(i),a=new k8(o,s,t,n==null),l=n==null?[e]:[e,n],u=r.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){let c=uO(r,e,t,u);return r.disposeIntermediateTensorInfo(u),c}return u}function j3(r,e,t,n){let o=[t];if(H.assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),o,e.shape.length),!we().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){let i=[],[s,a]=H.computeOutAndReduceShapes(e.shape,o),l=I.sizeFromShape(a),u=We({inputs:{x:e},backend:r,attrs:{shape:[-1,l]}});i.push(u);let c=lO(r,u,n);i.push(c);let x=We({inputs:{x:c},backend:r,attrs:{shape:s}});return i.forEach(f=>r.disposeIntermediateTensorInfo(f)),x}return uO(r,e,n)}function lre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i}=n,s=I.parseAxisParam(i,o.shape),a=H.getAxesPermutation(s,o.shape.length),l=o,u=[];a!=null&&(l=Gr({inputs:{x:o},backend:t,attrs:{perm:a}}),u.push(l),s=H.getInnerMostAxes(s.length,l.shape.length)),H.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let c=j3(t,l,s[0],"max");return u.forEach(x=>t.disposeIntermediateTensorInfo(x)),c}var cO={kernelName:ja,backendName:"webgl",kernelFunc:lre};p();function ure(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i}=n,s=I.parseAxisParam(i,o.shape),a=H.getAxesPermutation(s,o.shape.length),l=o,u=[];a!=null&&(l=Gr({inputs:{x:o},backend:t,attrs:{perm:a}}),u.push(l),s=H.getInnerMostAxes(s.length,l.shape.length)),H.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let c=j3(t,l,s[0],"min");return u.forEach(x=>t.disposeIntermediateTensorInfo(x)),c}var pO={kernelName:Xa,backendName:"webgl",kernelFunc:ure};p();var cre=wn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,pre=nt({opSnippet:cre}),xO={kernelName:ys,backendName:"webgl",kernelFunc:pre};p();var xre=wn+"return log(x + sqrt(x * x + 1.0));",fre=nt({opSnippet:xre}),fO={kernelName:bs,backendName:"webgl",kernelFunc:fre};p();var mre=wn+`
  return atan(x);
`,hre=nt({opSnippet:mre}),mO={kernelName:vs,backendName:"webgl",kernelFunc:hre};p();var dre=G$+`
  return atan(a, b);
`,gre=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+W$+`
  return result;
`,yre=Yt({opSnippet:dre,packedOpSnippet:gre}),hO={kernelName:Cs,backendName:"webgl",kernelFunc:yre};p();var bre=wn+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,vre=nt({opSnippet:bre}),dO={kernelName:ws,backendName:"webgl",kernelFunc:vre};p();p();var $a=class{constructor(e,t,n,o=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let s=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,x=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;let m=t==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,w="0.0";if(m||(w="-1.0 / 1e-20"),n){let k=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${x};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${k} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?b:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let C="max",N=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(N="avgValue / count");let _=Math.floor(s/4)*4,E=s%4,T=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${g});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${x};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${_};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${N});
      }
    `}},ic=class{constructor(e,t,n,o=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let s=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,x=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,g=e.effectiveFilterHeight,m=e.effectiveFilterWidth,b=e.padInfo.front,v=e.padInfo.top,w=e.padInfo.left;this.outputShape=e.outShape;let C=t==="avg",N="0.0";if(C||(N="-1.0 / 1e-20"),n){let R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${b}, ${v}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${x}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",E=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(E="avgValue / count");let T=Math.floor(s/4)*4,k=s%4,D=`
      if (${C}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${b}, ${v}, ${w});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${x}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${D}
            }

            int xC = xCCorner + ${T};
            if (${k===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${k===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${k===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${D}
            }
          }
          setOutput(${E});
        }
      }
    `}};function wre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e;Ra(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n,u=1;I.assert(H.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=H.computePool2DInfo(o.shape,i,s,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&I.arraysEqual(c.inShape,c.outShape))return jr({inputs:{x:o},backend:t});let x=new $a(c,"avg",!1);return t.runWebGLProgram(x,[o],"float32")}var gO={kernelName:Ya,backendName:"webgl",kernelFunc:wre};p();function Cre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:u}=n,c=[1,1,1],x=H.computePool3DInfo(o.shape,i,s,c,a,l,u),f=new ic(x,"avg",!1);return t.runWebGLProgram(f,[o],"float32")}var yO={kernelName:Za,backendName:"webgl",kernelFunc:Cre};p();p();var E8=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,x=u-1-e.padInfo.left,f=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${x});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},A8=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,x=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,g=x-1-e.padInfo.front,m=f-1-e.padInfo.top,b=h-1-e.padInfo.left,v=1/(t*n*o);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${m}, ${b});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${x};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Nre(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,s=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=n,x=[1,1,1],f=H.computePool3DInfo(s.shape,a,l,x,u,c),h=new A8(f);return t.runWebGLProgram(h,[o],s.dtype)}var bO={kernelName:$l,backendName:"webgl",kernelFunc:Nre};p();function _re(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,s=i;Ra([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:u}=n,c=H.computePool2DInfo(s.shape,a,l,1,u),x=new E8(c);return t.runWebGLProgram(x,[o],s.dtype)}var vO={kernelName:Rl,backendName:"webgl",kernelFunc:_re};p();function Sre(r){let{inputs:e,backend:t,attrs:n}=r,{a:o,b:i}=e,{transposeA:s,transposeB:a}=n;return oc({a:o,b:i,transposeA:s,transposeB:a,backend:t})}var wO={kernelName:Ja,backendName:"webgl",kernelFunc:Sre};p();p();var D8=class{constructor(e,t,n,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],H.assertAndGetBroadcastShape(e,t),H.assertAndGetBroadcastShape(e,n);let a="0.0";o!=null&&(H.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(H.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};p();var R8=class{constructor(e,t,n,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],H.assertAndGetBroadcastShape(e,t),H.assertAndGetBroadcastShape(e,n);let a="vec4(0.0)";o!=null&&(H.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(H.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var Tre=({inputs:r,backend:e,attrs:t})=>{let{x:n,mean:o,variance:i,offset:s,scale:a}=r;I.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);let u=[n,o,i],c=null;s!=null&&(c=s.shape,u.push(s));let x=null;a!=null&&(x=a.shape,u.push(a));let f=we().getBool("WEBGL_PACK_NORMALIZATION")?new R8(n.shape,o.shape,i.shape,c,x,l):new D8(n.shape,o.shape,i.shape,c,x,l);return e.runWebGLProgram(f,u,u[0].dtype)},CO={kernelName:u0,backendName:"webgl",kernelFunc:Tre};p();p();p();var O8=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=wt(this.rank),n=`uniform int start[${this.rank}];`,o=Ire(this.rank),i,s=e.map((a,l)=>`sourceLoc.${$8[l]} = start[${l}] + coords.${$8[l]};`);i=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      ${n}
      void main() {
        ${i}
        setOutput(getSource(${o}));
      }
    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{this.startLoc==null&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),this.startLoc==null)||t.gl.uniform1iv(this.startLoc,e)}}},$8=["x","y","z","w","u","v"];function Ire(r){if(r===1)return"sourceLoc";if(r<=6)return $8.slice(0,r).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${r} is not yet supported`)}p();var F8=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;let t=wt(this.rank),n=Kr("coords",this.rank),o=Kr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${n[this.rank-1]};
      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((c,x)=>`start[${x}]`).join()});`:e.map((c,x)=>`${o[x]} = ${n[x]} + start[${x}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{this.startLoc==null&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),this.startLoc==null)||t.gl.uniform1iv(this.startLoc,e)}}};function kre(r,e,t,n){let o=n.texData.get(r.dataId),i=n.makeTensorInfo(t,r.dtype),s=n.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=t,s.dtype=r.dtype;let a=Tn.computeFlatOffset(e,I.computeStrides(r.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||r.dataId};let l=n.dataRefCount.get(s.slice.origDataId)||1;return n.dataRefCount.set(s.slice.origDataId,l+1),i}function s2(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{begin:i,size:s}=n,[a,l]=Tn.parseSliceParams(o,i,s);if(Tn.assertParamsValid(o,a,l),I.sizeFromShape(l)===0)return t.makeTensorInfo(l,o.dtype,[]);if(t.shouldExecuteOnCPU([o])||o.dtype==="string"){let x=t.texData.get(o.dataId),f=v$(x.values,a,l,o.shape,o.dtype);return t.makeTensorInfo(l,o.dtype,f)}let{isPacked:u}=t.texData.get(o.dataId),c=Tn.isSliceContinous(o.shape,a,l);if(u||!c){let x=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new F8(l):new O8(l),f=x.getCustomSetupFunc(a);return t.runWebGLProgram(x,[o],o.dtype,f)}return t.uploadToGPU(o.dataId),kre(o,a,l,t)}var NO={kernelName:A0,backendName:"webgl",kernelFunc:s2};var Ere=r=>{let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockShape:i,crops:s}=n;I.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((w,C)=>w*C),l=H.getReshaped(o.shape,i,a),u=H.getPermuted(l.length,i.length),c=H.getReshapedPermuted(o.shape,i,a),x=H.getSliceBeginCoords(s,i.length),f=H.getSliceSize(c,s,i.length),h=[],g=We({inputs:{x:o},backend:t,attrs:{shape:l}}),m=Gr({inputs:{x:g},backend:t,attrs:{perm:u}}),b=We({inputs:{x:m},backend:t,attrs:{shape:c}}),v=s2({inputs:{x:b},backend:t,attrs:{begin:x,size:f}});return h.push(g),h.push(m),h.push(b),h.forEach(w=>t.disposeIntermediateTensorInfo(w)),v},_O={kernelName:Qa,backendName:"webgl",kernelFunc:Ere};p();function Are(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,weights:i}=e,{size:s}=n,a=t.readSync(o.dataId),l=t.readSync(i.dataId),u=B3(a,l,i.dtype,i.shape,s);return t.makeTensorInfo([s],i.dtype,u)}var SO={kernelName:Ol,backendName:"webgl",kernelFunc:Are};p();p();var Dre="return float(a != b);",M8=Yt({opSnippet:Dre,dtype:"bool"}),TO={kernelName:w2,backendName:"webgl",kernelFunc:M8};p();function a2(r){let{inputs:e,backend:t}=r,{input:n}=e,o=t.texData.get(n.dataId);return jr({inputs:{x:o.complexTensorInfos.real},backend:t})}var IO={kernelName:uu,backendName:"webgl",kernelFunc:a2};p();var Rre="return float(int(x));";function kO(r,e){let t=new To(r.shape,Rre),n=e.runWebGLProgram(t,[r],"int32");return{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}function z8(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{dtype:i}=n;if(i==="complex64"){if(o.dtype==="complex64")return jr({inputs:{x:o},backend:t});let s=lr(o.shape),a=z8({inputs:{x:o},backend:t,attrs:{dtype:"float32"}}),l=Io({inputs:{real:a,imag:s},backend:t});return s.dispose(),t.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let s=a2({inputs:{input:o},backend:t}),a=z8({inputs:{x:s},backend:t,attrs:{dtype:i}});return t.disposeIntermediateTensorInfo(s),a}if(!I.hasEncodingLoss(o.dtype,i)){let s=jr({inputs:{x:o},backend:t});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(i==="int32")return kO(o,t);if(i==="bool"){let s=t.makeTensorInfo([],"bool",I.getTypedArrayFromDType("bool",1)),l=M8({inputs:{a:o,b:s},backend:t});return t.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var EO={kernelName:Gi,backendName:"webgl",kernelFunc:z8};p();var AO="return ceil(x);",$re=nt({opSnippet:AO,packedOpSnippet:AO,cpuKernelImpl:r$}),DO={kernelName:Ns,backendName:"webgl",kernelFunc:$re};p();p();var L8=class{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(e,t){return(n,o)=>{this.minLoc==null&&(this.minLoc=n.getUniformLocationNoThrow(o,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(o,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}};p();var P8=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(e,t){return(n,o)=>{this.minLoc==null&&(this.minLoc=n.getUniformLocationNoThrow(o,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(o,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}};function Ore(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{clipValueMin:i,clipValueMax:s}=n,a;we().getBool("WEBGL_PACK_CLIP")?a=new P8(o.shape):a=new L8(o.shape);let l=a.getCustomSetupFunc(i,s);return t.runWebGLProgram(a,[o],o.dtype,l)}var RO={kernelName:_s,backendName:"webgl",kernelFunc:Ore};p();p();var B8=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function $O(r,e){return{dataId:e.dataId,dtype:e.dtype,shape:r.shape}}function Fre(r){let{inputs:e,backend:t}=r,{x:n}=e,o=t.texData.get(n.dataId),i=new B8(n.shape),s=[$O(n,o.complexTensorInfos.real),$O(n,o.complexTensorInfos.imag)];return t.runWebGLProgram(i,s,s[0].dtype)}var OO={kernelName:e0,backendName:"webgl",kernelFunc:Fre};p();p();p();var U8=class{constructor(e){this.outputShape=[],this.outputShape=H.computeOutShape(e,1),this.variableNames=e.map((s,a)=>`T${a}`);let t=new Array(e.length-1);t[0]=e[0][1];for(let s=1;s<t.length;s++)t[s]=t[s-1]+e[s][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<t.length;s++){let a=t[s-1];n.push(`else if (yC < ${t[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=t.length,i=t[t.length-1];n.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${n.join(`
        `)}
      }
    `}};p();var V8=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=H.computeOutShape(e,t);let n=this.outputShape,o=n.length,i=wt(o),s=Kr("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,b)=>`T${b}`);let l=new Array(e.length-1);l[0]=e[0][t];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][t];let u=a[t],c=a.slice(-2),x=a.join(),f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${x}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){let b=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${X3(a,u,b)}),
            vec2(${X3(c,u,b)}));
        }`}let h=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${X3(a,u,g)}),
          vec2(${X3(c,u,g)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${n[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${n[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${n[o-2]} &&
            ${s[o-1]} < ${n[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function X3(r,e,t){let n=r.indexOf(e);return r.map((i,s)=>s===n?`${i} - ${t}`:i).join()}p();function sc(r){let{inputs:e,backend:t}=r,{input:n}=e,o=t.texData.get(n.dataId);return jr({inputs:{x:o.complexTensorInfos.imag},backend:t})}var FO={kernelName:Zl,backendName:"webgl",kernelFunc:sc};function ac(r,e,t){let n=r[0].dtype;if(n==="complex64"){let u=r.map(g=>a2({inputs:{input:g},backend:t})),c=r.map(g=>sc({inputs:{input:g},backend:t})),x=ac(u,e,t),f=ac(c,e,t),h=Io({inputs:{real:x,imag:f},backend:t});return u.forEach(g=>t.disposeIntermediateTensorInfo(g)),c.forEach(g=>t.disposeIntermediateTensorInfo(g)),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(f),h}if(n==="string"){let{tensors2D:u,outShape:c}=MO(r,e,t),x=u.map(b=>({vals:t.readSync(b.dataId),shape:b.shape})),f=u[0].shape[0]===1,h=n$(x,c,n,f),g=H.computeOutShape(r.map(b=>b.shape),e),m=t.makeTensorInfo(g,n,h);return u.forEach(b=>t.disposeIntermediateTensorInfo(b)),m}if(r.length>we().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(r.length/2),c=ac(r.slice(0,u),e,t),x=ac(r.slice(u),e,t),f=ac([c,x],e,t);return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(x),f}if(we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1){let u=new V8(r.map(c=>c.shape),e);return t.runWebGLProgram(u,r,n)}let{tensors2D:o,outShape:i}=MO(r,e,t),s=new U8(o.map(u=>u.shape)),a=t.runWebGLProgram(s,o,n);o.forEach(u=>t.disposeIntermediateTensorInfo(u));let l=We({inputs:{x:a},attrs:{shape:i},backend:t});return t.disposeIntermediateTensorInfo(a),l}function MO(r,e,t){let n=H.computeOutShape(r.map(i=>i.shape),e);return{tensors2D:r.map(i=>We({inputs:{x:i},attrs:{shape:[-1,I.sizeFromShape(i.shape.slice(e))]},backend:t})),outShape:n}}function G8(r){let{inputs:e,backend:t,attrs:n}=r,{axis:o}=n,i=I.parseAxisParam(o,e[0].shape)[0],s=H.computeOutShape(e.map(u=>u.shape),i);if(I.sizeFromShape(s)===0)return t.makeTensorInfo(s,e[0].dtype,[]);let a=e.filter(u=>I.sizeFromShape(u.shape)>0);if(a.length===1)return jr({inputs:{x:a[0]},backend:t});let l=a.map(u=>u.shape);return H.assertParamsConsistent(l,i),ac(a,i,t)}var zO={kernelName:t0,backendName:"webgl",kernelFunc:G8};p();p();var gh=class{constructor(e,t=!1,n=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let s=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,x=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,b=e.dataFormat==="channelsLast",v=b?1:2,w=b?2:3,C=b?3:1,N="",_="";n&&(o?N=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?N=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:N=`
          float activation(float x) {
            ${n}
          }
        `,_="result = activation(result);");let E=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${N}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${C}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${x};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${_}
        setOutput(result);
      }
    `}},W8=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,o=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,x=e.filterDepth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${t}, ${n}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${x}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};p();p();var q8=class{constructor(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let{filterWidth:o,inChannels:i,strideWidth:s,strideHeight:a,padInfo:l,outWidth:u,dilationWidth:c,dilationHeight:x,dataFormat:f}=n,{left:h,top:g}=l,m=i*o,b=zr(),v=f==="channelsLast",w=v?0:1,C=v?1:2,N="";for(let _=0;_<=1;_++)for(let E=0;E<=1;E++)N+=`
          blockIndex = rc.y + ${E};
          pos = rc.x + ${_};

          if(blockIndex < ${e[1]} && pos < ${e[0]}) {
            offsetY = int(blockIndex / (${u})) * ${a} - ${g};
            d0 = offsetY + ${x} * (pos / ${m});

            if(d0 < ${t[w]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${u}.) * ${s}. - ${h}.);
              d1 = offsetX + ${c} * (int(mod(float(pos), ${m}.) / ${i}.));

              if(d1 < ${t[C]} && d1 >= 0) {

                ch = int(mod(float(pos), ${i}.));

                if (${v}) {
                  innerDims = vec2(d1, ch);
                  result[${_*2+E}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${_*2+E}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${N}

        ${b.output} = result;
      }
    `}};function Y3({x:r,filter:e,convInfo:t,backend:n,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let l=r.shape,u=n.texData.get(r.dataId),c=t.inChannels,x=l[0]*l[1]*l[2],f=t.outChannels,h=t.dataFormat==="channelsLast",g=!1,m=!1,b,v=[],w=(x===1||f===1)&&c>_8,C=l[2]%2!==0&&!!u.isPacked;if(w||!we().getBool("WEBGL_LAZILY_UNPACK")||!we().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!C){let N=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],_=We({inputs:{x:r},backend:n,attrs:{shape:[1,N,t.inChannels]}}),E=We({inputs:{x:e},backend:n,attrs:{shape:[1,t.inChannels,t.outChannels]}}),T=oc({a:_,b:E,transposeA:g,transposeB:m,backend:n,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});b=We({inputs:{x:T},backend:n,attrs:{shape:t.outShape}}),v.push(_),v.push(E),v.push(T)}else{let N=h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),_={dataId:r.dataId,shape:[1,N,t.inChannels],dtype:r.dtype},E=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,I.assert(tc(u.shape,_.shape),()=>`packed reshape ${u.shape} to ${_.shape} isn't free`);let T=We({inputs:{x:e},backend:n,attrs:{shape:[1,t.inChannels,t.outChannels]}});v.push(T);let k=oc({a:_,b:T,backend:n,transposeA:g,transposeB:m,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),D=n.texData.get(k.dataId);I.assert(D.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=E,D.shape=t.outShape,b=jr({inputs:{x:k},backend:n}),b.shape=t.outShape,v.push(k)}for(let N of v)n.disposeIntermediateTensorInfo(N);return b}function Z3({x:r,filter:e,convInfo:t,backend:n,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:u,inChannels:c,outWidth:x,outHeight:f,dataFormat:h}=t,g=h==="channelsLast",m=l*u*c,b=f*x,v=[m,b],w=!0,C=!1,N=[],_=We({inputs:{x:r},backend:n,attrs:{shape:r.shape.slice(1)}}),E=We({inputs:{x:e},backend:n,attrs:{shape:[1,m,I.sizeFromShape(e.shape)/m]}});N.push(_),N.push(E);let T=new q8(v,_.shape,t),k=n.runWebGLProgram(T,[_],"float32"),D=We({inputs:{x:k},backend:n,attrs:{shape:[1,v[0],v[1]]}});N.push(k),N.push(D);let R=o!=null,K=i!=null,M=a==="leakyrelu",j=a?gl(a,!0):null,X=new hh(D.shape,E.shape,[1,b,t.outChannels],w,C,R,j,K,M),Z=[D,E];if(o&&Z.push(o),K&&Z.push(i),M){let J=n.makeTensorInfo([],"float32",I.createScalarValue(s,"float32"));Z.push(J),N.push(J)}let Y=n.runWebGLProgram(X,Z,"float32"),ce=g?[1,f,x,t.outChannels]:[1,t.outChannels,f,x],Q=We({inputs:{x:Y},backend:n,attrs:{shape:ce}});N.push(Y);for(let J of N)n.disposeIntermediateTensorInfo(J);return Q}function Mre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=n,x=H.convertConv2DDataFormat(l),f=H.computeConv2DInfo(o.shape,i.shape,s,u,a,c,!1,x),h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=Y3({x:o,filter:i,convInfo:f,backend:t});else if(we().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=Z3({x:o,filter:i,convInfo:f,backend:t});else{let m=new gh(f);h=t.runWebGLProgram(m,[o,i],"float32")}let g=We({inputs:{x:h},backend:t,attrs:{shape:f.outShape}});return t.disposeIntermediateTensorInfo(h),g}var LO={kernelName:r0,backendName:"webgl",kernelFunc:Mre};p();p();var H8=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,o=e.padInfo.top,i=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${s}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},K8=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=e.dataFormat==="channelsLast",a=t-1-e.padInfo.top,l=n-1-e.padInfo.left,u=s?1:2,c=s?2:3,x=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${x}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},j8=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,o=e.strideWidth,i=e.padInfo.front,s=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${n} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},X8=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${n}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${n} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function zre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=n,x=H.convertConv2DDataFormat(l),f=H.computeConv2DInfo(o.shape,c,s,1,a,u,!1,x),h=new H8(f);return t.runWebGLProgram(h,[o,i],"float32")}var PO={kernelName:Ml,backendName:"webgl",kernelFunc:zre};p();function Lre(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{inputShape:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=n,x=H.convertConv2DDataFormat(u),f=H.computeConv2DInfo(s,i.shape,a,1,l,c,!1,x),h=new K8(f);return t.runWebGLProgram(h,[o,i],"float32")}var BO={kernelName:n0,backendName:"webgl",kernelFunc:Lre};p();function Pre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=n,u=H.computeConv3DInfo(o.shape,i.shape,s,l,a),c=new W8(u);return t.runWebGLProgram(c,[o,i],"float32")}var UO={kernelName:o0,backendName:"webgl",kernelFunc:Pre};p();function Bre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,pad:a,filterShape:l}=n,u=H.computeConv3DInfo(o.shape,l,s,1,a),c=new j8(u);return t.runWebGLProgram(c,[o,i],"float32")}var VO={kernelName:zl,backendName:"webgl",kernelFunc:Bre};p();function Ure(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{pad:s,strides:a,inputShape:l}=n,u=H.computeConv3DInfo(l,i.shape,a,1,s),c=new X8(u);return t.runWebGLProgram(c,[o,i],"float32")}var GO={kernelName:Ll,backendName:"webgl",kernelFunc:Ure};p();var Vre=W3+`
  return cos(x);
`,Gre=nt({opSnippet:Vre}),WO={kernelName:Ss,backendName:"webgl",kernelFunc:Gre};p();var Wre=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,qre=nt({opSnippet:Wre}),qO={kernelName:Ts,backendName:"webgl",kernelFunc:qre};p();p();var Y8=class{constructor(e,t,n,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,u]=e,[c]=t,[x,f]=n;this.outputShape=[c,x,f,u];let h=o==="bilinear"?1:0,[g,m]=[`${a-1}.0`,`${l-1}.0`],[b,v,w]=x>1?[`${(a-1)/(x-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[C,N,_]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${C});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${N};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var Hre=r=>{let{inputs:e,backend:t,attrs:n}=r,{image:o,boxes:i,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:u}=n,c=new Y8(o.shape,i.shape,a,l,u);return t.runWebGLProgram(c,[o,i,s],"float32")},HO={kernelName:Pl,backendName:"webgl",kernelFunc:Hre};p();p();var J3=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=e;let o=e.length,i=t?"0.0":`getX(${KO(o,"coords")})`,s=e[e.length-1],a="",l="";t?(a=n?`end != ${s-1}`:"end != 0",l=n?"end + 1":"end - 1"):(a=n?`end + pow2 < ${s}`:"end >= pow2",l=n?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${wt(o)} coords = getOutputCoords();
        int end = ${jO(o,"coords")};
        float val = ${i};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${l};
          ${jO(o,"coords")} = idx;
          val += getX(${KO(o,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(e){return(t,n)=>{this.index==null&&(this.index=t.getUniformLocation(n,"index")),t.gl.uniform1f(this.index,e)}}};function KO(r,e){if(r===1)return`${e}`;if(r===2)return`${e}.x, ${e}.y`;if(r===3)return`${e}.x, ${e}.y, ${e}.z`;if(r===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${r} is not yet supported`)}function jO(r,e){if(r===1)return`${e}`;if(r===2)return`${e}.y`;if(r===3)return`${e}.z`;if(r===4)return`${e}.w`;throw Error(`Cumulative sum for rank ${r} is not yet supported`)}function Kre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,exclusive:s,reverse:a}=n,l=o.shape.length,u=H.getAxesPermutation([i],l),c=o;u!=null&&(c=Gr({inputs:{x:o},backend:t,attrs:{perm:u}}));let x=H.getInnerMostAxes(1,l)[0];if(x!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${i}`);let f=c.shape[x],h=jr({inputs:{x:c},backend:t});for(let g=0;g<=Math.ceil(Math.log2(f))-1;g++){let m=new J3(c.shape,!1,a),b=m.getCustomSetupFunc(g),v=h;h=t.runWebGLProgram(m,[h],h.dtype,b),t.disposeIntermediateTensorInfo(v)}if(s){let g=new J3(c.shape,s,a),m=h;h=t.runWebGLProgram(g,[h],h.dtype),t.disposeIntermediateTensorInfo(m)}if(u!=null){let g=H.getUndoAxesPermutation(u),m=Gr({inputs:{x:h},backend:t,attrs:{perm:g}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(c),m}return h}var XO={kernelName:i0,backendName:"webgl",kernelFunc:Kre};p();function jre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,weights:i}=e,{size:s,binaryOutput:a}=n;if(o.shape.length===1){let l=t.readSync(o.dataId),u=t.readSync(i.dataId),c=B3(l,u,i.dtype,i.shape,s);return t.makeTensorInfo([s],i.dtype,c)}else if(o.shape.length===2){let l=t.bufferSync(o),u=t.bufferSync(i),c=t$(l,u,s,a);return t.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var YO={kernelName:Bl,backendName:"webgl",kernelFunc:jre};p();p();var Z8=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function Xre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockSize:i,dataFormat:s}=n;I.assert(i>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${i}`);let a=o.shape[0],l=s==="NHWC"?o.shape[1]:o.shape[2],u=s==="NHWC"?o.shape[2]:o.shape[3],c=s==="NHWC"?o.shape[3]:o.shape[1],x=l*i,f=u*i,h=c/(i*i),g=s==="NHWC"?[a,x,f,h]:[a,h,x,f],m=new Z8(g,i,s);return t.runWebGLProgram(m,[o],o.dtype)}var ZO={kernelName:Ul,backendName:"webgl",kernelFunc:Xre};p();p();var yh=class{constructor(e,t=!1,n=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let s=e.inHeight,a=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,x=e.strideWidth,f=e.dilationHeight,h=e.dilationWidth,g=e.filterHeight,m=e.filterWidth,b=e.outChannels/e.inChannels,v="",w="";n&&(o?v=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?v=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:v=`
          float activation(float x) {
            ${n}
          }
        `,w="result = activation(result);");let C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      const ivec2 strides = ivec2(${c}, ${x});
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${b};
        int q = d2 - d1 * ${b};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${g}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${s}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${a}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}};p();var bh=class{constructor(e,t=!1,n=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;let s=e.inHeight,a=e.inWidth,l=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,x=e.strideWidth,f=e.dilationHeight,h=e.dilationWidth,g=e.filterHeight,m=e.filterWidth,b=m,v="int xR; int xC; int xCOffset;";for(let _=0;_<g;_++)for(let E=0;E<m;E++)v+=`
          vec4 xTexelR${_}C${E*2} = vec4(0.);
          vec4 wR${_}C${E} = vec4(0.);
          vec4 xR${_}C${E} = vec4(0.);`;for(let _=0;_<g;_++)for(let E=0;E<b;E++){let T=E*2;if(v+=`
          xR = xRCorner + ${_*f};
          xC = xCCorner + ${T*h};
        `,x===1){if(T<m&&(u%2===1?v+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${a}) {
                  xTexelR${_}C${T} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${a}) {
                    xTexelR${_}C${T}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${_}C${T} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${a}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${a}) {
                    previous.zw = vec2(0.);
                  }

                  xR${_}C${T} = vec4(previous.zw, xTexelR${_}C${T}.xy);
                } else {
                  xR${_}C${T} = vec4(0, 0, xTexelR${_}C${T}.xy);
                }
              `:v+=`
                if(xR >= 0 && xR < ${s} && xC >= 0 && xC < ${a}) {
                  xTexelR${_}C${T} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${_}C${T} = vec4(0.);
                }

                xR${_}C${T} = xTexelR${_}C${T};
              `,T+1<m)){let k=u%2===0?I.nearestLargerEven(h):h;h%2===0&&u%2===1||h%2!==0&&u%2!==1?(v+=`
                  xCOffset = xC + ${u%2} + ${k};

                  if(xR >= 0 && xR < ${s} &&
                    xCOffset >= 0 && xCOffset < ${a}) {
                    xTexelR${_}C${T+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${s} &&
                      xCOffset >= 0 && xCOffset < ${a}) {
                      xTexelR${_}C${T} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${_}C${T} = vec4(0.);
                    }
                  `),v+=`
                  xR${_}C${T+1} = vec4(
                    xTexelR${_}C${T}.zw, xTexelR${_}C${T+2}.xy);
                `):v+=`
                  xCOffset = xC + ${k};

                  if(xR >= 0 && xR < ${s} &&
                    xCOffset >= 0 && xCOffset < ${a}) {
                    xTexelR${_}C${T+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${_}C${T+1} = xTexelR${_}C${T+2};
                `}}else T<m&&(v+=`
              if(xR >= 0 && xR < ${s}) {
            `,u%2===1?(v+=`
                xCOffset = xC + 1 - ${x};
                if(xCOffset >= 0 && xCOffset < ${a}) {
                  xTexelR${_}C${T} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${_}C${T} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${a}) {
                  xTexelR${_}C${T+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${_}C${T+2} = vec4(0.);
                }

                xR${_}C${T} = vec4(
                  xTexelR${_}C${T}.zw, xTexelR${_}C${T+2}.zw);
              `,T+1<m&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${x};
                  if(xCOffset >= 0 && xCOffset < ${a}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${_}C${T+1} = vec4(xTexelR${_}C${T+2}.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < ${a}) {
                  xTexelR${_}C${T} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${_}C${T} = vec4(0.);
                }

                xCOffset = xC + ${x};
                if(xCOffset >= 0 && xCOffset < ${a}) {
                  xTexelR${_}C${T+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${_}C${T+2} = vec4(0.);
                }

                xR${_}C${T} = vec4(
                  xTexelR${_}C${T}.xy, xTexelR${_}C${T+2}.xy);
              `,T+1<m&&(v+=`
                  xR${_}C${T+1} = vec4(
                    xTexelR${_}C${T}.zw, xTexelR${_}C${T+2}.zw);
                `)),v+="}");T<m&&(v+=`
            vec4 wTexelR${_}C${T} = getW(${_}, ${T}, d1, q);
            wR${_}C${T} = vec4(wTexelR${_}C${T}.xz, wTexelR${_}C${T}.xz);
          `,T+1<m&&(v+=`
              vec4 wTexelR${_}C${T+1} = getW(${_}, ${T+1}, d1, q);
              wR${_}C${T+1} =
                vec4(wTexelR${_}C${T+1}.xz, wTexelR${_}C${T+1}.xz);`))}for(let _=0;_<g;_++)for(let E=0;E<m;E++)v+=`dotProd += xR${_}C${E} * wR${_}C${E};`;let w="",C="";n&&(o?w=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?w=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:w=`vec4 activation(vec4 x) {
          ${n}
        }`,C="result = activation(result);");let N=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${c}, ${x});
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${v}

        vec4 result = dotProd;
        ${N}
        ${C}
        setOutput(result);
      }
    `}};function Yre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:u}=n,c=l;c==null&&(c=[1,1]),I.assert(H.eitherStridesOrDilationsAreOne(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let x=H.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!0),f;return we().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1?f=new bh(x):f=new yh(x),t.runWebGLProgram(f,[o,i],"float32")}var JO={kernelName:s0,backendName:"webgl",kernelFunc:Yre};p();p();var J8=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,o=e.padInfo.top,i=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Q8=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.top,a=n-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Zre(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,dy:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=n,x=H.computeConv2DInfo(o.shape,c,s,a,l,u,!0),f=new J8(x);return t.runWebGLProgram(f,[o,i],"float32")}var QO={kernelName:Vl,backendName:"webgl",kernelFunc:Zre};p();function Jre(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,filter:i}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=n,x=H.computeConv2DInfo(c,i.shape,s,a,l,u,!0),f=new Q8(x);return t.runWebGLProgram(f,[o,i],"float32")}var eF={kernelName:Gl,backendName:"webgl",kernelFunc:Jre};p();p();var e9=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function Qre(r){let{inputs:e,backend:t}=r,{x:n}=e,o=[...n.shape,...n.shape],i=I.sizeFromShape(n.shape),s=We({inputs:{x:n},backend:t,attrs:{shape:[i]}}),a=new e9(i),l=t.runWebGLProgram(a,[s],s.dtype),u=We({inputs:{x:l},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(l),u}var tF={kernelName:Wl,backendName:"webgl",kernelFunc:Qre};p();p();var t9=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:x,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${x}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${n}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function ene(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i}=e,{strides:s,pad:a,dilations:l}=n,u=H.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),c,x=new t9(u);c=t.runWebGLProgram(x,[o,i],"float32");let f=We({inputs:{x:c},backend:t,attrs:{shape:u.outShape}});return t.disposeIntermediateTensorInfo(c),f}var rF={kernelName:a0,backendName:"webgl",kernelFunc:ene};p();var tne="return (x >= 0.0) ? x : (exp(x) - 1.0);",rne=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,nne=nt({opSnippet:tne,packedOpSnippet:rne}),nF={kernelName:ks,backendName:"webgl",kernelFunc:nne};p();var one="return (b >= 1.0) ? a : a * (b + 1.0);",ine=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,sne=r=>{let{inputs:e,backend:t}=r,{dy:n,y:o}=e,i=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new as(ine,n.shape,o.shape):new Fi(one,n.shape,o.shape);return t.runWebGLProgram(i,[n,o],n.dtype)},oF={kernelName:ql,backendName:"webgl",kernelFunc:sne};p();var ane=`
  return vec4(equal(a, b));
`,lne="return float(a == b);",une=Yt({opSnippet:lne,packedOpSnippet:ane,dtype:"bool"}),iF={kernelName:m2,backendName:"webgl",kernelFunc:une};p();var cne=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${H.ERF_P};
  float a1 = ${H.ERF_A1};
  float a2 = ${H.ERF_A2};
  float a3 = ${H.ERF_A3};
  float a4 = ${H.ERF_A4};
  float a5 = ${H.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,pne=nt({opSnippet:cne}),sF={kernelName:Es,backendName:"webgl",kernelFunc:pne};p();var aF="return exp(x);",r9=nt({opSnippet:aF,packedOpSnippet:aF,cpuKernelImpl:o$}),lF={kernelName:As,backendName:"webgl",kernelFunc:r9};p();function Q3(r){let{inputs:e,attrs:t,backend:n}=r,{dim:o}=t,{input:i}=e,s=i.shape.length,a=i.shape.slice(),l=o;return o<0&&(I.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),We({inputs:{x:i},backend:n,attrs:{shape:a}})}var uF={kernelName:l0,backendName:"webgl",kernelFunc:Q3};p();var cF="return exp(x) - 1.0;",xne=nt({opSnippet:cF,packedOpSnippet:cF,cpuKernelImpl:i$}),pF={kernelName:Ds,backendName:"webgl",kernelFunc:xne};p();p();p();var e4=class{constructor(e,t,n){this.variableNames=["real","imag"];let o=t[1];this.outputShape=t;let i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=n?`${o}.0`:"1.0",a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function t4(r,e,t){let n=t.texData.get(r.dataId),o=I.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=We({inputs:{x:r},backend:t,attrs:{shape:[s,i]}}),l=a.shape,u=new e4("real",l,e),c=new e4("imag",l,e),x=[{dataId:n.complexTensorInfos.real.dataId,dtype:n.complexTensorInfos.real.dtype,shape:l},{dataId:n.complexTensorInfos.imag.dataId,dtype:n.complexTensorInfos.imag.dtype,shape:l}],f=t.runWebGLProgram(u,x,"float32"),h=t.runWebGLProgram(c,x,"float32"),g=Io({inputs:{real:f,imag:h},backend:t});t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h);let m=We({inputs:{x:g},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(g),m}function fne(r){let{inputs:e,backend:t}=r,{input:n}=e;return t4(n,!1,t)}var xF={kernelName:Hl,backendName:"webgl",kernelFunc:fne};p();p();var n9=class{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(e){return(t,n)=>{this.valueLoc==null&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}};function vh(r){let{backend:e,attrs:t}=r,{shape:n,value:o}=t,{dtype:i}=t;if(i=i||I.inferDtype(o),i==="string"){let s=I.getArrayFromDType(i,I.sizeFromShape(n));return s.fill(o),e.makeTensorInfo(n,i,s)}else{let s=new n9(n,o),a=s.getCustomSetupFunc(o);return e.runWebGLProgram(s,[],i,a)}}var fF={kernelName:Kl,backendName:"webgl",kernelFunc:vh};p();p();var o9=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var mF={kernelName:jl,backendName:"webgl",kernelFunc:({inputs:r,backend:e})=>{let{image:t}=r,n=e,o=new o9(t.shape);return n.runWebGLProgram(o,[t],t.dtype)}};p();var hF="return floor(x);",mne=nt({opSnippet:hF,packedOpSnippet:hF,cpuKernelImpl:s$}),dF={kernelName:Rs,backendName:"webgl",kernelFunc:mne};p();var hne=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,dne=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,gne=Yt({opSnippet:hne,packedOpSnippet:dne,dtype:"int32"}),gF={kernelName:$s,backendName:"webgl",kernelFunc:gne};p();p();var i9=class{constructor(e){this.variableNames=["A"];let t=zr(),[n,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${n}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};p();var s9=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=zr(),[n,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${n}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}};var yF={kernelName:Gc,backendName:"webgl",kernelFunc:yne},Ix;function yne(r){let{inputs:e,backend:t,attrs:n}=r,{pixels:o}=e,{numChannels:i}=n,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,l=typeof ImageBitmap<"u"&&o instanceof ImageBitmap,[u,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],x=[c,u],f=[c,u,i];(a||s||l)&&(Ix==null&&(Ix=document.createElement("canvas").getContext("2d")),Ix.canvas.width=u,Ix.canvas.height=c,Ix.drawImage(o,0,0,u,c),o=Ix.canvas);let h=t.makeTensorInfo(x,"int32");t.texData.get(h.dataId).usage=Un.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(h.dataId),o);let g=we().getBool("WEBGL_PACK")?new s9(f):new i9(f),m=t.runWebGLProgram(g,[h],"int32");return t.disposeData(h.dataId),m}p();function bne(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:x,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=n,m=H.convertConv2DDataFormat(c),b=H.computeConv2DInfo(o.shape,i.shape,l,x,u,f,!1,m),v,w=[];if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))v=Y3({x:o,filter:i,convInfo:b,backend:t,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:g});else if(we().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)v=Z3({x:o,filter:i,convInfo:b,backend:t,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:g});else{let N=s!=null,_=a!=null,E=h==="leakyrelu",T=h?gl(h,!1):null,k=new gh(b,N,T,_,E),D=[o,i];if(s&&D.push(s),a&&D.push(a),E){let R=t.makeTensorInfo([],"float32",I.createScalarValue(g,"float32"));D.push(R),w.push(R)}v=t.runWebGLProgram(k,D,"float32")}let C=We({inputs:{x:v},backend:t,attrs:{shape:b.outShape}});return w.push(v),w.forEach(N=>t.disposeIntermediateTensorInfo(N)),C}var bF={kernelName:N2,backendName:"webgl",kernelFunc:bne};p();function vne(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,filter:i,bias:s,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:x,activation:f,leakyreluAlpha:h}=n,g=[],m=c;m==null&&(m=[1,1]),I.assert(H.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let b=H.computeConv2DInfo(o.shape,i.shape,l,m,u,x,!0),v=we().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,w=f?gl(f,v):null,C=[o,i],N=s!=null,_=a!=null,E=f==="leakyrelu";if(N&&C.push(s),_&&C.push(a),E){let D=t.makeTensorInfo([],"float32",I.createScalarValue(h,"float32"));C.push(D),g.push(D)}let T;v?T=new bh(b,N,w,_,E):T=new yh(b,N,w,_,E);let k=t.runWebGLProgram(T,C,"float32");return g.forEach(D=>t.disposeIntermediateTensorInfo(D)),k}var vF={kernelName:_2,backendName:"webgl",kernelFunc:vne};p();p();var a9=class{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;let o=wt(t.length),i=wt(n.length),s=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${s};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}};function wne(r){let{inputs:e,backend:t}=r,{params:n,indices:o}=e,i=o.shape,s=i[i.length-1],[a,l,u,c]=H.prepareAndValidate(n,o),x=We({inputs:{x:o},backend:t,attrs:{shape:[l,s]}}),f=We({inputs:{x:n},backend:t,attrs:{shape:[I.sizeFromShape(n.shape)/u,u]}}),h=new a9(s,c,[l,u]),g=t.runWebGLProgram(h,[f,x],f.dtype),m=We({inputs:{x:g},backend:t,attrs:{shape:a}});return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(g),m}var wF={kernelName:Xl,backendName:"webgl",kernelFunc:wne};p();p();var l9=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=wt(this.rank),o=Cne(e,2);this.userCode=`
      void main() {
        ${n} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}};function Cne(r,e){let t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let o=0;o<r.length;o++)o===2?n.push("int(getIndices(resRC.x, resRC.z))"):n.push(`${t[o]}`);return n.join()}function Nne(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,indices:i}=e,{axis:s,batchDims:a}=n,l=I.parseAxisParam(s,o.shape)[0],u=H.segment_util.collectGatherOpShapeInfo(o,i,l,a),c=I.sizeFromShape(i.shape),x=[],f=We({inputs:{x:o},backend:t,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=We({inputs:{x:i},backend:t,attrs:{shape:[u.batchSize,c/u.batchSize]}});x.push(f),x.push(h);let g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(t.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let w=t.bufferSync(h),C=t.bufferSync(f),N=a$(C,w,g);return x.forEach(_=>t.disposeIntermediateTensorInfo(_)),t.makeTensorInfo(u.outputShape,N.dtype,N.values)}let m=new l9(f.shape,g),b=t.runWebGLProgram(m,[f,h],f.dtype);x.push(b);let v=We({inputs:{x:b},backend:t,attrs:{shape:u.outputShape}});return x.forEach(w=>t.disposeIntermediateTensorInfo(w)),v}var CF={kernelName:c0,backendName:"webgl",kernelFunc:Nne};p();var _ne="return float(a > b);",Sne=`
  return vec4(greaterThan(a, b));
`,Tne=Yt({opSnippet:_ne,packedOpSnippet:Sne,cpuKernelImpl:l$,dtype:"bool"}),NF={kernelName:h2,backendName:"webgl",kernelFunc:Tne};p();var Ine="return float(a >= b);",kne=`
  return vec4(greaterThanEqual(a, b));
`,Ene=Yt({opSnippet:Ine,packedOpSnippet:kne,dtype:"bool"}),_F={kernelName:Os,backendName:"webgl",kernelFunc:Ene};p();function Ane(r){let{inputs:e,backend:t}=r,{input:n}=e;return t4(n,!0,t)}var SF={kernelName:Yl,backendName:"webgl",kernelFunc:Ane};p();var Dne="return float(!isnan(x) && !isinf(x));",Rne=nt({opSnippet:Dne,dtype:"bool"}),TF={kernelName:Fs,backendName:"webgl",kernelFunc:Rne};p();var $ne="return float(isinf(x));",One=nt({opSnippet:$ne,dtype:"bool"}),IF={kernelName:Ms,backendName:"webgl",kernelFunc:One};p();var Fne="return float(isnan(x));",Mne=nt({opSnippet:Fne,dtype:"bool"}),kF={kernelName:zs,backendName:"webgl",kernelFunc:Mne};p();var zne="return float(a < b);",Lne=`
  return vec4(lessThan(a, b));
`,Pne=Yt({opSnippet:zne,packedOpSnippet:Lne,cpuKernelImpl:u$,dtype:"bool"}),EF={kernelName:d2,backendName:"webgl",kernelFunc:Pne};p();var Bne="return float(a <= b);",Une=`
  return vec4(lessThanEqual(a, b));
`,Vne=Yt({opSnippet:Bne,packedOpSnippet:Une,dtype:"bool"}),AF={kernelName:g2,backendName:"webgl",kernelFunc:Vne};p();function Gne(r){let{backend:e,attrs:t}=r,{start:n,stop:o,num:i}=t,s=c$(n,o,i);return e.makeTensorInfo([s.length],"float32",s)}var DF={kernelName:Jl,backendName:"webgl",kernelFunc:Gne};p();var Wne=`if (x < 0.0) return NAN;
  return log(x);`,qne=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,Hne=nt({opSnippet:Wne,packedOpSnippet:qne,cpuKernelImpl:p$}),RF={kernelName:Ls,backendName:"webgl",kernelFunc:Hne};p();var Kne="return log(1.0 + x);",jne=nt({opSnippet:Kne}),$F={kernelName:Ps,backendName:"webgl",kernelFunc:jne};p();var Xne="return float(a >= 1.0 && b >= 1.0);",Yne=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Zne=Yt({opSnippet:Xne,packedOpSnippet:Yne,dtype:"bool"}),OF={kernelName:y2,backendName:"webgl",kernelFunc:Zne};p();var Jne="return float(!(x >= 1.0));",Qne=nt({opSnippet:Jne}),FF={kernelName:b2,backendName:"webgl",kernelFunc:Qne};p();var eoe="return float(a >= 1.0 || b >= 1.0);",toe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,roe=Yt({opSnippet:eoe,packedOpSnippet:toe,dtype:"bool"}),MF={kernelName:v2,backendName:"webgl",kernelFunc:roe};p();p();var u9=class{constructor(e,t,n,o,i){this.variableNames=["x"],this.outputShape=[];let s=t,a=e[3]-1;this.outputShape=e;let l,u=`float(${n}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};p();var c9=class{constructor(e,t,n,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=t,a=e[3]-1;this.outputShape=e;let l,u=`float(${n}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var noe=r=>{let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{depthRadius:i,bias:s,alpha:a,beta:l}=n,u=we().getBool("WEBGL_PACK_NORMALIZATION")?new c9(o.shape,i,s,a,l):new u9(o.shape,i,s,a,l);return t.runWebGLProgram(u,[o],o.dtype)},zF={kernelName:x0,backendName:"webgl",kernelFunc:noe};p();p();var p9=class{constructor(e,t,n,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${n});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var ooe=r=>{let{inputs:e,backend:t,attrs:n}=r,{x:o,y:i,dy:s}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=n,x=new p9(o.shape,a,l,u,c);return t.runWebGLProgram(x,[o,i,s],o.dtype)},LF={kernelName:Ql,backendName:"webgl",kernelFunc:ooe};p();p();function PF(r,e,t,n){let o=I.sizeFromShape(e),s=I.sizeFromShape(r.shape)/o,a=We({inputs:{x:r},attrs:{shape:[s,o]},backend:n}),l=Uo(a,r.dtype,"max",n),u=We({inputs:{x:l},attrs:{shape:t},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}function x9(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{reductionIndices:i,keepDims:s}=n,a=o.shape.length,l=I.parseAxisParam(i,o.shape),u=l,c=H.getAxesPermutation(u,a),x=c!=null,f=t.shouldExecuteOnCPU([o]),h=o;if(x){if(f){let C=t.texData.get(h.dataId).values,N=new Array(a);for(let T=0;T<N.length;T++)N[T]=o.shape[c[T]];let _=nc(C,o.shape,o.dtype,c,N);h=t.makeTensorInfo(N,o.dtype);let E=t.texData.get(h.dataId);E.values=_}else h=yl(o,c,t);u=H.getInnerMostAxes(u.length,a)}H.assertAxesAreInnerMostDims("max",u,a);let[g,m]=H.computeOutAndReduceShapes(h.shape,u),b=g;s&&(b=H.expandShapeToKeepDim(g,l));let v;if(f){let C=t.texData.get(h.dataId).values,N=x$(C,I.sizeFromShape(m),b,o.dtype);v=t.makeTensorInfo(b,o.dtype);let _=t.texData.get(v.dataId);_.values=N}else v=PF(h,m,b,t);return x&&t.disposeIntermediateTensorInfo(h),v}var BF={kernelName:f0,backendName:"webgl",kernelFunc:x9};p();var ioe=G3+`
  return max(a, b);
`,soe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+dl+`
  return result;
`,aoe=Yt({opSnippet:ioe,packedOpSnippet:soe,cpuKernelImpl:f$}),UF={kernelName:Bs,backendName:"webgl",kernelFunc:aoe};p();function loe(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e;Ra(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n,u=1;I.assert(H.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=H.computePool2DInfo(o.shape,i,s,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&I.arraysEqual(c.inShape,c.outShape))return jr({inputs:{x:o},backend:t});let x=new $a(c,"max",!1);return t.runWebGLProgram(x,[o],o.dtype)}var VF={kernelName:m0,backendName:"webgl",kernelFunc:loe};p();function uoe(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{filterSize:i,strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=n,c=[1,1,1],x=H.computePool3DInfo(o.shape,i,s,c,a,u,l),f=new ic(x,"max",!1);return t.runWebGLProgram(f,[o],o.dtype)}var GF={kernelName:h0,backendName:"webgl",kernelFunc:uoe};p();p();var f9=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,o=e.dilationHeight,i=e.effectiveFilterHeight,s=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=s-1-e.padInfo.left,u=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},m9=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,x=l-1-e.padInfo.front,f=u-1-e.padInfo.top,h=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${x}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${n}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function coe(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i}=e,s=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=n,x=[1,1,1],f=H.computePool3DInfo(s.shape,a,l,x,u,c),h=new ic(f,"max",!0),g=t.runWebGLProgram(h,[s],s.dtype),m=new m9(f),b=t.runWebGLProgram(m,[o,g],s.dtype);return t.disposeIntermediateTensorInfo(g),b}var WF={kernelName:tu,backendName:"webgl",kernelFunc:coe};p();function poe(r){let{inputs:e,backend:t,attrs:n}=r,{dy:o,input:i,output:s}=e,a=i;Ra([i,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:x}=n,f=H.computePool2DInfo(a.shape,l,u,1,c,x),h=!0,g=new $a(f,"max",h),m=t.runWebGLProgram(g,[a],a.dtype),b=new f9(f),v=t.runWebGLProgram(b,[o,m],a.dtype);return t.disposeIntermediateTensorInfo(m),v}var qF={kernelName:eu,backendName:"webgl",kernelFunc:poe};p();p();function HF(r,e,t,n){let o=new $a(t,"max",!1),i=n.runWebGLProgram(o,[r],"float32");o=new $a(t,"max",!0,!0,e);let s=n.runWebGLProgram(o,[r],"float32");return[i,s]}var KF={kernelName:ru,backendName:"webgl",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{x:n}=r,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=e,l=t;I.assert(n.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${n.shape.length}.`);let u=[1,1];I.assert(H.eitherStridesOrDilationsAreOne(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);let c=H.computePool2DInfo(n.shape,o,i,u,s),[x,f]=HF(n,a,c,l);return[x,f]}};p();p();function jF(r,e,t,n){let o=I.sizeFromShape(e),s=I.sizeFromShape(r.shape)/o,a=We({inputs:{x:r},attrs:{shape:[s,o]},backend:n}),l=Uo(a,"float32","mean",n),u=We({inputs:{x:l},attrs:{shape:t},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}var XF={kernelName:d0,backendName:"webgl",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{x:n}=r,{keepDims:o,axis:i}=e,s=t,a=n.shape.length,l=I.parseAxisParam(i,n.shape),u=l,c=H.getAxesPermutation(u,a),x=c!=null,f=s.shouldExecuteOnCPU([n]),h=[],g=n;if(x){if(f){let N=s.texData.get(g.dataId).values,_=new Array(a);for(let k=0;k<_.length;k++)_[k]=n.shape[c[k]];let E=nc(N,n.shape,n.dtype,c,_);g=s.makeTensorInfo(_,n.dtype);let T=s.texData.get(g.dataId);T.values=E}else g=yl(n,c,s);h.push(g),u=H.getInnerMostAxes(u.length,a)}H.assertAxesAreInnerMostDims("sum",u,a);let[m,b]=H.computeOutAndReduceShapes(g.shape,u),v=m;o&&(v=H.expandShapeToKeepDim(m,l));let w=jF(g,b,v,s);for(let C of h)s.disposeIntermediateTensorInfo(C);return w}};p();function xoe(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n,a=o.shape.length,l=I.parseAxisParam(i,o.shape),u=l,c=H.getAxesPermutation(u,a),x=o;c!=null&&(x=Gr({inputs:{x:o},backend:t,attrs:{perm:c}}),u=H.getInnerMostAxes(u.length,o.shape.length)),H.assertAxesAreInnerMostDims("min",u,a);let[f,h]=H.computeOutAndReduceShapes(x.shape,u),g=I.sizeFromShape(h),m=We({inputs:{x},backend:t,attrs:{shape:[-1,g]}}),b=Uo(m,m.dtype,"min",t),v;if(s){let w=H.expandShapeToKeepDim(f,l);v=We({inputs:{x:b},backend:t,attrs:{shape:w}})}else v=We({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(b),c!=null&&t.disposeIntermediateTensorInfo(x),v}var YF={kernelName:g0,backendName:"webgl",kernelFunc:xoe};p();var foe=G3+`
  return min(a, b);
`,moe=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+dl+`
  return result;
`,hoe=Yt({opSnippet:foe,packedOpSnippet:moe,cpuKernelImpl:m$}),ZF={kernelName:Us,backendName:"webgl",kernelFunc:hoe};p();p();var h9=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((c,x)=>c[0]+e[x]+c[1]);let o=e.length,i=wt(o),s=t.map(c=>c[0]).join(","),a=t.map((c,x)=>c[0]+e[x]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=n==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};p();var d9=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((g,m)=>g[0]+e[m]+g[1]);let o=e.length,i=wt(o),s=t.map(g=>g[0]).join(","),a=t.map((g,m)=>g[0]+e[m]).join(","),l=Kr("rc",o),u=Kr("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,x=o===1?"source":`vec2(${u.slice(-2).join()})`,f=n==="reflect"?0:1,h="";if(o===1){let g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${x});
        ${l[o-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${x});
        }
      `}else{let g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${x});
        ${l[o-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${x});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${x});
          ${l[o-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${x});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var doe=({inputs:r,backend:e,attrs:t})=>{let{x:n}=r,{paddings:o,mode:i}=t,s=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new d9(n.shape,o,i):new h9(n.shape,o,i);return e.runWebGLProgram(s,[n],n.dtype)},JF={kernelName:y0,backendName:"webgl",kernelFunc:doe};p();var goe=`if (b == 0.0) return NAN;
  return mod(a, b);`,yoe=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+dl+`
  return result;
`,boe=Yt({opSnippet:goe,packedOpSnippet:yoe}),QF={kernelName:Vs,backendName:"webgl",kernelFunc:boe};p();p();var g9=class{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}getCustomSetupFunc(e){return(t,n)=>{this.seedLoc==null&&(this.seedLoc=t.getUniformLocation(n,"seed")),t.gl.uniform1f(this.seedLoc,e)}}};p();p();var voe=`
if (a == b) {
  return 1.0;
};
return a / b;`,woe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,y9=Yt({opSnippet:voe,packedOpSnippet:woe,checkOutOfBounds:!0}),eM={kernelName:Is,backendName:"webgl",kernelFunc:y9};p();var tM="return a - b;",b9=Yt({opSnippet:tM,packedOpSnippet:tM,supportsComplex:!0,cpuKernelImpl:C$}),rM={kernelName:oa,backendName:"webgl",kernelFunc:b9};function v9(r){let{inputs:e,backend:t,attrs:n}=r,{logits:o}=e,{dim:i}=n,s=I.parseAxisParam([i],o.shape),a=x9({inputs:{x:o},backend:t,attrs:{reductionIndices:s,keepDims:!1}}),l=H.expandShapeToKeepDim(a.shape,s),u=We({inputs:{x:a},backend:t,attrs:{shape:l}}),c=b9({inputs:{a:o,b:u},backend:t}),x=r9({inputs:{x:c},backend:t}),f=dh({inputs:{x},backend:t,attrs:{axis:s,keepDims:!1}}),h=We({inputs:{x:f},backend:t,attrs:{shape:l}}),g=y9({inputs:{a:x,b:h},backend:t});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),g}var nM={kernelName:O0,backendName:"webgl",kernelFunc:v9};function Coe(r){let{inputs:e,backend:t,attrs:n}=r,{logits:o}=e,{numSamples:i,seed:s,normalized:a}=n,l=a?o:v9({inputs:{logits:o},backend:t,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],x=new g9(u,c,i),f=x.getCustomSetupFunc(s),h=t.runWebGLProgram(x,[l],"int32",f);return a||t.disposeIntermediateTensorInfo(l),h}var oM={kernelName:nu,backendName:"webgl",kernelFunc:Coe};p();var iM="return -x;";function Noe(r){let{inputs:e,backend:t}=r,{x:n}=e;if(t.shouldExecuteOnCPU([n])){let i=t.texData.get(n.dataId),[s,a]=d$(i.values,n.shape,n.dtype);return t.makeTensorInfo(a,n.dtype,s)}let o;return we().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ss(n.shape,iM):o=new To(n.shape,iM),t.runWebGLProgram(o,[n],n.dtype)}var sM={kernelName:b0,backendName:"webgl",kernelFunc:Noe};p();var _oe=An.nonMaxSuppressionV3Impl;function Soe(r){H.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=n,u=t.readSync(o.dataId),c=t.readSync(i.dataId),{selectedIndices:x}=_oe(u,c,s,a,l);return t.makeTensorInfo([x.length],"int32",new Int32Array(x))}var aM={kernelName:ou,backendName:"webgl",kernelFunc:Soe};p();var Toe=An.nonMaxSuppressionV4Impl;function Ioe(r){H.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=n,c=t.readSync(o.dataId),x=t.readSync(i.dataId),{selectedIndices:f,validOutputs:h}=Toe(c,x,s,a,l,u);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([h]))]}var lM={kernelName:iu,backendName:"webgl",kernelFunc:Ioe};p();var koe=An.nonMaxSuppressionV5Impl;function Eoe(r){H.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:e,backend:t,attrs:n}=r,{boxes:o,scores:i}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=n,c=t.readSync(o.dataId),x=t.readSync(i.dataId),f=s,h=a,g=l,m=u,{selectedIndices:b,selectedScores:v}=koe(c,x,f,h,g,m);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var uM={kernelName:su,backendName:"webgl",kernelFunc:Eoe};p();p();var w9=class{constructor(e,t,n,o){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${n}),
                      float(index == coords.y)));
      }
    `}};var Aoe=r=>{let{inputs:e,backend:t,attrs:n}=r,{indices:o}=e,{depth:i,onValue:s,offValue:a}=n,l=I.sizeFromShape(o.shape),u=new w9(l,i,s,a),c=We({inputs:{x:o},backend:t,attrs:{shape:[l]}}),x=t.runWebGLProgram(u,[c],o.dtype);t.disposeIntermediateTensorInfo(c);let f=[...o.shape,i],h=We({inputs:{x},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(x),h},cM={kernelName:w0,backendName:"webgl",kernelFunc:Aoe};p();p();function wh(r){let{inputs:e,backend:t}=r,{x:n}=e;if(n.dtype==="complex64"){let o=a2({inputs:{input:n},backend:t}),i=wh({inputs:{x:o},backend:t}),s=sc({inputs:{input:n},backend:t}),a=wh({inputs:{x:s},backend:t}),l=Io({inputs:{real:i,imag:a},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),l}else return vh({attrs:{shape:n.shape,dtype:n.dtype,value:n.dtype==="string"?"":0},backend:t})}var pM={kernelName:L0,backendName:"webgl",kernelFunc:wh};function xM(r){let{inputs:e,backend:t}=r,{x:n}=e;if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(n.dtype==="complex64"){let o=a2({inputs:{input:n},backend:t}),i=xM({inputs:{x:o},backend:t}),s=sc({inputs:{input:n},backend:t}),a=wh({inputs:{x:s},backend:t}),l=Io({inputs:{real:i,imag:a},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),l}else return vh({attrs:{shape:n.shape,dtype:n.dtype,value:1},backend:t})}var fM={kernelName:v0,backendName:"webgl",kernelFunc:xM};p();function Doe(r){let{inputs:e,backend:t,attrs:n}=r,{axis:o}=n;if(e.length===1)return Q3({inputs:{input:e[0]},backend:t,attrs:{dim:o}});let i=e[0].shape,s=e[0].dtype;e.forEach(c=>{I.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),I.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=e.map(c=>{let x=Q3({inputs:{input:c},backend:t,attrs:{dim:o}});return a.push(x),x}),u=G8({inputs:l,backend:t,attrs:{axis:o}});return a.forEach(c=>t.disposeIntermediateTensorInfo(c)),u}var mM={kernelName:C0,backendName:"webgl",kernelFunc:Doe};p();p();var C9=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((u,c)=>u[0]+e[c]+u[1]);let o=e.length,i=wt(o),s=t.map(u=>u[0]).join(","),a=t.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${n}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${n}));
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};p();var N9=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((m,b)=>m[0]+e[b]+m[1]);let o=e.length,i=wt(o),s=t.map(m=>m[0]).join(","),a=t.map((m,b)=>m[0]+e[b]).join(","),l=Kr("rc",o),u=Kr("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,x=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${i} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="";for(let m=0,b=o===1?2:4;m<b;m++)g+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(${n});
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${x});
        }
      `;g+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}};var _9=r=>{let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{paddings:i,constantValue:s}=n,a=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new N9(o.shape,i,s):new C9(o.shape,i,s);return t.runWebGLProgram(a,[o],o.dtype)},hM={kernelName:N0,backendName:"webgl",kernelFunc:_9};p();var Roe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,$oe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+dl+`
  return result;
`,Ooe=Yt({opSnippet:Roe,packedOpSnippet:$oe}),dM={kernelName:Ws,backendName:"webgl",kernelFunc:Ooe};p();function Foe(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{axis:i,keepDims:s}=n,a=o.shape.length,l=[],u=I.parseAxisParam(i,o.shape),c=u,x=H.getAxesPermutation(c,a),f=o;x!=null&&(f=Gr({inputs:{x:o},backend:t,attrs:{perm:x}}),c=H.getInnerMostAxes(c.length,a),l.push(f)),H.assertAxesAreInnerMostDims("prod",c,a);let h;if(t.shouldExecuteOnCPU([f])){let g=t.texData.get(f.dataId).values,{outVals:m,outShape:b,outDtype:v}=g$(f.shape,f.dtype,g,c);h=t.makeTensorInfo(b,v,m)}else{let[g,m]=H.computeOutAndReduceShapes(f.shape,c),b=I.sizeFromShape(m),v=We({inputs:{x:f},backend:t,attrs:{shape:[-1,b]}}),w=T2(o.dtype),C=Uo(v,w,"prod",t);h=We({inputs:{x:C},backend:t,attrs:{shape:g}}),l.push(v),l.push(C)}if(s){l.push(h);let g=H.expandShapeToKeepDim(h.shape,u);h=We({inputs:{x:h},backend:t,attrs:{shape:g}})}return l.forEach(g=>t.disposeIntermediateTensorInfo(g)),h}var gM={kernelName:au,backendName:"webgl",kernelFunc:Foe};p();var S9=r=>{let{backend:e,attrs:t}=r,{start:n,stop:o,step:i,dtype:s}=t,a=y$(n,o,i,s);return e.makeTensorInfo([a.length],s,a)},yM={kernelName:lu,backendName:"webgl",kernelFunc:S9};p();var Moe="return 1.0 / x;",zoe=nt({opSnippet:Moe}),bM={kernelName:qs,backendName:"webgl",kernelFunc:zoe};p();var Loe=wn+`
  return (x < 0.0) ? 0.0 : x;
`,Poe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Boe=nt({opSnippet:Loe,packedOpSnippet:Poe}),vM={kernelName:Hs,backendName:"webgl",kernelFunc:Boe};p();var Uoe=wn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Voe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Goe=nt({opSnippet:Uoe,packedOpSnippet:Voe}),wM={kernelName:Ks,backendName:"webgl",kernelFunc:Goe};p();p();var T9=class{constructor(e,t,n,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,u]=e;this.outputShape=[s,t,n,u];let c=[o&&t>1?a-1:a,o&&n>1?l-1:l],x=[o&&t>1?t-1:t,o&&n>1?n-1:n],f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/x[0]},
          ${c[1]/x[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};p();var I9=class{constructor(e,t,n,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,u]=e;this.outputShape=[s,t,n,u];let c=[o&&t>1?a-1:a,o&&n>1?l-1:l],x=[o&&t>1?t-1:t,o&&n>1?n-1:n],f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/x[0]},
          ${c[1]/x[1]},
          ${c[1]/x[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${n-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function Woe(r){let{inputs:e,backend:t,attrs:n}=r,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=n,[l,u]=a,c=we().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new I9(o.shape,l,u,i,s):new T9(o.shape,l,u,i,s);return t.runWebGLProgram(c,[o],"float32")}var CM={kernelName:I0,backendName:"webgl",kernelFunc:Woe};p();p();var k9=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,o,i]=t,[,s,a]=e,l=[n&&s>1?o-1:o,n&&a>1?i-1:i],u=[n&&s>1?s-1:s,n&&a>1?a-1:a],c=l[0]/u[0],x=l[1]/u[1],f=1/c,h=1/x,g=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${x});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function qoe(r){let{inputs:e,backend:t,attrs:n}=r,{images:o,dy:i}=e,{alignCorners:s}=n,a=new k9(i.shape,o.shape,s);return t.runWebGLProgram(a,[i],i.dtype)}var NM={kernelName:pu,backendName:"webgl",kernelFunc:qoe};p();p();var E9=class{constructor(e,t,n,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,u]=e;this.outputShape=[s,t,n,u];let c=[o&&t>1?a-1:a,o&&n>1?l-1:l],x=[o&&t>1?t-1:t,o&&n>1?n-1:n],f=o?"0.5":"0.0",h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/x[0]},
          ${c[1]/x[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};function Hoe(r){let{inputs:e,backend:t,attrs:n}=r,{images:o}=e,{alignCorners:i,halfPixelCenters:s,size:a}=n,[l,u]=a,c=new E9(o.shape,l,u,i,s);return t.runWebGLProgram(c,[o],o.dtype)}var _M={kernelName:T0,backendName:"webgl",kernelFunc:Hoe};p();p();var A9=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,o,i]=t,[,s,a]=e,l=[n&&s>1?o-1:o,n&&a>1?i-1:i],u=[n&&s>1?s-1:s,n&&a>1?a-1:a],c=l[0]/u[0],x=l[1]/u[1],f=1/c,h=1/x,g=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${x});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${n} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${n} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function Koe(r){let{inputs:e,backend:t,attrs:n}=r,{images:o,dy:i}=e,{alignCorners:s}=n,a=new A9(i.shape,o.shape,s);return t.runWebGLProgram(a,[i],i.dtype)}var SM={kernelName:cu,backendName:"webgl",kernelFunc:Koe};p();p();var D9=class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,n===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}let o=a=>t.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>o(l)).join(","),s=wt(n);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};p();var R9=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;let o=Kr("rc",n),i=`${o[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${o[n-2]} + 1 < ${this.outputShape[n-2]}`,a=wt(n);n===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${i}){
            result.g = ${u(o.slice())};
          }
          if(${s}) {
            result.b = ${c(o.slice())};
            if(${i}) {
              result.a = ${x(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return f(g)}function u(g){return g[n-1]="("+g[n-1]+" + 1)",f(g)}function c(g){return g[n-2]="("+g[n-2]+" + 1)",f(g)}function x(g){return g[n-1]="("+g[n-1]+" + 1)",g[n-2]="("+g[n-2]+" + 1)",f(g)}function f(g){let m=e.map((w,C)=>h(C,g)),b=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${v}))`}function h(g,m){return t.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${m[g]} - 1`:`${m[g]}`}}};function joe(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{dims:i}=n,s=o.shape.length,a=I.parseAxisParam(i,o.shape);if(s===0)return jr({inputs:{x:o},backend:t});let l=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new R9(o.shape,a):new D9(o.shape,a);return t.runWebGLProgram(l,[o],o.dtype)}var TM={kernelName:k0,backendName:"webgl",kernelFunc:joe};p();p();var $9=class{constructor(e,t,n,o){this.variableNames=["Image"],this.outputShape=[];let i=e[1],s=e[2],a=Math.sin(t).toFixed(3),l=Math.cos(t).toFixed(3);this.outputShape=e;let[u,c]=H.getImageCenter(o,i,s),x=u.toFixed(3),f=c.toFixed(3),h="";typeof n=="number"?h=`float outputValue = ${n.toFixed(2)};`:h=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${x}) * ${l} - (float(y) - ${f}) * ${a};
          float coordYFloat = (float(x) - ${x}) * ${a} + (float(y) - ${f}) * ${l};
          int coordX = int(round(coordXFloat + ${x}));
          int coordY = int(round(coordYFloat + ${f}));
          ${h}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var IM={kernelName:yu,backendName:"webgl",kernelFunc:({inputs:r,attrs:e,backend:t})=>{let{image:n}=r,{radians:o,fillValue:i,center:s}=e,a=t,l=new $9(n.shape,o,i,s);return a.runWebGLProgram(l,[n],n.dtype)}};p();var Xoe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Yoe=nt({opSnippet:Xoe}),kM={kernelName:js,backendName:"webgl",kernelFunc:Yoe};p();var Zoe="return inversesqrt(x);",Joe=nt({opSnippet:Zoe,cpuKernelImpl:b$}),EM={kernelName:Xs,backendName:"webgl",kernelFunc:Joe};p();p();var Ch=class{constructor(e,t,n,o,i,s,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let l=wt(i.length),u=wt(s.length),c="";n===1?c="i":n===2&&(c="i, j");let x=`getIndices(${c})`,f="";o===1?f="i":o===2&&(f="i, coords[1]");let h=`getUpdates(${f})`,g=t>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${x});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}};function Qoe(r){let{inputs:e,backend:t,attrs:n}=r,{indices:o,updates:i}=e,{shape:s}=n,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:x}=H.calculateShapes(i,o,s),f=[x/u,u];if(x===0)return t.makeTensorInfo(s,o.dtype);let h=We({inputs:{x:o},backend:t,attrs:{shape:[l,a]}}),g=We({inputs:{x:i},backend:t,attrs:{shape:[l,u]}}),m=t.makeTensorInfo([],"float32",new Float32Array([0])),b=new Ch(l,a,h.shape.length,g.shape.length,c,f),v=t.runWebGLProgram(b,[g,h,m],g.dtype),w=We({inputs:{x:v},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(m),w}var AM={kernelName:xu,backendName:"webgl",kernelFunc:Qoe};p();p();var O9=class{constructor(e,t,n){this.variableNames=["c","a","b"],this.outputShape=t;let o,i;if(n>4)throw Error(`Where for rank ${n} is not yet supported`);if(n===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<t.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);o=l.join(),i=u.join()}let s=wt(n);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function eie(r){let{inputs:e,backend:t}=r,{condition:n,t:o,e:i}=e,s=new O9(n.shape.length,o.shape,o.shape.length);return t.runWebGLProgram(s,[n,o,i],nn(o.dtype,i.dtype))}var DM={kernelName:E0,backendName:"webgl",kernelFunc:eie};p();var tie=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${H.SELU_SCALEALPHA};
  float scale = ${H.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,rie=nt({opSnippet:tie}),RM={kernelName:Ys,backendName:"webgl",kernelFunc:rie};p();var nie="return 1.0 / (1.0 + exp(-1.0 * x));",oie=nt({opSnippet:nie}),$M={kernelName:ea,backendName:"webgl",kernelFunc:oie};p();var iie=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sie=nt({opSnippet:iie}),OM={kernelName:Qs,backendName:"webgl",kernelFunc:sie};p();var aie=W3+`
  return sin(x);
`,lie=nt({opSnippet:aie}),FM={kernelName:Zs,backendName:"webgl",kernelFunc:lie};p();var uie=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,cie=nt({opSnippet:uie}),MM={kernelName:Js,backendName:"webgl",kernelFunc:cie};p();var pie=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,xie=nt({opSnippet:pie}),zM={kernelName:ta,backendName:"webgl",kernelFunc:xie};p();var fie=r=>{let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{blockShape:i,paddings:s}=n;I.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((v,w)=>v*w),l=[[0,0]];l.push(...s);for(let v=1+i.length;v<o.shape.length;++v)l.push([0,0]);let u=[],c=_9({inputs:{x:o},backend:t,attrs:{paddings:l,constantValue:0}}),x=H.getReshaped(c.shape,i,a,!1),f=H.getPermuted(x.length,i.length,!1),h=H.getReshapedPermuted(c.shape,i,a,!1),g=We({inputs:{x:c},backend:t,attrs:{shape:x}}),m=Gr({inputs:{x:g},backend:t,attrs:{perm:f}}),b=We({inputs:{x:m},backend:t,attrs:{shape:h}});return u.push(c),u.push(g),u.push(m),u.forEach(v=>t.disposeIntermediateTensorInfo(v)),b},LM={kernelName:R0,backendName:"webgl",kernelFunc:fie};p();function mie(r){let{inputs:e,backend:t,attrs:n}=r,{sparseIndices:o,sparseValues:i,defaultValue:s}=e,{outputShape:a}=n,{sliceRank:l,numUpdates:u,strides:c,outputSize:x}=H.calculateShapes(i,o,a),f=!1,h=new Ch(u,l,o.shape.length,i.shape.length,c,[x,1],f),g=t.runWebGLProgram(h,[i,o,s],i.dtype),m=We({inputs:{x:g},backend:t,attrs:{shape:a}});return t.disposeIntermediateTensorInfo(g),m}var PM={kernelName:mu,backendName:"webgl",kernelFunc:mie};p();function hie(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{numOrSizeSplits:i,axis:s}=n,a=I.parseAxisParam(s,o.shape)[0],l=H.prepareSplitSize(o,i,a),u=o.shape.length,c=new Array(u).fill(0),x=o.shape.slice();return l.map(f=>{let h=[...x];h[a]=f;let g=s2({inputs:{x:o},backend:t,attrs:{begin:c,size:h}});return c[a]+=f,g})}var BM={kernelName:$0,backendName:"webgl",kernelFunc:hie};p();var die="return sqrt(x);",gie=nt({opSnippet:die}),UM={kernelName:ra,backendName:"webgl",kernelFunc:gie};p();var yie="return x * x;",bie=nt({opSnippet:yie}),VM={kernelName:fu,backendName:"webgl",kernelFunc:bie};p();var GM="return (a - b) * (a - b);",vie=Yt({opSnippet:GM,packedOpSnippet:GM}),WM={kernelName:na,backendName:"webgl",kernelFunc:vie};p();function wie({inputs:r,attrs:e,backend:t}){let{x:n}=r,o=wn+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new To(n.shape,o);return t.runWebGLProgram(i,[n],n.dtype)}var qM={kernelName:aa,backendName:"webgl",kernelFunc:wie};p();p();var F9=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let o=n.length,i=wt(n.length),s=wt(n.length),a="";if(o===1)a="coords * strides + begin";else{let l=0;a=n.map((u,c)=>(l++,n.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${t});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function Cie(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{begin:i,end:s,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:x,shrinkAxisMask:f}=n,{nonStrided:h,$begin:g,$strides:m,size:b,newShape:v,outShape:w}=Tn.sliceInfo(o.shape,i,s,a,l,u,c,x,f),C=We({inputs:{x:o},backend:t,attrs:{shape:v}}),N;if(h){let E=s2({inputs:{x:C},backend:t,attrs:{begin:g,size:b}});N=We({inputs:{x:E},backend:t,attrs:{shape:w}}),t.disposeIntermediateTensorInfo(E)}else if(w.some(E=>E===0))N=t.makeTensorInfo(w,o.dtype,[]);else if(t.shouldExecuteOnCPU([C])){let k=t.texData.get(C.dataId).values,D=it(C.shape,C.dtype,k),R=w$(w,D,m,g);N=t.makeTensorInfo(w,C.dtype,R.values)}else{let T=new F9(g,m,w);N=t.runWebGLProgram(T,[C],C.dtype)}let _=We({inputs:{x:N},backend:t,attrs:{shape:w}});return t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(N),_}var HM={kernelName:hu,backendName:"webgl",kernelFunc:Cie};p();var Nie="return tan(x);",_ie=nt({opSnippet:Nie}),KM={kernelName:ia,backendName:"webgl",kernelFunc:_ie};p();var Sie=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Tie=nt({opSnippet:Sie}),jM={kernelName:sa,backendName:"webgl",kernelFunc:Tie};p();p();var M9=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e[s]*t[s];this.outputShape=n,this.rank=n.length;let o=wt(this.rank),i=Iie(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function Iie(r){let e=r.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${r[0]})`;let t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],n=[];for(let o=0;o<r.length;o++)n.push(`imod(${t[o]}, ${r[o]})`);return n.join()}function z9(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{reps:i}=n;if(o.dtype==="string"){let u=t.readSync(o.dataId).map(f=>I.decodeString(f)),c=it(o.shape,o.dtype,u),x=N$(c,i);return t.makeTensorInfo(x.shape,x.dtype,x.values)}let s=new M9(o.shape,i);return t.runWebGLProgram(s,[o],o.dtype)}var XM={kernelName:qi,backendName:"webgl",kernelFunc:z9};p();function kie(r){let{inputs:e,backend:t,attrs:n}=r,{x:o}=e,{k:i,sorted:s}=n,a=t.readSync(o.dataId),[l,u]=_$(a,o.shape,o.dtype,i,s);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(u.shape,u.dtype,u.values)]}var YM={kernelName:du,backendName:"webgl",kernelFunc:kie};p();function Eie(r){let{inputs:e,attrs:t,backend:n}=r,{axis:o}=t,{x:i}=e;Ra(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=n.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=S$(s,o,i.shape,i.dtype);return[n.makeTensorInfo(l,i.dtype,a),n.makeTensorInfo([u.length],"int32",u)]}var ZM={kernelName:gu,backendName:"webgl",kernelFunc:Eie};p();function Aie(r){let{inputs:e,backend:t,attrs:n}=r,{value:o}=e,{axis:i}=n;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,l=o.shape[i],u=new Array(a-1),c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=s.shape[m]);let x=[],f=new Array(a).fill(0),h=s.shape.slice();h[i]=1;let g=new Array(l);for(let m=0;m<g.length;m++){f[i]=m;let b=s2({inputs:{x:s},backend:t,attrs:{begin:f,size:h}}),v=We({inputs:{x:b},backend:t,attrs:{shape:u}});g[m]=v,x.push(b)}return x.forEach(m=>t.disposeIntermediateTensorInfo(m)),g}var JM={kernelName:M0,backendName:"webgl",kernelFunc:Aie};p();p();var L9=class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,o=e.batchSize,i=e.inSize,s=e.numSegments,a=s*Math.ceil(i/n);this.outputShape=[o,a];let l="0.0",u="sumValue",c=Math.floor(n/4)*4,x=n%4,f=`
        sumValue += dot(values, segFilter);
    `,h="";i%n>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%n>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${n}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${x===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${x===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${x===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}};function Die(r){let{inputs:e,backend:t,attrs:n}=r,{x:o,segmentIds:i}=e,{numSegments:s}=n,a=o.shape.length,l=[],u=0,c=H.getAxesPermutation([u],a),x=o;c!=null&&(x=Gr({inputs:{x:o},backend:t,attrs:{perm:c}}),l.push(x),u=H.getInnerMostAxes(1,a)[0]);let f=H.segment_util.computeOutShape(x.shape,u,s),h=I.sizeFromShape([x.shape[u]]),g=We({inputs:{x},backend:t,attrs:{shape:[-1,h]}});l.push(g);let m=T2(o.dtype),b=(N,_,E,T,k)=>{let D=N.shape[0],R=N.shape[1],K=H.segment_util.segOpComputeOptimalWindowSize(R,k),M={windowSize:K,inSize:R,batchSize:D,numSegments:k},j=new L9(M,_),X=t.compileAndRun(j,[N,E],T);if(l.push(X),X.shape[1]===k)return X;let Z=S9({backend:t,attrs:{start:0,stop:k,step:1,dtype:"float32"}}),Y=z9({inputs:{x:Z},backend:t,attrs:{reps:[R/K]}});return l.push(Z),l.push(Y),b(X,_,Y,T,k)},v=b(g,"unsortedSegmentSum",i,m,s),w=We({inputs:{x:v},backend:t,attrs:{shape:f}}),C=w;if(c!=null){l.push(w);let N=H.getUndoAxesPermutation(c);C=Gr({inputs:{x:C},backend:t,attrs:{perm:N}})}return l.forEach(N=>t.disposeIntermediateTensorInfo(N)),C}var QM={kernelName:z0,backendName:"webgl",kernelFunc:Die};var Rie=[zF,LF,J$,eO,tO,rO,oO,iO,sO,aO,cO,pO,xO,fO,hO,mO,dO,yO,gO,bO,vO,wO,CO,_O,SO,EO,DO,RO,OO,B$,zO,PO,BO,LO,VO,GO,UO,WO,qO,HO,XO,YO,ZO,QO,eF,JO,tF,rF,nF,oF,iF,sF,lF,uF,pF,xF,fF,mF,dF,gF,yF,bF,vF,wF,CF,NF,_F,P$,SF,FO,TF,IF,kF,U$,EF,AF,DF,$F,RF,OF,FF,MF,BF,GF,VF,WF,qF,KF,UF,XF,YF,ZF,JF,QF,oM,H$,sM,aM,lM,uM,TO,cM,fM,mM,hM,dM,V$,gM,yM,IO,eM,bM,wM,vM,j$,CM,NM,_M,SM,TM,IM,kM,EM,AM,DM,RM,$M,OM,FM,MM,NO,nM,zM,LM,PM,BM,UM,VM,WM,qM,HM,rM,Y$,KM,jM,XM,YM,Z$,ZM,JM,QM,pM];for(let r of Rie)Hc(r);p();var ez="3.1.0";var $ie={"tfjs-core":Id,"tfjs-backend-cpu":E7,"tfjs-backend-webgl":m8,"tfjs-data":y3,"tfjs-layers":nl,"tfjs-converter":p3,tfjs:ez};p();p();function lc(){return lc=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lc.apply(this,arguments)}p();var P9={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};p();p();p();function Tr(r){return typeof r=="number"}function Xr(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function kx(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Ex(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function Nh(r){return r&&r.constructor.prototype.isUnit===!0||!1}function ko(r){return typeof r=="string"}var mr=Array.isArray;function er(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function n4(r){return Array.isArray(r)||er(r)}function o4(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function i4(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function _h(r){return r&&r.constructor.prototype.isRange===!0||!1}function uc(r){return r&&r.constructor.prototype.isIndex===!0||!1}function tz(r){return typeof r=="boolean"}function B9(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function U9(r){return r&&r.constructor.prototype.isHelp===!0||!1}function rz(r){return typeof r=="function"}function nz(r){return r instanceof Date}function oz(r){return r instanceof RegExp}function iz(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!kx(r)&&!Ex(r))}function sz(r){return r===null}function az(r){return r===void 0}function lz(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function uz(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function cz(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function pz(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function xz(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function fz(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function mz(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function hz(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function dz(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function V9(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function gz(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function yz(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function bz(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function vz(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function wz(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function G9(r){return r&&r.constructor.prototype.isChain===!0||!1}function eo(r){var e=typeof r;return e==="object"?r===null?"null":Array.isArray(r)?"Array":r instanceof Date?"Date":r instanceof RegExp?"RegExp":Xr(r)?"BigNumber":kx(r)?"Complex":Ex(r)?"Fraction":er(r)?"Matrix":Nh(r)?"Unit":uc(r)?"Index":_h(r)?"Range":B9(r)?"ResultSet":V9(r)?r.type:G9(r)?"Chain":U9(r)?"Help":"Object":e==="function"?"Function":e}function St(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return St(t)});if(r instanceof Date)return new Date(r.valueOf());if(Xr(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return Oie(r,St)}function Oie(r,e){var t={};for(var n in r)Rx(r,n)&&(t[n]=e(r[n]));return t}function Dx(r,e){for(var t in e)Rx(e,t)&&(r[t]=e[t]);return r}function Ax(r,e){var t,n,o;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,o=r.length;n<o;n++)if(!Ax(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Ax(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Rx(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Cz(r,e){for(var t={},n=0;n<e.length;n++){var o=e[n],i=r[o];i!==void 0&&(t[o]=i)}return t}var Nz=["Matrix","Array"],_z=["number","BigNumber","Fraction"];var Eo=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(P9)};lc(Eo,P9,{MATRIX_OPTIONS:Nz,NUMBER_OPTIONS:_z});p();p();p();var Q9=Ho(Tz(),1);p();function Ot(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var Iz=Math.sign||function(r){return r>0?1:r<0?-1:0},kz=Math.log2||function(e){return Math.log(e)/Math.LN2},Ez=Math.log10||function(e){return Math.log(e)/Math.LN10},Az=Math.log1p||function(r){return Math.log(r+1)},Dz=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Rz=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function q9(r,e,t){var n={2:"0b",8:"0o",16:"0x"},o=n[e],i="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ot(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Ot(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),i="i".concat(t)}var s="";return r<0&&(r=-r,s="-"),"".concat(s).concat(o).concat(r.toString(e)).concat(i)}function Sh(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var t="auto",n,o;if(e&&(e.notation&&(t=e.notation),Tr(e)?n=e:Tr(e.precision)&&(n=e.precision),e.wordSize&&(o=e.wordSize,typeof o!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return H9(r,n);case"exponential":return $z(r,n);case"engineering":return Fie(r,n);case"bin":return q9(r,2,o);case"oct":return q9(r,8,o);case"hex":return q9(r,16,o);case"auto":return Mie(r,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function s4(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],o=parseFloat(e[4]||"0"),i=n.indexOf(".");o+=i!==-1?i-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(a){return o-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return s.length===0&&(s.push(0),o++),{sign:t,coefficients:s,exponent:o}}function Fie(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=s4(r),n=a4(t,e),o=n.exponent,i=n.coefficients,s=o%3===0?o:o<0?o-3-o%3:o-o%3;if(Tr(e))for(;e>i.length||o-s+1>i.length;)i.push(0);else for(var a=Math.abs(o-s)-(i.length-1),l=0;l<a;l++)i.push(0);for(var u=Math.abs(o-s),c=1;u>0;)c++,u--;var x=i.slice(c).join(""),f=Tr(e)&&x.length||x.match(/[1-9]/)?"."+x:"",h=i.slice(0,c).join("")+f+"e"+(o>=0?"+":"")+s.toString();return n.sign+h}function H9(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=s4(r),n=typeof e=="number"?a4(t,t.exponent+1+e):t,o=n.coefficients,i=n.exponent+1,s=i+(e||0);return o.length<s&&(o=o.concat($x(s-o.length))),i<0&&(o=$x(-i+1).concat(o),i=1),i<o.length&&o.splice(i,0,i===0?"0.":"."),n.sign+o.join("")}function $z(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=s4(r),n=e?a4(t,e):t,o=n.coefficients,i=n.exponent;o.length<e&&(o=o.concat($x(e-o.length)));var s=o.shift();return n.sign+s+(o.length>0?"."+o.join(""):"")+"e"+(i>=0?"+":"")+i}function Mie(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=t&&t.lowerExp!==void 0?t.lowerExp:-3,o=t&&t.upperExp!==void 0?t.upperExp:5,i=s4(r),s=e?a4(i,e):i;if(s.exponent<n||s.exponent>=o)return $z(r,e);var a=s.coefficients,l=s.exponent;a.length<e&&(a=a.concat($x(e-a.length))),a=a.concat($x(l-a.length+1+(a.length<e?e-a.length:0))),a=$x(-l).concat(a);var u=l>0?l:0;return u<a.length-1&&a.splice(u+1,0,"."),s.sign+a.join("")}function a4(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var o=n.splice(e,n.length-e);if(o[0]>=5){var i=e-1;for(n[i]++;n[i]===10;)n.pop(),i===0&&(n.unshift(0),t.exponent++,i++),i--,n[i]++}}return t}function $x(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Oz(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var zie=Number.EPSILON||2220446049250313e-31;function Vo(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<zie?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}p();p();p();p();function K9(r,e,t){var n=r.constructor,o=new n(2),i="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Ot(t))throw new Error("size must be an integer");if(r.greaterThan(o.pow(t-1).sub(1))||r.lessThan(o.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(o.pow(t))),i="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(i);case 8:return"".concat(r.toOctal()).concat(i);case 16:return"".concat(r.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function Mz(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var t="auto",n,o;if(e!==void 0&&(e.notation&&(t=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(o=e.wordSize,typeof o!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return Pie(r,n);case"exponential":return Fz(r,n);case"engineering":return Lie(r,n);case"bin":return K9(r,2,o);case"oct":return K9(r,8,o);case"hex":return K9(r,16,o);case"auto":{var i=e&&e.lowerExp!==void 0?e.lowerExp:-3,s=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var a,l=r.toSignificantDigits(n),u=l.e;return u>=i&&u<s?a=l.toFixed():a=Fz(r,n),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],x=arguments[4];return c!=="."?c+x:x})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Lie(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,o=r.mul(Math.pow(10,-n)),i=o.toPrecision(e);return i.indexOf("e")!==-1&&(i=o.toString()),i+"e"+(t>=0?"+":"")+n.toString()}function Fz(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function Pie(r,e){return r.toFixed(e)}function pr(r,e){if(typeof r=="number")return Sh(r,e);if(Xr(r))return Mz(r,e);if(Bie(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return zz(r,e);if(ko(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>'"'+n+'": '+pr(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function zz(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,o=0;o<n;o++)o!==0&&(t+=", "),t+=zz(r[o],e);return t+="]",t}else return pr(r,e)}function Bie(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}p();function Gt(r,e,t){if(!(this instanceof Gt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Gt.prototype=new RangeError;Gt.prototype.constructor=RangeError;Gt.prototype.name="DimensionError";Gt.prototype.isDimensionError=!0;p();function cc(r,e,t){if(!(this instanceof cc))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}cc.prototype=new RangeError;cc.prototype.constructor=RangeError;cc.prototype.name="IndexError";cc.prototype.isIndexError=!0;function Ir(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function Lz(r,e,t){var n,o=r.length;if(o!==e[t])throw new Gt(o,e[t]);if(t<e.length-1){var i=t+1;for(n=0;n<o;n++){var s=r[n];if(!Array.isArray(s))throw new Gt(e.length-1,e.length,"<");Lz(r[n],e,i)}}else for(n=0;n<o;n++)if(Array.isArray(r[n]))throw new Gt(e.length+1,e.length,">")}function X9(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Gt(r.length,0)}else Lz(r,e,0)}function Lr(r,e){if(!Tr(r)||!Ot(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new cc(r,e)}function pc(r,e,t){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(o){if(!Tr(o)||!Ot(o)||o<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pr(e)+")")});var n=t!==void 0?t:0;return j9(r,e,0,n),r}function j9(r,e,t,n){var o,i,s=r.length,a=e[t],l=Math.min(s,a);if(r.length=a,t<e.length-1){var u=t+1;for(o=0;o<l;o++)i=r[o],Array.isArray(i)||(i=[i],r[o]=i),j9(i,e,u,n);for(o=l;o<a;o++)i=[],r[o]=i,j9(i,e,u,n)}else{for(o=0;o<l;o++)for(;Array.isArray(r[o]);)r[o]=r[o][0];for(o=l;o<a;o++)r[o]=n}}function Pz(r,e){var t=u4(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Gt(0,n,"!=");e=Th(e,n);var o=Bz(e);if(n!==o)throw new Gt(o,n,"!=");try{return Uie(t,e)}catch(i){throw i instanceof Gt?new Gt(o,n,"!="):i}}function Th(r,e){var t=Bz(r),n=r.slice(),o=-1,i=r.indexOf(o),s=r.indexOf(o,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var a=i>=0,l=e%t===0;if(a)if(l)n[i]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function Bz(r){return r.reduce((e,t)=>e*t,1)}function Uie(r,e){for(var t=r,n,o=e.length-1;o>0;o--){var i=e[o];n=[];for(var s=t.length/i,a=0;a<s;a++)n.push(t.slice(a*i,(a+1)*i));t=n}return t}function Y9(r,e){for(var t=e||Ir(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=Uz(r,n,0),t.length=n),r}function Uz(r,e,t){var n,o;if(t<e){var i=t+1;for(n=0,o=r.length;n<o;n++)r[n]=Uz(r[n],e,i)}else for(;Array.isArray(r);)r=r[0];return r}function l4(r,e,t,n){var o=n||Ir(r);if(t)for(var i=0;i<t;i++)r=[r],o.unshift(1);for(r=Vz(r,e,0);o.length<e;)o.push(1);return r}function Vz(r,e,t){var n,o;if(Array.isArray(r)){var i=t+1;for(n=0,o=r.length;n<o;n++)r[n]=Vz(r[n],e,i)}else for(var s=t;s<e;s++)r=[r];return r}function u4(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function Ox(r,e){for(var t,n=0,o=0;o<r.length;o++){var i=r[o],s=Array.isArray(i);if(o===0&&s&&(n=i.length),s&&i.length!==n)return;var a=s?Ox(i,e):e(i);if(t===void 0)t=a;else if(t!==a)return"mixed"}return t}function Ee(r,e,t,n){function o(i){var s=Cz(i,e.map(Wie));return Vie(r,e,i),t(s)}return o.isFactory=!0,o.fn=r,o.dependencies=e.slice().sort(),n&&(o.meta=n),o}function Vie(r,e,t){var n=e.filter(i=>!Gie(i)).every(i=>t[i]!==void 0);if(!n){var o=e.filter(i=>t[i]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(o.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function Gie(r){return r&&r[0]==="?"}function Wie(r){return r&&r[0]==="?"?r.slice(1):r}p();p();function Gz(r,e){if(Kz(r)&&Hz(r,e))return r[e];throw typeof r[e]=="function"&&qie(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Wz(r,e,t){if(Kz(r)&&Hz(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function qz(r,e){return e in r}function Hz(r,e){return!r||typeof r!="object"?!1:Rx(Hie,e)?!0:!(e in Object.prototype||e in Function.prototype)}function qie(r,e){return r==null||typeof r[e]!="function"||Rx(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Rx(Kie,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Kz(r){return typeof r=="object"&&r&&r.constructor===Object}var Hie={length:!0,name:!0},Kie={toString:!0,valueOf:!0,toLocaleString:!0};var jz=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Gz(this.wrappedObject,e)}set(e,t){return Wz(this.wrappedObject,e,t),this}has(e){return qz(this.wrappedObject,e)}};function Xz(r){return r?r instanceof Map||r instanceof jz||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var Yz=function(){return Yz=Q9.default.create,Q9.default},jie=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ey=Ee("typed",jie,function(e){var{BigNumber:t,Complex:n,DenseMatrix:o,Fraction:i}=e,s=Yz();return s.types=[{name:"number",test:Tr},{name:"Complex",test:kx},{name:"BigNumber",test:Xr},{name:"Fraction",test:Ex},{name:"Unit",test:Nh},{name:"string",test:ko},{name:"Chain",test:G9},{name:"Array",test:mr},{name:"Matrix",test:er},{name:"DenseMatrix",test:o4},{name:"SparseMatrix",test:i4},{name:"Range",test:_h},{name:"Index",test:uc},{name:"boolean",test:tz},{name:"ResultSet",test:B9},{name:"Help",test:U9},{name:"function",test:rz},{name:"Date",test:nz},{name:"RegExp",test:oz},{name:"null",test:sz},{name:"undefined",test:az},{name:"AccessorNode",test:lz},{name:"ArrayNode",test:uz},{name:"AssignmentNode",test:cz},{name:"BlockNode",test:pz},{name:"ConditionalNode",test:xz},{name:"ConstantNode",test:fz},{name:"FunctionNode",test:hz},{name:"FunctionAssignmentNode",test:mz},{name:"IndexNode",test:dz},{name:"Node",test:V9},{name:"ObjectNode",test:gz},{name:"OperatorNode",test:yz},{name:"ParenthesisNode",test:bz},{name:"RangeNode",test:vz},{name:"SymbolNode",test:wz},{name:"Map",test:Xz},{name:"Object",test:iz}],s.conversions=[{from:"number",to:"BigNumber",convert:function(l){if(t||Z9(l),Oz(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||c4(l),new n(l,0)}},{from:"number",to:"string",convert:function(l){return l+""}},{from:"BigNumber",to:"Complex",convert:function(l){return n||c4(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||c4(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){i||J9(l);var u=new i(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||Z9(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){i||J9(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||c4(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||Z9(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return i||J9(l),new i(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return o||Xie(),new o(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}],s});function Z9(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function c4(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Xie(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function J9(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}p();var ty=Ho(Jz(),1);var Yie="BigNumber",Zie=["?on","config"],ry=Ee(Yie,Zie,r=>{var{on:e,config:t}=r,n=ty.default.clone({precision:t.precision,modulo:ty.default.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(o){return new n(o.value)},e&&e("config",function(o,i){o.precision!==i.precision&&n.config({precision:o.precision})}),n},{isClass:!0});p();var Ao=Ho(eL(),1);var Jie="Complex",Qie=[],oy=Ee(Jie,Qie,()=>(Ao.default.prototype.type="Complex",Ao.default.prototype.isComplex=!0,Ao.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ao.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ao.default.prototype.format=function(r){var e="",t=this.im,n=this.re,o=Sh(this.re,r),i=Sh(this.im,r),s=Tr(r)?r:r?r.precision:null;if(s!==null){var a=Math.pow(10,-s);Math.abs(n/t)<a&&(n=0),Math.abs(t/n)<a&&(t=0)}return t===0?e=o:n===0?t===1?e="i":t===-1?e="-i":e=i+"i":t<0?t===-1?e=o+" - i":e=o+" - "+i.substring(1)+"i":t===1?e=o+" + i":e=o+" + "+i+"i",e},Ao.default.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,Ao.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(Tr(t)){if(Nh(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Tr(n))return new Ao.default({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ao.default.prototype.valueOf=Ao.default.prototype.toString,Ao.default.fromJSON=function(r){return new Ao.default(r)},Ao.default.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Ao.default),{isClass:!0});p();var xc=Ho(rL(),1);var ese="Fraction",tse=[],sy=Ee(ese,tse,()=>(xc.default.prototype.type="Fraction",xc.default.prototype.isFraction=!0,xc.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},xc.default.fromJSON=function(r){return new xc.default(r)},xc.default),{isClass:!0});p();var rse="Matrix",nse=[],ay=Ee(rse,nse,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});p();var ose="DenseMatrix",ise=["Matrix"],ly=Ee(ose,ise,r=>{var{Matrix:e}=r;function t(c,x){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(x&&!ko(x))throw new Error("Invalid datatype: "+x);if(er(c))c.type==="DenseMatrix"?(this._data=St(c._data),this._size=St(c._size),this._datatype=x||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=x||c._datatype);else if(c&&mr(c.data)&&mr(c.size))this._data=c.data,this._size=c.size,X9(this._data,this._size),this._datatype=x||c.datatype;else if(mr(c))this._data=u(c),this._size=Ir(this._data),X9(this._data,this._size),this._datatype=x;else{if(c)throw new TypeError("Unsupported type of data ("+eo(c)+")");this._data=[],this._size=[0],this._datatype=x}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,x){return new t(c,x)},t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Ox(this._data,eo)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,x){return new t(c,x)},t.prototype.subset=function(c,x,f){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return i(this,c,x,f);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!mr(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Gt(c.length,this._size.length);for(var x=0;x<c.length;x++)Lr(c[x],this._size[x]);for(var f=this._data,h=0,g=c.length;h<g;h++){var m=c[h];Lr(m,f.length),f=f[m]}return f},t.prototype.set=function(c,x,f){if(!mr(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Gt(c.length,this._size.length,"<");var h,g,m,b=c.map(function(w){return w+1});l(this,b,f);var v=this._data;for(h=0,g=c.length-1;h<g;h++)m=c[h],Lr(m,v.length),v=v[m];return m=c[c.length-1],Lr(m,v.length),v[m]=x,this};function n(c,x){if(!uc(x))throw new TypeError("Invalid index");var f=x.isScalar();if(f)return c.get(x.min());var h=x.size();if(h.length!==c._size.length)throw new Gt(h.length,c._size.length);for(var g=x.min(),m=x.max(),b=0,v=c._size.length;b<v;b++)Lr(g[b],c._size[b]),Lr(m[b],c._size[b]);return new t(o(c._data,x,h.length,0),c._datatype)}function o(c,x,f,h){var g=h===f-1,m=x.dimension(h);return g?m.map(function(b){return Lr(b,c.length),c[b]}).valueOf():m.map(function(b){Lr(b,c.length);var v=c[b];return o(v,x,f,h+1)}).valueOf()}function i(c,x,f,h){if(!x||x.isIndex!==!0)throw new TypeError("Invalid index");var g=x.size(),m=x.isScalar(),b;if(er(f)?(b=f.size(),f=f.valueOf()):b=Ir(f),m){if(b.length!==0)throw new TypeError("Scalar expected");c.set(x.min(),f,h)}else{if(g.length<c._size.length)throw new Gt(g.length,c._size.length,"<");if(b.length<g.length){for(var v=0,w=0;g[v]===1&&b[v]===1;)v++;for(;g[v]===1;)w++,v++;f=l4(f,g.length,w,b)}if(!Ax(g,b))throw new Gt(g,b,">");var C=x.max().map(function(E){return E+1});l(c,C,h);var N=g.length,_=0;s(c._data,x,f,N,_)}return c}function s(c,x,f,h,g){var m=g===h-1,b=x.dimension(g);m?b.forEach(function(v,w){Lr(v),c[v]=f[w[0]]}):b.forEach(function(v,w){Lr(v),s(c[v],x,f[w[0]],h,g+1)})}t.prototype.resize=function(c,x,f){if(!n4(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),g=f?this.clone():this;return a(g,h,x)};function a(c,x,f){if(x.length===0){for(var h=c._data;mr(h);)h=h[0];return h}return c._size=x.slice(0),c._data=pc(c._data,c._size,f),c}t.prototype.reshape=function(c,x){var f=x?this.clone():this;f._data=Pz(f._data,c);var h=f._size.reduce((g,m)=>g*m);return f._size=Th(c,h),f};function l(c,x,f){for(var h=c._size.slice(0),g=!1;h.length<x.length;)h.push(0),g=!0;for(var m=0,b=x.length;m<b;m++)x[m]>h[m]&&(h[m]=x[m],g=!0);g&&a(c,h,f)}t.prototype.clone=function(){var c=new t({data:St(this._data),size:St(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var x=this,f=function m(b,v){return mr(b)?b.map(function(w,C){return m(w,v.concat(C))}):c(b,v,x)},h=f(this._data,[]),g=this._datatype!==void 0?Ox(h,eo):void 0;return new t(h,g)},t.prototype.forEach=function(c){var x=this,f=function h(g,m){mr(g)?g.forEach(function(b,v){h(b,m.concat(v))}):c(g,m,x)};f(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*x(f,h){if(mr(f))for(var g=0;g<f.length;g++)yield*x(f[g],h.concat(g));else yield{value:f,index:h}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],x=this.size();if(x.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var h of f)c.push(new t([h],this._datatype));return c},t.prototype.columns=function(){var c=this,x=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,g=function(v){var w=h.map(C=>[C[v]]);x.push(new t(w,c._datatype))},m=0;m<f[1];m++)g(m);return x},t.prototype.toArray=function(){return St(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return pr(this._data,c)},t.prototype.toString=function(){return pr(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Xr(c)&&(c=c.toNumber()),!Tr(c)||!Ot(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var x=c>0?c:0,f=c<0?-c:0,h=this._size[0],g=this._size[1],m=Math.min(h-f,g-x),b=[],v=0;v<m;v++)b[v]=this._data[v+f][v+x];return new t({data:b,size:[m],datatype:this._datatype})},t.diagonal=function(c,x,f,h){if(!mr(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Xr(T)&&(T=T.toNumber()),!Tr(T)||!Ot(T)||T<1)throw new Error("Size values must be positive integers");return T}),f){if(Xr(f)&&(f=f.toNumber()),!Tr(f)||!Ot(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var g=f>0?f:0,m=f<0?-f:0,b=c[0],v=c[1],w=Math.min(b-m,v-g),C;if(mr(x)){if(x.length!==w)throw new Error("Invalid value array length");C=function(k){return x[k]}}else if(er(x)){var N=x.size();if(N.length!==1||N[0]!==w)throw new Error("Invalid matrix length");C=function(k){return x.get([k])}}else C=function(){return x};h||(h=Xr(C(0))?C(0).mul(0):0);var _=[];if(c.length>0){_=pc(_,c,h);for(var E=0;E<w;E++)_[E+m][E+g]=C(E)}return new t({data:_,size:[b,v]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,x){if(!Tr(c)||!Ot(c)||!Tr(x)||!Ot(x))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Lr(c,this._size[0]),Lr(x,this._size[0]),t._swapRows(c,x,this._data),this},t._swapRows=function(c,x,f){var h=f[c];f[c]=f[x],f[x]=h};function u(c){for(var x=0,f=c.length;x<f;x++){var h=c[x];mr(h)?c[x]=u(h):h&&h.isMatrix===!0&&(c[x]=u(h.valueOf()))}return c}return t},{isClass:!0});p();function vr(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return vr(n,e,t)}):e(r)}p();var Vn="number",ls="number, number";function uy(r){return Math.abs(r)}uy.signature=Vn;function cy(r,e){return r+e}cy.signature=ls;function sse(r,e){return r-e}sse.signature=ls;function py(r,e){return r*e}py.signature=ls;function ase(r,e){return r/e}ase.signature=ls;function xy(r){return-r}xy.signature=Vn;function lse(r){return r}lse.signature=Vn;function use(r){return Dz(r)}use.signature=Vn;function cse(r){return Math.ceil(r)}cse.signature=Vn;function pse(r){return r*r*r}pse.signature=Vn;function xse(r){return Math.exp(r)}xse.signature=Vn;function fse(r){return Rz(r)}fse.signature=Vn;function mse(r){return r>0?Math.floor(r):Math.ceil(r)}mse.signature=Vn;function hse(r){return Math.floor(r)}hse.signature=Vn;function dse(r,e){if(!Ot(r)||!Ot(e))throw new Error("Parameters in function gcd must be integer numbers");for(var t;e!==0;)t=r%e,r=e,e=t;return r<0?-r:r}dse.signature=ls;function gse(r,e){if(!Ot(r)||!Ot(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}gse.signature=ls;function yse(r){return Math.log(r)}yse.signature=Vn;function bse(r){return Ez(r)}bse.signature=Vn;function vse(r){return kz(r)}vse.signature=Vn;function wse(r){return Az(r)}wse.signature=Vn;function Cse(r,e){if(e>0)return r-e*Math.floor(r/e);if(e===0)return r;throw new Error("Cannot calculate mod for a negative divisor")}Cse.signature=ls;function Nse(r,e){var t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}Nse.signature=ls;function x4(r){return Iz(r)}x4.signature=Vn;function _se(r){return Math.sqrt(r)}_se.signature=Vn;function Sse(r){return r*r}Sse.signature=Vn;function Tse(r,e){var t,n,o,i=0,s=1,a=1,l=0;if(!Ot(r)||!Ot(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),o=r-n*e,t=i,i=s-n*i,s=t,t=a,a=l-n*a,l=t,r=e,e=o;var u;return r<0?u=[-r,-s,-l]:u=[r,r?s:0,l],u}Tse.signature=ls;function fy(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}fy.signature=ls;function Ise(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return parseFloat(H9(r,e))}Ise.signature=ls;function kse(r){return Math.abs(r)}kse.signature=Vn;p();var Ih="number";function Ese(r){return Ot(r)}Ese.signature=Ih;function Ase(r){return r<0}Ase.signature=Ih;function Dse(r){return r>0}Dse.signature=Ih;function my(r){return r===0}my.signature=Ih;function Rse(r){return Number.isNaN(r)}Rse.signature=Ih;p();var nL="isZero",$se=["typed"],hy=Ee(nL,$se,r=>{var{typed:e}=r;return e(nL,{number:my,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:function(n){return this(n.value)},"Array | Matrix":function(n){return vr(n,this)}})});p();p();function Oa(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var o=r.constructor.max(r.abs(),e.abs());return n.lte(o.times(t))}return!1}p();function oL(r,e,t){return Vo(r.re,e.re,t)&&Vo(r.im,e.im,t)}var f4="equalScalar",Ose=["typed","config"],dy=Ee(f4,Ose,r=>{var{typed:e,config:t}=r;return e(f4,{"boolean, boolean":function(o,i){return o===i},"number, number":function(o,i){return Vo(o,i,t.epsilon)},"BigNumber, BigNumber":function(o,i){return o.eq(i)||Oa(o,i,t.epsilon)},"Fraction, Fraction":function(o,i){return o.equals(i)},"Complex, Complex":function(o,i){return oL(o,i,t.epsilon)},"Unit, Unit":function(o,i){if(!o.equalBase(i))throw new Error("Cannot compare units with different base");return this(o.value,i.value)}})}),$Ot=Ee(f4,["typed","config"],r=>{var{typed:e,config:t}=r;return e(f4,{"number, number":function(o,i){return Vo(o,i,t.epsilon)}})});p();var Fse="SparseMatrix",Mse=["typed","equalScalar","Matrix"],gy=Ee(Fse,Mse,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function o(m,b){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!ko(b))throw new Error("Invalid datatype: "+b);if(er(m))i(this,m,b);else if(m&&mr(m.index)&&mr(m.ptr)&&mr(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=b||m.datatype;else if(mr(m))s(this,m,b);else{if(m)throw new TypeError("Unsupported type of data ("+eo(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function i(m,b,v){b.type==="SparseMatrix"?(m._values=b._values?St(b._values):void 0,m._index=St(b._index),m._ptr=St(b._ptr),m._size=St(b._size),m._datatype=v||b._datatype):s(m,b.valueOf(),v||b._datatype)}function s(m,b,v){m._values=[],m._index=[],m._ptr=[],m._datatype=v;var w=b.length,C=0,N=t,_=0;if(ko(v)&&(N=e.find(t,[v,v])||t,_=e.convert(0,v)),w>0){var E=0;do{m._ptr.push(m._index.length);for(var T=0;T<w;T++){var k=b[T];if(mr(k)){if(E===0&&C<k.length&&(C=k.length),E<k.length){var D=k[E];N(D,_)||(m._values.push(D),m._index.push(T))}}else E===0&&C<1&&(C=1),N(k,_)||(m._values.push(k),m._index.push(T))}E++}while(E<C)}m._ptr.push(m._index.length),m._size=[w,C]}o.prototype=new n,o.prototype.createSparseMatrix=function(m,b){return new o(m,b)},o.prototype.type="SparseMatrix",o.prototype.isSparseMatrix=!0,o.prototype.getDataType=function(){return Ox(this._values,eo)},o.prototype.storage=function(){return"sparse"},o.prototype.datatype=function(){return this._datatype},o.prototype.create=function(m,b){return new o(m,b)},o.prototype.density=function(){var m=this._size[0],b=this._size[1];return m!==0&&b!==0?this._index.length/(m*b):0},o.prototype.subset=function(m,b,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return l(this,m,b,v);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,b){if(!uc(b))throw new TypeError("Invalid index");var v=b.isScalar();if(v)return m.get(b.min());var w=b.size();if(w.length!==m._size.length)throw new Gt(w.length,m._size.length);var C,N,_,E,T=b.min(),k=b.max();for(C=0,N=m._size.length;C<N;C++)Lr(T[C],m._size[C]),Lr(k[C],m._size[C]);var D=m._values,R=m._index,K=m._ptr,M=b.dimension(0),j=b.dimension(1),X=[],Z=[];M.forEach(function(J,te){Z[J]=te[0],X[J]=!0});var Y=D?[]:void 0,ce=[],Q=[];return j.forEach(function(J){for(Q.push(ce.length),_=K[J],E=K[J+1];_<E;_++)C=R[_],X[C]===!0&&(ce.push(Z[C]),Y&&Y.push(D[_]))}),Q.push(ce.length),new o({values:Y,index:ce,ptr:Q,size:w,datatype:m._datatype})}function l(m,b,v,w){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var C=b.size(),N=b.isScalar(),_;if(er(v)?(_=v.size(),v=v.toArray()):_=Ir(v),N){if(_.length!==0)throw new TypeError("Scalar expected");m.set(b.min(),v,w)}else{if(C.length!==1&&C.length!==2)throw new Gt(C.length,m._size.length,"<");if(_.length<C.length){for(var E=0,T=0;C[E]===1&&_[E]===1;)E++;for(;C[E]===1;)T++,E++;v=l4(v,C.length,T,_)}if(!Ax(C,_))throw new Gt(C,_,">");if(C.length===1){var k=b.dimension(0);k.forEach(function(K,M){Lr(K),m.set([K,0],v[M[0]],w)})}else{var D=b.dimension(0),R=b.dimension(1);D.forEach(function(K,M){Lr(K),R.forEach(function(j,X){Lr(j),m.set([K,j],v[M[0]][X[0]],w)})})}}return m}o.prototype.get=function(m){if(!mr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Gt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=m[0],v=m[1];Lr(b,this._size[0]),Lr(v,this._size[1]);var w=u(b,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===b?this._values[w]:0},o.prototype.set=function(m,b,v){if(!mr(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Gt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=m[0],C=m[1],N=this._size[0],_=this._size[1],E=t,T=0;ko(this._datatype)&&(E=e.find(t,[this._datatype,this._datatype])||t,T=e.convert(0,this._datatype)),(w>N-1||C>_-1)&&(f(this,Math.max(w+1,N),Math.max(C+1,_),v),N=this._size[0],_=this._size[1]),Lr(w,N),Lr(C,_);var k=u(w,this._ptr[C],this._ptr[C+1],this._index);return k<this._ptr[C+1]&&this._index[k]===w?E(b,T)?c(k,C,this._values,this._index,this._ptr):this._values[k]=b:x(k,w,C,b,this._values,this._index,this._ptr),this};function u(m,b,v,w){if(v-b===0)return v;for(var C=b;C<v;C++)if(w[C]===m)return C;return b}function c(m,b,v,w,C){v.splice(m,1),w.splice(m,1);for(var N=b+1;N<C.length;N++)C[N]--}function x(m,b,v,w,C,N,_){C.splice(m,0,w),N.splice(m,0,b);for(var E=v+1;E<_.length;E++)_[E]++}o.prototype.resize=function(m,b,v){if(!n4(m))throw new TypeError("Array or Matrix expected");var w=m.valueOf().map(N=>Array.isArray(N)&&N.length===1?N[0]:N);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(N){if(!Tr(N)||!Ot(N)||N<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pr(w)+")")});var C=v?this.clone():this;return f(C,w[0],w[1],b)};function f(m,b,v,w){var C=w||0,N=t,_=0;ko(m._datatype)&&(N=e.find(t,[m._datatype,m._datatype])||t,_=e.convert(0,m._datatype),C=e.convert(C,m._datatype));var E=!N(C,_),T=m._size[0],k=m._size[1],D,R,K;if(v>k){for(R=k;R<v;R++)if(m._ptr[R]=m._values.length,E)for(D=0;D<T;D++)m._values.push(C),m._index.push(D);m._ptr[v]=m._values.length}else v<k&&(m._ptr.splice(v+1,k-v),m._values.splice(m._ptr[v],m._values.length),m._index.splice(m._ptr[v],m._index.length));if(k=v,b>T){if(E){var M=0;for(R=0;R<k;R++){m._ptr[R]=m._ptr[R]+M,K=m._ptr[R+1]+M;var j=0;for(D=T;D<b;D++,j++)m._values.splice(K+j,0,C),m._index.splice(K+j,0,D),M++}m._ptr[k]=m._values.length}}else if(b<T){var X=0;for(R=0;R<k;R++){m._ptr[R]=m._ptr[R]-X;var Z=m._ptr[R],Y=m._ptr[R+1]-X;for(K=Z;K<Y;K++)D=m._index[K],D>b-1&&(m._values.splice(K,1),m._index.splice(K,1),X++)}m._ptr[R]=m._values.length}return m._size[0]=b,m._size[1]=v,m}o.prototype.reshape=function(m,b){if(!mr(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(J){if(!Tr(J)||!Ot(J)||J<=-2||J===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+pr(m)+")")});var v=this._size[0]*this._size[1];m=Th(m,v);var w=m[0]*m[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var C=b?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return C;for(var N=[],_=0;_<C._ptr.length;_++)for(var E=0;E<C._ptr[_+1]-C._ptr[_];E++)N.push(_);for(var T=C._values.slice(),k=C._index.slice(),D=0;D<C._index.length;D++){var R=k[D],K=N[D],M=R*C._size[1]+K;N[D]=M%m[1],k[D]=Math.floor(M/m[1])}C._values.length=0,C._index.length=0,C._ptr.length=m[1]+1,C._size=m.slice();for(var j=0;j<C._ptr.length;j++)C._ptr[j]=0;for(var X=0;X<T.length;X++){var Z=k[X],Y=N[X],ce=T[X],Q=u(Z,C._ptr[Y],C._ptr[Y+1],C._index);x(Q,Z,Y,ce,C._values,C._index,C._ptr)}return C},o.prototype.clone=function(){var m=new o({values:this._values?St(this._values):void 0,index:St(this._index),ptr:St(this._ptr),size:St(this._size),datatype:this._datatype});return m},o.prototype.size=function(){return this._size.slice(0)},o.prototype.map=function(m,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],C=this._size[1],N=function(E,T,k){return m(E,[T,k],v)};return h(this,0,w-1,0,C-1,N,b)};function h(m,b,v,w,C,N,_){var E=[],T=[],k=[],D=t,R=0;ko(m._datatype)&&(D=e.find(t,[m._datatype,m._datatype])||t,R=e.convert(0,m._datatype));for(var K=function(le,xe,me){le=N(le,xe,me),D(le,R)||(E.push(le),T.push(xe))},M=w;M<=C;M++){k.push(E.length);var j=m._ptr[M],X=m._ptr[M+1];if(_)for(var Z=j;Z<X;Z++){var Y=m._index[Z];Y>=b&&Y<=v&&K(m._values[Z],Y-b,M-w)}else{for(var ce={},Q=j;Q<X;Q++){var J=m._index[Q];ce[J]=m._values[Q]}for(var te=b;te<=v;te++){var ae=te in ce?ce[te]:0;K(ae,te-b,M-w)}}}return k.push(E.length),new o({values:E,index:T,ptr:k,size:[v-b+1,C-w+1]})}o.prototype.forEach=function(m,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],C=this._size[1],N=0;N<C;N++){var _=this._ptr[N],E=this._ptr[N+1];if(b)for(var T=_;T<E;T++){var k=this._index[T];m(this._values[T],[k,N],v)}else{for(var D={},R=_;R<E;R++){var K=this._index[R];D[K]=this._values[R]}for(var M=0;M<w;M++){var j=M in D?D[M]:0;m(j,[M,N],v)}}}},o.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],b=0;b<m;b++)for(var v=this._ptr[b],w=this._ptr[b+1],C=v;C<w;C++){var N=this._index[C];yield{value:this._values[C],index:[N,b]}}},o.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},o.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)};function g(m,b,v,w,C){var N=w[0],_=w[1],E=[],T,k;for(T=0;T<N;T++)for(E[T]=[],k=0;k<_;k++)E[T][k]=0;for(k=0;k<_;k++)for(var D=v[k],R=v[k+1],K=D;K<R;K++)T=b[K],E[T][k]=m?C?St(m[K]):m[K]:1;return E}return o.prototype.format=function(m){for(var b=this._size[0],v=this._size[1],w=this.density(),C="Sparse Matrix ["+pr(b,m)+" x "+pr(v,m)+"] density: "+pr(w,m)+`
`,N=0;N<v;N++)for(var _=this._ptr[N],E=this._ptr[N+1],T=_;T<E;T++){var k=this._index[T];C+=`
    (`+pr(k,m)+", "+pr(N,m)+") ==> "+(this._values?pr(this._values[T],m):"X")}return C},o.prototype.toString=function(){return pr(this.toArray())},o.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},o.prototype.diagonal=function(m){if(m){if(Xr(m)&&(m=m.toNumber()),!Tr(m)||!Ot(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var b=m>0?m:0,v=m<0?-m:0,w=this._size[0],C=this._size[1],N=Math.min(w-v,C-b),_=[],E=[],T=[];T[0]=0;for(var k=b;k<C&&_.length<N;k++)for(var D=this._ptr[k],R=this._ptr[k+1],K=D;K<R;K++){var M=this._index[K];if(M===k-b+v){_.push(this._values[K]),E[_.length-1]=M-v;break}}return T.push(_.length),new o({values:_,index:E,ptr:T,size:[N,1]})},o.fromJSON=function(m){return new o(m)},o.diagonal=function(m,b,v,w,C){if(!mr(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(J){if(Xr(J)&&(J=J.toNumber()),!Tr(J)||!Ot(J)||J<1)throw new Error("Size values must be positive integers");return J}),v){if(Xr(v)&&(v=v.toNumber()),!Tr(v)||!Ot(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var N=t,_=0;ko(C)&&(N=e.find(t,[C,C])||t,_=e.convert(0,C));var E=v>0?v:0,T=v<0?-v:0,k=m[0],D=m[1],R=Math.min(k-T,D-E),K;if(mr(b)){if(b.length!==R)throw new Error("Invalid value array length");K=function(te){return b[te]}}else if(er(b)){var M=b.size();if(M.length!==1||M[0]!==R)throw new Error("Invalid matrix length");K=function(te){return b.get([te])}}else K=function(){return b};for(var j=[],X=[],Z=[],Y=0;Y<D;Y++){Z.push(j.length);var ce=Y-E;if(ce>=0&&ce<R){var Q=K(ce);N(Q,_)||(X.push(ce+T),j.push(Q))}}return Z.push(j.length),new o({values:j,index:X,ptr:Z,size:[k,D]})},o.prototype.swapRows=function(m,b){if(!Tr(m)||!Ot(m)||!Tr(b)||!Ot(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Lr(m,this._size[0]),Lr(b,this._size[0]),o._swapRows(m,b,this._size[1],this._values,this._index,this._ptr),this},o._forEachRow=function(m,b,v,w,C){for(var N=w[m],_=w[m+1],E=N;E<_;E++)C(v[E],b[E])},o._swapRows=function(m,b,v,w,C,N){for(var _=0;_<v;_++){var E=N[_],T=N[_+1],k=u(m,E,T,C),D=u(b,E,T,C);if(k<T&&D<T&&C[k]===m&&C[D]===b){if(w){var R=w[k];w[k]=w[D],w[D]=R}continue}if(k<T&&C[k]===m&&(D>=T||C[D]!==b)){var K=w?w[k]:void 0;C.splice(D,0,b),w&&w.splice(D,0,K),C.splice(D<=k?k+1:k,1),w&&w.splice(D<=k?k+1:k,1);continue}if(D<T&&C[D]===b&&(k>=T||C[k]!==m)){var M=w?w[D]:void 0;C.splice(k,0,m),w&&w.splice(k,0,M),C.splice(k<=D?D+1:D,1),w&&w.splice(k<=D?D+1:D,1)}}},o},{isClass:!0});p();var zse="number",Lse=["typed"];function Pse(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],o=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:o}}else return null}function Bse(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var o=parseInt(r.fractionalPart[n],r.radix);t+=o/Math.pow(r.radix,n+1)}var i=e+t;if(isNaN(i))throw new SyntaxError('String "'+r.input+'" is no valid number');return i}var yy=Ee(zse,Lse,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(o){return o},string:function(o){if(o==="NaN")return NaN;var i=Pse(o);if(i)return Bse(i);var s=0,a=o.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(s=Number(a[2]),o=a[1]);var l=Number(o);if(isNaN(l))throw new SyntaxError('String "'+o+'" is no valid number');if(a){if(l>2**s-1)throw new SyntaxError('String "'.concat(o,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(o){return o.toNumber()},Fraction:function(o){return o.valueOf()},Unit:function(o){throw new Error("Second argument with valueless unit expected")},null:function(o){return 0},"Unit, string | Unit":function(o,i){return o.toNumber(i)},"Array | Matrix":function(o){return vr(o,this)}});return t.fromJSON=function(n){return parseFloat(n.value)},t});p();var Use="bignumber",Vse=["typed","BigNumber"],by=Ee(Use,Vse,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(o){return new t(o+"")},string:function(o){var i=o.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],a=t(i[1]),l=new t(2).pow(Number(s));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(o,'" is out of range'));var u=new t(2).pow(Number(s)-1);return a.gte(u)?a.sub(l):a}return new t(o)},BigNumber:function(o){return o},Fraction:function(o){return new t(o.n).div(o.d).times(o.s)},null:function(o){return new t(0)},"Array | Matrix":function(o){return vr(o,this)}})});p();var Gse="complex",Wse=["typed","Complex"],vy=Ee(Gse,Wse,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(o){return new t(o,0)},"number, number":function(o,i){return new t(o,i)},"BigNumber, BigNumber":function(o,i){return new t(o.toNumber(),i.toNumber())},Fraction:function(o){return new t(o.valueOf(),0)},Complex:function(o){return o.clone()},string:function(o){return t(o)},null:function(o){return t(0)},Object:function(o){if("re"in o&&"im"in o)return new t(o.re,o.im);if("r"in o&&"phi"in o||"abs"in o&&"arg"in o)return new t(o);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(o){return vr(o,this)}})});p();var qse="fraction",Hse=["typed","Fraction"],wy=Ee(qse,Hse,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(o){if(!isFinite(o)||isNaN(o))throw new Error(o+" cannot be represented as a fraction");return new t(o)},string:function(o){return new t(o)},"number, number":function(o,i){return new t(o,i)},null:function(o){return new t(0)},BigNumber:function(o){return new t(o.toString())},Fraction:function(o){return o},Object:function(o){return new t(o)},"Array | Matrix":function(o){return vr(o,this)}})});p();var iL="matrix",Kse=["typed","Matrix","DenseMatrix","SparseMatrix"],Cy=Ee(iL,Kse,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:o}=r;return e(iL,{"":function(){return i([])},string:function(a){return i([],a)},"string, string":function(a,l){return i([],a,l)},Array:function(a){return i(a)},Matrix:function(a){return i(a,a.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,a,l){if(a==="dense"||a==="default"||a===void 0)return new n(s,l);if(a==="sparse")return new o(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}});p();var sL="matrixFromColumns",jse=["typed","matrix","flatten","size"],Ny=Ee(sL,jse,r=>{var{typed:e,matrix:t,flatten:n,size:o}=r;return e(sL,{"...Array":function(l){return i(l)},"...Matrix":function(l){return t(i(l.map(u=>u.toArray())))}});function i(a){if(a.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(a[0]),u=[],c=0;c<l;c++)u[c]=[];for(var x of a){var f=s(x);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+" \u2260 "+(f|0));for(var h=n(x),g=0;g<l;g++)u[g].push(h[g])}return u}function s(a){var l=o(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}});p();var aL="unaryMinus",Xse=["typed"],_y=Ee(aL,Xse,r=>{var{typed:e}=r;return e(aL,{number:xy,Complex:function(n){return n.neg()},BigNumber:function(n){return n.neg()},Fraction:function(n){return n.neg()},Unit:function(n){var o=n.clone();return o.value=this(n.value),o},"Array | Matrix":function(n){return vr(n,this,!0)}})});p();var lL="abs",Yse=["typed"],Sy=Ee(lL,Yse,r=>{var{typed:e}=r;return e(lL,{number:uy,Complex:function(n){return n.abs()},BigNumber:function(n){return n.abs()},Fraction:function(n){return n.abs()},"Array | Matrix":function(n){return vr(n,this,!0)},Unit:function(n){return n.abs()}})});p();var uL="addScalar",Zse=["typed"],Ty=Ee(uL,Zse,r=>{var{typed:e}=r;return e(uL,{"number, number":cy,"Complex, Complex":function(n,o){return n.add(o)},"BigNumber, BigNumber":function(n,o){return n.plus(o)},"Fraction, Fraction":function(n,o){return n.add(o)},"Unit, Unit":function(n,o){if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(o.value===null||o.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(o))throw new Error("Units do not match");var i=n.clone();return i.value=this(i.value,o.value),i.fixPrefix=!1,i}})});p();var Jse="algorithm11",Qse=["typed","equalScalar"],m4=Ee(Jse,Qse,r=>{var{typed:e,equalScalar:t}=r;return function(o,i,s,a){var l=o._values,u=o._index,c=o._ptr,x=o._size,f=o._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=x[0],g=x[1],m,b=t,v=0,w=s;typeof f=="string"&&(m=f,b=e.find(t,[m,m]),v=e.convert(0,m),i=e.convert(i,m),w=e.find(s,[m,m]));for(var C=[],N=[],_=[],E=0;E<g;E++){_[E]=N.length;for(var T=c[E],k=c[E+1],D=T;D<k;D++){var R=u[D],K=a?w(i,l[D]):w(l[D],i);b(K,v)||(N.push(R),C.push(K))}}return _[g]=N.length,o.createSparseMatrix({values:C,index:N,ptr:_,size:[h,g],datatype:m})}});p();var eae="algorithm14",tae=["typed"],Gn=Ee(eae,tae,r=>{var{typed:e}=r;return function(o,i,s,a){var l=o._data,u=o._size,c=o._datatype,x,f=s;typeof c=="string"&&(x=c,i=e.convert(i,x),f=e.find(s,[x,x]));var h=u.length>0?t(f,0,u,u[0],l,i,a):[];return o.createDenseMatrix({data:h,size:St(u),datatype:x})};function t(n,o,i,s,a,l,u){var c=[];if(o===i.length-1)for(var x=0;x<s;x++)c[x]=u?n(l,a[x]):n(a[x],l);else for(var f=0;f<s;f++)c[f]=t(n,o+1,i,i[o+1],a[f],l,u);return c}});p();var rae="algorithm01",nae=["typed"],h4=Ee(rae,nae,r=>{var{typed:e}=r;return function(n,o,i,s){var a=n._data,l=n._size,u=n._datatype,c=o._values,x=o._index,f=o._ptr,h=o._size,g=o._datatype;if(l.length!==h.length)throw new Gt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],b=l[1],v=typeof u=="string"&&u===g?u:void 0,w=v?e.find(i,[v,v]):i,C,N,_=[];for(C=0;C<m;C++)_[C]=[];var E=[],T=[];for(N=0;N<b;N++){for(var k=N+1,D=f[N],R=f[N+1],K=D;K<R;K++)C=x[K],E[C]=s?w(c[K],a[C][N]):w(a[C][N],c[K]),T[C]=k;for(C=0;C<m;C++)T[C]===k?_[C][N]=E[C]:_[C][N]=a[C][N]}return n.createDenseMatrix({data:_,size:[m,b],datatype:v})}});p();var oae="algorithm04",iae=["typed","equalScalar"],cL=Ee(oae,iae,r=>{var{typed:e,equalScalar:t}=r;return function(o,i,s){var a=o._values,l=o._index,u=o._ptr,c=o._size,x=o._datatype,f=i._values,h=i._index,g=i._ptr,m=i._size,b=i._datatype;if(c.length!==m.length)throw new Gt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],w=c[1],C,N=t,_=0,E=s;typeof x=="string"&&x===b&&(C=x,N=e.find(t,[C,C]),_=e.convert(0,C),E=e.find(s,[C,C]));var T=a&&f?[]:void 0,k=[],D=[],R=a&&f?[]:void 0,K=a&&f?[]:void 0,M=[],j=[],X,Z,Y,ce,Q;for(Z=0;Z<w;Z++){D[Z]=k.length;var J=Z+1;for(ce=u[Z],Q=u[Z+1],Y=ce;Y<Q;Y++)X=l[Y],k.push(X),M[X]=J,R&&(R[X]=a[Y]);for(ce=g[Z],Q=g[Z+1],Y=ce;Y<Q;Y++)if(X=h[Y],M[X]===J){if(R){var te=E(R[X],f[Y]);N(te,_)?M[X]=null:R[X]=te}}else k.push(X),j[X]=J,K&&(K[X]=f[Y]);if(R&&K)for(Y=D[Z];Y<k.length;)X=k[Y],M[X]===J?(T[Y]=R[X],Y++):j[X]===J?(T[Y]=K[X],Y++):k.splice(Y,1)}return D[w]=k.length,o.createSparseMatrix({values:T,index:k,ptr:D,size:[v,w],datatype:C})}});p();var sae="algorithm10",aae=["typed","DenseMatrix"],d4=Ee(sae,aae,r=>{var{typed:e,DenseMatrix:t}=r;return function(o,i,s,a){var l=o._values,u=o._index,c=o._ptr,x=o._size,f=o._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=x[0],g=x[1],m,b=s;typeof f=="string"&&(m=f,i=e.convert(i,m),b=e.find(s,[m,m]));for(var v=[],w=[],C=[],N=0;N<g;N++){for(var _=N+1,E=c[N],T=c[N+1],k=E;k<T;k++){var D=u[k];w[D]=l[k],C[D]=_}for(var R=0;R<h;R++)N===0&&(v[R]=[]),C[R]===_?v[R][N]=a?b(i,w[R]):b(w[R],i):v[R][N]=i}return new t({data:v,size:[h,g],datatype:m})}});p();var lae="algorithm13",uae=["typed"],Go=Ee(lae,uae,r=>{var{typed:e}=r;return function(o,i,s){var a=o._data,l=o._size,u=o._datatype,c=i._data,x=i._size,f=i._datatype,h=[];if(l.length!==x.length)throw new Gt(l.length,x.length);for(var g=0;g<l.length;g++){if(l[g]!==x[g])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+x+")");h[g]=l[g]}var m,b=s;typeof u=="string"&&u===f&&(m=u,b=e.find(s,[m,m]));var v=h.length>0?t(b,0,h,h[0],a,c):[];return o.createDenseMatrix({data:v,size:h,datatype:m})};function t(n,o,i,s,a,l){var u=[];if(o===i.length-1)for(var c=0;c<s;c++)u[c]=n(a[c],l[c]);else for(var x=0;x<s;x++)u[x]=t(n,o+1,i,i[o+1],a[x],l[x]);return u}});p();var cae="algorithm03",pae=["typed"],Mi=Ee(cae,pae,r=>{var{typed:e}=r;return function(n,o,i,s){var a=n._data,l=n._size,u=n._datatype,c=o._values,x=o._index,f=o._ptr,h=o._size,g=o._datatype;if(l.length!==h.length)throw new Gt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],b=l[1],v,w=0,C=i;typeof u=="string"&&u===g&&(v=u,w=e.convert(0,v),C=e.find(i,[v,v]));for(var N=[],_=0;_<m;_++)N[_]=[];for(var E=[],T=[],k=0;k<b;k++){for(var D=k+1,R=f[k],K=f[k+1],M=R;M<K;M++){var j=x[M];E[j]=s?C(c[M],a[j][k]):C(a[j][k],c[M]),T[j]=D}for(var X=0;X<m;X++)T[X]===D?N[X][k]=E[X]:N[X][k]=s?C(w,a[X][k]):C(a[X][k],w)}return n.createDenseMatrix({data:N,size:[m,b],datatype:v})}});p();var xae="algorithm05",fae=["typed","equalScalar"],pL=Ee(xae,fae,r=>{var{typed:e,equalScalar:t}=r;return function(o,i,s){var a=o._values,l=o._index,u=o._ptr,c=o._size,x=o._datatype,f=i._values,h=i._index,g=i._ptr,m=i._size,b=i._datatype;if(c.length!==m.length)throw new Gt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],w=c[1],C,N=t,_=0,E=s;typeof x=="string"&&x===b&&(C=x,N=e.find(t,[C,C]),_=e.convert(0,C),E=e.find(s,[C,C]));var T=a&&f?[]:void 0,k=[],D=[],R=T?[]:void 0,K=T?[]:void 0,M=[],j=[],X,Z,Y,ce;for(Z=0;Z<w;Z++){D[Z]=k.length;var Q=Z+1;for(Y=u[Z],ce=u[Z+1];Y<ce;Y++)X=l[Y],k.push(X),M[X]=Q,R&&(R[X]=a[Y]);for(Y=g[Z],ce=g[Z+1];Y<ce;Y++)X=h[Y],M[X]!==Q&&k.push(X),j[X]=Q,K&&(K[X]=f[Y]);if(T)for(Y=D[Z];Y<k.length;){X=k[Y];var J=M[X],te=j[X];if(J===Q||te===Q){var ae=J===Q?R[X]:_,ge=te===Q?K[X]:_,le=E(ae,ge);N(le,_)?k.splice(Y,1):(T.push(le),Y++)}}}return D[w]=k.length,o.createSparseMatrix({values:T,index:k,ptr:D,size:[v,w],datatype:C})}});p();var mae="algorithm12",hae=["typed","DenseMatrix"],Fa=Ee(mae,hae,r=>{var{typed:e,DenseMatrix:t}=r;return function(o,i,s,a){var l=o._values,u=o._index,c=o._ptr,x=o._size,f=o._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=x[0],g=x[1],m,b=s;typeof f=="string"&&(m=f,i=e.convert(i,m),b=e.find(s,[m,m]));for(var v=[],w=[],C=[],N=0;N<g;N++){for(var _=N+1,E=c[N],T=c[N+1],k=E;k<T;k++){var D=u[k];w[D]=l[k],C[D]=_}for(var R=0;R<h;R++)N===0&&(v[R]=[]),C[R]===_?v[R][N]=a?b(i,w[R]):b(w[R],i):v[R][N]=a?b(i,0):b(0,i)}return new t({data:v,size:[h,g],datatype:m})}});p();var dae="multiplyScalar",gae=["typed"],Iy=Ee(dae,gae,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":py,"Complex, Complex":function(n,o){return n.mul(o)},"BigNumber, BigNumber":function(n,o){return n.times(o)},"Fraction, Fraction":function(n,o){return n.mul(o)},"number | Fraction | BigNumber | Complex, Unit":function(n,o){var i=o.clone();return i.value=i.value===null?i._normalize(n):this(i.value,n),i},"Unit, number | Fraction | BigNumber | Complex":function(n,o){var i=n.clone();return i.value=i.value===null?i._normalize(o):this(i.value,o),i},"Unit, Unit":function(n,o){return n.multiply(o)}})});p();var xL="multiply",yae=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],ky=Ee(xL,yae,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:o,equalScalar:i,dot:s}=r,a=m4({typed:e,equalScalar:i}),l=Gn({typed:e});function u(_,E){switch(_.length){case 1:switch(E.length){case 1:if(_[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(_[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+E[0]+")");break;case 2:if(_[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function c(_,E,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return s(_,E)}function x(_,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(_,E)}function f(_,E){var T=_._data,k=_._size,D=_._datatype,R=E._data,K=E._size,M=E._datatype,j=k[0],X=K[1],Z,Y=n,ce=o;D&&M&&D===M&&typeof D=="string"&&(Z=D,Y=e.find(n,[Z,Z]),ce=e.find(o,[Z,Z]));for(var Q=[],J=0;J<X;J++){for(var te=ce(T[0],R[0][J]),ae=1;ae<j;ae++)te=Y(te,ce(T[ae],R[ae][J]));Q[J]=te}return _.createDenseMatrix({data:Q,size:[X],datatype:Z})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":w}),g=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":C,"SparseMatrix, SparseMatrix":N});function m(_,E){var T=_._data,k=_._size,D=_._datatype,R=E._data,K=E._datatype,M=k[0],j=k[1],X,Z=n,Y=o;D&&K&&D===K&&typeof D=="string"&&(X=D,Z=e.find(n,[X,X]),Y=e.find(o,[X,X]));for(var ce=[],Q=0;Q<M;Q++){for(var J=T[Q],te=Y(J[0],R[0]),ae=1;ae<j;ae++)te=Z(te,Y(J[ae],R[ae]));ce[Q]=te}return _.createDenseMatrix({data:ce,size:[M],datatype:X})}function b(_,E){var T=_._data,k=_._size,D=_._datatype,R=E._data,K=E._size,M=E._datatype,j=k[0],X=k[1],Z=K[1],Y,ce=n,Q=o;D&&M&&D===M&&typeof D=="string"&&(Y=D,ce=e.find(n,[Y,Y]),Q=e.find(o,[Y,Y]));for(var J=[],te=0;te<j;te++){var ae=T[te];J[te]=[];for(var ge=0;ge<Z;ge++){for(var le=Q(ae[0],R[0][ge]),xe=1;xe<X;xe++)le=ce(le,Q(ae[xe],R[xe][ge]));J[te][ge]=le}}return _.createDenseMatrix({data:J,size:[j,Z],datatype:Y})}function v(_,E){var T=_._data,k=_._size,D=_._datatype,R=E._values,K=E._index,M=E._ptr,j=E._size,X=E._datatype;if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var Z=k[0],Y=j[1],ce,Q=n,J=o,te=i,ae=0;D&&X&&D===X&&typeof D=="string"&&(ce=D,Q=e.find(n,[ce,ce]),J=e.find(o,[ce,ce]),te=e.find(i,[ce,ce]),ae=e.convert(0,ce));for(var ge=[],le=[],xe=[],me=E.createSparseMatrix({values:ge,index:le,ptr:xe,size:[Z,Y],datatype:ce}),ve=0;ve<Y;ve++){xe[ve]=le.length;var Te=M[ve],De=M[ve+1];if(De>Te)for(var Ae=0,_e=0;_e<Z;_e++){for(var Ke=_e+1,Xe=void 0,qe=Te;qe<De;qe++){var tt=K[qe];Ae!==Ke?(Xe=J(T[_e][tt],R[qe]),Ae=Ke):Xe=Q(Xe,J(T[_e][tt],R[qe]))}Ae===Ke&&!te(Xe,ae)&&(le.push(_e),ge.push(Xe))}}return xe[Y]=le.length,me}function w(_,E){var T=_._values,k=_._index,D=_._ptr,R=_._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=E._data,M=E._datatype,j=_._size[0],X=E._size[0],Z=[],Y=[],ce=[],Q,J=n,te=o,ae=i,ge=0;R&&M&&R===M&&typeof R=="string"&&(Q=R,J=e.find(n,[Q,Q]),te=e.find(o,[Q,Q]),ae=e.find(i,[Q,Q]),ge=e.convert(0,Q));var le=[],xe=[];ce[0]=0;for(var me=0;me<X;me++){var ve=K[me];if(!ae(ve,ge))for(var Te=D[me],De=D[me+1],Ae=Te;Ae<De;Ae++){var _e=k[Ae];xe[_e]?le[_e]=J(le[_e],te(ve,T[Ae])):(xe[_e]=!0,Y.push(_e),le[_e]=te(ve,T[Ae]))}}for(var Ke=Y.length,Xe=0;Xe<Ke;Xe++){var qe=Y[Xe];Z[Xe]=le[qe]}return ce[1]=Y.length,_.createSparseMatrix({values:Z,index:Y,ptr:ce,size:[j,1],datatype:Q})}function C(_,E){var T=_._values,k=_._index,D=_._ptr,R=_._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=E._data,M=E._datatype,j=_._size[0],X=E._size[0],Z=E._size[1],Y,ce=n,Q=o,J=i,te=0;R&&M&&R===M&&typeof R=="string"&&(Y=R,ce=e.find(n,[Y,Y]),Q=e.find(o,[Y,Y]),J=e.find(i,[Y,Y]),te=e.convert(0,Y));for(var ae=[],ge=[],le=[],xe=_.createSparseMatrix({values:ae,index:ge,ptr:le,size:[j,Z],datatype:Y}),me=[],ve=[],Te=0;Te<Z;Te++){le[Te]=ge.length;for(var De=Te+1,Ae=0;Ae<X;Ae++){var _e=K[Ae][Te];if(!J(_e,te))for(var Ke=D[Ae],Xe=D[Ae+1],qe=Ke;qe<Xe;qe++){var tt=k[qe];ve[tt]!==De?(ve[tt]=De,ge.push(tt),me[tt]=Q(_e,T[qe])):me[tt]=ce(me[tt],Q(_e,T[qe]))}}for(var et=le[Te],rt=ge.length,oe=et;oe<rt;oe++){var he=ge[oe];ae[oe]=me[he]}}return le[Z]=ge.length,xe}function N(_,E){var T=_._values,k=_._index,D=_._ptr,R=_._datatype,K=E._values,M=E._index,j=E._ptr,X=E._datatype,Z=_._size[0],Y=E._size[1],ce=T&&K,Q,J=n,te=o;R&&X&&R===X&&typeof R=="string"&&(Q=R,J=e.find(n,[Q,Q]),te=e.find(o,[Q,Q]));for(var ae=ce?[]:void 0,ge=[],le=[],xe=_.createSparseMatrix({values:ae,index:ge,ptr:le,size:[Z,Y],datatype:Q}),me=ce?[]:void 0,ve=[],Te,De,Ae,_e,Ke,Xe,qe,tt,et=0;et<Y;et++){le[et]=ge.length;var rt=et+1;for(Ke=j[et],Xe=j[et+1],_e=Ke;_e<Xe;_e++)if(tt=M[_e],ce)for(De=D[tt],Ae=D[tt+1],Te=De;Te<Ae;Te++)qe=k[Te],ve[qe]!==rt?(ve[qe]=rt,ge.push(qe),me[qe]=te(K[_e],T[Te])):me[qe]=J(me[qe],te(K[_e],T[Te]));else for(De=D[tt],Ae=D[tt+1],Te=De;Te<Ae;Te++)qe=k[Te],ve[qe]!==rt&&(ve[qe]=rt,ge.push(qe));if(ce)for(var oe=le[et],he=ge.length,Ne=oe;Ne<he;Ne++){var ye=ge[Ne];ae[Ne]=me[ye]}}return le[Y]=ge.length,xe}return e(xL,Dx({"Array, Array":function(E,T){u(Ir(E),Ir(T));var k=this(t(E),t(T));return er(k)?k.valueOf():k},"Matrix, Matrix":function(E,T){var k=E.size(),D=T.size();return u(k,D),k.length===1?D.length===1?c(E,T,k[0]):x(E,T):D.length===1?h(E,T):g(E,T)},"Matrix, Array":function(E,T){return this(E,t(T))},"Array, Matrix":function(E,T){return this(t(E,T.storage()),T)},"SparseMatrix, any":function(E,T){return a(E,T,o,!1)},"DenseMatrix, any":function(E,T){return l(E,T,o,!1)},"any, SparseMatrix":function(E,T){return a(T,E,o,!0)},"any, DenseMatrix":function(E,T){return l(T,E,o,!0)},"Array, any":function(E,T){return l(t(E),T,o,!1).valueOf()},"any, Array":function(E,T){return l(t(T),E,o,!0).valueOf()},"any, any":o,"any, any, ...any":function(E,T,k){for(var D=this(E,T),R=0;R<k.length;R++)D=this(D,k[R]);return D}},o.signatures))});p();var fL="sign",bae=["typed","BigNumber","Fraction","complex"],Ey=Ee(fL,bae,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:o}=r;return e(fL,{number:x4,Complex:function(s){return s.im===0?n(x4(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},Fraction:function(s){return new o(s.s,1)},"Array | Matrix":function(s){return vr(s,this,!0)},Unit:function(s){return this(s.value)}})});p();var vae="sqrt",wae=["config","typed","Complex"],Ay=Ee(vae,wae,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:o,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():o(s.toNumber())},"Array | Matrix":function(s){return vr(s,this,!0)},Unit:function(s){return s.pow(.5)}});function o(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new n(i,0).sqrt()}});p();var mL="subtract",Cae=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Dy=Ee(mL,Cae,r=>{var{typed:e,matrix:t,equalScalar:n,addScalar:o,unaryMinus:i,DenseMatrix:s}=r,a=h4({typed:e}),l=Mi({typed:e}),u=pL({typed:e,equalScalar:n}),c=d4({typed:e,DenseMatrix:s}),x=Go({typed:e}),f=Gn({typed:e});return e(mL,{"number, number":function(g,m){return g-m},"Complex, Complex":function(g,m){return g.sub(m)},"BigNumber, BigNumber":function(g,m){return g.minus(m)},"Fraction, Fraction":function(g,m){return g.sub(m)},"Unit, Unit":function(g,m){if(g.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!g.equalBase(m))throw new Error("Units do not match");var b=g.clone();return b.value=this(b.value,m.value),b.fixPrefix=!1,b},"SparseMatrix, SparseMatrix":function(g,m){return g4(g,m),u(g,m,this)},"SparseMatrix, DenseMatrix":function(g,m){return g4(g,m),l(m,g,this,!0)},"DenseMatrix, SparseMatrix":function(g,m){return g4(g,m),a(g,m,this,!1)},"DenseMatrix, DenseMatrix":function(g,m){return g4(g,m),x(g,m,this)},"Array, Array":function(g,m){return this(t(g),t(m)).valueOf()},"Array, Matrix":function(g,m){return this(t(g),m)},"Matrix, Array":function(g,m){return this(g,t(m))},"SparseMatrix, any":function(g,m){return c(g,i(m),o)},"DenseMatrix, any":function(g,m){return f(g,m,this)},"any, SparseMatrix":function(g,m){return c(m,g,this,!0)},"any, DenseMatrix":function(g,m){return f(m,g,this,!0)},"Array, any":function(g,m){return f(t(g),m,this,!1).valueOf()},"any, Array":function(g,m){return f(t(m),g,this,!0).valueOf()}})});function g4(r,e){var t=r.size(),n=e.size();if(t.length!==n.length)throw new Gt(t.length,n.length)}p();var Nae="algorithm07",_ae=["typed","DenseMatrix"],Ma=Ee(Nae,_ae,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a){var l=i._size,u=i._datatype,c=s._size,x=s._datatype;if(l.length!==c.length)throw new Gt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var f=l[0],h=l[1],g,m=0,b=a;typeof u=="string"&&u===x&&(g=u,m=e.convert(0,g),b=e.find(a,[g,g]));var v,w,C=[];for(v=0;v<f;v++)C[v]=[];var N=[],_=[],E=[],T=[];for(w=0;w<h;w++){var k=w+1;for(n(i,w,E,N,k),n(s,w,T,_,k),v=0;v<f;v++){var D=E[v]===k?N[v]:m,R=T[v]===k?_[v]:m;C[v][w]=b(D,R)}}return new t({data:C,size:[f,h],datatype:g})};function n(o,i,s,a,l){for(var u=o._values,c=o._index,x=o._ptr,f=x[i],h=x[i+1];f<h;f++){var g=c[f];s[g]=l,a[g]=u[f]}}});p();var hL="conj",Sae=["typed"],Ry=Ee(hL,Sae,r=>{var{typed:e}=r;return e(hL,{number:function(n){return n},BigNumber:function(n){return n},Complex:function(n){return n.conjugate()},"Array | Matrix":function(n){return vr(n,this)}})});p();var dL="im",Tae=["typed"],$y=Ee(dL,Tae,r=>{var{typed:e}=r;return e(dL,{number:function(n){return 0},BigNumber:function(n){return n.mul(0)},Fraction:function(n){return n.mul(0)},Complex:function(n){return n.im},"Array | Matrix":function(n){return vr(n,this)}})});p();var gL="re",Iae=["typed"],Oy=Ee(gL,Iae,r=>{var{typed:e}=r;return e(gL,{number:function(n){return n},BigNumber:function(n){return n},Fraction:function(n){return n},Complex:function(n){return n.re},"Array | Matrix":function(n){return vr(n,this)}})});p();var yL="column",kae=["typed","Index","matrix","range"],Fy=Ee(yL,kae,r=>{var{typed:e,Index:t,matrix:n,range:o}=r;return e(yL,{"Matrix, number":i,"Array, number":function(a,l){return i(n(St(a)),l).valueOf()}});function i(s,a){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Lr(a,s.size()[1]);var l=o(0,s.size()[0]),u=new t(l,a);return s.subset(u)}});p();var bL="cross",Eae=["typed","matrix","subtract","multiply"],My=Ee(bL,Eae,r=>{var{typed:e,matrix:t,subtract:n,multiply:o}=r;return e(bL,{"Matrix, Matrix":function(a,l){return t(i(a.toArray(),l.toArray()))},"Matrix, Array":function(a,l){return t(i(a.toArray(),l))},"Array, Matrix":function(a,l){return t(i(a,l.toArray()))},"Array, Array":i});function i(s,a){var l=Math.max(Ir(s).length,Ir(a).length);s=Y9(s),a=Y9(a);var u=Ir(s),c=Ir(a);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var x=[n(o(s[1],a[2]),o(s[2],a[1])),n(o(s[2],a[0]),o(s[0],a[2])),n(o(s[0],a[1]),o(s[1],a[0]))];return l>1?[x]:x}});p();var vL="diag",Aae=["typed","matrix","DenseMatrix","SparseMatrix"],zy=Ee(vL,Aae,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:o}=r;return e(vL,{Array:function(u){return i(u,0,Ir(u),null)},"Array, number":function(u,c){return i(u,c,Ir(u),null)},"Array, BigNumber":function(u,c){return i(u,c.toNumber(),Ir(u),null)},"Array, string":function(u,c){return i(u,0,Ir(u),c)},"Array, number, string":function(u,c,x){return i(u,c,Ir(u),x)},"Array, BigNumber, string":function(u,c,x){return i(u,c.toNumber(),Ir(u),x)},Matrix:function(u){return i(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return i(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return i(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return i(u,0,u.size(),c)},"Matrix, number, string":function(u,c,x){return i(u,c,u.size(),x)},"Matrix, BigNumber, string":function(u,c,x){return i(u,c.toNumber(),u.size(),x)}});function i(l,u,c,x){if(!Ot(u))throw new TypeError("Second parameter in function diag must be an integer");var f=u>0?u:0,h=u<0?-u:0;switch(c.length){case 1:return s(l,u,x,c[0],h,f);case 2:return a(l,u,x,c,h,f)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,u,c,x,f,h){var g=[x+f,x+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?o.diagonal(g,l,u):n.diagonal(g,l,u);return c!==null?m:m.valueOf()}function a(l,u,c,x,f,h){if(er(l)){var g=l.diagonal(u);return c!==null?c!==g.storage()?t(g,c):g:g.valueOf()}for(var m=Math.min(x[0]-f,x[1]-h),b=[],v=0;v<m;v++)b[v]=l[v+f][v+h];return c!==null?t(b):b}});p();var wL="flatten",Dae=["typed","matrix"],Ly=Ee(wL,Dae,r=>{var{typed:e,matrix:t}=r;return e(wL,{Array:function(o){return u4(St(o))},Matrix:function(o){var i=u4(St(o.toArray()));return t(i)}})});p();var CL="identity",Rae=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Py=Ee(CL,Rae,r=>{var{typed:e,config:t,matrix:n,BigNumber:o,DenseMatrix:i,SparseMatrix:s}=r;return e(CL,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,x){return l(c,c,x)},"number | BigNumber, number | BigNumber":function(c,x){return l(c,x,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,x,f){return l(c,x,f)},Array:function(c){return a(c)},"Array, string":function(c,x){return a(c,x)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,x){return a(c.valueOf(),x)}});function a(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,x){var f=Xr(u)||Xr(c)?o:null;if(Xr(u)&&(u=u.toNumber()),Xr(c)&&(c=c.toNumber()),!Ot(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Ot(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=f?new o(1):1,g=f?new f(0):0,m=[u,c];if(x){if(x==="sparse")return s.diagonal(m,h,0,g);if(x==="dense")return i.diagonal(m,h,0,g);throw new TypeError('Unknown matrix type "'.concat(x,'"'))}for(var b=pc([],m,g),v=u<c?u:c,w=0;w<v;w++)b[w][w]=h;return b}});p();p();function y4(){throw new Error('No "bignumber" implementation available')}function NL(){throw new Error('No "fraction" implementation available')}function b4(){throw new Error('No "matrix" implementation available')}var _L="range",$ae=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],By=Ee(_L,$ae,r=>{var{typed:e,config:t,matrix:n,bignumber:o,smaller:i,smallerEq:s,larger:a,largerEq:l}=r;return e(_L,{string:c,"string, boolean":c,"number, number":function(v,w){return u(x(v,w,1))},"number, number, number":function(v,w,C){return u(x(v,w,C))},"number, number, boolean":function(v,w,C){return u(C?f(v,w,1):x(v,w,1))},"number, number, number, boolean":function(v,w,C,N){return u(N?f(v,w,C):x(v,w,C))},"BigNumber, BigNumber":function(v,w){var C=v.constructor;return u(h(v,w,new C(1)))},"BigNumber, BigNumber, BigNumber":function(v,w,C){return u(h(v,w,C))},"BigNumber, BigNumber, boolean":function(v,w,C){var N=v.constructor;return u(C?g(v,w,new N(1)):h(v,w,new N(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(v,w,C,N){return u(N?g(v,w,C):h(v,w,C))}});function u(b){return t.matrix==="Matrix"?n?n(b):b4():b}function c(b,v){var w=m(b);if(!w)throw new SyntaxError('String "'+b+'" is no valid range');var C;return t.number==="BigNumber"?(o===void 0&&y4(),C=v?g:h,u(C(o(w.start),o(w.end),o(w.step)))):(C=v?f:x,u(C(w.start,w.end,w.step)))}function x(b,v,w){var C=[],N=b;if(w>0)for(;i(N,v);)C.push(N),N+=w;else if(w<0)for(;a(N,v);)C.push(N),N+=w;return C}function f(b,v,w){var C=[],N=b;if(w>0)for(;s(N,v);)C.push(N),N+=w;else if(w<0)for(;l(N,v);)C.push(N),N+=w;return C}function h(b,v,w){var C=o(0),N=[],_=b;if(w.gt(C))for(;i(_,v);)N.push(_),_=_.plus(w);else if(w.lt(C))for(;a(_,v);)N.push(_),_=_.plus(w);return N}function g(b,v,w){var C=o(0),N=[],_=b;if(w.gt(C))for(;s(_,v);)N.push(_),_=_.plus(w);else if(w.lt(C))for(;l(_,v);)N.push(_),_=_.plus(w);return N}function m(b){var v=b.split(":"),w=v.map(function(N){return Number(N)}),C=w.some(function(N){return isNaN(N)});if(C)return null;switch(w.length){case 2:return{start:w[0],end:w[1],step:1};case 3:return{start:w[0],end:w[2],step:w[1]};default:return null}}});p();var SL="size",Oae=["typed","config","?matrix"],Uy=Ee(SL,Oae,r=>{var{typed:e,config:t,matrix:n}=r;return e(SL,{Matrix:function(i){return i.create(i.size())},Array:Ir,string:function(i){return t.matrix==="Array"?[i.length]:n([i.length])},"number | Complex | BigNumber | Unit | boolean | null":function(i){return t.matrix==="Array"?[]:n?n([]):b4()}})});p();var Fae="transpose",Mae=["typed","matrix"],Vy=Ee(Fae,Mae,r=>{var{typed:e,matrix:t}=r;return e("transpose",{Array:function(s){return this(t(s)).valueOf()},Matrix:function(s){var a=s.size(),l;switch(a.length){case 1:l=s.clone();break;case 2:{var u=a[0],c=a[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+pr(a)+")");switch(s.storage()){case"dense":l=n(s,u,c);break;case"sparse":l=o(s,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+pr(this._size)+")")}return l},any:function(s){return St(s)}});function n(i,s,a){for(var l=i._data,u=[],c,x=0;x<a;x++){c=u[x]=[];for(var f=0;f<s;f++)c[f]=St(l[f][x])}return i.createDenseMatrix({data:u,size:[a,s],datatype:i._datatype})}function o(i,s,a){for(var l=i._values,u=i._index,c=i._ptr,x=l?[]:void 0,f=[],h=[],g=[],m=0;m<s;m++)g[m]=0;var b,v,w;for(b=0,v=u.length;b<v;b++)g[u[b]]++;for(var C=0,N=0;N<s;N++)h.push(C),C+=g[N],g[N]=h[N];for(h.push(C),w=0;w<a;w++)for(var _=c[w],E=c[w+1],T=_;T<E;T++){var k=g[u[T]]++;f[k]=w,l&&(x[k]=St(l[T]))}return i.createSparseMatrix({values:x,index:f,ptr:h,size:[a,s],datatype:i._datatype})}});p();var TL="ctranspose",zae=["typed","transpose","conj"],Gy=Ee(TL,zae,r=>{var{typed:e,transpose:t,conj:n}=r;return e(TL,{any:function(i){return n(t(i))}})});p();var IL="zeros",Lae=["typed","config","matrix","BigNumber"],Wy=Ee(IL,Lae,r=>{var{typed:e,config:t,matrix:n,BigNumber:o}=r;return e(IL,{"":function(){return t.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var x=u.pop();return i(u,x)}else return t.matrix==="Array"?i(u):i(u,"default")},Array:i,Matrix:function(u){var c=u.storage();return i(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return i(u.valueOf(),c)}});function i(l,u){var c=s(l),x=c?new o(0):0;if(a(l),u){var f=n(u);return l.length>0?f.resize(l,x):f}else{var h=[];return l.length>0?pc(h,l,x):h}}function s(l){var u=!1;return l.forEach(function(c,x,f){Xr(c)&&(u=!0,f[x]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!Ot(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}});p();var Pae="numeric",Bae=["number","?bignumber","?fraction"],qy=Ee(Pae,Bae,r=>{var{number:e,bignumber:t,fraction:n}=r,o={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:t?s=>t(s):y4,Fraction:n?s=>n(s):NL};return function(a,l){var u=eo(a);if(!(u in o))throw new TypeError("Cannot convert "+a+' of type "'+u+'"; valid input types are '+Object.keys(o).join(", "));if(!(l in i))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(i).join(", "));return l===u?a:i[l](a)}});p();var kL="divideScalar",Uae=["typed","numeric"],Hy=Ee(kL,Uae,r=>{var{typed:e,numeric:t}=r;return e(kL,{"number, number":function(o,i){return o/i},"Complex, Complex":function(o,i){return o.div(i)},"BigNumber, BigNumber":function(o,i){return o.div(i)},"Fraction, Fraction":function(o,i){return o.div(i)},"Unit, number | Fraction | BigNumber":function(o,i){var s=o.clone(),a=t(1,eo(i));return s.value=this(s.value===null?s._normalize(a):s.value,i),s},"number | Fraction | BigNumber, Unit":function(o,i){var s=i.clone();s=s.pow(-1);var a=t(1,eo(o));return s.value=this(o,i.value===null?i._normalize(a):i.value),s},"Unit, Unit":function(o,i){return o.divide(i)}})});p();var EL="pow",Vae=["typed","config","identity","multiply","matrix","fraction","number","Complex"],Ky=Ee(EL,Vae,r=>{var{typed:e,config:t,identity:n,multiply:o,matrix:i,number:s,fraction:a,Complex:l}=r;return e(EL,{"number, number":u,"Complex, Complex":function(h,g){return h.pow(g)},"BigNumber, BigNumber":function(h,g){return g.isInteger()||h>=0||t.predictable?h.pow(g):new l(h.toNumber(),0).pow(g.toNumber(),0)},"Fraction, Fraction":function(h,g){var m=h.pow(g);if(m!=null)return m;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return u(h.valueOf(),g.valueOf())},"Array, number":c,"Array, BigNumber":function(h,g){return c(h,g.toNumber())},"Matrix, number":x,"Matrix, BigNumber":function(h,g){return x(h,g.toNumber())},"Unit, number | BigNumber":function(h,g){return h.pow(g)}});function u(f,h){if(t.predictable&&!Ot(h)&&f<0)try{var g=a(h),m=s(g);if((h===m||Math.abs((h-m)/h)<1e-14)&&g.d%2===1)return(g.n%2===0?1:-1)*Math.pow(-f,h)}catch{}return t.predictable&&(f<-1&&h===1/0||f>-1&&f<0&&h===-1/0)?NaN:Ot(h)||f>=0||t.predictable?fy(f,h):f*f<1&&h===1/0||f*f>1&&h===-1/0?0:new l(f,0).pow(h,0)}function c(f,h){if(!Ot(h)||h<0)throw new TypeError("For A^b, b must be a positive integer (value is "+h+")");var g=Ir(f);if(g.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+g.length+" dimensions)");if(g[0]!==g[1])throw new Error("For A^b, A must be square (size is "+g[0]+"x"+g[1]+")");for(var m=n(g[0]).valueOf(),b=f;h>=1;)(h&1)===1&&(m=o(b,m)),h>>=1,b=o(b,b);return m}function x(f,h){return i(c(f.valueOf(),h))}});p();function v4(r){var{DenseMatrix:e}=r;return function(n,o,i){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+pr(s)+")");var a=s[0],l=s[1];if(a!==l)throw new RangeError("Matrix must be square (size: "+pr(s)+")");var u=[];if(er(o)){var c=o.size(),x=o._data;if(c.length===1){if(c[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var f=0;f<a;f++)u[f]=[x[f]];return new e({data:u,size:[a,1],datatype:o._datatype})}if(c.length===2){if(c[0]!==a||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(o4(o)){if(i){u=[];for(var h=0;h<a;h++)u[h]=[x[h][0]];return new e({data:u,size:[a,1],datatype:o._datatype})}return o}if(i4(o)){for(var g=0;g<a;g++)u[g]=[0];for(var m=o._values,b=o._index,v=o._ptr,w=v[1],C=v[0];C<w;C++){var N=b[C];u[N][0]=m[C]}return new e({data:u,size:[a,1],datatype:o._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(mr(o)){var _=Ir(o);if(_.length===1){if(_[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<a;E++)u[E]=[o[E]];return new e({data:u,size:[a,1]})}if(_.length===2){if(_[0]!==a||_[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<a;T++)u[T]=[o[T][0]];return new e({data:u,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}p();var AL="usolve",Gae=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],jy=Ee(AL,Gae,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:o,subtract:i,equalScalar:s,DenseMatrix:a}=r,l=v4({DenseMatrix:a});return e(AL,{"SparseMatrix, Array | Matrix":function(f,h){return c(f,h)},"DenseMatrix, Array | Matrix":function(f,h){return u(f,h)},"Array, Array | Matrix":function(f,h){var g=t(f),m=u(g,h);return m.valueOf()}});function u(x,f){f=l(x,f,!0);for(var h=f._data,g=x._size[0],m=x._size[1],b=[],v=x._data,w=m-1;w>=0;w--){var C=h[w][0]||0,N=void 0;if(s(C,0))N=0;else{var _=v[w][w];if(s(_,0))throw new Error("Linear system cannot be solved since matrix is singular");N=n(C,_);for(var E=w-1;E>=0;E--)h[E]=[i(h[E][0]||0,o(N,v[E][w]))]}b[w]=[N]}return new a({data:b,size:[g,1]})}function c(x,f){f=l(x,f,!0);for(var h=f._data,g=x._size[0],m=x._size[1],b=x._values,v=x._index,w=x._ptr,C=[],N=m-1;N>=0;N--){var _=h[N][0]||0;if(s(_,0))C[N]=[0];else{for(var E=0,T=[],k=[],D=w[N],R=w[N+1],K=R-1;K>=D;K--){var M=v[K];M===N?E=b[K]:M<N&&(T.push(b[K]),k.push(M))}if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var j=n(_,E),X=0,Z=k.length;X<Z;X++){var Y=k[X];h[Y]=[i(h[Y][0],o(j,T[X]))]}C[N]=[j]}}return new a({data:C,size:[g,1]})}});p();var DL="usolveAll",Wae=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Xy=Ee(DL,Wae,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:o,subtract:i,equalScalar:s,DenseMatrix:a}=r,l=v4({DenseMatrix:a});return e(DL,{"SparseMatrix, Array | Matrix":function(f,h){return c(f,h)},"DenseMatrix, Array | Matrix":function(f,h){return u(f,h)},"Array, Array | Matrix":function(f,h){var g=t(f),m=u(g,h);return m.map(b=>b.valueOf())}});function u(x,f){for(var h=[l(x,f,!0)._data.map(k=>k[0])],g=x._data,m=x._size[0],b=x._size[1],v=b-1;v>=0;v--)for(var w=h.length,C=0;C<w;C++){var N=h[C];if(s(g[v][v],0))if(s(N[v],0)){if(C===0){var E=[...N];E[v]=1;for(var T=v-1;T>=0;T--)E[T]=i(E[T],g[T][v]);h.push(E)}}else{if(C===0)return[];h.splice(C,1),C-=1,w-=1}else{N[v]=n(N[v],g[v][v]);for(var _=v-1;_>=0;_--)N[_]=i(N[_],o(N[v],g[_][v]))}}return h.map(k=>new a({data:k.map(D=>[D]),size:[m,1]}))}function c(x,f){for(var h=[l(x,f,!0)._data.map(ae=>ae[0])],g=x._size[0],m=x._size[1],b=x._values,v=x._index,w=x._ptr,C=m-1;C>=0;C--)for(var N=h.length,_=0;_<N;_++){for(var E=h[_],T=[],k=[],D=w[C],R=w[C+1],K=0,M=R-1;M>=D;M--){var j=v[M];j===C?K=b[M]:j<C&&(T.push(b[M]),k.push(j))}if(s(K,0))if(s(E[C],0)){if(_===0){var ce=[...E];ce[C]=1;for(var Q=0,J=k.length;Q<J;Q++){var te=k[Q];ce[te]=i(ce[te],T[Q])}h.push(ce)}}else{if(_===0)return[];h.splice(_,1),_-=1,N-=1}else{E[C]=n(E[C],K);for(var X=0,Z=k.length;X<Z;X++){var Y=k[X];E[Y]=i(E[Y],o(E[C],T[X]))}}}return h.map(ae=>new a({data:ae.map(ge=>[ge]),size:[g,1]}))}});p();var w4="equal",qae=["typed","matrix","equalScalar","DenseMatrix"],Yy=Ee(w4,qae,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:o}=r,i=Mi({typed:e}),s=Ma({typed:e,DenseMatrix:o}),a=Fa({typed:e,DenseMatrix:o}),l=Go({typed:e}),u=Gn({typed:e});return e(w4,{"any, any":function(x,f){return x===null?f===null:f===null?x===null:x===void 0?f===void 0:f===void 0?x===void 0:n(x,f)},"SparseMatrix, SparseMatrix":function(x,f){return s(x,f,n)},"SparseMatrix, DenseMatrix":function(x,f){return i(f,x,n,!0)},"DenseMatrix, SparseMatrix":function(x,f){return i(x,f,n,!1)},"DenseMatrix, DenseMatrix":function(x,f){return l(x,f,n)},"Array, Array":function(x,f){return this(t(x),t(f)).valueOf()},"Array, Matrix":function(x,f){return this(t(x),f)},"Matrix, Array":function(x,f){return this(x,t(f))},"SparseMatrix, any":function(x,f){return a(x,f,n,!1)},"DenseMatrix, any":function(x,f){return u(x,f,n,!1)},"any, SparseMatrix":function(x,f){return a(f,x,n,!0)},"any, DenseMatrix":function(x,f){return u(f,x,n,!0)},"Array, any":function(x,f){return u(t(x),f,n,!1).valueOf()},"any, Array":function(x,f){return u(t(f),x,n,!0).valueOf()}})}),Lzt=Ee(w4,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(w4,{"any, any":function(o,i){return o===null?i===null:i===null?o===null:o===void 0?i===void 0:i===void 0?o===void 0:t(o,i)}})});p();var RL="smaller",Hae=["typed","config","matrix","DenseMatrix"],Zy=Ee(RL,Hae,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:o}=r,i=Mi({typed:e}),s=Ma({typed:e,DenseMatrix:o}),a=Fa({typed:e,DenseMatrix:o}),l=Go({typed:e}),u=Gn({typed:e});return e(RL,{"boolean, boolean":function(x,f){return x<f},"number, number":function(x,f){return x<f&&!Vo(x,f,t.epsilon)},"BigNumber, BigNumber":function(x,f){return x.lt(f)&&!Oa(x,f,t.epsilon)},"Fraction, Fraction":function(x,f){return x.compare(f)===-1},"Complex, Complex":function(x,f){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,f){if(!x.equalBase(f))throw new Error("Cannot compare units with different base");return this(x.value,f.value)},"SparseMatrix, SparseMatrix":function(x,f){return s(x,f,this)},"SparseMatrix, DenseMatrix":function(x,f){return i(f,x,this,!0)},"DenseMatrix, SparseMatrix":function(x,f){return i(x,f,this,!1)},"DenseMatrix, DenseMatrix":function(x,f){return l(x,f,this)},"Array, Array":function(x,f){return this(n(x),n(f)).valueOf()},"Array, Matrix":function(x,f){return this(n(x),f)},"Matrix, Array":function(x,f){return this(x,n(f))},"SparseMatrix, any":function(x,f){return a(x,f,this,!1)},"DenseMatrix, any":function(x,f){return u(x,f,this,!1)},"any, SparseMatrix":function(x,f){return a(f,x,this,!0)},"any, DenseMatrix":function(x,f){return u(f,x,this,!0)},"Array, any":function(x,f){return u(n(x),f,this,!1).valueOf()},"any, Array":function(x,f){return u(n(f),x,this,!0).valueOf()}})});p();var $L="smallerEq",Kae=["typed","config","matrix","DenseMatrix"],Jy=Ee($L,Kae,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:o}=r,i=Mi({typed:e}),s=Ma({typed:e,DenseMatrix:o}),a=Fa({typed:e,DenseMatrix:o}),l=Go({typed:e}),u=Gn({typed:e});return e($L,{"boolean, boolean":function(x,f){return x<=f},"number, number":function(x,f){return x<=f||Vo(x,f,t.epsilon)},"BigNumber, BigNumber":function(x,f){return x.lte(f)||Oa(x,f,t.epsilon)},"Fraction, Fraction":function(x,f){return x.compare(f)!==1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,f){if(!x.equalBase(f))throw new Error("Cannot compare units with different base");return this(x.value,f.value)},"SparseMatrix, SparseMatrix":function(x,f){return s(x,f,this)},"SparseMatrix, DenseMatrix":function(x,f){return i(f,x,this,!0)},"DenseMatrix, SparseMatrix":function(x,f){return i(x,f,this,!1)},"DenseMatrix, DenseMatrix":function(x,f){return l(x,f,this)},"Array, Array":function(x,f){return this(n(x),n(f)).valueOf()},"Array, Matrix":function(x,f){return this(n(x),f)},"Matrix, Array":function(x,f){return this(x,n(f))},"SparseMatrix, any":function(x,f){return a(x,f,this,!1)},"DenseMatrix, any":function(x,f){return u(x,f,this,!1)},"any, SparseMatrix":function(x,f){return a(f,x,this,!0)},"any, DenseMatrix":function(x,f){return u(f,x,this,!0)},"Array, any":function(x,f){return u(n(x),f,this,!1).valueOf()},"any, Array":function(x,f){return u(n(f),x,this,!0).valueOf()}})});p();var OL="larger",jae=["typed","config","matrix","DenseMatrix"],Qy=Ee(OL,jae,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:o}=r,i=Mi({typed:e}),s=Ma({typed:e,DenseMatrix:o}),a=Fa({typed:e,DenseMatrix:o}),l=Go({typed:e}),u=Gn({typed:e});return e(OL,{"boolean, boolean":function(x,f){return x>f},"number, number":function(x,f){return x>f&&!Vo(x,f,t.epsilon)},"BigNumber, BigNumber":function(x,f){return x.gt(f)&&!Oa(x,f,t.epsilon)},"Fraction, Fraction":function(x,f){return x.compare(f)===1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,f){if(!x.equalBase(f))throw new Error("Cannot compare units with different base");return this(x.value,f.value)},"SparseMatrix, SparseMatrix":function(x,f){return s(x,f,this)},"SparseMatrix, DenseMatrix":function(x,f){return i(f,x,this,!0)},"DenseMatrix, SparseMatrix":function(x,f){return i(x,f,this,!1)},"DenseMatrix, DenseMatrix":function(x,f){return l(x,f,this)},"Array, Array":function(x,f){return this(n(x),n(f)).valueOf()},"Array, Matrix":function(x,f){return this(n(x),f)},"Matrix, Array":function(x,f){return this(x,n(f))},"SparseMatrix, any":function(x,f){return a(x,f,this,!1)},"DenseMatrix, any":function(x,f){return u(x,f,this,!1)},"any, SparseMatrix":function(x,f){return a(f,x,this,!0)},"any, DenseMatrix":function(x,f){return u(f,x,this,!0)},"Array, any":function(x,f){return u(n(x),f,this,!1).valueOf()},"any, Array":function(x,f){return u(n(f),x,this,!0).valueOf()}})});p();var FL="largerEq",Xae=["typed","config","matrix","DenseMatrix"],eb=Ee(FL,Xae,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:o}=r,i=Mi({typed:e}),s=Ma({typed:e,DenseMatrix:o}),a=Fa({typed:e,DenseMatrix:o}),l=Go({typed:e}),u=Gn({typed:e});return e(FL,{"boolean, boolean":function(x,f){return x>=f},"number, number":function(x,f){return x>=f||Vo(x,f,t.epsilon)},"BigNumber, BigNumber":function(x,f){return x.gte(f)||Oa(x,f,t.epsilon)},"Fraction, Fraction":function(x,f){return x.compare(f)!==-1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,f){if(!x.equalBase(f))throw new Error("Cannot compare units with different base");return this(x.value,f.value)},"SparseMatrix, SparseMatrix":function(x,f){return s(x,f,this)},"SparseMatrix, DenseMatrix":function(x,f){return i(f,x,this,!0)},"DenseMatrix, SparseMatrix":function(x,f){return i(x,f,this,!1)},"DenseMatrix, DenseMatrix":function(x,f){return l(x,f,this)},"Array, Array":function(x,f){return this(n(x),n(f)).valueOf()},"Array, Matrix":function(x,f){return this(n(x),f)},"Matrix, Array":function(x,f){return this(x,n(f))},"SparseMatrix, any":function(x,f){return a(x,f,this,!1)},"DenseMatrix, any":function(x,f){return u(x,f,this,!1)},"any, SparseMatrix":function(x,f){return a(f,x,this,!0)},"any, DenseMatrix":function(x,f){return u(f,x,this,!0)},"Array, any":function(x,f){return u(n(x),f,this,!1).valueOf()},"any, Array":function(x,f){return u(n(f),x,this,!0).valueOf()}})});p();var Yae="ImmutableDenseMatrix",Zae=["smaller","DenseMatrix"],tb=Ee(Yae,Zae,r=>{var{smaller:e,DenseMatrix:t}=r;function n(o,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!ko(i))throw new Error("Invalid datatype: "+i);if(er(o)||mr(o)){var s=new t(o,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(o&&mr(o.data)&&mr(o.size))this._data=o.data,this._size=o.size,this._datatype=o.datatype,this._min=typeof o.min<"u"?o.min:null,this._max=typeof o.max<"u"?o.max:null;else{if(o)throw new TypeError("Unsupported type of data ("+eo(o)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(o){switch(arguments.length){case 1:{var i=t.prototype.subset.call(this,o);return er(i)?new n({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:St(this._data),size:St(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(o){return new n(o)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var o=null;this.forEach(function(i){(o===null||e(i,o))&&(o=i)}),this._min=o!==null?o:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var o=null;this.forEach(function(i){(o===null||e(o,i))&&(o=i)}),this._max=o!==null?o:void 0}return this._max},n},{isClass:!0});p();var Jae="Index",Qae=["ImmutableDenseMatrix"],rb=Ee(Jae,Qae,r=>{var{ImmutableDenseMatrix:e}=r;function t(o){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,s=arguments.length;i<s;i++){var a=arguments[i];if(_h(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||er(a)){var l=n(a.valueOf());this._dimensions.push(l);var u=l.size();(u.length!==1||u[0]!==1)&&(this._isScalar=!1)}else if(typeof a=="number")this._dimensions.push(n([a]));else if(typeof a=="string")this._dimensions.push(a);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range")}}t.prototype.type="Index",t.prototype.isIndex=!0;function n(o){for(var i=0,s=o.length;i<s;i++)if(typeof o[i]!="number"||!Ot(o[i]))throw new TypeError("Index parameters must be positive integer numbers");return new e(o)}return t.prototype.clone=function(){var o=new t;return o._dimensions=St(this._dimensions),o._isScalar=this._isScalar,o},t.create=function(o){var i=new t;return t.apply(i,o),i},t.prototype.size=function(){for(var o=[],i=0,s=this._dimensions.length;i<s;i++){var a=this._dimensions[i];o[i]=typeof a=="string"?1:a.size()[0]}return o},t.prototype.max=function(){for(var o=[],i=0,s=this._dimensions.length;i<s;i++){var a=this._dimensions[i];o[i]=typeof a=="string"?a:a.max()}return o},t.prototype.min=function(){for(var o=[],i=0,s=this._dimensions.length;i<s;i++){var a=this._dimensions[i];o[i]=typeof a=="string"?a:a.min()}return o},t.prototype.forEach=function(o){for(var i=0,s=this._dimensions.length;i<s;i++)o(this._dimensions[i],i,this)},t.prototype.dimension=function(o){return this._dimensions[o]||null},t.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},t.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},t.prototype.isScalar=function(){return this._isScalar},t.prototype.toArray=function(){for(var o=[],i=0,s=this._dimensions.length;i<s;i++){var a=this._dimensions[i];o.push(typeof a=="string"?a:a.toArray())}return o},t.prototype.valueOf=t.prototype.toArray,t.prototype.toString=function(){for(var o=[],i=0,s=this._dimensions.length;i<s;i++){var a=this._dimensions[i];typeof a=="string"?o.push(JSON.stringify(a)):o.push(a.toString())}return"["+o.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},t.fromJSON=function(o){return t.create(o.dimensions)},t},{isClass:!0});p();var e0e="FibonacciHeap",t0e=["smaller","larger"],nb=Ee(e0e,t0e,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}o.prototype.type="FibonacciHeap",o.prototype.isFibonacciHeap=!0,o.prototype.insert=function(c,x){var f={key:c,value:x,degree:0};if(this._minimum){var h=this._minimum;f.left=h,f.right=h.right,h.right=f,f.right.left=f,e(c,h.key)&&(this._minimum=f)}else f.left=f,f.right=f,this._minimum=f;return this._size++,f},o.prototype.size=function(){return this._size},o.prototype.clear=function(){this._minimum=null,this._size=0},o.prototype.isEmpty=function(){return this._size===0},o.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var x=this._minimum,f=c.degree,h=c.child;f>0;){var g=h.right;h.left.right=h.right,h.right.left=h.left,h.left=x,h.right=x.right,x.right=h,h.right.left=h,h.parent=null,h=g,f--}return c.left.right=c.right,c.right.left=c.left,c===c.right?x=null:(x=c.right,x=u(x,this._size)),this._size--,this._minimum=x,c},o.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,x,f){x.key=f;var h=x.parent;return h&&e(x.key,h.key)&&(s(c,x,h),a(c,h)),e(x.key,c.key)&&(c=x),c}function s(c,x,f){x.left.right=x.right,x.right.left=x.left,f.degree--,f.child===x&&(f.child=x.right),f.degree===0&&(f.child=null),x.left=c,x.right=c.right,c.right=x,x.right.left=x,x.parent=null,x.mark=!1}function a(c,x){var f=x.parent;!f||(x.mark?(s(c,x,f),a(f)):x.mark=!0)}var l=function(x,f){x.left.right=x.right,x.right.left=x.left,x.parent=f,f.child?(x.left=f.child,x.right=f.child.right,f.child.right=x,x.right.left=x):(f.child=x,x.right=x,x.left=x),f.degree++,x.mark=!1};function u(c,x){var f=Math.floor(Math.log(x)*n)+1,h=new Array(f),g=0,m=c;if(m)for(g++,m=m.right;m!==c;)g++,m=m.right;for(var b;g>0;){for(var v=m.degree,w=m.right;b=h[v],!!b;){if(t(m.key,b.key)){var C=b;b=m,m=C}l(b,m),h[v]=null,v++}h[v]=m,m=w,g--}c=null;for(var N=0;N<f;N++)b=h[N],b&&(c?(b.left.right=b.right,b.right.left=b.left,b.left=c,b.right=c.right,c.right=b,b.right.left=b,e(b.key,c.key)&&(c=b)):c=b);return c}return o},{isClass:!0});p();var r0e="Spa",n0e=["addScalar","equalScalar","FibonacciHeap"],ob=Ee(r0e,n0e,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return o.prototype.type="Spa",o.prototype.isSpa=!0,o.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var a=this._heap.insert(i,s);this._values[i]=a}},o.prototype.get=function(i){var s=this._values[i];return s?s.value:0},o.prototype.accumulate=function(i,s){var a=this._values[i];a?a.value=e(a.value,s):(a=this._heap.insert(i,s),this._values[i]=a)},o.prototype.forEach=function(i,s,a){var l=this._heap,u=this._values,c=[],x=l.extractMinimum();for(x&&c.push(x);x&&x.key<=s;)x.key>=i&&(t(x.value,0)||a(x.key,x.value,this)),x=l.extractMinimum(),x&&c.push(x);for(var f=0;f<c.length;f++){var h=c[f];x=l.insert(h.key,h.value),u[x.key]=x}},o.prototype.swap=function(i,s){var a=this._values[i],l=this._values[s];if(!a&&l)a=this._heap.insert(i,l.value),this._heap.remove(l),this._values[i]=a,this._values[s]=void 0;else if(a&&!l)l=this._heap.insert(s,a.value),this._heap.remove(a),this._values[s]=l,this._values[i]=void 0;else if(a&&l){var u=a.value;a.value=l.value,l.value=u}},o},{isClass:!0});p();var o0e="atan",i0e=["typed"],ib=Ee(o0e,i0e,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()},"Array | Matrix":function(n){return vr(n,this,!0)}})});p();var ML="cos",s0e=["typed"],sb=Ee(ML,s0e,r=>{var{typed:e}=r;return e(ML,{number:Math.cos,Complex:function(n){return n.cos()},BigNumber:function(n){return n.cos()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(n.value)},"Array | Matrix":function(n){return vr(n,this)}})});p();var zL="sin",a0e=["typed"],ab=Ee(zL,a0e,r=>{var{typed:e}=r;return e(zL,{number:Math.sin,Complex:function(n){return n.sin()},BigNumber:function(n){return n.sin()},Unit:function(n){if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(n.value)},"Array | Matrix":function(n){return vr(n,this,!0)}})});p();var LL="add",l0e=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],lb=Ee(LL,l0e,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:o,DenseMatrix:i,SparseMatrix:s}=r,a=h4({typed:e}),l=cL({typed:e,equalScalar:o}),u=d4({typed:e,DenseMatrix:i}),c=Go({typed:e}),x=Gn({typed:e});return e(LL,Dx({"DenseMatrix, DenseMatrix":function(h,g){return c(h,g,n)},"DenseMatrix, SparseMatrix":function(h,g){return a(h,g,n,!1)},"SparseMatrix, DenseMatrix":function(h,g){return a(g,h,n,!0)},"SparseMatrix, SparseMatrix":function(h,g){return l(h,g,n)},"Array, Array":function(h,g){return this(t(h),t(g)).valueOf()},"Array, Matrix":function(h,g){return this(t(h),g)},"Matrix, Array":function(h,g){return this(h,t(g))},"DenseMatrix, any":function(h,g){return x(h,g,n,!1)},"SparseMatrix, any":function(h,g){return u(h,g,n,!1)},"any, DenseMatrix":function(h,g){return x(g,h,n,!0)},"any, SparseMatrix":function(h,g){return u(g,h,n,!0)},"Array, any":function(h,g){return x(t(h),g,n,!1).valueOf()},"any, Array":function(h,g){return x(t(g),h,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(h,g,m){for(var b=this(h,g),v=0;v<m.length;v++)b=this(b,m[v]);return b}},n.signatures))});p();var PL="norm",u0e=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],ub=Ee(PL,u0e,r=>{var{typed:e,abs:t,add:n,pow:o,conj:i,sqrt:s,multiply:a,equalScalar:l,larger:u,smaller:c,matrix:x,ctranspose:f,eigs:h}=r;return e(PL,{number:Math.abs,Complex:function(k){return k.abs()},BigNumber:function(k){return k.abs()},boolean:function(k){return Math.abs(k)},Array:function(k){return E(x(k),2)},Matrix:function(k){return E(k,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(k){return this(k)},"Array, number | BigNumber | string":function(k,D){return E(x(k),D)},"Matrix, number | BigNumber | string":function(k,D){return E(k,D)}});function g(T){var k=0;return T.forEach(function(D){var R=t(D);u(R,k)&&(k=R)},!0),k}function m(T){var k;return T.forEach(function(D){var R=t(D);(!k||c(R,k))&&(k=R)},!0),k||0}function b(T,k){if(k===Number.POSITIVE_INFINITY||k==="inf")return g(T);if(k===Number.NEGATIVE_INFINITY||k==="-inf")return m(T);if(k==="fro")return E(T,2);if(typeof k=="number"&&!isNaN(k)){if(!l(k,0)){var D=0;return T.forEach(function(R){D=n(o(t(R),k),D)},!0),o(D,1/k)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(T){var k=0;return T.forEach(function(D,R){k=n(k,a(D,i(D)))}),t(s(k))}function w(T){var k=[],D=0;return T.forEach(function(R,K){var M=K[1],j=n(k[M]||0,t(R));u(j,D)&&(D=j),k[M]=j},!0),D}function C(T){var k=T.size();if(k[0]!==k[1])throw new RangeError("Invalid matrix dimensions");var D=f(T),R=a(D,T),K=h(R).values.toArray(),M=K[K.length-1];return t(s(M))}function N(T){var k=[],D=0;return T.forEach(function(R,K){var M=K[0],j=n(k[M]||0,t(R));u(j,D)&&(D=j),k[M]=j},!0),D}function _(T,k){if(k===1)return w(T);if(k===Number.POSITIVE_INFINITY||k==="inf")return N(T);if(k==="fro")return v(T);if(k===2)return C(T);throw new Error("Unsupported parameter value "+k)}function E(T,k){var D=T.size();if(D.length===1)return b(T,k);if(D.length===2){if(D[0]&&D[1])return _(T,k);throw new RangeError("Invalid matrix dimensions")}}});p();var BL="dot",c0e=["typed","addScalar","multiplyScalar","conj","size"],cb=Ee(BL,c0e,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:o,size:i}=r;return e(BL,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":l});function s(c,x){var f=u(c),h=u(x),g,m;if(f.length===1)g=f[0];else if(f.length===2&&f[1]===1)g=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(g!==m)throw new RangeError("Vectors must have equal length ("+g+" != "+m+")");if(g===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return g}function a(c,x){var f=s(c,x),h=er(c)?c._data:c,g=er(c)?c._datatype:void 0,m=er(x)?x._data:x,b=er(x)?x._datatype:void 0,v=u(c).length===2,w=u(x).length===2,C=t,N=n;if(g&&b&&g===b&&typeof g=="string"){var _=g;C=e.find(t,[_,_]),N=e.find(n,[_,_])}if(!v&&!w){for(var E=N(o(h[0]),m[0]),T=1;T<f;T++)E=C(E,N(o(h[T]),m[T]));return E}if(!v&&w){for(var k=N(o(h[0]),m[0][0]),D=1;D<f;D++)k=C(k,N(o(h[D]),m[D][0]));return k}if(v&&!w){for(var R=N(o(h[0][0]),m[0]),K=1;K<f;K++)R=C(R,N(o(h[K][0]),m[K]));return R}if(v&&w){for(var M=N(o(h[0][0]),m[0][0]),j=1;j<f;j++)M=C(M,N(o(h[j][0]),m[j][0]));return M}}function l(c,x){s(c,x);for(var f=c._index,h=c._values,g=x._index,m=x._values,b=0,v=t,w=n,C=0,N=0;C<f.length&&N<g.length;){var _=f[C],E=g[N];if(_<E){C++;continue}if(_>E){N++;continue}_===E&&(b=v(b,w(h[C],m[N])),C++,N++)}return b}function u(c){return er(c)?c.size():i(c)}});p();var UL="lup",p0e=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],pb=Ee(UL,p0e,r=>{var{typed:e,matrix:t,abs:n,addScalar:o,divideScalar:i,multiplyScalar:s,subtract:a,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:x,SparseMatrix:f,Spa:h}=r;return e(UL,{DenseMatrix:function(v){return g(v)},SparseMatrix:function(v){return m(v)},Array:function(v){var w=t(v),C=g(w);return{L:C.L.valueOf(),U:C.U.valueOf(),p:C.p}}});function g(b){var v=b._size[0],w=b._size[1],C=Math.min(v,w),N=St(b._data),_=[],E=[v,C],T=[],k=[C,w],D,R,K,M=[];for(D=0;D<v;D++)M[D]=D;for(R=0;R<w;R++){if(R>0)for(D=0;D<v;D++){var j=Math.min(D,R),X=0;for(K=0;K<j;K++)X=o(X,s(N[D][K],N[K][R]));N[D][R]=a(N[D][R],X)}var Z=R,Y=0,ce=0;for(D=R;D<v;D++){var Q=N[D][R],J=n(Q);l(J,Y)&&(Z=D,Y=J,ce=Q)}if(R!==Z&&(M[R]=[M[Z],M[Z]=M[R]][0],x._swapRows(R,Z,N)),R<v)for(D=R+1;D<v;D++){var te=N[D][R];u(te,0)||(N[D][R]=i(N[D][R],ce))}}for(R=0;R<w;R++)for(D=0;D<v;D++){if(R===0&&(D<w&&(T[D]=[]),_[D]=[]),D<R){D<w&&(T[D][R]=N[D][R]),R<v&&(_[D][R]=0);continue}if(D===R){D<w&&(T[D][R]=N[D][R]),R<v&&(_[D][R]=1);continue}D<w&&(T[D][R]=0),R<v&&(_[D][R]=N[D][R])}var ae=new x({data:_,size:E}),ge=new x({data:T,size:k}),le=[];for(D=0,C=M.length;D<C;D++)le[M[D]]=D;return{L:ae,U:ge,p:le,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(b){var v=b._size[0],w=b._size[1],C=Math.min(v,w),N=b._values,_=b._index,E=b._ptr,T=[],k=[],D=[],R=[v,C],K=[],M=[],j=[],X=[C,w],Z,Y,ce,Q=[],J=[];for(Z=0;Z<v;Z++)Q[Z]=Z,J[Z]=Z;var te=function(le,xe){var me=J[le],ve=J[xe];Q[me]=xe,Q[ve]=le,J[le]=ve,J[xe]=me},ae=function(){var le=new h;Y<v&&(D.push(T.length),T.push(1),k.push(Y)),j.push(K.length);var xe=E[Y],me=E[Y+1];for(ce=xe;ce<me;ce++)Z=_[ce],le.set(Q[Z],N[ce]);Y>0&&le.forEach(0,Y-1,function(Ae,_e){f._forEachRow(Ae,T,k,D,function(Ke,Xe){Ke>Ae&&le.accumulate(Ke,c(s(Xe,_e)))})});var ve=Y,Te=le.get(Y),De=n(Te);le.forEach(Y+1,v-1,function(Ae,_e){var Ke=n(_e);l(Ke,De)&&(ve=Ae,De=Ke,Te=_e)}),Y!==ve&&(f._swapRows(Y,ve,R[1],T,k,D),f._swapRows(Y,ve,X[1],K,M,j),le.swap(Y,ve),te(Y,ve)),le.forEach(0,v-1,function(Ae,_e){Ae<=Y?(K.push(_e),M.push(Ae)):(_e=i(_e,Te),u(_e,0)||(T.push(_e),k.push(Ae)))})};for(Y=0;Y<w;Y++)ae();return j.push(K.length),D.push(T.length),{L:new f({values:T,index:k,ptr:D,size:R}),U:new f({values:K,index:M,ptr:j,size:X}),p:Q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});p();var VL="qr",x0e=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],xb=Ee(VL,x0e,r=>{var{typed:e,matrix:t,zeros:n,identity:o,isZero:i,equal:s,sign:a,sqrt:l,conj:u,unaryMinus:c,addScalar:x,divideScalar:f,multiplyScalar:h,subtract:g,complex:m}=r;return lc(e(VL,{DenseMatrix:function(N){return v(N)},SparseMatrix:function(N){return w(N)},Array:function(N){var _=t(N),E=v(_);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:b});function b(C){var N=C._size[0],_=C._size[1],E=o([N],"dense"),T=E._data,k=C.clone(),D=k._data,R,K,M,j=n([N],"");for(M=0;M<Math.min(_,N);++M){var X=D[M][M],Z=c(s(X,0)?1:a(X)),Y=u(Z),ce=0;for(R=M;R<N;R++)ce=x(ce,h(D[R][M],u(D[R][M])));var Q=h(Z,l(ce));if(!i(Q)){var J=g(X,Q);for(j[M]=1,R=M+1;R<N;R++)j[R]=f(D[R][M],J);var te=c(u(f(J,Q))),ae=void 0;for(K=M;K<_;K++){for(ae=0,R=M;R<N;R++)ae=x(ae,h(u(j[R]),D[R][K]));for(ae=h(ae,te),R=M;R<N;R++)D[R][K]=h(g(D[R][K],h(j[R],ae)),Y)}for(R=0;R<N;R++){for(ae=0,K=M;K<N;K++)ae=x(ae,h(T[R][K],j[K]));for(ae=h(ae,te),K=M;K<N;++K)T[R][K]=f(g(T[R][K],h(ae,u(j[K]))),Y)}}}return{Q:E,R:k,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(C){var N=b(C),_=N.R._data;if(C._data.length>0)for(var E=_[0][0].type==="Complex"?m(0):0,T=0;T<_.length;++T)for(var k=0;k<T&&k<(_[0]||[]).length;++k)_[T][k]=E;return N}function w(C){throw new Error("qr not implemented for sparse matrices yet")}});p();var GL="det",f0e=["typed","matrix","subtract","multiply","unaryMinus","lup"],fb=Ee(GL,f0e,r=>{var{typed:e,matrix:t,subtract:n,multiply:o,unaryMinus:i,lup:s}=r;return e(GL,{any:function(u){return St(u)},"Array | Matrix":function(u){var c;switch(er(u)?c=u.size():Array.isArray(u)?(u=t(u),c=u.size()):c=[],c.length){case 0:return St(u);case 1:if(c[0]===1)return St(u.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+pr(c)+")");case 2:{var x=c[0],f=c[1];if(x===f)return a(u.clone().valueOf(),x,f);throw new RangeError("Matrix must be square (size: "+pr(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pr(c)+")")}}});function a(l,u,c){if(u===1)return St(l[0][0]);if(u===2)return n(o(l[0][0],l[1][1]),o(l[1][0],l[0][1]));for(var x=s(l),f=x.U[0][0],h=1;h<u;h++)f=o(f,x.U[h][h]);for(var g=0,m=0,b=[];;){for(;b[m];)m++;if(m>=u)break;for(var v=m,w=0;!b[x.p[v]];)b[x.p[v]]=!0,v=x.p[v],w++;w%2===0&&g++}return g%2===0?f:i(f)}});p();var WL="inv",m0e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],mb=Ee(WL,m0e,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:o,multiply:i,unaryMinus:s,det:a,identity:l,abs:u}=r;return e(WL,{"Array | Matrix":function(f){var h=er(f)?f.size():Ir(f);switch(h.length){case 1:if(h[0]===1)return er(f)?t([n(1,f.valueOf()[0])]):[n(1,f[0])];throw new RangeError("Matrix must be square (size: "+pr(h)+")");case 2:{var g=h[0],m=h[1];if(g===m)return er(f)?t(c(f.valueOf(),g,m),f.storage()):c(f,g,m);throw new RangeError("Matrix must be square (size: "+pr(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pr(h)+")")}},any:function(f){return n(1,f)}});function c(x,f,h){var g,m,b,v,w;if(f===1){if(v=x[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(f===2){var C=a(x);if(C===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(x[1][1],C),n(s(x[0][1]),C)],[n(s(x[1][0]),C),n(x[0][0],C)]]}else{var N=x.concat();for(g=0;g<f;g++)N[g]=N[g].concat();for(var _=l(f).valueOf(),E=0;E<h;E++){var T=u(N[E][E]),k=E;for(g=E+1;g<f;)u(N[g][E])>T&&(T=u(N[g][E]),k=g),g++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");g=k,g!==E&&(w=N[E],N[E]=N[g],N[g]=w,w=_[E],_[E]=_[g],_[g]=w);var D=N[E],R=_[E];for(g=0;g<f;g++){var K=N[g],M=_[g];if(g!==E){if(K[E]!==0){for(b=n(s(K[E]),D[E]),m=E;m<h;m++)K[m]=o(K[m],i(b,D[m]));for(m=0;m<h;m++)M[m]=o(M[m],i(b,R[m]))}}else{for(b=D[E],m=E;m<h;m++)K[m]=n(K[m],b);for(m=0;m<h;m++)M[m]=n(M[m],b)}}}return _}}});p();p();function qL(r){var{addScalar:e,subtract:t,flatten:n,multiply:o,multiplyScalar:i,divideScalar:s,sqrt:a,abs:l,bignumber:u,diag:c,inv:x,qr:f,usolve:h,usolveAll:g,equal:m,complex:b,larger:v,smaller:w,matrixFromColumns:C,dot:N}=r;function _(te,ae,ge,le,xe){xe===void 0&&(xe=!0);var me=E(te,ae,ge,le,xe);T(te,ae,ge,le,xe,me);var{values:ve,C:Te}=k(te,ae,ge,le,xe);Te=o(x(me),Te);var De;return xe&&(De=D(te,ae,Te,ve,ge,le),De=C(...De)),{values:ve,vectors:De}}function E(te,ae,ge,le,xe){var me=le==="BigNumber",ve=le==="Complex",Te=me?u(0):ve?b(0):0,De=me?u(1):ve?b(1):1,Ae=me?u(10):2,_e=i(Ae,Ae),Ke;xe&&(Ke=Array(ae).fill(De));for(var Xe=!1;!Xe;){Xe=!0;for(var qe=0;qe<ae;qe++){for(var tt=Te,et=Te,rt=0;rt<ae;rt++)if(qe!==rt){var oe=l(te[qe][rt]);tt=e(tt,oe),et=e(et,oe)}if(!m(tt,0)&&!m(et,0)){for(var he=De,Ne=tt,ye=s(et,Ae),Ue=i(et,Ae);w(Ne,ye);)Ne=i(Ne,_e),he=i(he,Ae);for(;v(Ne,Ue);)Ne=s(Ne,_e),he=s(he,Ae);var Ze=w(s(e(Ne,et),he),i(e(tt,et),.95));if(Ze){Xe=!1;for(var ot=s(1,he),je=0;je<ae;je++)qe!==je&&(te[qe][je]=i(te[qe][je],he),te[je][qe]=i(te[je][qe],ot));xe&&(Ke[qe]=i(Ke[qe],he))}}}}return c(Ke)}function T(te,ae,ge,le,xe,me){var ve=le==="BigNumber",Te=le==="Complex",De=ve?u(0):Te?b(0):0;ve&&(ge=u(ge));for(var Ae=0;Ae<ae-2;Ae++){for(var _e=0,Ke=De,Xe=Ae+1;Xe<ae;Xe++){var qe=te[Xe][Ae];w(l(Ke),l(qe))&&(Ke=qe,_e=Xe)}if(!w(l(Ke),ge)){if(_e!==Ae+1){var tt=te[_e];te[_e]=te[Ae+1],te[Ae+1]=tt;for(var et=0;et<ae;et++){var rt=te[et][_e];te[et][_e]=te[et][Ae+1],te[et][Ae+1]=rt}if(xe){var oe=me[_e];me[_e]=me[Ae+1],me[Ae+1]=oe}}for(var he=Ae+2;he<ae;he++){var Ne=s(te[he][Ae],Ke);if(Ne!==0){for(var ye=0;ye<ae;ye++)te[he][ye]=t(te[he][ye],i(Ne,te[Ae+1][ye]));for(var Ue=0;Ue<ae;Ue++)te[Ue][Ae+1]=e(te[Ue][Ae+1],i(Ne,te[Ue][he]));if(xe)for(var Ze=0;Ze<ae;Ze++)me[he][Ze]=t(me[he][Ze],i(Ne,me[Ae+1][Ze]))}}}}return me}function k(te,ae,ge,le,xe){var me=le==="BigNumber",ve=le==="Complex",Te=me?u(1):ve?b(1):1;me&&(ge=u(ge));for(var De=St(te),Ae=[],_e=ae,Ke=[],Xe=xe?c(Array(ae).fill(Te)):void 0,qe=xe?c(Array(_e).fill(Te)):void 0,tt=0;tt<=100;){tt+=1;for(var et=0,rt=0;rt<_e;rt++)De[rt][rt]=t(De[rt][rt],et);var{Q:oe,R:he}=f(De);De=o(he,oe);for(var Ne=0;Ne<_e;Ne++)De[Ne][Ne]=e(De[Ne][Ne],et);if(xe&&(qe=o(qe,oe)),_e===1||w(l(De[_e-1][_e-2]),ge)){tt=0,Ae.push(De[_e-1][_e-1]),xe&&(Ke.unshift([[1]]),M(qe,ae),Xe=o(Xe,qe),_e>1&&(qe=c(Array(_e-1).fill(Te)))),_e-=1,De.pop();for(var ye=0;ye<_e;ye++)De[ye].pop()}else if(_e===2||w(l(De[_e-2][_e-3]),ge)){tt=0;var Ue=R(De[_e-2][_e-2],De[_e-2][_e-1],De[_e-1][_e-2],De[_e-1][_e-1]);Ae.push(...Ue),xe&&(Ke.unshift(K(De[_e-2][_e-2],De[_e-2][_e-1],De[_e-1][_e-2],De[_e-1][_e-1],Ue[0],Ue[1],ge,le)),M(qe,ae),Xe=o(Xe,qe),_e>2&&(qe=c(Array(_e-2).fill(Te)))),_e-=2,De.pop(),De.pop();for(var Ze=0;Ze<_e;Ze++)De[Ze].pop(),De[Ze].pop()}if(_e===0)break}if(Ae.sort((Je,ut)=>+t(l(Je),l(ut))),tt>100){var ot=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Ae.join(", "));throw ot.values=Ae,ot.vectors=[],ot}var je=xe?o(Xe,j(Ke,ae)):void 0;return{values:Ae,C:je}}function D(te,ae,ge,le,xe,me){var ve=x(ge),Te=o(ve,te,ge),De=me==="BigNumber",Ae=me==="Complex",_e=De?u(0):Ae?b(0):0,Ke=De?u(1):Ae?b(1):1,Xe=[],qe=[];for(var tt of le){var et=X(Xe,tt,m);et===-1?(Xe.push(tt),qe.push(1)):qe[et]+=1}for(var rt=[],oe=Xe.length,he=Array(ae).fill(_e),Ne=c(Array(ae).fill(Ke)),ye=[],Ue=0;Ue<oe;Ue++){var Ze=Xe[Ue],ot=t(Te,o(Ze,Ne)),je=g(ot,he);for(je=je.map(hr=>o(ge,hr)),je.shift();je.length<qe[Ue];){var Je=Z(ot,ae,je,xe,me);if(Je==null){ye.push(Ze);break}je.push(Je)}rt.push(...je.map(hr=>n(hr)))}if(ye.length!==0){var ut=new Error("Failed to find eigenvectors for the following eigenvalues: "+ye.join(", "));throw ut.values=le,ut.vectors=rt,ut}return rt}function R(te,ae,ge,le){var xe=e(te,le),me=t(i(te,le),i(ae,ge)),ve=i(xe,.5),Te=i(a(t(i(xe,xe),i(4,me))),.5);return[e(ve,Te),t(ve,Te)]}function K(te,ae,ge,le,xe,me,ve,Te){var De=Te==="BigNumber",Ae=Te==="Complex",_e=De?u(0):Ae?b(0):0,Ke=De?u(1):Ae?b(1):1;if(w(l(ge),ve))return[[Ke,_e],[_e,Ke]];if(v(l(t(xe,me)),ve))return[[t(xe,le),t(me,le)],[ge,ge]];var Xe=t(te,xe),qe=t(ae,xe),tt=t(ge,xe),et=t(le,xe);return w(l(qe),ve)?[[Xe,Ke],[tt,_e]]:[[qe,_e],[et,Ke]]}function M(te,ae){for(var ge=0;ge<te.length;ge++)te[ge].push(...Array(ae-te[ge].length).fill(0));for(var le=te.length;le<ae;le++)te.push(Array(ae).fill(0)),te[le][le]=1;return te}function j(te,ae){for(var ge=[],le=0;le<ae;le++)ge[le]=Array(ae).fill(0);var xe=0;for(var me of te){for(var ve=me.length,Te=0;Te<ve;Te++)for(var De=0;De<ve;De++)ge[xe+Te][xe+De]=me[Te][De];xe+=ve}return ge}function X(te,ae,ge){for(var le=0;le<te.length;le++)if(ge(te[le],ae))return le;return-1}function Z(te,ae,ge,le,xe){for(var me=xe==="BigNumber"?u(1e3):1e3,ve,Te=0;ve=Y(ae,ge,xe),ve=h(te,ve),!v(Q(ve),me);)if(++Te>=5)return null;for(Te=0;;){var De=h(te,ve);if(w(Q(ce(ve,[De])),le))break;if(++Te>=10)return null;ve=J(De)}return ve}function Y(te,ae,ge){var le=ge==="BigNumber",xe=ge==="Complex",me=Array(te).fill(0).map(ve=>2*Math.random()-1);return le&&(me=me.map(ve=>u(ve))),xe&&(me=me.map(ve=>b(ve))),me=ce(me,ae),J(me,ge)}function ce(te,ae){for(var ge of ae)te=t(te,o(s(N(ge,te),N(ge,ge)),ge));return te}function Q(te){return l(a(N(te,te)))}function J(te,ae){var ge=ae==="BigNumber",le=ae==="Complex",xe=ge?u(1):le?b(1):1;return o(s(xe,Q(te)),te)}return _}p();function HL(r){var{config:e,addScalar:t,subtract:n,abs:o,atan:i,cos:s,sin:a,multiplyScalar:l,inv:u,bignumber:c,multiply:x,add:f}=r;function h(R,K){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,j=arguments.length>3?arguments[3]:void 0;if(j==="number")return g(R,M);if(j==="BigNumber")return m(R,M);throw TypeError("Unsupported data type: "+j)}function g(R,K){for(var M=R.length,j=Math.abs(K/M),X,Z=new Array(M),Y=0;Y<M;Y++)Z[Y]=D(M,0),Z[Y][Y]=1;for(var ce=E(R);Math.abs(ce[1])>=Math.abs(j);){var Q=ce[0][0],J=ce[0][1];X=b(R[Q][Q],R[J][J],R[Q][J]),R=_(R,X,Q,J),Z=w(Z,X,Q,J),ce=E(R)}for(var te=D(M,0),ae=0;ae<M;ae++)te[ae]=R[ae][ae];return k(St(te),St(Z))}function m(R,K){for(var M=R.length,j=o(K/M),X,Z=new Array(M),Y=0;Y<M;Y++)Z[Y]=D(M,0),Z[Y][Y]=1;for(var ce=T(R);o(ce[1])>=o(j);){var Q=ce[0][0],J=ce[0][1];X=v(R[Q][Q],R[J][J],R[Q][J]),R=N(R,X,Q,J),Z=C(Z,X,Q,J),ce=T(R)}for(var te=D(M,0),ae=0;ae<M;ae++)te[ae]=R[ae][ae];return k(St(te),St(Z))}function b(R,K,M){var j=K-R;return Math.abs(j)<=e.epsilon?Math.PI/4:.5*Math.atan(2*M/(K-R))}function v(R,K,M){var j=n(K,R);return o(j)<=e.epsilon?c(-1).acos().div(4):l(.5,i(x(2,M,u(j))))}function w(R,K,M,j){for(var X=R.length,Z=Math.cos(K),Y=Math.sin(K),ce=D(X,0),Q=D(X,0),J=0;J<X;J++)ce[J]=Z*R[J][M]-Y*R[J][j],Q[J]=Y*R[J][M]+Z*R[J][j];for(var te=0;te<X;te++)R[te][M]=ce[te],R[te][j]=Q[te];return R}function C(R,K,M,j){for(var X=R.length,Z=s(K),Y=a(K),ce=D(X,c(0)),Q=D(X,c(0)),J=0;J<X;J++)ce[J]=n(l(Z,R[J][M]),l(Y,R[J][j])),Q[J]=t(l(Y,R[J][M]),l(Z,R[J][j]));for(var te=0;te<X;te++)R[te][M]=ce[te],R[te][j]=Q[te];return R}function N(R,K,M,j){for(var X=R.length,Z=c(s(K)),Y=c(a(K)),ce=l(Z,Z),Q=l(Y,Y),J=D(X,c(0)),te=D(X,c(0)),ae=x(c(2),Z,Y,R[M][j]),ge=t(n(l(ce,R[M][M]),ae),l(Q,R[j][j])),le=f(l(Q,R[M][M]),ae,l(ce,R[j][j])),xe=0;xe<X;xe++)J[xe]=n(l(Z,R[M][xe]),l(Y,R[j][xe])),te[xe]=t(l(Y,R[M][xe]),l(Z,R[j][xe]));R[M][M]=ge,R[j][j]=le,R[M][j]=c(0),R[j][M]=c(0);for(var me=0;me<X;me++)me!==M&&me!==j&&(R[M][me]=J[me],R[me][M]=J[me],R[j][me]=te[me],R[me][j]=te[me]);return R}function _(R,K,M,j){for(var X=R.length,Z=Math.cos(K),Y=Math.sin(K),ce=Z*Z,Q=Y*Y,J=D(X,0),te=D(X,0),ae=ce*R[M][M]-2*Z*Y*R[M][j]+Q*R[j][j],ge=Q*R[M][M]+2*Z*Y*R[M][j]+ce*R[j][j],le=0;le<X;le++)J[le]=Z*R[M][le]-Y*R[j][le],te[le]=Y*R[M][le]+Z*R[j][le];R[M][M]=ae,R[j][j]=ge,R[M][j]=0,R[j][M]=0;for(var xe=0;xe<X;xe++)xe!==M&&xe!==j&&(R[M][xe]=J[xe],R[xe][M]=J[xe],R[j][xe]=te[xe],R[xe][j]=te[xe]);return R}function E(R){for(var K=R.length,M=0,j=[0,1],X=0;X<K;X++)for(var Z=X+1;Z<K;Z++)Math.abs(M)<Math.abs(R[X][Z])&&(M=Math.abs(R[X][Z]),j=[X,Z]);return[j,M]}function T(R){for(var K=R.length,M=0,j=[0,1],X=0;X<K;X++)for(var Z=X+1;Z<K;Z++)o(M)<o(R[X][Z])&&(M=o(R[X][Z]),j=[X,Z]);return[j,M]}function k(R,K){for(var M=R.length,j=Array(M),X=Array(M),Z=0;Z<M;Z++)X[Z]=Array(M);for(var Y=0;Y<M;Y++){for(var ce=0,Q=R[0],J=0;J<R.length;J++)o(R[J])<o(Q)&&(ce=J,Q=R[ce]);j[Y]=R.splice(ce,1)[0];for(var te=0;te<M;te++)X[te][Y]=K[te][ce],K[te].splice(ce,1)}return{values:j,vectors:X}}function D(R,K){for(var M=new Array(R),j=0;j<R;j++)M[j]=K;return M}return h}var h0e="eigs",d0e=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],hb=Ee(h0e,d0e,r=>{var{config:e,typed:t,matrix:n,addScalar:o,subtract:i,equal:s,abs:a,atan:l,cos:u,sin:c,multiplyScalar:x,divideScalar:f,inv:h,bignumber:g,multiply:m,add:b,larger:v,column:w,flatten:C,number:N,complex:_,sqrt:E,diag:T,qr:k,usolve:D,usolveAll:R,im:K,re:M,smaller:j,matrixFromColumns:X,dot:Z}=r,Y=HL({config:e,addScalar:o,subtract:i,column:w,flatten:C,equal:s,abs:a,atan:l,cos:u,sin:c,multiplyScalar:x,inv:h,bignumber:g,complex:_,multiply:m,add:b}),ce=qL({config:e,addScalar:o,subtract:i,multiply:m,multiplyScalar:x,flatten:C,divideScalar:f,sqrt:E,abs:a,bignumber:g,diag:T,qr:k,inv:h,usolve:D,usolveAll:R,equal:s,complex:_,larger:v,smaller:j,matrixFromColumns:X,dot:Z});return t("eigs",{Array:function(xe){var me=n(xe);return Q(me)},"Array, number|BigNumber":function(xe,me){var ve=n(xe);return Q(ve,me)},Matrix:function(xe){var{values:me,vectors:ve}=Q(xe);return{values:n(me),vectors:n(ve)}},"Matrix, number|BigNumber":function(xe,me){var{values:ve,vectors:Te}=Q(xe,me);return{values:n(ve),vectors:n(Te)}}});function Q(le,xe){xe===void 0&&(xe=e.epsilon);var me=le.size();if(me.length!==2||me[0]!==me[1])throw new RangeError("Matrix must be square (size: "+pr(me)+")");var ve=le.toArray(),Te=me[0];if(te(ve,Te,xe)&&(ae(ve,Te),J(ve,Te,xe))){var De=ge(le,ve,Te);return Y(ve,Te,xe,De)}var Ae=ge(le,ve,Te);return ce(ve,Te,xe,Ae)}function J(le,xe,me){for(var ve=0;ve<xe;ve++)for(var Te=ve;Te<xe;Te++)if(v(g(a(i(le[ve][Te],le[Te][ve]))),me))return!1;return!0}function te(le,xe,me){for(var ve=0;ve<xe;ve++)for(var Te=0;Te<xe;Te++)if(v(g(a(K(le[ve][Te]))),me))return!1;return!0}function ae(le,xe){for(var me=0;me<xe;me++)for(var ve=0;ve<xe;ve++)le[me][ve]=M(le[me][ve])}function ge(le,xe,me){var ve=le.datatype();if(ve==="number"||ve==="BigNumber"||ve==="Complex")return ve;for(var Te=!1,De=!1,Ae=!1,_e=0;_e<me;_e++)for(var Ke=0;Ke<me;Ke++){var Xe=xe[_e][Ke];if(Tr(Xe)||Ex(Xe))Te=!0;else if(Xr(Xe))De=!0;else if(kx(Xe))Ae=!0;else throw TypeError("Unsupported type in Matrix: "+eo(Xe))}if(De&&Ae&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Ae){for(var qe=0;qe<me;qe++)for(var tt=0;tt<me;tt++)xe[qe][tt]=_(xe[qe][tt]);return"Complex"}if(De){for(var et=0;et<me;et++)for(var rt=0;rt<me;rt++)xe[et][rt]=g(xe[et][rt]);return"BigNumber"}if(Te){for(var oe=0;oe<me;oe++)for(var he=0;he<me;he++)xe[oe][he]=N(xe[oe][he]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}});p();var g0e="divide",y0e=["typed","matrix","multiply","equalScalar","divideScalar","inv"],db=Ee(g0e,y0e,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:o,divideScalar:i,inv:s}=r,a=m4({typed:e,equalScalar:o}),l=Gn({typed:e});return e("divide",Dx({"Array | Matrix, Array | Matrix":function(c,x){return n(c,s(x))},"DenseMatrix, any":function(c,x){return l(c,x,i,!1)},"SparseMatrix, any":function(c,x){return a(c,x,i,!1)},"Array, any":function(c,x){return l(t(c),x,i,!1).valueOf()},"any, Array | Matrix":function(c,x){return n(c,s(x))}},i.signatures))});var kh=ry({config:Eo}),C4=oy({});var gb=sy({});var yb=ay({});var Do=ly({Matrix:yb});var bt=ey({BigNumber:kh,Complex:C4,DenseMatrix:Do,Fraction:gb});var N4=Sy({typed:bt});var l2=Ty({typed:bt});var b0e=ib({typed:bt});var bb=by({BigNumber:kh,typed:bt});var vb=vy({Complex:C4,typed:bt}),_4=Ry({typed:bt});var us=dy({config:Eo,typed:bt});var v0e=$y({typed:bt});var w0e=hy({typed:bt});var fc=Iy({typed:bt});var wb=yy({typed:bt});var C0e=Oy({typed:bt});var N0e=Ey({BigNumber:kh,Fraction:gb,complex:vb,typed:bt}),_0e=ab({typed:bt}),Eh=gy({Matrix:yb,equalScalar:us,typed:bt});var S0e=sb({typed:bt});var Cb=Ay({Complex:C4,config:Eo,typed:bt});var Ah=_y({typed:bt});var KL=wy({Fraction:gb,typed:bt});var kr=Cy({DenseMatrix:Do,Matrix:yb,SparseMatrix:Eh,typed:bt});var T0e=qy({bignumber:bb,fraction:KL,number:wb});var jL=Uy({matrix:kr,config:Eo,typed:bt}),Dh=Zy({DenseMatrix:Do,config:Eo,matrix:kr,typed:bt});var za=Dy({DenseMatrix:Do,addScalar:l2,equalScalar:us,matrix:kr,typed:bt,unaryMinus:Ah});var I0e=Vy({matrix:kr,typed:bt});var k0e=Wy({BigNumber:kh,config:Eo,matrix:kr,typed:bt});var E0e=Gy({conj:_4,transpose:I0e,typed:bt}),A0e=zy({DenseMatrix:Do,SparseMatrix:Eh,matrix:kr,typed:bt}),mc=Hy({numeric:T0e,typed:bt});var XL=Yy({DenseMatrix:Do,equalScalar:us,matrix:kr,typed:bt}),YL=Ly({matrix:kr,typed:bt});var D0e=tb({DenseMatrix:Do,smaller:Dh}),R0e=rb({ImmutableDenseMatrix:D0e});var $0e=eb({DenseMatrix:Do,config:Eo,matrix:kr,typed:bt});var O0e=Ny({flatten:YL,matrix:kr,size:jL,typed:bt});var F0e=Jy({DenseMatrix:Do,config:Eo,matrix:kr,typed:bt});var M0e=jy({DenseMatrix:Do,divideScalar:mc,equalScalar:us,matrix:kr,multiplyScalar:fc,subtract:za,typed:bt});var ZL=lb({DenseMatrix:Do,SparseMatrix:Eh,addScalar:l2,equalScalar:us,matrix:kr,typed:bt});var S4=cb({addScalar:l2,conj:_4,multiplyScalar:fc,size:jL,typed:bt});var Nb=Py({BigNumber:kh,DenseMatrix:Do,SparseMatrix:Eh,config:Eo,matrix:kr,typed:bt});var Rh=Qy({DenseMatrix:Do,config:Eo,matrix:kr,typed:bt});var hc=ky({addScalar:l2,dot:S4,equalScalar:us,matrix:kr,multiplyScalar:fc,typed:bt}),z0e=Ky({Complex:C4,config:Eo,fraction:KL,identity:Nb,matrix:kr,multiply:hc,number:wb,typed:bt}),L0e=xb({addScalar:l2,complex:vb,conj:_4,divideScalar:mc,equal:XL,identity:Nb,isZero:w0e,matrix:kr,multiplyScalar:fc,sign:N0e,sqrt:Cb,subtract:za,typed:bt,unaryMinus:Ah,zeros:k0e}),P0e=By({bignumber:bb,matrix:kr,config:Eo,larger:Rh,largerEq:$0e,smaller:Dh,smallerEq:F0e,typed:bt});var B0e=Xy({DenseMatrix:Do,divideScalar:mc,equalScalar:us,matrix:kr,multiplyScalar:fc,subtract:za,typed:bt});var U0e=Fy({Index:R0e,matrix:kr,range:P0e,typed:bt});var JL=My({matrix:kr,multiply:hc,subtract:za,typed:bt});var V0e=nb({larger:Rh,smaller:Dh});var G0e=ob({FibonacciHeap:V0e,addScalar:l2,equalScalar:us});var W0e=pb({DenseMatrix:Do,Spa:G0e,SparseMatrix:Eh,abs:N4,addScalar:l2,divideScalar:mc,equalScalar:us,larger:Rh,matrix:kr,multiplyScalar:fc,subtract:za,typed:bt,unaryMinus:Ah});var q0e=fb({lup:W0e,matrix:kr,multiply:hc,subtract:za,typed:bt,unaryMinus:Ah});var QL=mb({abs:N4,addScalar:l2,det:q0e,divideScalar:mc,identity:Nb,matrix:kr,multiply:hc,typed:bt,unaryMinus:Ah});var _b=db({divideScalar:mc,equalScalar:us,inv:QL,matrix:kr,multiply:hc,typed:bt});var H0e=hb({abs:N4,add:ZL,addScalar:l2,atan:b0e,bignumber:bb,column:U0e,complex:vb,config:Eo,cos:S0e,diag:A0e,divideScalar:mc,dot:S4,equal:XL,flatten:YL,im:v0e,inv:QL,larger:Rh,matrix:kr,matrixFromColumns:O0e,multiply:hc,multiplyScalar:fc,number:wb,qr:L0e,re:C0e,sin:_0e,smaller:Dh,sqrt:Cb,subtract:za,typed:bt,usolve:M0e,usolveAll:B0e});var Sb=ub({abs:N4,add:ZL,conj:_4,ctranspose:E0e,eigs:H0e,equalScalar:us,larger:Rh,matrix:kr,multiply:hc,pow:z0e,smaller:Dh,sqrt:Cb,typed:bt});var lP=Ho(tP()),Se=Cn;(function(r,e){let t=Cn,n=r();for(;[];)try{if(-parseInt(t(230))/1+-parseInt(t(280))/2*(parseInt(t(283))/3)+-parseInt(t(229))/4+-parseInt(t(358))/5+parseInt(t(266))/6*(parseInt(t(369))/7)+parseInt(t(240))/8*(-parseInt(t(465))/9)+parseInt(t(325))/10===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(E4,665520);function co(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){let a=Cn;function l(x){let f=Cn;try{c(n[f(295)](x))}catch(h){s(h)}}function u(x){let f=Cn;try{c(n[f(203)](x))}catch(h){s(h)}}function c(x){let f=Cn;x.done?i(x.value):o(x.value)[f(393)](l,u)}c((n=n.apply(r,e||[]))[a(295)]())})}function K0e(r,e,t,n){let o=Cn;if(t==="a"&&!n)throw new TypeError(o(328));if(typeof e===o(388)?r!==e||!n:!e[o(347)](r))throw new TypeError(o(355));return t==="m"?n:t==="a"?n[o(293)](r):n?n[o(468)]:e[o(389)](r)}var Mb=typeof global<"u"?global:typeof self!==Se(314)?self:typeof window<"u"?window:{};function uP(){let r=Se;throw new Error(r(353))}function cP(){let r=Se;throw new Error(r(403))}var bl=uP,vl=cP;typeof Mb[Se(287)]===Se(388)&&(bl=setTimeout);typeof Mb.clearTimeout===Se(388)&&(vl=clearTimeout);function E4(){let r=["isBusy","beta_","has","requestFrameToken","eyeLookInRight","eyesLookUp","state","bezier_x1","setTimeout has not been defined","generatedBy","Cannot read private member from an object whose class did not declare it","height","mouthDimpleRight","3629785gvzdZY","_acquireBatch","video","set","eyeWideRight","mouthFunnel","Bearer ","atan2","_diffAmp","_stream","predictFace","1106mqaRpw","model","createElement","filter","mouthFrownRight","faceMeshCalculator","play","eyeLookDownLeft","You must pass a function to execute","byteOffset","predictor-lock","run","mouthSmile","easingCurves","width","reverse","log","buffer","weights","function","get","length","unmapPrediction","keys","then","abs","modelJSON","mapPrediction","onResults","signature","mouthRollUpper","mouthDimpleLeft","mouthUpperUpRight","_initializeTune","clearTimeout has not been defined","cheekSquintRight","eyeLookUpLeft","setAlpha","now","TRANSFORM","sqrt","setOptions","mouthPressLeft","leftAmp","tune","startScope","mouthUpperUpLeft","faceMeshResultsCallback","jawLeft","ROTATION","eyeLookUpRight","create","endScope","mouthSmileRight","linearScale","domainReentrant","jawForward","eyeSquintLeft","eyeBlinkRight","mouthSmileLeft","lasttime","browser","performance","browDownLeft","initialize","yaw","apply","lastFrameTime","byteLength","mouthStretchRight","eyeBlinkLeft","filters","_promiseTry","mouthLowerDownLeft","stop","map","eyeLookDownRight","async-lock timed out in queue ","maxOccupationTime","rollFilter","acquire","lastRawValue","dataSync","floor","createPrediction","mouthShrugLower","rotation","eyesLookDown","push","skipQueue","maxPending","round","paused","domains","browOuterUpLeft","timeout","9jPeIod","weightData","mouthShrugUpper","value","msNow","pow","eyeWideLeft","eyeLookOutRight","setMinCutoff","queues","avatarScaleDecode","roll","_dataStream","setBeta","onPredict","transform","paths","mouthPucker","multi_spur_dot","R_MIN","bezier_y1","_initialize","cancelAnimationFrame","getTime","AUPredictor initialized.","DEFAULT_MAX_OCCUPATION_TIME","mincutoff should be >0","predict","tune_points","bezier_y2","_onPredict","trainingConfig","freq","throw","__LENGTH","muted","transformZ","tongueOut","_video","requestVideoFrameCallback","load","dcutoff","_getScalerTriFeatureVectorDot","stream","weightsManifest","alpha should be in (0.0., 1.0]","mouthLeft","mouthPressRight","yawFilter","_stop","https://hallway-public.nyc3.digitaloceanspaces.com/webSDK/Mouth_Smile_Opene_uint16_bin_norm_dist7/","unshift","actionUnitModel","rightAmp","Too many pending tasks in queue ","arraybuffer","ACTION_UNITS","browInnerUp","DEFAULT_TIMEOUT","620908ArikET","1272011jWUrKD","srcObject","eyeLookInLeft","mouthRollLower","AVATAR_WEBKIT: predict was called while stream was not stoppped. Stopping stream...","reset","dcutoff should be >0","modelMeta","multiFaceLandmarks","PRED_SCALE","3410616vyoYlL","close","transformX","Initializing AUPredictor...","hasLastRawValue","image","pitchFilter","mouthClose","zeros","Tensor","fun","started","min","isArray",'{"tris": [[[7, 8, 9, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 35, 46, 52, 53, 55, 56, 63, 65, 66, 68, 69, 70, 71, 104, 105, 107, 108, 110, 111, 112, 113, 117, 118, 119, 120, 121, 124, 128, 130, 133, 139, 143, 144, 145, 151, 153, 154, 155, 156, 157, 158, 159, 160, 161, 163, 168, 173, 189, 190, 193, 221, 222, 223, 224, 225, 226, 228, 229, 230, 231, 232, 233, 243, 244, 245, 246, 247, 468, 469, 470, 471, 472], [60, 51, 43, 79, 13, 0, 38, 39, 73, 74, 73, 39, 39, 41, 74, 75, 74, 41, 50, 51, 53, 60, 53, 51, 2, 48, 29, 30, 29, 48, 36, 37, 71, 72, 71, 37, 10, 11, 56, 57, 56, 11, 19, 53, 62, 60, 62, 53, 5, 4, 46, 47, 46, 4, 63, 61, 78, 77, 78, 61, 8, 55, 9, 54, 9, 55, 11, 80, 57, 79, 57, 80, 18, 63, 1, 59, 1, 63, 32, 35, 12, 70, 12, 35, 18, 64, 63, 61, 63, 64, 50, 7, 51, 33, 51, 7, 66, 16, 67, 17, 67, 16, 37, 38, 72, 73, 72, 38, 80, 34, 42, 69, 42, 34, 16, 28, 17, 20, 17, 28, 15, 25, 40, 52, 40, 25, 17, 20, 15, 25, 15, 20, 49, 3, 50, 7, 50, 3, 9, 54, 19, 53, 19, 54, 34, 40, 69, 14, 69, 40, 8, 10, 55, 56, 55, 10, 68, 15, 34, 40, 34, 15, 22, 24, 28, 27, 28, 24, 18, 29, 21, 22, 21, 29, 28, 27, 20, 23, 20, 27, 1, 2, 18, 29, 18, 2, 3, 49, 4, 47, 4, 49, 67, 17, 68, 15, 68, 17, 5, 46, 31, 58, 31, 46, 21, 22, 16, 28, 16, 22, 35, 36, 70, 71, 70, 36, 29, 30, 22, 24, 22, 30, 14, 45, 32, 57, 79, 58, 0, 58, 79, 21, 16, 65, 66, 65, 16, 21, 65, 18, 64, 18, 65, 42, 6, 13, 0, 13, 6, 25, 26, 52, 44, 52, 26, 79, 80, 13, 42, 13, 80, 47, 49, 55, 54, 55, 49, 56, 57, 46, 58, 46, 57, 55, 56, 47, 46, 47, 56, 20, 23, 25, 26, 25, 23, 32, 12, 14, 69, 14, 12, 49, 50, 54, 53, 54, 50, 51, 33, 43, 76, 43, 33, 62, 60, 76, 43, 76, 60, 52, 44, 45, 70, 71, 31, 5, 31, 71, 12, 6, 69, 42, 69, 6, 71, 72, 5, 4, 5, 72, 72, 73, 4, 3, 4, 73, 73, 74, 3, 7, 3, 74, 7, 74, 33, 75, 33, 74, 61, 62, 77, 76, 77, 62, 64, 19, 61, 62, 61, 19, 64, 65, 19, 9, 19, 65, 65, 66, 9, 8, 9, 66, 67, 10, 66, 8, 66, 10, 10, 67, 11, 68, 11, 67, 11, 68, 80, 34, 80, 68, 33, 75, 76, 77, 76, 75, 75, 41, 77, 78, 77, 41, 40, 52, 14, 45, 14, 52, 6, 31, 0, 58, 0, 31, 12, 70, 6, 31, 6, 70, 85, 13, 83, 83, 43, 85, 84, 55, 82, 82, 47, 84]], [[8, 9, 151, 168, 249, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 263, 265, 276, 282, 283, 285, 286, 293, 295, 296, 298, 299, 300, 301, 333, 334, 336, 337, 339, 340, 341, 342, 346, 347, 348, 349, 350, 353, 357, 359, 362, 368, 372, 373, 374, 380, 381, 382, 383, 384, 385, 386, 387, 388, 390, 398, 413, 414, 417, 441, 442, 443, 444, 445, 446, 448, 449, 450, 451, 452, 453, 463, 464, 465, 466, 467, 473, 474, 475, 476, 477], [52, 60, 45, 15, 79, 4, 40, 73, 41, 74, 41, 73, 41, 74, 43, 75, 43, 74, 51, 54, 52, 60, 52, 54, 1, 31, 2, 32, 2, 31, 38, 71, 39, 72, 39, 71, 12, 57, 13, 58, 13, 57, 21, 62, 54, 60, 54, 62, 7, 48, 6, 49, 6, 48, 63, 78, 61, 77, 61, 78, 10, 11, 56, 55, 56, 11, 13, 58, 80, 79, 80, 58, 20, 0, 63, 3, 63, 0, 34, 14, 37, 70, 37, 14, 20, 63, 64, 61, 64, 63, 51, 52, 9, 35, 9, 52, 66, 67, 18, 19, 18, 67, 39, 72, 40, 73, 40, 72, 80, 44, 36, 69, 36, 44, 18, 19, 30, 22, 30, 19, 17, 42, 27, 53, 27, 42, 19, 17, 22, 27, 22, 17, 50, 51, 5, 9, 5, 51, 11, 21, 55, 54, 55, 21, 36, 69, 42, 16, 42, 69, 10, 56, 12, 57, 12, 56, 68, 36, 17, 42, 17, 36, 24, 30, 26, 29, 26, 30, 20, 23, 31, 24, 31, 23, 30, 22, 29, 25, 29, 22, 0, 20, 1, 31, 1, 20, 5, 6, 50, 49, 50, 6, 67, 68, 19, 17, 19, 68, 7, 33, 48, 59, 48, 33, 23, 18, 24, 30, 24, 18, 37, 70, 38, 71, 38, 70, 31, 24, 32, 26, 32, 24, 16, 34, 47, 58, 59, 79, 4, 79, 59, 23, 65, 18, 66, 18, 65, 23, 20, 65, 64, 65, 20, 44, 15, 8, 4, 8, 15, 27, 53, 28, 46, 28, 53, 79, 15, 80, 44, 80, 15, 49, 56, 50, 55, 50, 56, 57, 48, 58, 59, 58, 48, 56, 49, 57, 48, 57, 49, 22, 27, 25, 28, 25, 27, 34, 16, 14, 69, 14, 16, 50, 55, 51, 54, 51, 55, 52, 45, 35, 76, 35, 45, 62, 76, 60, 45, 60, 76, 53, 47, 46, 70, 33, 71, 7, 71, 33, 14, 69, 8, 44, 8, 69, 71, 7, 72, 6, 72, 7, 72, 6, 73, 5, 73, 6, 73, 5, 74, 9, 74, 5, 9, 35, 74, 75, 74, 35, 61, 77, 62, 76, 62, 77, 64, 61, 21, 62, 21, 61, 64, 21, 65, 11, 65, 21, 65, 11, 66, 10, 66, 11, 67, 66, 12, 10, 12, 66, 12, 13, 67, 68, 67, 13, 13, 80, 68, 36, 68, 80, 35, 76, 75, 77, 75, 76, 75, 77, 43, 78, 43, 77, 42, 16, 53, 47, 53, 16, 8, 4, 33, 59, 33, 4, 14, 8, 70, 33, 70, 8, 85, 45, 83, 85, 15, 83, 84, 56, 82, 82, 49, 84]], [[0, 2, 11, 12, 13, 14, 15, 16, 17, 18, 37, 38, 39, 40, 41, 42, 43, 57, 61, 62, 72, 73, 74, 76, 77, 78, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 95, 96, 97, 98, 106, 146, 164, 165, 167, 178, 179, 180, 181, 182, 183, 184, 185, 186, 191, 194, 200, 201, 202, 203, 204, 206, 207, 210, 212, 214, 216, 267, 268, 269, 270, 271, 272, 273, 287, 291, 292, 302, 303, 304, 306, 307, 308, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 335, 375, 391, 393, 402, 403, 404, 405, 406, 407, 408, 409, 410, 415, 418, 421, 422, 423, 424, 426, 427, 430, 432, 434, 436], [85, 116, 99, 25, 39, 57, 70, 0, 80, 10, 20, 0, 2, 80, 0, 2, 0, 20, 70, 80, 72, 10, 12, 20, 81, 72, 80, 21, 20, 12, 72, 81, 73, 12, 13, 21, 82, 73, 81, 22, 21, 13, 82, 113, 73, 22, 13, 54, 114, 73, 113, 55, 54, 13, 75, 86, 112, 15, 53, 26, 116, 112, 86, 57, 26, 53, 98, 73, 115, 38, 56, 13, 114, 115, 73, 55, 13, 56, 126, 125, 124, 68, 66, 67, 119, 124, 125, 61, 67, 66, 89, 90, 9, 29, 9, 30, 8, 9, 90, 8, 30, 9, 84, 104, 83, 24, 23, 44, 78, 83, 104, 18, 44, 23, 117, 121, 111, 58, 52, 63, 103, 111, 121, 43, 63, 52, 105, 120, 102, 46, 42, 62, 96, 97, 84, 36, 24, 37, 104, 84, 97, 44, 37, 24, 118, 89, 59, 60, 59, 29, 9, 59, 89, 9, 29, 59, 103, 97, 111, 43, 52, 37, 110, 111, 97, 51, 37, 52, 110, 97, 109, 51, 50, 37, 96, 109, 97, 36, 37, 50, 8, 90, 7, 8, 7, 30, 91, 7, 90, 31, 30, 7, 105, 72, 98, 46, 38, 12, 73, 98, 72, 13, 12, 38, 103, 76, 97, 43, 37, 16, 104, 97, 76, 44, 16, 37, 100, 79, 99, 40, 39, 19, 85, 99, 79, 25, 19, 39, 127, 123, 122, 69, 64, 65, 105, 106, 72, 46, 12, 47, 70, 72, 106, 10, 47, 12, 119, 125, 76, 61, 16, 67, 77, 76, 125, 17, 67, 16, 121, 119, 103, 63, 43, 61, 76, 103, 119, 16, 61, 43, 83, 79, 84, 23, 24, 19, 100, 84, 79, 40, 19, 24, 80, 71, 81, 20, 21, 11, 74, 81, 71, 14, 11, 21, 81, 74, 82, 21, 22, 14, 75, 82, 74, 15, 14, 22, 123, 127, 126, 65, 68, 69, 125, 126, 127, 67, 69, 68, 82, 75, 113, 22, 54, 15, 112, 113, 75, 53, 15, 54, 95, 96, 100, 35, 40, 36, 84, 100, 96, 24, 36, 40, 109, 96, 108, 50, 49, 36, 95, 108, 96, 35, 36, 49, 7, 91, 6, 7, 6, 31, 92, 6, 91, 32, 31, 6, 6, 92, 5, 6, 5, 32, 93, 5, 92, 33, 32, 5, 107, 108, 94, 48, 34, 49, 95, 94, 108, 35, 49, 34, 99, 94, 100, 39, 40, 34, 95, 100, 94, 35, 34, 40, 74, 87, 75, 14, 15, 27, 86, 75, 87, 26, 27, 15, 76, 77, 104, 16, 44, 17, 78, 104, 77, 18, 17, 44, 71, 88, 74, 11, 14, 28, 87, 74, 88, 27, 28, 14, 112, 116, 79, 53, 19, 57, 85, 79, 116, 25, 57, 19, 122, 98, 127, 64, 69, 38, 115, 127, 98, 56, 38, 69, 106, 101, 45, 47, 45, 41, 1, 45, 101, 1, 41, 45, 0, 70, 45, 0, 45, 10, 106, 45, 70, 47, 10, 45, 2, 3, 80, 2, 20, 3, 71, 80, 3, 11, 3, 20, 3, 4, 71, 3, 11, 4, 88, 71, 4, 28, 4, 11, 120, 105, 122, 62, 64, 46, 98, 122, 105, 38, 46, 64, 105, 102, 106, 46, 47, 42, 101, 106, 102, 41, 42, 47, 92, 108, 93, 32, 33, 49, 107, 93, 108, 48, 49, 33, 91, 109, 92, 31, 32, 50, 108, 92, 109, 49, 50, 32, 90, 110, 91, 30, 31, 51, 109, 91, 110, 50, 51, 31, 89, 111, 90, 29, 30, 52, 110, 90, 111, 51, 52, 30, 117, 111, 118, 58, 60, 52, 89, 118, 111, 29, 52, 60, 113, 112, 83, 54, 23, 53, 79, 83, 112, 19, 53, 23, 113, 83, 114, 54, 55, 23, 78, 114, 83, 18, 23, 55, 115, 114, 77, 56, 17, 55, 78, 77, 114, 18, 55, 17, 127, 115, 125, 69, 67, 56, 77, 125, 115, 17, 56, 67, 5, 93, 4, 5, 4, 33, 88, 4, 93, 28, 33, 4, 93, 107, 88, 33, 28, 48, 87, 88, 107, 27, 48, 28, 107, 94, 87, 48, 27, 34, 86, 87, 94, 26, 34, 27, 94, 99, 86, 34, 26, 39, 116, 86, 99, 57, 39, 26]], [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477], [0, 1, 36, 0, 36, 17, 1, 2, 41, 1, 41, 36, 2, 3, 31, 2, 31, 41, 3, 4, 48, 3, 48, 31, 4, 5, 48, 5, 6, 48, 6, 7, 59, 6, 59, 48, 7, 8, 58, 7, 58, 59, 8, 9, 56, 8, 56, 57, 8, 57, 58, 9, 10, 55, 9, 55, 56, 10, 11, 54, 10, 54, 55, 11, 12, 54, 12, 13, 54, 13, 14, 35, 13, 35, 54, 14, 15, 46, 14, 46, 35, 15, 16, 45, 15, 45, 46, 16, 26, 45, 17, 36, 18, 18, 37, 19, 18, 36, 37, 19, 38, 20, 19, 37, 38, 20, 39, 21, 20, 38, 39, 21, 39, 27, 22, 42, 23, 22, 27, 42, 23, 43, 24, 23, 42, 43, 24, 44, 25, 24, 43, 44, 25, 45, 26, 25, 44, 45, 27, 39, 28, 27, 28, 42, 28, 39, 29, 28, 29, 42, 29, 31, 30, 29, 30, 35, 29, 40, 31, 29, 35, 47, 29, 39, 40, 29, 47, 42, 30, 31, 32, 30, 32, 33, 30, 33, 34, 30, 34, 35, 31, 50, 32, 31, 40, 41, 31, 48, 49, 31, 49, 50, 32, 51, 33, 32, 50, 51, 33, 51, 34, 34, 52, 35, 34, 51, 52, 35, 46, 47, 35, 52, 53, 35, 53, 54, 36, 41, 37, 37, 40, 38, 37, 41, 40, 38, 40, 39, 42, 47, 43, 43, 47, 44, 44, 46, 45, 44, 47, 46, 48, 60, 49, 48, 59, 60, 49, 61, 50, 49, 60, 61, 50, 62, 51, 50, 61, 62, 51, 62, 52, 52, 63, 53, 52, 62, 63, 53, 64, 54, 53, 63, 64, 54, 64, 55, 55, 65, 56, 55, 64, 65, 56, 66, 57, 56, 65, 66, 57, 66, 58, 58, 67, 59, 58, 66, 67, 59, 67, 60, 60, 67, 61, 61, 66, 62, 61, 67, 66, 62, 66, 63, 63, 65, 64, 63, 66, 65, 21, 27, 22, 472, 33, 470, 470, 133, 472, 471, 159, 469, 469, 145, 471, 477, 362, 475, 477, 263, 475, 476, 386, 474, 474, 374, 476]]], "label_keys": [["browDown_L", "cheekSquint_L", "browOuterUp_L", "browDown_R", "browOuterUp_R", "cheekSquint_R", "browInnerUp"], ["eyeBlink_L", "eyeBlink_R", "eyeSquint_L", "eyeSquint_R", "eyeWide_L", "eyeWide_R"], ["eyeLookDown_L", "eyeLookDown_R", "eyeLookIn_L", "eyeLookIn_R", "eyeLookOut_L", "eyeLookOut_R", "eyeLookUp_L", "eyeLookUp_R"], ["jawOpen", "jawLeft", "jawRight", "mouthClose", "mouthFunnel", "mouthPucker", "mouthRollLower", "mouthRollUpper", "mouthShrugLower", "mouthShrugUpper", "noseSneer_L", "noseSneer_R"], ["mouthLeft", "mouthRight", "mouthSmile_L", "mouthSmile_R", "mouthFrown_L", "mouthFrown_R", "mouthDimple_L", "mouthDimple_R", "mouthStretch_L", "mouthStretch_R", "mouthPress_L", "mouthPress_R", "mouthLowerDown_L", "mouthLowerDown_R", "mouthUpperUp_L", "mouthUpperUp_R"]], "type": "multi_spur_dot", "data_min": [-0.0017550074262544513, -0.0015888019697740674, -0.0017187476623803377, -0.0027021938003599644, -0.00840499997138977, -0.012177195399999619, -0.006785913370549679, -0.011435691267251968, -0.009481549263000488, -0.011232671327888966, -0.005913160741329193, -0.006541644688695669, -0.004088891204446554, -0.0028658448718488216, 0.0008937628008425236, -0.0014253321569412947, -0.003379533998668194, -0.05247845500707626, -0.03722202777862549, -0.01632705330848694, -0.015382098965346813, -0.02333829551935196, -0.0063448259606957436, -0.006486705970019102, -0.026732610538601875, -0.002594631165266037, -0.0024819879326969385, -0.0011332901194691658, -0.014717886224389076, -0.020526109263300896, 0.0009483033209107816, -6.562717317137867e-05, 0.003971200902014971, -0.0025534299202263355, 0.005063787568360567, 8.11954087112099e-05, -0.013988249003887177, -0.006610263604670763, -0.0003309780149720609, 0.00545515026897192, -0.004532479215413332, -0.0015585519140586257, 0.002584811532869935, 0.002811002777889371, -0.020826643332839012, -0.0017957848031073809, -0.0023131167981773615, 0.0008118495461530983, -0.18270130455493927, -0.02499575726687908, -0.031774282455444336, 0.0010722535662353039, -0.0051225703209638596, -0.005623739678412676, -0.009153920225799084, 0.008124765940010548, -0.04908079281449318, -0.006196742877364159, -0.005988628137856722, 0.006428960710763931, 0.0003101342299487442, -0.00232656835578382, -0.001176844467408955, -0.00084810791304335, -0.006075503770262003, -0.02473851852118969, -0.015873298048973083, -0.01800304837524891, -0.008554470725357533, -0.02030240371823311, -0.004769818391650915, -0.013027854263782501, -0.005569886416196823, -0.002855725586414337, -0.02324126660823822, -0.0011017153738066554, -0.01515586581081152, -0.007202725391834974, -0.021577106788754463, -0.0047977459616959095, -0.015712302178144455, 0.0018171507399529219, -0.04218415543437004, 0.003599596442654729, -0.008515105582773685, 0.003922000527381897, -0.03360369801521301, 0.004381608683615923, -0.0012833441141992807, -0.0011298761237412691, -0.0034428401850163937, -0.0007926009711809456, -0.007261634338647127, -0.025431213900446892, -0.0021018001716583967, 0.0012902612797915936, -0.00821943674236536, 0.0015087845968082547, -0.03998952358961105, 0.003925271797925234, -0.00425840076059103, -0.004315055441111326, -0.0050179981626570225, -0.0028619857039302588, -0.004568891599774361, -0.0025188063737004995, -0.018748672679066658, 0.0018272872548550367, -0.03501500189304352, -0.060936089605093, -0.06657426059246063, -0.07045453786849976, -0.05476086586713791, 0.013215681537985802, -0.033690210431814194, 0.028368977829813957, -0.03590276837348938, -0.06219175085425377, -0.05718810483813286, -0.09179447591304779, -0.049490347504615784, 0.003276834264397621, -0.2224636822938919, 0.005630712490528822, -0.004936552606523037, 0.0021044814493507147, -0.0023064170964062214, 0.000921845727134496, -0.0016314919339492917, -0.0032274883706122637, -0.014002657495439053, 0.0007550256559625268, -0.004097432363778353, -0.004856402985751629, -0.0015870482893660665, -0.0033077180851250887, -0.016597673296928406, 0.005158626474440098, -0.03445936739444733, 0.00545958336442709, -0.022790541872382164, -0.011063412763178349, -0.01793551817536354, -0.00035710117663256824, -0.03299255669116974, -0.05196274071931839, -0.049705177545547485, -0.06774846464395523, -0.01917189545929432, 0.004815578460693359, -0.012143676169216633, -0.0023987065069377422, 0.0005946963792666793, -0.001411741366609931, 7.520611688960344e-05, -0.013843615539371967, 0.014278718270361423, 0.001808188739232719, -0.06429895013570786, -0.003280320903286338, -0.022841110825538635, -0.017019130289554596, 0.00048229319509118795, -0.00966423936188221, -0.004826822783797979, -0.0011247374350205064, -0.041764434427022934, -0.10759850591421127, -0.04113900661468506, -0.12872539460659027, -0.002331000519916415, -0.007355756126344204, -0.007285710424184799, 9.530829265713692e-05, 0.001222519320435822, -0.005669853650033474, 0.0021250322461128235, -0.004807861056178808, -0.01985650695860386, -0.00402058707550168, 0.0022181477397680283, -0.00294042332097888, 0.0011985059827566147, -0.005299006123095751, 0.004811618942767382, -0.005190132185816765, -0.04117422178387642, -0.09933539479970932, -0.062477342784404755, -0.13131371140480042, -0.028346074745059013, -0.004036494065076113, -0.007280837744474411, -0.00048430555034428835, -0.005807450041174889, -0.0051109096966683865, 0.002538948552682996, -0.004422084894031286, -3.6005385481985286e-05, -0.0023883762769401073, -0.004277486819773912, -0.0021956029813736677, -0.005624614655971527, -0.0037700277753174305, 0.0009276365162804723, 0.0012946042697876692, -0.00729520944878459, -0.0934818908572197, -0.013185937888920307, -0.006523772142827511, -0.01293903961777687, -0.002899773186072707, -0.012736348435282707, -0.013921556994318962, -0.0031980155035853386, -0.00262717017903924, -0.013627937063574791, -0.013069857843220234, -0.010410521179437637, -0.00437180744484067, -0.008226401172578335, -0.011711595579981804, -0.003236369928345084, -0.002269494580104947, -0.005061361473053694, -0.009619944728910923, -0.004189006984233856, -0.00493813119828701, 0.001313506276346743, -0.0005794925382360816, -0.0007508127600885928, -0.00255648628808558, -0.008849035948514938, 0.0015626826789230108, 0.002015381818637252, 0.003440193133428693, -0.0169757679104805, 0.008412284776568413, -0.0024139813613146544, 0.007210076320916414, 0.004792986903339624, -0.024742357432842255, 0.0032899959478527308, -0.0026013581082224846, 0.011801465414464474, -0.009576565586030483, 0.010437027551233768, -0.002092166803777218, -0.011856031604111195, -0.009130856953561306, -0.005431095138192177, -0.009956598281860352, -0.0008372836746275425, -0.0015743045369163156, -0.006356232333928347, -0.002174090128391981, -0.0005838467041030526, -0.0015569630777463317, -0.01587550714612007, 0.0004350940871518105, 0.0016732083167880774, -0.0030427975580096245, -0.0050909495912492275, -0.004462432581931353, -0.0017954494105651975, 0.002329146256670356, -0.0049954853020608425, 0.0029943769332021475, -0.023720422759652138, 0.010021002031862736, -0.04896392300724983, 0.00955036748200655, -0.003149070544168353, -0.003595980117097497, -0.0044156694784760475, -0.00015828415052965283, -0.007738469168543816, -0.0006288129952736199, -0.007669622078537941, 0.0032958819065243006, -0.015032083727419376, -0.06351669132709503, -0.032248154282569885, -0.18025453388690948, -0.06163984164595604, -0.09758920222520828, -0.05956967547535896, -0.15200407803058624, -0.001096255611628294, -0.00139527244027704, -0.0028954821173101664, -0.002875474514439702, -0.011264363303780556, -0.014317790977656841, -0.010434065014123917, -0.01481181662529707, -0.011153372935950756, -0.007928225211799145, -0.005756193306297064, -0.006947657559067011, -0.0035682523157447577, -0.00456055486574769, -0.0018615118460729718, 0.0007266966858878732, -0.061812303960323334, -0.007415087893605232, -0.08674275130033493, -0.04630497470498085, -0.02018740214407444, -0.02930389530956745, -0.0054146163165569305, -0.019008932635188103, -0.001769978436641395, -0.030524788424372673, -0.00014460454985965043, -0.005722136236727238, -0.019330516457557678, -0.013080030679702759, -0.0005406397976912558, 0.0006768343737348914, -0.003592651104554534, -0.00011539365368662402, -0.0007877812604419887, 0.001867897342890501, -0.004998684860765934, -0.018355347216129303, 0.0033769430592656136, -0.002138799522072077, 0.005226228851824999, -0.0060445996932685375, 0.00563605735078454, 0.0006765238358639181, -0.004361319821327925, -0.025803610682487488, 0.000510705285705626, -0.0015869643539190292, -0.03488793224096298, -0.17181245982646942, -0.005682847928255796, -0.03906115144491196, -0.0038437219336628914, -0.0062820790335536, 0.0022861266043037176, -0.004289176315069199, -0.007193434052169323, -0.036163829267024994, -0.003429545322433114, -0.006793618202209473, -0.0032077347859740257, 0.00011159323912579566, -0.0019818281289190054, -0.001566017046570778, -0.004464716650545597, -0.006538650020956993, 0.001966161886230111, -0.017514653503894806, -0.015502318739891052, -0.02005508542060852, -0.00971568189561367, -0.01379891112446785, -0.002751927822828293, -0.007097617257386446, -0.0010141932871192694, -0.022898994386196136, 0.011320621706545353, -0.01667596586048603, 0.013757219538092613, -0.023103035986423492, -0.002773732878267765, -0.011905886232852936, -0.0027192996349185705, -0.03863510489463806, 0.0026216416154056787, -0.010501322336494923, 0.003675147658213973, -0.036132875829935074, 0.0014550071209669113, -0.0018736012279987335, 0.0019570349249988794, -0.004570788703858852, -0.024695543572306633, -0.0070677087642252445, 0.0015389658510684967, -0.0015470845391973853, -0.0017567910254001617, -0.01030063722282648, -0.0004982421523891389, -0.03609298914670944, -0.002823418006300926, -0.010021904483437538, -0.000822446309030056, -0.008871868252754211, -0.004276425112038851, -0.0027345081325620413, -0.00210174429230392, -0.03211423382163048, -0.1239132508635521, -0.03809807822108269, -0.22577586770057678, -0.06880004703998566, 0.006170286331325769, -0.046202756464481354, 0.01874195598065853, -0.031128570437431335, -0.14452524483203888, -0.03727085888385773, -0.19164685904979706, -0.05660000815987587, -0.005821654573082924, -0.07455462217330933, -0.012828732840716839, -0.17196810245513916, 0.006120102945715189, -0.005307846236974001, 0.0050476123578846455, -0.0035822747740894556, -0.004437021445482969, -0.004186282865703106, -0.001121386419981718, -0.013540775515139103, -0.0007832555565983057, -0.004128068685531616, -0.002604132052510977, -0.0006470903754234314, 0.00934524368494749, -0.020768797025084496, 0.02071642130613327, -0.036626044660806656, -0.015338278375566006, -0.018702659755945206, -0.0023613718803972006, -0.014420952647924423, -0.09450634568929672, -0.041014645248651505, -0.15458405017852783, -0.04692044109106064, 0.0024283176753669977, -0.020913168787956238, -0.0030568446964025497, -0.011409053578972816, -0.0018502924358472228, -8.079489634837955e-05, -0.01686715893447399, -0.004737157374620438, 0.007374128792434931, 0.015073728747665882, -0.021714771166443825, -0.04924936220049858, -0.028673412278294563, 0.0005148854106664658, -0.010022389702498913, 0.0009542204206809402, -0.0022619464434683323, -0.004738507326692343, -0.20920825004577637, -0.053124573081731796, -0.1343402862548828, -0.04354647919535637, -0.009980801492929459, -0.0014624247560277581, 0.00033216102747246623, -0.00853058136999607, -0.007161133456975222, 0.0016002418706193566, -0.00674074562266469, 0.004149973392486572, -0.0049417936243116856, -0.01840830408036709, -0.003805524669587612, 0.0006072089308872819, -0.0068114749155938625, 0.002082789782434702, -0.007076718844473362, 0.004669892136007547, -0.15106898546218872, -0.04195433109998703, -0.19100460410118103, -0.06171984225511551, -0.0033198946621268988, -0.024084772914648056, -0.0021770154125988483, -0.010920047760009766, -0.00709277531132102, -0.003812472801655531, -0.005868278909474611, 0.0023881052620708942, -0.0023940149694681168, -5.4608844948234037e-05, -0.001964323688298464, -0.003951669670641422, -0.003661360824480653, -0.004194484557956457, 0.0006211569416336715, -0.0007705226889811456, -0.14360688626766205, -0.006210861727595329, -0.007739512249827385, -0.008927994407713413, -0.003718102350831032, -0.0090349605306983, -0.01290854997932911, -0.004998357966542244, -0.004569604992866516, -0.0022221889812499285, -0.011524578556418419, -0.0159295666962862, -0.0012933453544974327, -0.011573835276067257, -0.011216502636671066, -0.012415648438036442, -0.0023467191495001316, -0.0053845904767513275, -0.006211387924849987, -0.007682466879487038, -0.0036011007614433765, -0.004763314966112375, -0.0021101797465234995, 0.0010817794827744365, -0.005372007843106985, -0.0014367243275046349, 0.001060896785929799, -0.0074447025544941425, 0.0025269915349781513, 0.0007522053783759475, 0.004856477957218885, -0.007255106698721647, 0.0055701700039207935, -0.0031268696766346693, -0.023120691999793053, 0.006284522358328104, -0.0017701038159430027, 0.0038350927643477917, -0.008014312945306301, 0.009922790341079235, -0.0014460731763392687, 0.008490183390676975, 0.0021334330085664988, -0.009615948423743248, 0.0011934987269341946, -0.004463811870664358, 0.0006682063103653491, -0.002030304167419672, 0.0012410152703523636, -0.005908595863729715, -0.0028675224166363478, 0.00019662964041344821, -0.0004395789874251932, -0.022811641916632652, -0.002813180675730109, 0.0007484991801902652, -0.0050108544528484344, -0.006222299300134182, 0.00028754191589541733, -0.003109501674771309, -0.0002497186360415071, -0.008227615617215633, 0.0012362507404759526, -0.01818208023905754, -0.0004104207328055054, -0.047850366681814194, -0.004527592565864325, -0.0020121841225773096, 2.5093655494856648e-05, -0.00423873495310545, -0.0010890704579651356, -0.004439406096935272, 0.0007468892727047205, -0.005535487551242113, -0.029513470828533173, -0.07137080281972885, -0.010449573397636414, -0.06309930980205536, -0.07058767974376678, -0.17850437760353088, -0.06531018763780594, -0.0978664979338646, -0.006045295391231775, -0.005661287344992161, -0.004807377699762583, -0.005653973203152418, 0.0055648935958743095, -0.005067060701549053, -0.005116194020956755, 0.0033998049329966307, 0.004790185485035181, -0.0026523973792791367, -0.003076146822422743, 0.0032513479236513376, -0.01402913685888052, 0.0028308462351560593, -0.0016663633286952972, -0.0158160962164402, -0.0030019800178706646, 0.0009702600655145943, -0.0011858252109959722, -0.001725122332572937, -0.010960761457681656, 0.0012620642082765698, -0.00041617784881964326, -0.006936001591384411, -0.000968805281445384, 0.0006372143398039043, -0.00011386282130843028, -0.0007841656915843487, 0.00041235960088670254, -0.00772911636158824, -0.006658187136054039, 4.0546619857195765e-05, 0.0010429632384330034, -0.008548825047910213, -0.006776439491659403, 0.0009567182860337198, -0.0046468693763017654, -0.0005580070428550243, -0.00044720774167217314, -0.007303833030164242, -0.0016883499920368195, -0.0002393221657257527, -0.00016272826178465039, -0.0008628210052847862, -0.01528827752918005, -0.04696725308895111, -0.04328825697302818, -0.017725083976984024, -0.013940648175776005, -0.03673973307013512, -0.0376172699034214, -0.019602665677666664, -0.01371542178094387, 0.03389925882220268, 0.03171230107545853, -0.006756296381354332, 0.020775265991687775, 0.018827250227332115, 0.019953398033976555, 0.020913492888212204, -0.014863859862089157, -0.06588846445083618, -0.067988820374012, -0.018099281936883926, -0.023277945816516876, -0.0762646272778511, -0.06295018643140793, -0.01959771290421486, -0.007107370533049107, 0.00014098981046117842, 0.0001657917455304414, -0.006901054177433252, -0.010065849870443344, 0.000545539369340986, 0.0008877046639099717, -0.009749294258654118, 0.01933789998292923, -0.006816227920353413, -0.010929225943982601, 0.028245653957128525, 0.017888268455863, -0.002430209657177329, -0.007239288184791803, 0.020528949797153473, 0.022753342986106873, -0.028654687106609344, -0.028138337656855583, 0.020207542926073074, -0.006661432795226574, 0.0014252347173169255, 0.0005114582017995417, -0.006003751419484615, -0.00836870726197958, 0.0019027983071282506, 0.0013873932184651494, -0.00830660481005907, -0.005349602550268173, 0.016998272389173508, 0.016633981838822365, -0.00483625428751111, 0.0027292652521282434, 0.012664729729294777, 0.012340669520199299, 0.0034173615276813507, -0.01711096242070198, -0.06766404956579208, -0.056872665882110596, -0.017429541796445847, -0.023178614675998688, -0.07428869605064392, -0.08287251740694046, -0.023087764158844948, 0.0009956430876627564, -0.015787316486239433, -0.016686467453837395, -0.001452335505746305, 0.0004431893758010119, -0.002495462540537119, -0.0031423072796314955, -0.0008392774034291506, 0.004603215958923101, -0.008040600456297398, -0.010952301323413849, 0.0023781093768775463, 0.004196403082460165, -0.005828905384987593, -0.007322467397898436, 0.0023391975555568933, -0.014215744100511074, -0.04533449187874794, -0.041230764240026474, -0.01375406514853239, -0.013538516126573086, -0.034997716546058655, -0.03780592605471611, -0.014576926827430725, -0.049390438944101334, -0.01738622598350048, -0.019763343036174774, -0.04363982006907463, -0.044301122426986694, -0.01634133793413639, -0.016169728711247444, -0.059706948697566986, -0.0004388031375128776, -0.005225528497248888, -0.0043638297356665134, -0.0004663611180149019, -3.061230745515786e-05, -0.0023387824185192585, -0.00286985095590353, 2.936377677542623e-05, 0.00918550044298172, 0.020199058577418327, 0.02824549935758114, 0.01444602757692337, -0.07582846283912659, -0.039788272231817245, -0.036580491811037064, -0.10252363979816437, -0.04883879795670509, -0.02264079824090004, -0.027699651196599007, -0.09117710590362549, 0.03240462392568588, -0.007947408594191074, -0.00949480477720499, 0.03050868771970272, 0.028644803911447525, -0.00520807970315218, -0.005842485465109348, 0.027817944064736366, 0.029159149155020714, -0.007168091833591461, -0.011589918285608292, 0.032167691737413406, 0.02241133153438568, -0.00315028871409595, -0.0036084619350731373, 0.025336820632219315, -0.007219528313726187, 0.0005717524909414351, 0.00029486624407581985, -0.007270591799169779, -0.004822599235922098, -1.6687314200680703e-05, -0.00022568815620616078, -0.005906475242227316, -0.013400690630078316, 0.0009048269712366164, -0.0008720164187252522, -0.012498537078499794, -0.0038177594542503357, 0.0003958342131227255, -0.0005065423902124166, -0.005072413943707943, -0.0072682942263782024, -0.0015056958654895425, -0.0021522503811866045, -0.0085648437961936, -0.0028109767008572817, -0.0015007847687229514, -0.0011184073518961668, -0.0015273081371560693, -0.03966642543673515, 0.0841207206249237, 0.08589240163564682, -0.027911560609936714, 0.025170082226395607, 0.0578308068215847, 0.059659574180841446, 0.03880349174141884, -0.011483533307909966, 0.0007374511915259063, -0.0005013322224840522, -0.006271709222346544, -0.0007398260058835149, 0.0004977225326001644, -0.000291619187919423, -0.0004558905493468046, -0.0022692917846143246, -0.00031230287277139723, -0.0004854651924688369, -0.0029451348818838596, -0.006115255877375603, 0.0009175703162327409, 0.0006290946039371192, -0.005320174153894186, -0.0017410111613571644, -0.01197733636945486, -0.010226906277239323, -0.0016034391010180116, -0.0013423492200672626, -0.0061634862795472145, -0.005252036731690168, -0.0009041364537551999, 0.004599188454449177, -0.006844657473266125, -0.009581747464835644, 0.003590831533074379, 0.003592825261875987, -0.005524179898202419, -0.0055524129420518875, 0.003020654199644923, 0.0026109092868864536, -0.006911212578415871, -0.005778111517429352, 0.002397613599896431, -0.0002256018779007718, -0.003424223978072405, -0.001954244449734688, 0.00011693056876538321, -0.0027809871826320887, -0.0006996587035246193, -0.0006883858586661518, -0.0023617022670805454, -0.004836219362914562, 6.748591113137081e-05, 4.0136823372449726e-05, -0.003559766337275505, -0.0005596810951828957, -0.004184838384389877, -0.0028487129602581263, -0.00032399402698501945, -0.0012840424897149205, -0.007020408287644386, -0.004513151478022337, -0.0007841573096811771, -0.007233802229166031, -0.0019782988820225, -0.0016112641897052526, -0.008746213279664516, -0.003379994770511985, -0.0016046288656070828, -0.0009218735503964126, -0.0061158002354204655, -0.06569132208824158, -0.016457105055451393, -0.016147594898939133, -0.07335231453180313, -0.03360828757286072, -0.016747821122407913, -0.016171732917428017, -0.040471918880939484, -0.010333070531487465, -0.001599182141944766, -0.002680606907233596, -0.013598616234958172, -0.004086735192686319, -0.00189745775423944, -0.001847253879532218, -0.006739071104675531, -0.0034283380955457687, 5.0362312322249636e-05, 0.0003793757641687989, -0.002326889894902706, 7.323188765440136e-05, 0.0006063703913241625, 0.0006077517173253, 4.0592672689854226e-07, 0.0035124323330819607, 0.01089155301451683, 0.015240035019814968, 0.0042736041359603405, 0.003887722035869956, 0.01859378069639206, 0.021623743698000908, 0.0034113407600671053, -0.007972557097673416, 0.011656898073852062, 0.01042073406279087, -0.00573944253847003, -0.005246983841061592, 0.011213698424398899, 0.011503457091748714, -0.003049667924642563, -0.07616200298070908, -0.013729897327721119, -0.01472389418631792, -0.10297046601772308, -0.07364169508218765, -0.013666439801454544, -0.01475105993449688, -0.10152357816696167, -0.006708221975713968, 0.005982368253171444, 0.006099741905927658, -0.006404302082955837, -0.003269408131018281, 0.004696938209235668, 0.004777426365762949, -0.0042374590411782265, -0.007772132754325867, 0.00143259740434587, 0.002181034069508314, -0.009460732340812683, -0.006562178023159504, 0.00046114245196804404, 0.00047662912402302027, -0.008317760191857815, 0.035505231469869614, -0.006239328999072313, -0.010590475983917713, 0.03587409853935242, 0.02186494879424572, 0.009203917346894741, -0.0014413496246561408, 0.02226690761744976, -0.01060116570442915, 0.02647348865866661, 0.02396969124674797, -0.006268142722547054, -0.010061622597277164, 0.035051748156547546, 0.03929473087191582, -0.0023070552852004766, -6.426733307307586e-05, -0.008624549023807049, -0.008426294662058353, -0.00034232932375743985, 2.3171362045104615e-05, -0.0036035089287906885, -0.0034748432226479053, 0.00011241766333114356, 2.5616642233217135e-05, -0.01336352527141571, -0.014813861809670925, -0.0008253547130152583, 0.0001553465990582481, -0.004811761435121298, -0.006928318180143833, 0.0003864490718115121, 0.0012765225255861878, -0.01704893819987774, -0.016908487305045128, -0.0016229844186455011, 2.8652348191826604e-05, -0.006605285685509443, -0.010170716792345047, -0.001410383847542107, -0.062245018780231476, -0.027189016342163086, -0.03072996251285076, -0.08479258418083191, -0.03646257147192955, -0.02014448493719101, -0.02259751968085766, -0.03307178243994713, -0.005343543365597725, 0.018728775903582573, 0.024783464148640633, -0.006328159477561712, 0.0021016444079577923, 0.01549041923135519, 0.019102193415164948, 0.0005087766330689192, -0.0054718670435249805, -0.000341697916155681, -0.00041323958430439234, -0.004589085001498461, -0.00043313446803949773, 0.0005452987970784307, 0.0006272486643865705, -0.00020728804520331323, 0.0005605931510217488, -0.004252469167113304, -0.0035884238313883543, 0.00024493830278515816, 0.001367409829981625, -0.008794465102255344, -0.00854357611387968, 0.0007034845184534788, -0.015769651159644127, -0.055282946676015854, -0.06119707226753235, -0.018377184867858887, -0.022471023723483086, -0.0521090105175972, -0.06277498602867126, -0.01807698979973793, -0.022325003519654274, 0.032900139689445496, 0.03312921151518822, -0.023631177842617035, 0.008489558473229408, 0.02198556251823902, 0.022638360038399696, 0.012833341024816036, -0.10092896968126297, -0.007863509468734264, -0.0078087192960083485, -0.09635179489850998, -0.012055609375238419, -0.007382173091173172, -0.006888116709887981, -0.0079734418541193, -0.17152728140354156, -0.006571047939360142, -0.006926593370735645, -0.14787603914737701, -0.0032189073972404003, -0.005765177309513092, -0.00611438974738121, -0.0031016694847494364, -0.1725601851940155, -0.004838674329221249, -0.005547360982745886, -0.1725870966911316, 0.0008443516562692821, -0.004096240270882845, -0.004509693942964077, -0.0002680102188605815, -0.12231101095676422, -0.005086295306682587, -0.005986839532852173, -0.13405992090702057, 0.0007216954254545271, -0.0031789622735232115, -0.003750934498384595, 9.101020259549841e-05, -0.07394794374704361, 0.01898699626326561, 0.0784023329615593, -0.008211439475417137, -0.10013681650161743, 0.01707828789949417, -0.055859945714473724, 0.004363321233540773, -0.1429523229598999, 0.20962825417518616, 0.30189764499664307, -0.14085352420806885, 0.006279100198298693, 0.0266476608812809, -0.1141248568892479, 0.14827358722686768, -0.005405576899647713, 0.04045424982905388, 0.05865837633609772, 0.058835990726947784, 0.09641452878713608, 0.027323829010128975, -0.0031988564878702164, -0.025808481499552727, 0.2807534337043762, 0.6693254113197327, 0.37055957317352295, -0.05712592974305153, -0.003276233095675707, 0.025898050516843796, -0.24270524084568024, 0.5921747088432312, -0.6957690715789795, 0.2319674789905548, 0.07611296325922012, -0.00644589401781559, -0.06195696443319321, -0.02550996094942093, 0.9649220108985901, -0.05507628992199898, 0.10060697793960571, -0.13770614564418793, -0.018686190247535706, 1.284175992012024, -0.04201856628060341, 1.316433072090149, -0.06736090779304504, 0.5376058220863342, -0.8982057571411133, 0.3340030610561371, -0.002154209418222308, 0.7263802289962769, -0.06095598638057709, -0.35455194115638733, -0.004409575369209051, 0.11899102479219437, -0.5837915539741516, 0.5059089660644531, 0.1672084778547287, -0.30817002058029175, 0.25577312707901, -0.347360223531723, -0.19340364634990692, -0.01487851794809103, 0.0963641032576561, -0.21059150993824005, 0.003939735237509012, -0.04660046473145485, -0.05789317935705185, 0.0013987553538754582, -0.2402401864528656, 0.9873924255371094, -0.027747323736548424, -0.03686317428946495, 0.5323299169540405, -0.7375632524490356, 0.247849240899086, -0.02701573632657528, -0.06063912808895111, 0.31797051429748535, 0.36898118257522583, -0.026747683063149452, -0.18201202154159546, -0.17546416819095612, 0.2671070992946625, 0.009929713793098927, 0.10489723086357117, -0.11290787905454636, 0.19573774933815002, -0.27427592873573303, 0.006807482335716486, -0.04950438067317009, 0.32612308859825134, -0.08895852416753769, -0.0880751758813858, 0.3880513608455658, 0.3359605073928833, -0.017861258238554, -0.0338505394756794, 0.39399394392967224, 0.012797990813851357, -0.021994592621922493, -0.031668566167354584, 0.008746340870857239, 0.33820170164108276, -0.2321101576089859, -0.04773007705807686, 0.046494558453559875, -0.06026547774672508, -0.05482165142893791, -0.4393479824066162, 0.2682640552520752, -0.3505781888961792, 0.9110074043273926, 0.9436298608779907, -0.20858818292617798, -0.059400320053100586, 0.061031524091959, 0.045665327459573746, -0.1395794153213501, -0.450369268655777, 0.5726431012153625, -0.12002208083868027, 0.011141400784254074, 0.013398603536188602, -0.04891210049390793, 0.05766274780035019, -0.13170713186264038, -0.2509750723838806, 0.17947393655776978, -0.1075071468949318, 0.1182883158326149, 0.3896220326423645, 0.14173883199691772, -0.08669650554656982, -0.2050056755542755, 0.32954421639442444, -0.47129255533218384, -0.03835580125451088, 0.06468944996595383, -0.013088957406580448, -0.06356703490018845, -0.14633439481258392, 0.022571904584765434, -0.03487197682261467, -0.054408036172389984, -0.0021362064871937037, -0.016524236649274826, -0.033146247267723083, -0.0031798246782273054, -0.0019636666402220726, -0.02372274547815323, 0.24607069790363312, -0.10825299471616745, 0.023242169991135597, -0.049140945076942444, 0.42635753750801086, -0.0752435252070427, -0.47220492362976074, 0.20920124650001526, 0.011527356691658497, 0.0031455920543521643, -0.009182516485452652, 0.004422810859978199, 0.009970464743673801, 0.005533569026738405, -0.07238771766424179, 0.03134161978960037, -0.062168776988983154, 0.10902909189462662, -0.0229549128562212, -0.003442106768488884, 0.14196990430355072, 0.23318608105182648, -0.0014517403906211257, -0.01359589397907257, 0.5067964792251587, -0.04042511805891991, 0.4921152591705322, 0.15805912017822266, 0.014073921367526054, 0.34256136417388916, 0.28166770935058594, -0.5545210242271423, -0.00631805881857872, -0.011597431264817715, 0.17966437339782715, -0.027621205896139145, -0.09016994386911392, 0.5330501794815063, -0.03540848195552826, 0.00283635500818491, 0.5983527898788452, 0.12992610037326813, 0.7187473773956299, -0.47408565878868103, -0.6846879124641418, 0.030332067981362343, 0.7610382437705994, 0.02657151035964489, 0.8967934250831604, 0.04059344530105591, 0.5247260332107544, -0.024696731939911842, 0.14641518890857697, -0.8374667763710022, -0.19611681997776031, -0.14699965715408325, -0.23048052191734314, 0.2608278691768646, -0.018463974818587303, -0.008795540779829025, -0.29646384716033936, 0.004307615105062723, -0.002931284951046109, -0.012486997060477734, -0.00398692162707448, -0.02745361626148224, -0.010179318487644196, -0.02978643961250782, -0.009584405459463596, -0.02363409474492073, -0.005882218014448881, -0.011731592006981373, -0.003569596679881215, -0.012929435819387436, -0.01146947592496872, -0.02493930049240589, -0.011636428534984589, -0.028100116178393364], "data_max": [0.008349306881427765, 0.005672150757163763, 0.014356470666825771, 0.02379765547811985, 0.06808670610189438, 0.051368679851293564, 0.05698595941066742, 0.055431921035051346, 0.046252913773059845, 0.05065183714032173, 0.039162248373031616, 0.053484514355659485, 0.02072051353752613, 0.10316137969493866, 0.06896251440048218, 0.04357532039284706, 0.6764539480209351, 1.513785481452942, 1.2356493473052979, 0.7237898111343384, 0.14310680329799652, 0.09747528284788132, 0.10897786915302277, 0.10122590512037277, 0.03539795055985451, 0.31710758805274963, 0.05534624308347702, 0.25714215636253357, 0.1061478927731514, 0.05987474322319031, 0.06965920329093933, 0.044535547494888306, 0.05982903391122818, 0.05053604394197464, 0.05826690047979355, 0.04762769863009453, 0.11541672796010971, 0.1317714899778366, 0.08735601603984833, 0.1195395365357399, 0.3974659740924835, 0.06514158844947815, 0.3676466941833496, 0.0614975243806839, 0.03144760802388191, 0.1769673079252243, 0.03816024959087372, 0.1311076581478119, 0.20745962858200073, 0.6800547242164612, 0.2049279361963272, 0.4648285210132599, 0.18801157176494598, 0.11124785989522934, 0.0899101197719574, 0.18225827813148499, 0.1674463450908661, 0.2703116238117218, 0.17656309902668, 0.16157472133636475, 0.033622995018959045, 0.02541462332010269, 0.02733018808066845, 0.03221754729747772, 0.18345117568969727, 0.09031009674072266, 0.14199095964431763, 0.13315033912658691, 0.09469197690486908, 0.059229422360658646, 0.0890376940369606, 0.05771556869149208, 0.03330990672111511, 0.07355577498674393, 0.01829608716070652, 0.09782955795526505, 0.08069887012243271, 0.1352771520614624, 0.07236023992300034, 0.1625991314649582, 0.10591074079275131, 0.2284781038761139, 0.07852916419506073, 0.2589837610721588, 0.07984018325805664, 0.14050664007663727, 0.07740873843431473, 0.17834687232971191, 0.033743999898433685, 0.04762502759695053, 0.03344056010246277, 0.0511842742562294, 0.2885180711746216, 0.06120173633098602, 0.21099472045898438, 0.07125423103570938, 0.05900163948535919, 0.1249275952577591, 0.03128783404827118, 0.17900227010250092, 0.08209634572267532, 0.4112873673439026, 0.08187774568796158, 0.3932150900363922, 0.15663687884807587, 0.1418062150478363, 0.06559181958436966, 0.23211146891117096, 1.0302798748016357, 0.37175142765045166, 0.9141867756843567, 0.4938003718852997, 0.08577699959278107, 0.30230313539505005, 0.05921987071633339, 0.29368525743484497, 0.8957617282867432, 0.22073514759540558, 0.894860565662384, 0.37379610538482666, 0.18016254901885986, 1.0419650077819824, 0.17946967482566833, 1.2297052145004272, 0.03127046674489975, 0.056422095745801926, 0.041047289967536926, 0.048244260251522064, 0.17171093821525574, 0.0998927503824234, 0.12752032279968262, 0.15131548047065735, 0.04750961810350418, 0.050682805478572845, 0.06080193817615509, 0.03900217264890671, 0.058593638241291046, 0.18033914268016815, 0.05392996966838837, 0.20760226249694824, 0.14634232223033905, 0.15446126461029053, 0.09049750119447708, 0.19762638211250305, 1.1127889156341553, 0.5309557318687439, 1.0771925449371338, 0.4915632903575897, 0.15900449454784393, 0.26576289534568787, 0.016284963116049767, 0.09554287046194077, 0.04012329503893852, 0.05125878006219864, 0.21054545044898987, 0.23178435862064362, 0.1843944489955902, 0.24094857275485992, 0.1341746747493744, 0.34199368953704834, 0.24493078887462616, 0.20733551681041718, 0.03723606839776039, 0.021061444655060768, 0.024686943739652634, 0.047101013362407684, 1.1957427263259888, 0.4238695502281189, 1.3375520706176758, 0.25563547015190125, 0.09655347466468811, 0.02356044016778469, 0.022419696673750877, 0.07240051031112671, 0.06122269853949547, 0.3062049150466919, 0.08921023458242416, 0.27765607833862305, 0.031178487464785576, 0.20449167490005493, 0.05928901210427284, 0.14307810366153717, 0.06572449952363968, 0.29026299715042114, 0.07996624708175659, 0.2585676610469818, 0.9186116456985474, 0.20564013719558716, 0.979293942451477, 0.24969114363193512, 0.07936578243970871, 0.1504940688610077, 0.09061235934495926, 0.10413055866956711, 0.05068710818886757, 0.2370714545249939, 0.10737115144729614, 0.15727266669273376, 0.021663960069417953, 0.007971254177391529, 0.012868929654359818, 0.01998109556734562, 0.03549323230981827, 0.031001901254057884, 0.024995509535074234, 0.019378207623958588, 1.7579928636550903, 0.603255569934845, 0.06884075701236725, 0.08767224848270416, 0.04991159588098526, 0.10980807989835739, 0.05892716348171234, 0.06627549231052399, 0.05544927716255188, 0.057400330901145935, 0.06871574372053146, 0.07158517092466354, 0.04919140040874481, 0.07551632076501846, 0.0756913498044014, 0.054524876177310944, 0.06177141144871712, 0.05267295986413956, 0.05678672716021538, 0.04390588402748108, 0.04817986488342285, 0.044334929436445236, 0.05677465721964836, 0.04641563445329666, 0.056819524616003036, 0.05262887477874756, 0.042976729571819305, 0.0884852334856987, 0.07150378078222275, 0.05819135904312134, 0.060970183461904526, 0.11834677308797836, 0.059772033244371414, 0.10719452798366547, 0.19482199847698212, 0.07062593847513199, 0.13223206996917725, 0.1270359754562378, 0.15294373035430908, 0.10047248005867004, 0.1333674192428589, 0.11388808488845825, 0.049736835062503815, 0.0730263963341713, 0.06423891335725784, 0.06044207885861397, 0.06824725866317749, 0.06418463587760925, 0.055221471935510635, 0.08067412674427032, 0.06581048667430878, 0.06716645509004593, 0.030897758901119232, 0.10386382043361664, 0.06678584218025208, 0.04657614603638649, 0.05417937412858009, 0.06673312187194824, 0.08239397406578064, 0.09648013114929199, 0.07537046074867249, 0.10726933181285858, 0.09659025073051453, 0.21478307247161865, 0.05900653824210167, 0.2610757648944855, 0.03647148609161377, 0.050088364630937576, 0.024171102792024612, 0.05635756254196167, 0.0540706105530262, 0.0953555554151535, 0.045485761016607285, 0.10102840512990952, 1.0636638402938843, 0.33594557642936707, 0.870901882648468, 0.14826737344264984, 0.407716304063797, 0.39994481205940247, 0.5319401621818542, 0.23560801148414612, 0.013692444190382957, 0.0048681264743208885, 0.014118478633463383, 0.030284307897090912, 0.053486086428165436, 0.06827282905578613, 0.06037027761340141, 0.05676674097776413, 0.04868278279900551, 0.048423830419778824, 0.05307643115520477, 0.04015098512172699, 0.10241597890853882, 0.023188896477222443, 0.041004981845617294, 0.07106988877058029, 1.3315119743347168, 0.7001356482505798, 0.6611624956130981, 1.2903028726577759, 0.09933722019195557, 0.13947676122188568, 0.09074509143829346, 0.10753612220287323, 0.32211941480636597, 0.034159425646066666, 0.2600895166397095, 0.055051714181900024, 0.06062901020050049, 0.1063435822725296, 0.04468721151351929, 0.062283046543598175, 0.04972069337964058, 0.06794975697994232, 0.04684329032897949, 0.06621643900871277, 0.12617290019989014, 0.12644091248512268, 0.1232776865363121, 0.08922047168016434, 0.06278026849031448, 0.41461703181266785, 0.06225666403770447, 0.38617873191833496, 0.18115289509296417, 0.03423745930194855, 0.13460737466812134, 0.03730665519833565, 0.6677278876304626, 0.20130714774131775, 0.49817126989364624, 0.19429410994052887, 0.13071168959140778, 0.1677394062280655, 0.18350379168987274, 0.08171524107456207, 0.2688418924808502, 0.17512403428554535, 0.1636405885219574, 0.18197156488895416, 0.027141742408275604, 0.03587888553738594, 0.030418701469898224, 0.029257064685225487, 0.0935673713684082, 0.19055680930614471, 0.13882361352443695, 0.1601465344429016, 0.06152663379907608, 0.09421981126070023, 0.0638168677687645, 0.08812052756547928, 0.0797778069972992, 0.03462808579206467, 0.10869485884904861, 0.022844593971967697, 0.13673347234725952, 0.07672435790300369, 0.16454283893108368, 0.051539480686187744, 0.26014643907546997, 0.10175818204879761, 0.29465192556381226, 0.07989417016506195, 0.15719838440418243, 0.08510775119066238, 0.19233521819114685, 0.054759860038757324, 0.04948506876826286, 0.035231925547122955, 0.05104586482048035, 0.03230052813887596, 0.05129454284906387, 0.29853448271751404, 0.07274146378040314, 0.21742941439151764, 0.1429339051246643, 0.059467993676662445, 0.20278790593147278, 0.03128458559513092, 0.4304691255092621, 0.08479622006416321, 0.4046287536621094, 0.09557303786277771, 0.15030087530612946, 0.17824259400367737, 0.261583149433136, 0.06656207144260406, 0.33612769842147827, 1.7890833616256714, 0.4576065242290497, 1.9782384634017944, 0.32280224561691284, 0.09021876752376556, 0.3124014735221863, 0.05978744849562645, 0.257584810256958, 2.0167834758758545, 0.34229445457458496, 1.9636132717132568, 0.9427706599235535, 0.18174336850643158, 1.0884089469909668, 0.15398436784744263, 0.06084952875971794, 0.03275132551789284, 0.054003242403268814, 0.039168812334537506, 0.11100117117166519, 0.19541054964065552, 0.16135098040103912, 0.14541611075401306, 0.05566278472542763, 0.04455737769603729, 0.040943119674921036, 0.05111705884337425, 0.17930488288402557, 0.062199972569942474, 0.21223585307598114, 0.050017811357975006, 0.1588629186153412, 0.14488545060157776, 0.20151908695697784, 0.10386504232883453, 0.47722670435905457, 1.315027117729187, 0.49706971645355225, 1.6171525716781616, 0.2728373408317566, 0.1542547643184662, 0.10942566394805908, 0.016508502885699272, 0.05966943874955177, 0.04504777491092682, 0.2331983596086502, 0.22758278250694275, 0.26672276854515076, 0.19778059422969818, 0.3443162143230438, 0.1228068619966507, 0.2066270112991333, 0.24519169330596924, 0.02194538712501526, 0.04188670590519905, 0.04043510928750038, 0.030313992872834206, 0.687596321105957, 1.8356554508209229, 0.2848058044910431, 2.3098862171173096, 0.021490583196282387, 0.10001937299966812, 0.07632005214691162, 0.026833435520529747, 0.3075956106185913, 0.07361912727355957, 0.2766689658164978, 0.09250988066196442, 0.22160875797271729, 0.030324311926960945, 0.15955939888954163, 0.061966490000486374, 0.2921532094478607, 0.07635524123907089, 0.2721116244792938, 0.08359531313180923, 0.3760293126106262, 1.7420833110809326, 0.30068227648735046, 1.520578145980835, 0.15278686583042145, 0.07512302696704865, 0.10311869531869888, 0.08835823088884354, 0.23786142468452454, 0.05691982060670853, 0.15510724484920502, 0.10657677054405212, 0.008334869518876076, 0.021539956331253052, 0.021513160318136215, 0.010316160507500172, 0.03138723969459534, 0.0226146150380373, 0.01916218176484108, 0.018481088802218437, 0.6192165017127991, 2.696153402328491, 0.08729328960180283, 0.07382968813180923, 0.09891343116760254, 0.0563386008143425, 0.07005707174539566, 0.06320015341043472, 0.06049492955207825, 0.05811283737421036, 0.0695347860455513, 0.06902224570512772, 0.07916412502527237, 0.05295887589454651, 0.05029428005218506, 0.07796914130449295, 0.05240410193800926, 0.06598079204559326, 0.043376240879297256, 0.05926866456866264, 0.047579050064086914, 0.04968387633562088, 0.040921375155448914, 0.06360478699207306, 0.04503268748521805, 0.061434607952833176, 0.09201855212450027, 0.04454139620065689, 0.055451683700084686, 0.073920838534832, 0.12560482323169708, 0.06341881304979324, 0.10869581252336502, 0.057750072330236435, 0.0613960400223732, 0.2120513916015625, 0.12082380056381226, 0.13945452868938446, 0.09993907064199448, 0.16844166815280914, 0.12174542248249054, 0.14653223752975464, 0.08002104610204697, 0.053137652575969696, 0.06302641332149506, 0.06599833071231842, 0.06701190024614334, 0.07445545494556427, 0.08703914284706116, 0.06201395019888878, 0.07212744653224945, 0.0742398276925087, 0.10702183842658997, 0.030238237231969833, 0.04117811471223831, 0.06868474930524826, 0.06212208420038223, 0.05348493531346321, 0.08828842639923096, 0.08104672282934189, 0.1028069406747818, 0.07228555530309677, 0.23892341554164886, 0.09859469532966614, 0.2960006892681122, 0.05743416026234627, 0.03818168863654137, 0.04054000973701477, 0.044457126408815384, 0.026767659932374954, 0.11728772521018982, 0.054344747215509415, 0.11045248806476593, 0.056433044373989105, 0.823777973651886, 0.24333907663822174, 1.1403231620788574, 0.3078289031982422, 0.4957813322544098, 0.2115127593278885, 0.36414045095443726, 0.3516906499862671, 0.17609389126300812, 0.1577739119529724, 0.14900998771190643, 0.19692039489746094, 0.08392494171857834, 0.038975637406110764, 0.04349235072731972, 0.08183898776769638, 0.08606470376253128, 0.03319874033331871, 0.035671282559633255, 0.08384941518306732, 0.020852355286478996, 0.1409895420074463, 0.12500503659248352, 0.023016078397631645, 0.02248646505177021, 0.12329311668872833, 0.1103644147515297, 0.023713110014796257, 0.015589541755616665, 0.11020654439926147, 0.1028345376253128, 0.01617252640426159, 0.019523387774825096, 0.10221291333436966, 0.09586472064256668, 0.019017258659005165, 0.09875120222568512, 0.023175690323114395, 0.023404143750667572, 0.09075693041086197, 0.10357924550771713, 0.01739657297730446, 0.018106980249285698, 0.09574408829212189, 0.009341597557067871, 0.07678013294935226, 0.08340135961771011, 0.01048195082694292, 0.010367287322878838, 0.07112227380275726, 0.07902144640684128, 0.012005685828626156, 0.5360978245735168, 0.18104064464569092, 0.15969577431678772, 0.5418282747268677, 0.5332912802696228, 0.13361138105392456, 0.1365017592906952, 0.5449246168136597, 0.1421641707420349, 0.24663691222667694, 0.2391645461320877, 0.1332544982433319, 0.18428312242031097, 0.18848590552806854, 0.1836477816104889, 0.19435866177082062, 0.769553542137146, 0.19113165140151978, 0.1883496791124344, 0.7560417652130127, 0.8064625859260559, 0.16825176775455475, 0.1961187869310379, 0.8079618215560913, 0.00678535969927907, 0.07910274714231491, 0.07803421467542648, 0.006931595038622618, 0.0027460947167128325, 0.08071334660053253, 0.0790175125002861, 0.002409097272902727, 0.14078658819198608, 0.1366545408964157, 0.14952170848846436, 0.14364974200725555, 0.12411246448755264, 0.15654844045639038, 0.16261026263237, 0.12616299092769623, 0.14647436141967773, 0.04669737070798874, 0.0404495894908905, 0.14269989728927612, 0.018153296783566475, 0.07945048063993454, 0.08076074719429016, 0.018040355294942856, 0.009354538284242153, 0.08921752125024796, 0.09456862509250641, 0.008685726672410965, 0.09034053236246109, 0.11483027040958405, 0.11588134616613388, 0.08401724696159363, 0.1083529070019722, 0.10127004981040955, 0.10323911905288696, 0.09844524413347244, 0.6003931760787964, 0.1589658409357071, 0.1737227439880371, 0.6476812958717346, 0.5963484644889832, 0.1634300947189331, 0.16956734657287598, 0.642507016658783, 0.11479503661394119, 0.01898818649351597, 0.022111812606453896, 0.10138207674026489, 0.10669893771409988, 0.019579138606786728, 0.020343346521258354, 0.09629844129085541, 0.1180909052491188, 0.046011123806238174, 0.04020935669541359, 0.11057516932487488, 0.11770402640104294, 0.046374447643756866, 0.04176134988665581, 0.10915406048297882, 0.5369492173194885, 0.13682785630226135, 0.14409451186656952, 0.5895155072212219, 0.552986204624176, 0.16479244828224182, 0.19480296969413757, 0.5583574175834656, 0.14008165895938873, 0.4787417948246002, 0.49161794781684875, 0.1533423662185669, 0.14011336863040924, 0.4966813623905182, 0.5076850652694702, 0.1407073587179184, 0.09061423689126968, 0.009235210716724396, 0.009057236835360527, 0.08512385189533234, 0.09567609429359436, 0.006125580985099077, 0.006489085033535957, 0.08885009586811066, 0.2318415343761444, 0.21224403381347656, 0.18479956686496735, 0.22689907252788544, 0.3209224343299866, 0.5956022143363953, 0.5685640573501587, 0.32096418738365173, 0.1781027466058731, 0.5804927945137024, 0.558323085308075, 0.18589794635772705, 0.1394391655921936, 0.12171268463134766, 0.11251603811979294, 0.13248324394226074, 0.11397114396095276, 0.1401534527540207, 0.12968559563159943, 0.1158437579870224, 0.12512323260307312, 0.1267443746328354, 0.11827042698860168, 0.11393579840660095, 0.10411746799945831, 0.14308352768421173, 0.1358683556318283, 0.10207723081111908, 0.0027349863667041063, 0.07785692811012268, 0.07791268080472946, 0.0027376622892916203, 0.005406789481639862, 0.07780538499355316, 0.07777811586856842, 0.005248602945357561, 0.02169765718281269, 0.09517282992601395, 0.08957036584615707, 0.02137831225991249, 0.021944940090179443, 0.08269070088863373, 0.08042729645967484, 0.0219681728631258, 0.013961263932287693, 0.08572200685739517, 0.080621138215065, 0.013244742527604103, 0.013682729564607143, 0.0777520164847374, 0.07204551249742508, 0.013510194607079029, 0.1738416999578476, 0.6441306471824646, 0.6205596923828125, 0.18304966390132904, 0.32763728499412537, 0.44796496629714966, 0.425108939409256, 0.306691437959671, 0.010911070741713047, 0.0885467529296875, 0.08905385434627533, 0.012210092507302761, 0.01736409217119217, 0.0834425613284111, 0.08490283042192459, 0.018059248104691505, 0.01823158748447895, 0.06238380819559097, 0.06153620034456253, 0.017726976424455643, 0.007953855209052563, 0.07119819521903992, 0.07221643626689911, 0.007251082919538021, 0.09802976250648499, 0.02433079108595848, 0.024465598165988922, 0.08725199848413467, 0.09010285884141922, 0.01889411173760891, 0.020498892292380333, 0.08088558167219162, 0.11059598624706268, 0.045024506747722626, 0.043351415544748306, 0.10280727595090866, 0.10383274406194687, 0.049696411937475204, 0.046135589480400085, 0.09621112793684006, 0.08993737399578094, 0.026147538796067238, 0.02725105918943882, 0.08625251799821854, 0.08176705241203308, 0.027068106457591057, 0.029153738170862198, 0.07935348153114319, 0.02819560468196869, 0.07506302744150162, 0.0698932409286499, 0.023547887802124023, 0.02002549357712269, 0.08355472981929779, 0.07462388277053833, 0.016101311892271042, 0.059710100293159485, 0.009559386409819126, 0.01021283958107233, 0.05524997413158417, 0.06375153362751007, 0.010969586670398712, 0.012405681423842907, 0.05945056676864624, 0.013950400054454803, 0.0657510831952095, 0.06504601240158081, 0.016158420592546463, 0.010985762812197208, 0.06197886914014816, 0.06271852552890778, 0.011626837775111198, 0.15690571069717407, 0.49270886182785034, 0.5222122669219971, 0.1871236115694046, 0.12584497034549713, 0.5821676254272461, 0.6322730779647827, 0.1224188283085823, 0.02317129261791706, 0.07358245551586151, 0.07169412076473236, 0.02349483035504818, 0.02418951503932476, 0.06632933020591736, 0.06309864670038223, 0.02442300319671631, 0.01141140516847372, 0.10890796780586243, 0.12897498905658722, 0.010685225017368793, 0.007666117511689663, 0.1116151213645935, 0.130783811211586, 0.007160963956266642, 0.12943442165851593, 0.13693904876708984, 0.11787217110395432, 0.1284751296043396, 0.1304548680782318, 0.11891846358776093, 0.11624626070261002, 0.12574346363544464, 0.03351086005568504, 0.07063766568899155, 0.06703447550535202, 0.04357372596859932, 0.03261176869273186, 0.06651786714792252, 0.06627804785966873, 0.04153983294963837, 0.1525651216506958, 0.6273330450057983, 0.6487682461738586, 0.14236919581890106, 0.19307640194892883, 0.5867601037025452, 0.5820944309234619, 0.17640890181064606, 0.03773675486445427, 0.07960091531276703, 0.08006780594587326, 0.04045010730624199, 0.043088581413030624, 0.07555907219648361, 0.07471678406000137, 0.04472183436155319, 0.029768897220492363, 0.07088787108659744, 0.07032835483551025, 0.03612912446260452, 0.02906092256307602, 0.0664457380771637, 0.0653582289814949, 0.03458814695477486, 0.2136254608631134, 0.07490253448486328, 0.07527337223291397, 0.20219746232032776, 0.19189347326755524, 0.100594162940979, 0.10708574950695038, 0.17307963967323303, 0.07432111352682114, 0.17451806366443634, 0.16158615052700043, 0.07972022891044617, 0.046100419014692307, 0.17981892824172974, 0.16506892442703247, 0.05256161838769913, 0.08311336487531662, 0.028245121240615845, 0.02783273532986641, 0.07499343156814575, 0.07452823221683502, 0.026046158745884895, 0.025067931041121483, 0.06924928724765778, 0.10156140476465225, 0.041745223104953766, 0.03602055087685585, 0.09183886647224426, 0.0941835567355156, 0.03518077731132507, 0.03345433250069618, 0.08525111526250839, 0.11279694736003876, 0.034208737313747406, 0.03233148530125618, 0.1046457588672638, 0.10977500677108765, 0.032425977289676666, 0.03165360912680626, 0.10333172231912613, 0.17642588913440704, 0.6882777214050293, 0.6468811631202698, 0.17530928552150726, 0.18638162314891815, 0.6063037514686584, 0.6358646750450134, 0.2219354808330536, 0.08575557917356491, 0.1522865742444992, 0.15627145767211914, 0.0946047380566597, 0.10325897485017776, 0.13620533049106598, 0.14095963537693024, 0.10414255410432816, 0.012704014778137207, 0.11100514233112335, 0.12930993735790253, 0.013718661852180958, 0.010017530992627144, 0.10665369778871536, 0.1267017424106598, 0.009415175765752792, 0.11993817239999771, 0.020872624590992928, 0.020395932719111443, 0.1331881284713745, 0.12549027800559998, 0.004697326570749283, 0.007253553718328476, 0.13911904394626617, 0.5045966506004333, 0.22197312116622925, 0.22162945568561554, 0.5144121050834656, 0.5528397560119629, 0.12113390117883682, 0.11611922085285187, 0.5383970737457275, 0.09688371419906616, 0.27476051449775696, 0.25236907601356506, 0.09614943712949753, 0.15601733326911926, 0.17405693233013153, 0.1620418131351471, 0.14081239700317383, 0.10623186081647873, 2.2706687450408936, 2.3358254432678223, 0.1068853959441185, 0.10560343414545059, 2.129997730255127, 2.254873514175415, 0.11350049823522568, 0.08194103837013245, 1.9138668775558472, 2.0513296127319336, 0.07284533977508545, 0.16704128682613373, 1.628330111503601, 1.784407615661621, 0.18149395287036896, 0.06972602754831314, 1.323169469833374, 1.4429523944854736, 0.0687553808093071, 0.2171306312084198, 0.9984128475189209, 1.0822029113769531, 0.22946225106716156, 0.044934168457984924, 0.7075914740562439, 0.7607077956199646, 0.04410487040877342, 0.1918485462665558, 0.4235049784183502, 0.45546239614486694, 0.2114814966917038, 0.2432108223438263, 0.47114795446395874, 0.7994376420974731, 1.1804901361465454, 0.005376606248319149, 0.36584779620170593, 0.3900587260723114, 0.35152456164360046, 0.02895672619342804, 1.2447905540466309, 1.4650791883468628, 0.5032419562339783, 0.0725283995270729, 0.15316617488861084, 0.07883904874324799, 0.9966694116592407, 0.017956826835870743, 0.20991231501102448, 0.20762453973293304, 0.21386732161045074, 0.797603964805603, 0.3447200655937195, 0.032225511968135834, 0.010364256799221039, 1.4409863948822021, 2.605710744857788, 1.8172281980514526, 0.8804658055305481, 0.04888208955526352, 0.25440868735313416, 0.14487366378307343, 1.692124366760254, 0.11179595440626144, 1.7124601602554321, 0.4953001141548157, 0.29652196168899536, 0.046824246644973755, 0.13706490397453308, 3.675518035888672, 1.6434593200683594, 1.2724311351776123, 0.28950169682502747, 0.09570178389549255, 4.338246822357178, 0.09692833572626114, 4.472177982330322, 0.9416369199752808, 2.3624839782714844, -0.1997743546962738, 1.5417006015777588, 0.11407104879617691, 3.3114798069000244, 0.4679356515407562, 0.072076216340065, 0.08220023661851883, 1.6973872184753418, 0.07429879158735275, 2.2614054679870605, 0.857371985912323, 0.09513282775878906, 1.203830599784851, 0.38829007744789124, 0.07319151610136032, 0.341673344373703, 0.5962036848068237, 0.04327670484781265, 0.34663090109825134, 0.01348208636045456, 0.010210143402218819, 0.08032652735710144, 0.5776411294937134, 3.3730573654174805, 0.05313333496451378, 0.0484578013420105, 2.3372585773468018, -0.08579545468091965, 1.332088589668274, 0.059247396886348724, 0.4891608953475952, 1.6098058223724365, 1.2855390310287476, 0.04728373885154724, 0.2519562542438507, 0.35544028878211975, 1.229941487312317, 0.21987681090831757, 0.6687581539154053, 0.4266337752342224, 0.8735748529434204, -0.021184932440519333, 0.056420739740133286, -0.0007528388523496687, 1.7453796863555908, 0.027713989838957787, 0.036322981119155884, 1.916714072227478, 1.7607418298721313, 0.21710264682769775, 0.21344685554504395, 1.916892170906067, 0.11670029908418655, -0.0009059818694368005, -0.0005993525846861303, 0.17949463427066803, 1.5696945190429688, 0.06401512026786804, 0.27418750524520874, 0.5248119831085205, 0.06972552090883255, 0.07248697429895401, -0.057930491864681244, 1.24066960811615, 0.033574674278497696, 2.508976697921753, 2.7148585319519043, 0.03133438900113106, 0.06941238790750504, 0.5669744610786438, 0.5430120229721069, 0.0735003799200058, -0.11049481481313705, 1.6435365676879883, -0.0009347707382403314, 0.14279590547084808, 0.05283520743250847, -0.01176627166569233, 0.5022004246711731, 0.09475389122962952, 0.3559330403804779, 1.1023976802825928, 0.3964761793613434, 0.7025829553604126, 1.754889965057373, 1.075143575668335, 0.5725009441375732, 0.19170914590358734, 1.7373096942901611, 0.1179027259349823, 0.2562268376350403, 0.7511534094810486, 0.09517258405685425, 0.017482344061136246, 0.1424380987882614, 0.40638861060142517, 0.07960847020149231, 0.06906680762767792, 0.12009253352880478, 0.011914415284991264, 0.008260407485067844, 0.06266318261623383, 0.054594218730926514, 0.005186849739402533, 0.7619826793670654, 0.36346644163131714, 0.28957870602607727, 0.2501959204673767, 2.0529685020446777, -0.012078973464667797, -0.10420624911785126, 1.3044954538345337, 0.04378150403499603, 0.012136157602071762, -0.0020360462367534637, 0.02018699049949646, 0.5344423055648804, 0.4133152365684509, 0.05833093076944351, 0.5789175629615784, 0.5303189158439636, 0.7169333696365356, 0.004144710022956133, 0.026051277294754982, 1.2594009637832642, 1.5243374109268188, 0.026902908459305763, 0.0030490770004689693, 2.6393306255340576, 0.26073259115219116, 1.8038398027420044, 0.9269912838935852, 0.13201288878917694, 1.4710512161254883, 1.2756671905517578, 0.006609570700675249, 0.10219670832157135, 0.07703149318695068, 0.9961103200912476, 0.19744545221328735, 0.6094313859939575, 1.9854542016983032, -0.001592517364770174, 0.046772152185440063, 2.495866537094116, 1.484893798828125, 2.7942912578582764, 0.5577430129051208, 0.06420143693685532, 0.9916814565658569, 2.91664719581604, 0.1339062750339508, 3.641533851623535, 1.1290959119796753, 2.7008180618286133, 0.024551374837756157, 1.1679887771606445, -0.11201747506856918, 0.24917101860046387, 0.3768630623817444, 0.04315502569079399, 1.2865806818008423, 0.015524918213486671, 0.02876356989145279, 0.03112761490046978, 0.4346376657485962, 0.20285660028457642, 0.04259456321597099, 0.2503029406070709, 0.02496136538684368, 0.07594813406467438, 0.09186459332704544, 0.10173232853412628, 0.06542108207941055, 0.20320385694503784, 0.0469539500772953, 0.21358722448349, 0.04497377201914787, 0.08664047718048096, 0.054968591779470444, 0.08284500986337662, 0.055721741169691086], "data_means": [0.0009033591682377821, 0.001946241024355613, 0.006604708225581771, 0.003524304855770593, 0.04023071141069897, 0.013507506106528955, 0.03476033512359655, 0.01897788239394318, 0.026881373440389506, 0.01522928983921765, 0.021924807924592588, 0.020185855355813846, 0.010917921081665562, 0.022647268579699564, 0.023498861789676025, 0.01006632787276985, 0.24390031490122013, 0.19759839523302514, 0.21372031584592296, 0.2277783942783446, 0.0823189419025111, 0.011344599799608189, 0.06265885575394305, 0.03100468595166216, 0.01705246439845696, 0.055732899551093375, 0.018812013416860156, 0.05397335053311248, 0.011470688295120698, 0.02613497879853425, 0.016926986877096324, 0.02067868021614126, 0.03172597159348641, 0.012841616769081346, 0.028656085142229594, 0.015911503218786243, 0.043970676598668296, 0.03718430934873205, 0.030529569784060615, 0.050625416161283375, 0.052590506086668765, 0.028855257865016606, 0.05646282682189302, 0.02498293712953359, 0.014536122945427806, 0.03710826532558438, 0.014314440002116886, 0.03732994827007575, 0.05489769670315692, 0.08920344938567801, 0.0644001131495216, 0.07970103293984994, 0.039655522848969234, 0.04420173177778673, 0.021614310486703127, 0.0622429441397794, 0.06716843650126171, 0.09215225975241757, 0.09106441741738357, 0.06825627883525602, 0.009024934309685997, 0.00929782515454882, 0.00613690658086962, 0.012185852882842834, 0.04071306297842625, 0.0506722934744422, 0.019817167656316786, 0.07156818879633392, 0.058045527021569836, 0.015258838932591919, 0.053859332747167976, 0.01944503320728776, 0.009465778221311429, 0.027068335911354383, 0.0010067600512876549, 0.03552735408151769, 0.019107148286565217, 0.08019023567321067, 0.0006196433163442468, 0.09867774064572223, 0.026682389919670004, 0.08172583245584339, 0.010822959937615442, 0.09758526243718965, 0.019905021574626622, 0.0692179914751092, 0.0019883161948526353, 0.08713469685522882, 0.01225430049373675, 0.021131407647024453, 0.00849914118929621, 0.024886566952939688, 0.036391972103836843, 0.022261410083659346, 0.03263943768169871, 0.026013944504840295, 0.019319082774179062, 0.04811630076848549, 0.0015578856097783692, 0.06587749793247952, 0.0405660535259371, 0.06674885741733955, 0.03384177035499277, 0.07347314058944887, 0.033859646829978045, 0.05528453510264499, 0.009012332383907114, 0.08013184954924839, 0.14430153858897599, 0.12290598605284643, 0.0853483533456871, 0.18185917129267723, 0.012536106903815434, 0.17683052655693834, 0.008651708768678587, 0.18071492469707867, 0.10942692690081775, 0.087887125118464, 0.06840625735085615, 0.12890779466970498, 0.05905190917542559, 0.1593043952094274, 0.03540622356843426, 0.18295008081933037, 0.009148850728241453, 0.029531214999362846, 0.014092989740128625, 0.02458707598624748, 0.036696071100161896, 0.04393267928004217, 0.01597386804263124, 0.06465488233688443, 0.011923444260113287, 0.02696126450943777, 0.019996949891973766, 0.018887758876730106, 0.01774116915079003, 0.12101001533947454, -0.003030889801015409, 0.1417820742939855, 0.05627976472858698, 0.03525878376095258, 0.04112408182407617, 0.05041446666336213, 0.18967686365365824, 0.1509596944191512, 0.16116279167169595, 0.1794737663990267, 0.06289228392091718, 0.08964356050643336, 0.0038515226875822975, 0.016570536345915737, 0.01127278071287369, 0.009149278320996837, 0.12035694650809825, 0.05211371239027834, 0.09935011985525705, 0.07312053904329088, 0.03937066064858882, 0.217388640430183, 0.13008038603890862, 0.12667891503599316, 0.015083565381111929, 0.0002251459194520864, 0.006739316967360744, 0.008569394333265836, 0.09717898720372428, 0.07172399480728016, 0.08605580453422867, 0.08284717747418045, 0.027023192299200274, 0.00515641803481292, 0.004924981780343836, 0.02725462855364963, 0.025366071793530218, 0.061995612483671435, 0.03110428795900481, 0.056257396318019896, 0.008357391309922687, 0.037542726808790755, 0.019735031679957014, 0.02616508643968256, 0.024581304735467498, 0.05796123131389697, 0.03198513256075612, 0.05055740348866916, 0.08322857158019925, 0.07350880845136569, 0.04729319373708317, 0.10944418629505305, 0.03701491787832492, 0.05573164719065986, 0.048091831796167966, 0.04465473327413727, 0.02145597242200833, 0.04909668944328527, 0.03795398247097054, 0.03259867939513749, 0.005692172154987668, 0.0012576628180422397, 0.0016629149315607722, 0.005286920041241352, 0.005809238538870442, 0.011030476680834058, 0.008294273862969347, 0.00854544135688744, 0.14231215176626189, 0.08392618406782999, 0.024472524385218276, 0.016688762641616645, 0.017219629775578157, 0.023941657251484175, 0.03153646323590668, 0.028661784671822232, 0.029250080776411728, 0.030948167131474306, 0.03785939831995346, 0.009258413076324013, 0.028287366726251723, 0.018830444670686175, 0.04246931020322991, 0.009430361804986593, 0.034849471540582, 0.017050200467646215, 0.03293804623054026, 0.011282001791879685, 0.028300559301164298, 0.01591948872072992, 0.016222811610460897, 0.014967617842415692, 0.014912973437392616, 0.016277456015189026, 0.017160421312570704, 0.03957507734523435, 0.030840868642248543, 0.02589463001718983, 0.02846492343640923, 0.060822443184537105, 0.029810979413500256, 0.059476387206868916, 0.0849060116480422, 0.0014727278446802037, 0.05515191681771616, 0.0312268226753417, 0.07526307376414972, 0.02082408540078774, 0.06034566608520718, 0.03574149308141959, 0.007542809569107636, 0.04422126802372104, 0.014803730129121923, 0.036960347463603396, 0.019048137090054946, 0.02748940428868331, 0.009806227495393097, 0.036731313883350804, 0.017589068569783185, 0.02629345643969331, 0.0005628338875767339, 0.04331969112286254, 0.020841075356232478, 0.011448549490578414, 0.017260958502329324, 0.015028666344135463, 0.019499105209438358, 0.023681355047722865, 0.013417928490411917, 0.029762531766799286, 0.024097573707663706, 0.0822905742722793, 0.002843369242361242, 0.10354477873620284, 0.013344561728763823, 0.008053569946846884, 0.0070959073931909054, 0.0143022242823584, 0.0123926355963334, 0.031995736983481335, 0.009690081523688143, 0.03469829105679509, 0.16226496302910925, 0.0569996414443674, 0.17588426218434564, 0.03352727495506584, -0.009100079731400453, 0.0783580982602945, -0.008965498350829033, 0.06435546756789849, 0.0039570800554748105, 0.0019414115762088197, 0.0033655860124712756, 0.003832078698749061, 0.014252387514052589, 0.039645374143761875, 0.019777488781299264, 0.03412027287670517, 0.01590112228156803, 0.026698034714444582, 0.02084737426000796, 0.02175178273621531, 0.023926323170258147, 0.011365468711009255, 0.010639217411793528, 0.024652574469908373, 0.19311242008065102, 0.24936959128090788, 0.22746860247910997, 0.21501340887727172, 0.012179083856217932, 0.08303586552530844, 0.032265297788038695, 0.06294965159191504, 0.05499337015370511, 0.016739053253135804, 0.05333513366603272, 0.01839728974215506, 0.026566119189426064, 0.011782329701498792, 0.021171888295314318, 0.017176560596051414, 0.012536240240400912, 0.03160322900562424, 0.015544563274248977, 0.028594905971633295, 0.03824928691253166, 0.04625464631351037, 0.05245701163729991, 0.03204692158779941, 0.029488447363294153, 0.05309734780788433, 0.025399821449227287, 0.05718597372376122, 0.0363993266259635, 0.014671477034079608, 0.03668213513432386, 0.014388668525642847, 0.08754738006007634, 0.05770498332623726, 0.07935246110852433, 0.06589990227770873, 0.04385556972074023, 0.04044965909726849, 0.061992797350816635, 0.022312431467252765, 0.09440621697363397, 0.0687414575949707, 0.06925969540160735, 0.09388797916902603, 0.009111028777809407, 0.008982421881722267, 0.011964070074464143, 0.0061293805851526904, 0.05164934034869428, 0.0424921185967414, 0.07307298331260291, 0.02106847563212118, 0.01631854675890415, 0.05733332977223506, 0.02016817651222267, 0.053483700018546916, 0.02794807148034548, 0.009331911362968787, 0.03691706386298508, 0.00036291898048002795, 0.08133153510569996, 0.020128829215122837, 0.10059392054334595, 0.0008664437760290627, 0.08281521610240998, 0.027004233499341796, 0.09799556419401594, 0.01182388540725473, 0.07065657156536821, 0.02054828181420676, 0.08925075776579149, 0.001954095612868621, 0.020832047617260048, 0.012189554776866564, 0.02443602077302867, 0.008585581621986712, 0.022227109552778377, 0.03654917978639399, 0.02556457001233768, 0.03321171932759244, 0.04959593043875683, 0.019293414215824777, 0.0672433171485572, 0.0016460275045228332, 0.0663307487088586, 0.04069204562691852, 0.07309084776897182, 0.03393194656426629, 0.056413222464623554, 0.03439383083259939, 0.08192022495554203, 0.00888682834306105, 0.12057259220058483, 0.14584831663799935, 0.17941242875882604, 0.08700848008825723, 0.17852027958054711, 0.013120392888951476, 0.18249430451798662, 0.009146367951415924, 0.08757524680174499, 0.11286200349902328, 0.1273546022253635, 0.07308264807250132, 0.15732541986460968, 0.05930432448854295, 0.18064844184083118, 0.035981302508854854, 0.02898827836752665, 0.009034303247745625, 0.024280789723760465, 0.01374179189159587, 0.04525232697931775, 0.03789899113601641, 0.0666604885341898, 0.01649082957915636, 0.02721463667244087, 0.011765719773185614, 0.019088582824846545, 0.019891773620727426, 0.12191495499160206, 0.01863645676327623, 0.143149270097183, -0.0025978583471345683, 0.03458100128389385, 0.057523686193698194, 0.05067879598887526, 0.041425891488471506, 0.14781145229180176, 0.19125960627617697, 0.17692633293535456, 0.162144725636571, 0.09127619514716424, 0.06519654666646969, 0.017911582528537168, 0.003802464046539574, 0.009915313513067254, 0.011798733061237571, 0.05378479928571712, 0.11966419253125272, 0.07407152184253556, 0.09937746997458545, 0.21868802794501496, 0.0411779486171207, 0.12608049877720898, 0.1337854777770914, -0.00017738028067204104, 0.015514321528702735, 0.008249408005875323, 0.007087533241951219, 0.07168871593659291, 0.1016905874369847, 0.08420567518169766, 0.08917362819136077, 0.005760862625350098, 0.02677941533894707, 0.027990401624479036, 0.004549876339820684, 0.06522847414394911, 0.025555809746723102, 0.058802002268741486, 0.031982281618403455, 0.04025922832852147, 0.008197985530962645, 0.02819511733712502, 0.02026209652249564, 0.061178480908811346, 0.025253295815120022, 0.05400142365124812, 0.03243035307120342, 0.07539696495623288, 0.08874009350312638, 0.11222286220383897, 0.051914196257301336, 0.05743437435208322, 0.03751808654262207, 0.046075963136719175, 0.04887649775796426, 0.05149434866645121, 0.021642706234943992, 0.03428029507239528, 0.03885675982808604, 0.0013062525446635596, 0.00577510495863392, 0.005382340753384082, 0.0016990167496395835, 0.01121899594172559, 0.005797953895110903, 0.008700829023015633, 0.008316120813732857, 0.08688568395854554, 0.1462039067909434, 0.016439266936016814, 0.024474539282088276, 0.023864716055468804, 0.017049090163132802, 0.029488547637327257, 0.0315912872368818, 0.03189296105877612, 0.0291868738158448, 0.009478708990919602, 0.037903526910165485, 0.01922777895472042, 0.028154456945139378, 0.010037153798389145, 0.042235398912432824, 0.01748039265766612, 0.03479216005407062, 0.011698261640365522, 0.03231702850483681, 0.016159589839920302, 0.0278557003061905, 0.014622622764775519, 0.01623449535274285, 0.016076386335688236, 0.014780731780977385, 0.04047275889979148, 0.016830108870415958, 0.02635734616867517, 0.030945521601482107, 0.06092411674824982, 0.0280340179297422, 0.059864068908634646, 0.029094065768252738, 0.0022033419757675463, 0.0845340239394202, 0.031206039560507822, 0.05553132635160458, 0.020350544989543258, 0.0749530070034191, 0.03527227123221871, 0.060031280758774105, 0.0452748259532358, 0.007914196163169292, 0.03795911450311967, 0.015229907612411171, 0.02826512997986905, 0.019301496391703934, 0.03774712193203154, 0.009819504441392797, 0.027358893357524606, 0.017560614950263734, 0.04436746383617268, 0.0005520444712611666, 0.011581876907864348, 0.020785006489387813, 0.014946291514028001, 0.01742059188302208, 0.023890996071526734, 0.020254554492145645, 0.03009808501981339, 0.014047465543209332, 0.08331576964024615, 0.025133005873865216, 0.10589604682684112, 0.002552728684031523, 0.007722702763816291, 0.01375163266292138, 0.014123522487702043, 0.0073508129386605885, 0.03149307429558608, 0.012990943888771832, 0.034507934575508804, 0.009976083608269171, 0.17925307565302293, 0.07354947194148644, 0.1629096131725557, 0.06068211363174524, -0.008917432074088561, 0.05567747822580003, -0.00854060959202281, 0.06807630419028761, 0.0034628888953279363, 0.003057698850169123, 0.002975976748236677, 0.0035116250869681653, 0.02873374580948926, 0.003015967245377856, 0.0029140256088217944, 0.02870837210483546, 0.028607374784593423, 0.003142338269410062, 0.0030140494963352676, 0.02860834821640537, 0.001277498030998623, 0.03462246386698344, 0.03446863506094898, 0.0013685929770640881, 0.004702494051515391, 0.031197467844775506, 0.03111217916872517, 0.004725048869723946, 0.0017869346711888762, 0.02739152887471873, 0.027530227033146382, 0.0017958110031376811, 0.0035230775012550218, 0.025655386044136322, 0.025713995740426723, 0.0036120422954966243, 0.022857747416142098, 0.0008937404179463302, 0.000914286829020581, 0.022564822432398646, 0.024067549375202484, -0.00031606154024672395, -0.0002931095496692241, 0.023772218810807072, 0.001212974009829999, 0.01672255258395953, 0.016532406475755837, 0.0011586641935669257, 0.002340998715273014, 0.01559452787880978, 0.015346881526941483, 0.0023441891421200857, 0.049604742384054074, 0.03272190027153067, 0.033553995574714626, 0.05083095618344005, 0.04809483093860063, 0.03423181171637711, 0.0343120555312526, 0.05007289622836532, 0.026586954889757968, 0.09038664962668083, 0.09139441482948564, 0.026630330928138476, 0.054569614492795376, 0.06240399002348863, 0.06320452058521918, 0.0548202251701957, 0.05244179025108032, 0.03685465291733981, 0.03486796322705893, 0.051024380564171655, 0.05478384464294198, 0.034512598523500936, 0.03283897501262413, 0.05305336877883457, -0.0007287828951283684, 0.011439927424606935, 0.011579896425632496, -0.0007363350883802034, -0.0018092010568810835, 0.01252034558631904, 0.012674507520457165, -0.0018309461832261985, 0.05057248933660359, 0.02969632991018095, 0.02991375667965348, 0.050591176017803156, 0.043879950110163886, 0.03638886913556381, 0.036758458640773775, 0.043746474056824594, 0.0517281412027695, 0.0037312372608305873, 0.003928354480344128, 0.05194931857822874, 0.0015728361924445358, 0.01694903077775081, 0.016945963605050757, 0.0015287727157464286, -0.0009054166118248042, 0.019427283582232627, 0.019382256632735854, -0.0009075203112765442, 0.019199832840827286, 0.047925683159991656, 0.047838885623045474, 0.019337494310789585, 0.02804487907090021, 0.039080636929630076, 0.03904505136792013, 0.028131328567099222, 0.028662976811949195, 0.033680865824625046, 0.032420086454900014, 0.029338405218412578, 0.03717892493989398, 0.02516491769617865, 0.024186514122958247, 0.03757197755008694, 0.02427270714338594, 0.003781193389961745, 0.0035807300716053036, 0.02439615996127734, 0.0224907390671491, 0.005563161466554605, 0.00553388442859793, 0.0224430056051596, 0.03183827996747825, 0.007175750986857408, 0.007107675220171631, 0.03182705655758607, 0.030611839868768566, 0.008402191086725689, 0.00815062165289521, 0.0307841101257207, 0.06659910853100234, 0.03302834630539114, 0.03439368373083219, 0.06699721565258906, 0.0619745230692448, 0.03765293176766889, 0.03826889503365349, 0.06312200434843869, 0.03250489984775991, 0.03332153471927117, 0.03593355613039457, 0.033175560736563345, 0.031102506062162857, 0.03472392850638517, 0.03741113856462494, 0.03169797830393706, 0.013137733222132363, 0.002322190318210948, 0.0022071983337412873, 0.01312281163795205, 0.013348313829364184, 0.00211160971109808, 0.00209872617291163, 0.013231283799516333, 0.057740951367456696, 0.05695977193143405, 0.05732290578824624, 0.05803762715912189, 0.05904977238766275, 0.037751972156961265, 0.03700405576246708, 0.059983725717844175, 0.043315576682638385, 0.05348616786270005, 0.053650419676746046, 0.04333736180496055, 0.052015067974568216, 0.025832360748408948, 0.026058215361541206, 0.052394331312468095, 0.0466880810883594, 0.031159347633215904, 0.03152634868094068, 0.04692619798979437, 0.050052812279655766, 0.028181301682888463, 0.02844572902040891, 0.05017226124778833, 0.04245077462144937, 0.0357833393418081, 0.036133942689398214, 0.04248404758129375, -0.0017873739569911724, 0.01153235743630635, 0.011648571910892799, -0.001826289515655755, -0.0005560808009751997, 0.010301064280990056, 0.010364953397947484, -0.0005426710026095717, 0.002281402239953896, 0.026118231801719287, 0.026043577064885987, 0.002304423060363109, 0.0048379028688982475, 0.02356173117181394, 0.02349998552336687, 0.0048480146023070795, 0.0019689820083371263, 0.02260932915910584, 0.022632423137884237, 0.001985306015427505, 0.0025180436417977193, 0.022060267525922928, 0.022021819803423336, 0.002595909349626776, 0.023849685986085122, 0.1851472833571807, 0.18621379311050998, 0.023804273513020946, 0.0794325949387711, 0.12956437440103485, 0.13041057080503116, 0.07960749581862431, 0.0009267656768053537, 0.022170074973273658, 0.02202900335305681, 0.0010146493353219107, 0.0035715709704645777, 0.01952526967976127, 0.01939107633297596, 0.003652576355529723, 0.0032947479909884686, 0.01383910713730872, 0.013955256999744267, 0.0032674012981244657, -0.00026649167334631457, 0.017400346802032434, 0.017463231860048826, -0.00024057356239459978, 0.01815280842440751, 0.003057529715769915, 0.0030238754462654544, 0.018141961953385053, 0.017212579654348557, 0.003997758485479041, 0.003977543336834023, 0.017188294062475365, 0.02846325056391301, 0.006072715254876633, 0.006068449688642811, 0.02876308913591221, 0.026245343519129445, 0.008290622299919346, 0.00826655833381365, 0.02656498049085919, 0.024702980759858495, 0.003935018508599894, 0.003635189476197106, 0.02472217202430232, 0.022529960785145128, 0.006108038483460617, 0.006022475608417645, 0.022334885891643046, 0.002761205250013273, 0.014274511517374125, 0.014528369312578506, 0.002765619372895427, 0.0014224903602503877, 0.015613226406358814, 0.01578017634878153, 0.0015138123370080617, 0.01333686572954922, 0.002566542486710415, 0.002442252943357483, 0.013257223306247259, 0.013711841119991143, 0.0021915670964267535, 0.0019780036311242855, 0.013721472618898493, 0.0007095422865579428, 0.01825604129867606, 0.01816786945769192, 0.0006787576565504217, 0.002390589114331522, 0.016574994471251686, 0.016495165715905664, 0.0023514613983265393, 0.03812124106731505, 0.02737171361485877, 0.029810368154986187, 0.03846027968158362, 0.025278245962880645, 0.040214708718441614, 0.04239416406681978, 0.02587648376967873, 0.002884603065072348, 0.01950737150796497, 0.019501361139992304, 0.0029465805540180266, 0.00434184840405694, 0.018050126168621814, 0.018220677131500704, 0.00422726456231893, 0.0019052577414447529, 0.01400450938391781, 0.013976642841756322, 0.0019463673421362797, 0.00213393648128215, 0.013775830644395826, 0.013795608075334321, 0.0021274021092743426, 0.04117578096960604, 0.037750033303980586, 0.037761404082733555, 0.04090828536554991, 0.03732693832086324, 0.0415988759525977, 0.04163662785755562, 0.03703306159011691, 0.01346788422013429, 0.033979608114795425, 0.03293818417977388, 0.01358069944053998, 0.01458205622934181, 0.03286543610543433, 0.03192471970185327, 0.014594163917412138, 0.02312137474878105, 0.05979876370571548, 0.05955116652194442, 0.02296823377730827, 0.035957305139113466, 0.04696283331525959, 0.04727026520591305, 0.03524913509280042, 0.004716207414950523, 0.02850719610368788, 0.028494005335544782, 0.004573754442110756, 0.007328828109208335, 0.025894575409082514, 0.025720280248325896, 0.007347479530083797, 0.004356088345486068, 0.023345413888552134, 0.02320776679303281, 0.004435367856987374, 0.006145200237762098, 0.021556301995688643, 0.02141652969871485, 0.0062266049509820875, 0.08156341749668089, 0.021959121933011985, 0.022086936308967867, 0.08224796501059126, 0.0652886105767759, 0.03823392885128881, 0.03906750002040147, 0.065267401298427, 0.026619454200473805, 0.06121282412024444, 0.062209646629078894, 0.026498028038612436, 0.018130594982476343, 0.06970168333994857, 0.07067469819103807, 0.018032976472548697, 0.02095453078352435, 0.004061172250879262, 0.004036440990213596, 0.020876602151555863, 0.01975905980852648, 0.005256643226110368, 0.0051367079217290975, 0.01977633522051971, 0.023413398036445224, 0.004229501965938378, 0.00423310381821725, 0.023282739908998828, 0.021964233949738416, 0.0056786660525771585, 0.005617888451940927, 0.02189795527612065, 0.028976634367570173, 0.0054122123826138265, 0.005252054204241407, 0.02847579781736937, 0.027495364409302656, 0.006893482340107342, 0.006567776180599739, 0.027160075840557737, 0.03642700456063297, 0.04505762973773155, 0.047540612485456234, 0.03818464772217632, 0.03695679222557632, 0.044527842073729194, 0.047651369041737265, 0.03807389116240805, 0.022738908035835847, 0.055056072854833944, 0.054732200744350964, 0.022587358364432764, 0.030155725947687697, 0.04763925494339079, 0.04710332538660859, 0.03021623372139397, 0.00245165189996758, 0.016785365990951196, 0.01662998928080491, 0.002524587157668153, 0.0032970229119632264, 0.015939994978610147, 0.015851381088992908, 0.0033031953492081286, 0.014723950957359164, 0.00022688626413635405, 0.00022746858609221367, 0.014552461780223786, 0.017422084161530755, -0.0024712469397604924, -0.0024453170155227474, 0.017225247381335844, 0.03387346292310759, 0.03098707405635666, 0.03153224034064424, 0.035930994917319575, 0.03711660763738331, 0.027743929340500777, 0.028055332826511, 0.03940790243077146, 0.013428740592732065, 0.07803675168024769, 0.07809181339571486, 0.013012182707533458, 0.038029233220937694, 0.05343625905385081, 0.05323766707781173, 0.037866329024384617, 0.02015789606411893, 0.04496906920388186, 0.044614465533777674, 0.019679029743430807, 0.021516447543953827, 0.04361051772718932, 0.043298074708291286, 0.020995420571605077, 0.0162017963381712, 0.040915602745291206, 0.040725902850041996, 0.016101595698811283, 0.021585352920004592, 0.03553204616021259, 0.03531649595288832, 0.021511002589974668, 0.012963063077017991, 0.02993918018169093, 0.02974239094329893, 0.012913925809204295, 0.020249502671839347, 0.022652740587517522, 0.02257588683840648, 0.020080429916372253, 0.010465610842470087, 0.016577482723780613, 0.016469874133953347, 0.010320646536174982, 0.017482297855832985, 0.009560795710455788, 0.00955432390532837, 0.01723619676556323, 0.04863335373031755, 0.20478340606298745, 0.33417952126076, 0.1490207785724731, -0.03494139372513147, 0.12649271283165145, 0.0741434654808976, 0.1266999409849009, -0.033453617104272595, 0.5283529482725062, 0.6735341344507316, 0.08302492909902691, 0.03012495073124185, 0.07101740524378808, -0.014403024953316102, 0.39139811772078975, 0.010272273409410889, 0.10044567285512662, 0.10106542491212994, 0.1141054975825465, 0.25978807005192633, 0.14350458207997813, 0.01003009493291757, -0.004427184575370566, 0.7150369064964459, 1.31776967219086, 0.8169072472690376, 0.26830465022891903, 0.019504063621973617, 0.10633883233458505, -0.08907319627912606, 0.9357144401358458, -0.21116741497620076, 0.6988974634491498, 0.18660711474316416, 0.06229958056522604, -0.02759786991136261, 0.06478562167338951, 1.7104727914006965, 0.41580538166620484, 0.48568272007136515, 0.04783838250127539, 0.020814886785350074, 2.1457300774676713, 0.007356470395559214, 2.172330240322502, 0.04616755613459663, 1.2008605797405867, -0.397478543812714, 0.61570690319105, 0.039989607869967116, 1.5309872887707028, 0.15418153034972162, -0.09123551705301218, 0.02096537247679933, 0.37120263845735463, -0.18266548205572158, 1.0359188254865128, 0.4036638351924194, -0.07519339205637042, 0.5227127445442219, 0.05410189050035575, -0.08656818655789404, 0.16657423238426147, 0.30572260913137167, -0.11091625441585885, 0.10010135196281703, -0.009880016732427456, -0.01877337473866218, 0.025040060376531937, 0.11735972788089417, 1.6263755839334684, 0.009259374068977994, 0.0024252748329659252, 1.11716752643206, -0.27701805120151307, 0.5399486211625079, 0.00734523170521713, 0.21724784090701474, 0.6970913369233964, 0.6671322765556199, 0.010057593141333237, -0.037225148728744, 0.0776805184899941, 0.5571163714513864, 0.08984774913348495, 0.3212303862278484, 0.12490339328697884, 0.4203408747847555, -0.09187043163949977, 0.02449115539215194, -0.018343959760495777, 0.813619437205731, -0.01959681556097678, -0.018026980880008286, 0.8893789744649984, 0.8178676376083235, 0.04958066958602028, 0.04356156184428969, 0.8891779018105791, 0.05792540820467329, -0.011395646437098629, -0.01572515024927436, 0.07940661793232942, 0.7203871709240296, -0.07545039104425516, 0.11230946721460933, 0.20193722774963016, 0.003015365496301932, 0.005020013767844134, -0.1972052154638354, 0.5464803806299969, -0.16677134711627328, 1.4488628758487014, 1.5488833293539046, -0.09961726258639443, -0.028874030626161746, 0.22121914104861132, 0.1388464257132178, -0.06122867112531885, -0.2414905193497684, 0.9401684079616982, -0.05108257596980704, 0.06053970768822435, 0.023913930021069653, -0.021732186618391613, 0.1992948746014453, -0.031621500073963464, 0.03462049455599401, 0.5054791341469824, 0.07991382384148721, 0.35964336237587563, 0.81343579322516, 0.46568127497507195, 0.29591979407982366, -0.09854421853756713, 0.6770918747240255, -0.12994342628495664, 0.040768102941021976, 0.2920687846150235, 0.0436553293936579, -0.02960461776320916, 0.026481443331620363, 0.1205941743418337, 0.00999988297513895, 0.00396283122556497, 0.030118630585207577, -3.283558766888098e-05, -0.006499152944784987, 0.015956284664620363, 0.013218262679743643, -0.005182883415759822, 0.40497902239582223, 0.09615922699676556, 0.12476304908181121, 0.06975857919875515, 0.888721670440536, -0.03546832699048165, -0.20148933860906257, 0.5343262261606857, 0.021573540098168517, 0.005242773140795682, -0.004219171481335252, 0.008690428521787016, 0.1653922797490988, 0.0952738065377342, -0.010516924987284897, 0.2004586095074282, 0.15706853050581984, 0.3243949801450732, -0.00538015687244109, 0.006184493427559534, 0.5598011131015412, 0.6254860508905735, 0.009652516001244654, -0.004445555660409587, 1.2290466425764304, 0.07190826189616341, 0.851468266786895, 0.3785713014755912, 0.05826399783315324, 0.6730296204612914, 0.5622110434457817, -0.1343074222169542, 0.020230808442028295, 0.02029758124779886, 0.4542380888359486, 0.06345544653838558, 0.24654618397499248, 1.0249548080909383, -0.01167330322614518, 0.016030926824456507, 1.3483019053604102, 0.5645309617594004, 1.3150834532314095, -0.044127312532821435, -0.20760175367187667, 0.32398804253692387, 1.314991089940065, 0.048506206238237266, 1.61287365972475, 0.4393180480882201, 1.2863722840566914, -0.0016053611026388911, 0.43989800747930846, -0.32351171863053607, 0.03758474976054287, 0.05377273129973486, -0.05976952717682914, 0.5774630625610535, 0.0008270380440922077, 0.0035305855536817534, -0.054486278010241786, 0.11242516453075374, 0.025171519269912342, 0.00858760043526758, 0.02703876262316723, 0.005073571021887128, -0.0013000665482681816, 0.011852797275328808, -0.0013088952194782327, 0.009820130788535133, 0.02672573088218935, 0.010897625191157041, 0.024758130206384572, 0.008915863082490698, -0.001224541353522044, 0.008180156469535292, -0.001188089747493027, 0.009979459639974975], "data_vars": [1.0594801205308153e-06, 2.72553588980069e-07, 3.7988368634865136e-06, 6.730361387678675e-06, 5.382387910664084e-05, 1.4978481289035853e-05, 3.5773445538152376e-05, 2.0224043314169212e-05, 2.6317390289297953e-05, 1.227910370727598e-05, 1.8648014356658804e-05, 1.4662624916554039e-05, 9.799171659967827e-06, 0.00017095841321037328, 7.311893974981522e-05, 2.9441713510149237e-05, 0.005225893288629064, 0.0028374739657766428, 0.00678398211868441, 0.002322501276525359, 0.00013862722041777442, 5.255941875272884e-05, 8.58021780011788e-05, 5.038473873323951e-05, 2.8834719546333655e-05, 0.0013151360089039715, 3.15490192363032e-05, 0.0008209740273787001, 0.0001172119890501515, 7.833936052847098e-05, 3.080665301040198e-05, 2.3855366066862103e-05, 4.098870774195066e-05, 1.577872604882566e-05, 3.777997866542689e-05, 1.7139442116454595e-05, 0.0001266338168132882, 0.00019123168186105624, 4.597980577459236e-05, 0.00014712887075672365, 0.0018658199991028772, 3.416392848559877e-05, 0.001478144088557997, 2.8455102615764692e-05, 2.1201380628526838e-05, 0.0003988532432003527, 1.4588718155896496e-05, 0.00019983088975605276, 0.0005583788067640479, 0.000534455297628438, 0.00041846648624599485, 0.00035519160956331696, 0.00010893942929291084, 9.09931676521948e-05, 3.704344852322119e-05, 0.00016569538794032488, 0.0004594615237641983, 0.0007473696876091683, 0.0003232885648217517, 0.0002356087809258197, 6.903223820408824e-06, 9.731763441141467e-06, 4.943062046791749e-06, 1.2067491014262364e-05, 0.000282518172429494, 6.421520075549829e-05, 0.00022520252256963866, 0.0001305839418841626, 8.05853318759496e-05, 2.154865663645441e-05, 6.849526638026344e-05, 1.9905856718580128e-05, 1.063394425178834e-05, 6.684350021462971e-05, 1.2243595462802196e-05, 0.00011764053314451079, 4.8706751674116746e-05, 0.00012179014160801195, 3.9239010304833594e-05, 0.00018678456283816288, 7.59212460544177e-05, 0.0005390414758983796, 4.463243783750214e-05, 0.0007154965023986585, 7.853140632135996e-05, 0.00014656040832005196, 4.540224426132477e-05, 0.00025333310840939746, 8.93263004497438e-06, 2.5541485784743427e-05, 6.6961859693778205e-06, 3.07060482378342e-05, 0.0009295672533190327, 6.394837261505954e-05, 0.00043944951989356815, 4.5976043522878764e-05, 2.9207621277667296e-05, 0.00018984344627069193, 2.0565122878195812e-05, 0.000368023639285626, 6.328525393661417e-05, 0.002120390043420581, 5.670296365350776e-05, 0.0019229787935683331, 0.0002193701562054889, 0.00021380304685861287, 5.257695527372076e-05, 0.0005328186713886013, 0.003814391219656698, 0.0008305742738303386, 0.002654193160324723, 0.0012865001262028913, 6.65716243667182e-05, 0.0010030085716642944, 2.608440140339554e-05, 0.0009714798439484752, 0.0026367131321440762, 0.00033373695172968107, 0.0018241938840383304, 0.0006939411172079906, 0.00036774940900889116, 0.0013835494689630576, 0.0003236062115370001, 0.0019398536708528547, 6.9349123331590025e-06, 2.8212777060862372e-05, 1.0520786701974194e-05, 2.223965436649442e-05, 0.0002841007467161194, 8.35507749589621e-05, 0.0001868079734183123, 0.00017785691073792312, 1.5040203945242374e-05, 2.1106750654828438e-05, 2.014651574732065e-05, 1.3751005877251281e-05, 4.039833658480404e-05, 0.0002941485977866763, 2.7693942679989096e-05, 0.0004117018128223004, 0.00011790802462844803, 0.00011509538582381228, 6.519024603837533e-05, 0.00016213059168665529, 0.005903053302286863, 0.001588309274099357, 0.004786686836110475, 0.0015325057267862325, 0.00013753248252362508, 0.0004274627780234333, 9.126708743567628e-06, 0.00011621143917080332, 8.505602516428852e-06, 3.475490238169531e-05, 0.00044549906467956685, 0.0004950659769685739, 0.0003520399406755685, 0.0005233835821065716, 0.0001854131539241624, 0.001288761678244539, 0.0006267461831987571, 0.00045050900910631854, 2.2111706877839136e-05, 4.0591065209522494e-06, 1.0764652121215444e-05, 8.458620084713004e-06, 0.0011354624118341714, 0.00047674312631690985, 0.0008284944694969081, 0.0005062678778341236, 0.00010051244590174548, 9.63640333502573e-06, 8.925428115883175e-06, 6.470059069342805e-05, 3.536558243021772e-05, 0.0014407558324813078, 7.062666024618787e-05, 0.0011398964647312138, 2.6524731792599268e-05, 0.0005790577238575185, 2.313234770159121e-05, 0.0002757053962291123, 4.242263899258239e-05, 0.0012787117686122815, 5.037567854500018e-05, 0.0009977659871532926, 0.0015498954953229265, 0.0002545094331805259, 0.0009067194447282792, 0.0006139468867998354, 5.792205125306312e-05, 0.00018607646040982737, 5.687970128678185e-05, 9.993866173432596e-05, 3.947069101117978e-05, 0.0008518351053578166, 0.00012896899612514274, 0.0003753703719456032, 2.4627795913546084e-06, 1.0976770033251338e-06, 1.2838225709455346e-06, 4.1076045595827125e-06, 5.205744076071994e-06, 1.4363290542444095e-05, 1.3838820807275359e-06, 4.675906729856298e-06, 0.0012042540454591155, 0.0007251887783729236, 3.0118107959853865e-05, 3.535110053751745e-05, 1.7155083332954026e-05, 4.7429870637447556e-05, 4.646046118769793e-05, 5.099185095581704e-05, 2.623175882477902e-05, 4.0155149421197127e-05, 3.578654731262653e-05, 2.248446272990295e-05, 2.1816581629413414e-05, 2.5767940328241642e-05, 4.6046122194404476e-05, 1.7910188450481216e-05, 3.1516709181278855e-05, 1.6733073839620444e-05, 3.235934484917388e-05, 1.2664208427478894e-05, 2.2913501824478763e-05, 1.3080697172451038e-05, 1.7639602231210943e-05, 1.691637100385546e-05, 1.8790203604608645e-05, 1.742243847999937e-05, 2.072873003580199e-05, 8.173765376737344e-05, 3.707455365325117e-05, 3.288124146827863e-05, 5.776563236440849e-05, 0.00013844566676100658, 2.5310417305476104e-05, 0.00013090567247848905, 0.0004551501948939528, 6.580804229596052e-05, 0.00019366860048942327, 0.00017888524401412392, 0.00024890852595073863, 0.00013769675254980478, 0.00016768135371975844, 0.00018049930151472747, 3.8020972625608456e-05, 3.624636995182391e-05, 4.781449297998094e-05, 2.9392546563003094e-05, 5.877569363846459e-05, 3.029918664333598e-05, 4.50557338132182e-05, 4.9126860606107744e-05, 4.692762117159518e-05, 3.634602031165738e-05, 1.328324011174233e-05, 0.00010006177450698811, 2.6005991748777444e-05, 1.2087272541558745e-05, 2.2154778823852434e-05, 2.0779639848173243e-05, 2.0449343251717482e-05, 2.9990687351420636e-05, 1.4909388681776284e-05, 4.544158817316401e-05, 4.7410137989570686e-05, 0.000509364689853423, 4.025966413131982e-05, 0.0007597799815349537, 1.6077247826510004e-05, 9.46928645848218e-06, 7.849952096537642e-06, 1.4638087065272441e-05, 1.9033532774381275e-05, 5.9592194467675424e-05, 1.852478548202761e-05, 5.938890733828287e-05, 0.0030674286681230006, 0.00037027426368636986, 0.0038221061281181576, 0.00025683718396529704, 0.0002810714744834999, 0.0010356764474608688, 0.0002771951488042809, 0.0006982421214743314, 3.989063291967361e-06, 2.886712735656816e-07, 3.671604629569832e-06, 7.776125261306862e-06, 1.662905028704839e-05, 5.303564654566287e-05, 2.095799373053182e-05, 3.518568668426357e-05, 1.3615743459573504e-05, 2.7103885863378598e-05, 1.6124509904006974e-05, 1.9269593591349022e-05, 0.0001896603421464517, 1.0802718302957497e-05, 3.239612874467313e-05, 8.805876780318547e-05, 0.002657483682664032, 0.005545986272358718, 0.0024383602004632767, 0.006805730363136899, 5.049520486134653e-05, 0.0001450821936100045, 5.218467379589039e-05, 8.691148773624864e-05, 0.0013072194292576911, 3.1636301011706656e-05, 0.0008259194322667765, 2.920649012044813e-05, 8.586513923936261e-05, 0.00011410225703478834, 2.8167876709062274e-05, 3.23753769573201e-05, 1.4386710196565252e-05, 4.154294106928284e-05, 1.5467029340489954e-05, 3.846667303088213e-05, 0.00019466793706713728, 0.00014424235912089022, 0.0001539456278170183, 5.367565324182263e-05, 4.488339586641347e-05, 0.0018459472165018676, 2.934853341919321e-05, 0.001451140232307887, 0.0004086938898506197, 2.4670905532773632e-05, 0.00020493353524847678, 1.4582483736128335e-05, 0.0005469165058671916, 0.0005018116113807328, 0.0003505513967033428, 0.00038392131044362926, 0.00010093614483008115, 0.00010216691798561244, 0.00017349402511244067, 3.5719120836273674e-05, 0.0007938609399408804, 0.0005071729709766206, 0.0002513785236284059, 0.0003634408991069559, 1.009386294159729e-05, 6.35935259812004e-06, 1.2514507930647499e-05, 4.532351099854603e-06, 6.820484285330995e-05, 0.0003165136385308242, 0.00014078474897105217, 0.00024837245826614683, 2.2874529017175536e-05, 8.249541596168185e-05, 2.0764759446661313e-05, 6.941898849135086e-05, 7.198516491245287e-05, 1.1038006363088498e-05, 0.00012616478743427182, 1.1770277061748145e-05, 0.00013431477176269486, 5.340208921553055e-05, 0.000209955759045609, 4.181038356394016e-05, 0.0005491049921753959, 7.359725529386096e-05, 0.0007095865583166179, 4.749631315965734e-05, 0.00015778888570367911, 8.135479556482263e-05, 0.0002691801304123532, 4.8823863604869186e-05, 2.5478508546013452e-05, 8.402027430345306e-06, 2.966169259180345e-05, 6.424385466109649e-06, 7.259270272280489e-05, 0.0009013820073693063, 4.334714309475501e-05, 0.00042500444687302647, 0.00020466659134382194, 3.0451779636919616e-05, 0.00038903646287579953, 2.1414635967875257e-05, 0.002091925139605111, 6.704713121554934e-05, 0.0018982382834611304, 5.413316352103373e-05, 0.0002253345825814175, 0.0002350199159922918, 0.0005631019408299877, 5.485341657401156e-05, 0.000893003516032224, 0.003974664028897229, 0.0013825110137737906, 0.0027854986136836655, 0.0011139854337367681, 5.893910828042108e-05, 0.001104527098907065, 2.357686004898443e-05, 0.00038127028931351576, 0.002753305541562316, 0.0007599345405812764, 0.0019364797653093214, 0.0014197973808631641, 0.0003262614035357424, 0.001967335122018848, 0.0002840962851013697, 2.8541765785971127e-05, 7.038523433405274e-06, 2.3363396036289937e-05, 1.0381025025151376e-05, 8.804632461431727e-05, 0.00031310651680594787, 0.00019293140720539554, 0.00020476966850655086, 2.1022798589621955e-05, 1.6603221990393116e-05, 1.3379594794981458e-05, 2.1750908557069433e-05, 0.00034056915960214637, 3.963149043231508e-05, 0.00047662512938142544, 2.8063725544958754e-05, 0.00011824217820738248, 0.00012024631493814224, 0.0001617605351590279, 6.547254455289843e-05, 0.0016911000058703741, 0.0059833933022530395, 0.0015826378777956225, 0.004929458372073227, 0.00041340463123020534, 0.00015613844632310578, 0.00013616697113046097, 1.0517754082391674e-05, 4.0599309254680175e-05, 9.906946287010044e-06, 0.0005300195513288564, 0.0004651586435184858, 0.0005693578810630607, 0.00036852427958986055, 0.0014026523090673187, 0.00019992141581249854, 0.000471143907764555, 0.0007232345957248597, 4.220988817819786e-06, 2.3318678358921362e-05, 8.918937289783813e-06, 1.1819459720737379e-05, 0.0004947720866344912, 0.0012536213932252947, 0.0005450334673496501, 0.0009422788305095586, 1.0793877618552273e-05, 0.00010276351545406927, 6.721708892870326e-05, 9.114764600588951e-06, 0.0016395141939564034, 3.984322992251746e-05, 0.001281557326066383, 8.153000998534548e-05, 0.0006771397377354394, 2.9020293570717066e-05, 0.00032346827477380596, 2.6158493145993326e-05, 0.0014703977033993399, 4.333347856930253e-05, 0.0011614821816555833, 5.594344333283241e-05, 0.00029342167089840875, 0.0016783439180827334, 0.0006811830536370498, 0.00103254559971164, 0.00018596196950305746, 7.185864764449183e-05, 0.00010270906838083589, 6.81023908656535e-05, 0.0009530744656703594, 4.196076121243067e-05, 0.00041481185742566113, 0.00015174895884640714, 1.308589401714769e-06, 2.3483779785318378e-06, 4.473219552290187e-06, 1.290128157917126e-06, 1.564595023951315e-05, 5.752944671330411e-06, 5.2332005777634825e-06, 1.4335919535561773e-06, 0.0008012569145745162, 0.0013041030325391398, 4.066122322779061e-05, 3.112917151359397e-05, 5.3139271538946026e-05, 1.7704370390000434e-05, 5.335118036498261e-05, 5.076067753601732e-05, 4.14375299195684e-05, 2.7826700900967583e-05, 2.4921739120871814e-05, 3.709416286909844e-05, 2.8226730024582733e-05, 2.237791590635615e-05, 1.9817148670105723e-05, 4.867321884792953e-05, 1.7647917672507583e-05, 3.336846870688537e-05, 1.338636076347479e-05, 3.304390154901161e-05, 1.3431685284735607e-05, 2.3752317402267957e-05, 1.6271843611418986e-05, 1.7490864541389843e-05, 1.6916958972574546e-05, 1.8544774450939302e-05, 8.4290810572701e-05, 2.1012165531900607e-05, 3.5285717024879804e-05, 3.90051782313286e-05, 0.0001504116346373979, 5.6808343466785675e-05, 0.00014391068257186247, 2.478027876948236e-05, 6.872259501529872e-05, 0.0004700693933369619, 0.000185264553862014, 0.00020440561339353085, 0.00014038092054105157, 0.0002537785565665306, 0.00018363246361181412, 0.00017304890715759798, 3.997543339358139e-05, 4.3703645630370785e-05, 3.318296648457938e-05, 5.3790687445191556e-05, 3.287151771452928e-05, 6.621150252527674e-05, 5.226832736147495e-05, 5.012885499764175e-05, 4.0893197111986885e-05, 5.129649959552995e-05, 0.00010700083783896036, 1.4696610687008682e-05, 1.2252053163148733e-05, 2.6339505913995684e-05, 2.0209485671857402e-05, 2.3515964325263428e-05, 3.086313418333645e-05, 2.3108580584172636e-05, 4.7086339482070564e-05, 1.7002849247245414e-05, 0.000526775162629274, 4.972016833670023e-05, 0.0007937344677830592, 4.448499283137594e-05, 9.979479349650605e-06, 1.718021396225208e-05, 1.533085333552541e-05, 8.560415067516582e-06, 7.031777212638991e-05, 1.937512362494311e-05, 6.746262514771441e-05, 2.0866454006894525e-05, 0.004484593106525537, 0.0007668633766489154, 0.0030792645823952422, 0.00040701724896781064, 0.0003079171281180028, 0.0006502751077376835, 0.0003026982738919248, 0.0010683636652686237, 7.380826644880708e-05, 8.767555852105811e-05, 8.586963935385035e-05, 7.452072471361698e-05, 4.920818909294053e-05, 5.1076814276089675e-06, 5.280467803255978e-06, 5.0012218918678475e-05, 5.1315562805696116e-05, 2.9926894343767807e-06, 3.1282787171297654e-06, 5.231017232493421e-05, 2.6995513415273745e-06, 8.317840305466506e-05, 8.527858440735452e-05, 2.8848691133020246e-06, 3.197438698151059e-06, 6.427759576227202e-05, 6.510412604777124e-05, 3.4200361855872223e-06, 1.0930500956427844e-06, 5.0006521150210716e-05, 4.934381323545789e-05, 1.2150285470595734e-06, 2.204378526965042e-06, 4.094760623768627e-05, 4.0494659080191176e-05, 2.3048697417565745e-06, 3.631712062847348e-05, 1.6087346279806101e-06, 1.5795127714626879e-06, 3.449773933162498e-05, 3.8410113264787835e-05, 7.968609067409286e-07, 7.54982520509772e-07, 3.663219895014984e-05, 7.005645047100158e-07, 2.8933343047735935e-05, 2.849427840279321e-05, 7.005870823241553e-07, 7.186326436270446e-07, 2.807141354312301e-05, 2.722173772681299e-05, 7.263923361359025e-07, 0.0005748062997494172, 7.844123024687041e-05, 7.369185239816194e-05, 0.0006657247166769471, 0.000548876968526337, 6.112311305859667e-05, 6.259301832718787e-05, 0.0006443077121636475, 6.572694163487291e-05, 0.00024821734343091886, 0.00026346482874760926, 6.554586160349207e-05, 9.707101379650248e-05, 0.00017033783056814695, 0.0001804611233436268, 9.861449458364352e-05, 0.0006930568792454487, 0.00015514264761862744, 0.0001320027762165087, 0.0007085530264936803, 0.0007871453158197991, 0.00015119453092530082, 0.00012895585380845044, 0.0008066999589798472, 1.034755340285389e-06, 3.368636098823187e-05, 3.3907346109831475e-05, 1.0664281048537583e-06, 6.817795006145992e-07, 3.7713410328312895e-05, 3.796549374366082e-05, 7.593141554810855e-07, 9.63607861114164e-05, 0.00016442209750320883, 0.00013704455349696667, 7.672023803388378e-05, 6.241748157321283e-05, 0.00020017651296967955, 0.00016126828505704245, 5.004489235380213e-05, 0.000102006168303008, 2.8795739964100456e-05, 2.4456504856942155e-05, 9.004075678305491e-05, 4.09233714299581e-06, 4.329014689344e-05, 4.2341046404766565e-05, 3.91540675524413e-06, 1.433305805200348e-06, 5.361463329354774e-05, 5.2342653037891905e-05, 1.4340675326900563e-06, 5.8026236440518094e-05, 6.82725767618621e-05, 6.701268004247009e-05, 6.225420301378221e-05, 7.397851497173414e-05, 6.918936128803613e-05, 6.937241269980972e-05, 7.920422099520613e-05, 0.0003651419437893758, 0.0001372237861984732, 0.00012770533825599476, 0.00036932087676698174, 0.0004926794293880091, 0.00013809872858761504, 0.00013015138228627345, 0.0005019439576907384, 6.643060055650643e-05, 4.155122193681433e-06, 4.115083964435009e-06, 6.4469319801529e-05, 5.514226660152654e-05, 2.0048750106420783e-06, 2.001652764289049e-06, 5.32590120574903e-05, 8.67072713425863e-05, 1.0355574613781575e-05, 1.0148190282555193e-05, 8.785209656700202e-05, 8.15460565069817e-05, 1.2153466507199566e-05, 1.1925310289271221e-05, 8.184310746183355e-05, 0.0008248400078191776, 8.056395147235542e-05, 8.594712396412276e-05, 0.0009116735494243868, 0.0007443043385693175, 9.411292273322973e-05, 0.00010187733308670901, 0.0008442927167990665, 8.714442100577892e-05, 0.0004019647020428796, 0.00041461392223092307, 9.28454957140103e-05, 7.358304596003851e-05, 0.00044489825967648794, 0.0004746281249334342, 7.383791601601093e-05, 3.4594909862063656e-05, 1.1255487050824329e-06, 1.0350356966630901e-06, 3.412482244812239e-05, 3.852096965612535e-05, 2.204799194406762e-07, 2.115861839015694e-07, 3.74415320962922e-05, 0.0002865712160648112, 0.00017079251586722303, 0.00014721457797135145, 0.00025499609593609285, 0.00031915733991977845, 0.0007379175096554074, 0.0007672092225756608, 0.00026040492985396455, 0.0001768068168344776, 0.0008593821178686512, 0.000880411018782785, 0.00015905347594424396, 8.225754869055655e-05, 0.00013209466568600954, 0.00010699709623987626, 8.453042977292899e-05, 6.040144094242186e-05, 0.00016391034022622918, 0.0001336149658288617, 6.078396596978433e-05, 5.759516284861461e-05, 0.0001500916510703256, 0.00012001119650064457, 4.747137483366554e-05, 4.0962214620813084e-05, 0.00017194745503194071, 0.00013514226826199185, 3.448166270081673e-05, 3.547497677673516e-07, 3.036416279060138e-05, 3.066900264586907e-05, 4.0424831104298443e-07, 4.3974987742151497e-07, 2.9614195545265745e-05, 2.968233429764669e-05, 4.331177230579997e-07, 3.3050434025198383e-06, 5.361758688649746e-05, 5.3052218478669644e-05, 3.1824066989472778e-06, 3.3496948541293564e-06, 4.5508464059287835e-05, 4.441584700918188e-05, 3.2985719227681086e-06, 1.428909773089303e-06, 3.363385128034181e-05, 3.281282590392399e-05, 1.4347328032300456e-06, 1.6542821385719143e-06, 2.9329845712894246e-05, 2.8338369312012055e-05, 1.6254595813571563e-06, 0.00021026307710566363, 0.0010925110837346518, 0.0010350053304132125, 0.00018425809763950545, 0.00045753421984828915, 0.0005769741651165493, 0.0005260894038302856, 0.0004220543257882114, 1.1062332955682802e-06, 3.928817062942873e-05, 3.7693850973500995e-05, 1.0575637484680397e-06, 1.957641110897599e-06, 3.2462767902798574e-05, 3.159821333986785e-05, 1.7849670272787905e-06, 2.2724039314337258e-06, 2.7809925192343464e-05, 2.737673907576963e-05, 2.2662603373686167e-06, 7.975525628647507e-07, 3.5423045610205394e-05, 3.504132897184692e-05, 7.77745329182233e-07, 5.059459782736882e-05, 4.956888957672382e-06, 4.829148000150586e-06, 4.850182449122898e-05, 4.1655476422815715e-05, 3.424203988537197e-06, 3.3221456706416073e-06, 3.993260456516565e-05, 7.309903699073522e-05, 1.0567608484287605e-05, 9.97421878720741e-06, 7.249624657794608e-05, 6.256899482349968e-05, 1.5022805879781487e-05, 1.4160685630548545e-05, 6.234668535382133e-05, 4.881545108686454e-05, 4.657793399647491e-06, 4.393124328825578e-06, 4.8397057720475864e-05, 4.188836595654353e-05, 5.747616284205044e-06, 5.377559598453116e-06, 4.15533689863155e-05, 2.6178371708873654e-06, 3.0720942640474924e-05, 2.987501383800604e-05, 2.469225889377192e-06, 2.065834536164378e-06, 3.5312511541192126e-05, 3.421162668189442e-05, 1.8452265013482172e-06, 1.8027843375079875e-05, 1.1167827040778146e-06, 1.0160326343044813e-06, 1.7263075914591007e-05, 2.2885636213750884e-05, 1.5913745605607775e-06, 1.4965203497486081e-06, 2.1955686521187286e-05, 1.2843038275090144e-06, 2.8584156387949048e-05, 2.7919224372100145e-05, 1.1470989483830683e-06, 8.19167840298043e-07, 2.5830889319138603e-05, 2.486849184820467e-05, 8.385502977668323e-07, 0.0001345817268736535, 0.0004609122320990311, 0.0005063558022713558, 0.0001483029504132185, 6.575319369800412e-05, 0.0006490963588467264, 0.0007395909693945843, 6.891778968186606e-05, 3.104043189451991e-06, 4.0732580034462656e-05, 4.0057558652267166e-05, 3.302210308130301e-06, 2.7119271360563616e-06, 3.2080650470481e-05, 3.199685054016754e-05, 2.62949887547284e-06, 6.205801703668073e-07, 2.3435136685035433e-05, 2.3564870457758668e-05, 6.111407357442097e-07, 1.7364822917457815e-07, 2.3396634951514785e-05, 2.412478202058324e-05, 1.6617048287102596e-07, 0.00010577427206275059, 8.097429633672431e-05, 6.81775525358065e-05, 8.856608222585093e-05, 0.0001262607449564163, 6.661871631104395e-05, 5.4807696673640976e-05, 0.00010255449047653664, 1.4183822017694884e-05, 2.4413479914436795e-05, 2.7834662182947393e-05, 1.4086130089120049e-05, 9.771237470405123e-06, 2.3209326059032636e-05, 2.6616221829314822e-05, 9.810247996929998e-06, 0.00013251767077957952, 0.0010884403075358854, 0.001084258701316466, 0.00011577565644882892, 0.00014038050132153372, 0.000817444118885173, 0.0008251341355283005, 0.00011598642635467235, 4.961574018107203e-06, 4.914665752821996e-05, 5.015333996767014e-05, 4.836332823371192e-06, 7.137939107402958e-06, 4.431798023505323e-05, 4.498455935510227e-05, 6.864582412150762e-06, 4.705954345267453e-06, 4.204399091714339e-05, 4.2485718046191276e-05, 4.7918814680223065e-06, 4.18855849863504e-06, 3.8623924977088175e-05, 3.8249047860901636e-05, 4.4602310717939e-06, 0.00023399488691256272, 4.7073718065383475e-05, 4.493855625724958e-05, 0.00020339517028317717, 0.00020343699724544265, 5.57538273729579e-05, 5.250949890319037e-05, 0.0001751908092586548, 5.074823254782748e-05, 9.811263830196532e-05, 0.00010090359479026399, 5.077950423387889e-05, 2.1507121504022256e-05, 0.00010663511208717571, 0.00010309294331898183, 2.1760317374897242e-05, 3.7693055201634435e-05, 4.577140202819219e-06, 4.439624400136502e-06, 3.677311510489764e-05, 3.083027938034853e-05, 4.082330546227533e-06, 3.957059338425908e-06, 3.0207473360351686e-05, 5.778164883701727e-05, 9.827040316223498e-06, 9.495752238848753e-06, 5.672481915820477e-05, 4.915904531361034e-05, 8.019393134515162e-06, 7.67077903291333e-06, 4.832725108851232e-05, 7.060737824679604e-05, 7.087459457777584e-06, 7.024246867748977e-06, 6.819720116417174e-05, 6.464653895854007e-05, 5.643332659783258e-06, 5.448958231798164e-06, 6.370210740737886e-05, 0.00017407749567632339, 0.0006552468477936813, 0.0006481075869470452, 0.00018448423784217407, 0.00015268141475435, 0.0006108142979046571, 0.0006130722460031794, 0.00016198069718283907, 5.2953352649156803e-05, 0.00012819539704001553, 0.00012247072064465393, 5.316043853056784e-05, 6.860664324599582e-05, 0.00012420655139888103, 0.00011649256006491355, 7.138000577207459e-05, 9.291471082572729e-07, 2.7352308562128744e-05, 2.654887025666355e-05, 8.606095420509763e-07, 5.537846395185544e-07, 2.5590772574211888e-05, 2.495377990595971e-05, 5.510433828377089e-07, 3.24899192745148e-05, 8.989999716263888e-07, 8.28089939106559e-07, 3.1885405643919995e-05, 4.070294574753956e-05, 5.463908801342247e-07, 5.466547417920515e-07, 3.984310082621543e-05, 0.0004606443676811983, 0.0001015653935648403, 8.862608692447569e-05, 0.0005385981846836117, 0.0005583609459689752, 4.5695426458850135e-05, 4.193868288953972e-05, 0.0006282743449053935, 0.00010365184094127442, 0.0002337741399291531, 0.00020398806789257185, 8.275986013634972e-05, 0.00014326591107720582, 0.00012324123332968596, 0.00010672000598673305, 0.00011246420095652848, 4.519486004513718e-05, 0.014267650713839508, 0.014239215945462179, 4.375686120747138e-05, 4.602734988962144e-05, 0.013178365971423368, 0.013120058611808443, 4.3214105593794766e-05, 8.780313952694347e-05, 0.01082106003425755, 0.010816486093976221, 8.810023082971834e-05, 8.287885303854529e-05, 0.008085113642837441, 0.008085517397519906, 8.330451842159912e-05, 0.00010198310740547659, 0.0054145075473547915, 0.0054008568260358525, 0.00010566411728876022, 0.00012138889448550911, 0.003090848845883638, 0.003081707429654503, 0.00011914462580340149, 5.879247623032381e-05, 0.0015575930185571564, 0.0015469430834569788, 5.942270235216951e-05, 0.00010513774100118838, 0.0005539897554077421, 0.0005491775670206694, 0.00010216636407601404, 0.00020313773750427674, 0.0006635680792487921, 0.0013997434948345032, 0.007026700589887805, 2.56126819554745e-05, 0.0003761783286083079, 0.0005976046748648476, 0.0002906714972704942, 0.00015987099729948792, 0.004209202172586877, 0.005755379591615814, 0.001388123704463277, 2.4743695593854282e-05, 7.639953383809642e-05, 0.00017155451643810854, 0.0022839357476078744, 4.511232734672015e-06, 0.00014461097013792755, 0.00012016473737666442, 0.00012081642921351525, 0.001287404370312779, 0.000559119062741553, 1.2211363787686158e-05, 1.1943189770155127e-05, 0.00591788288202052, 0.019970213002928627, 0.011754112899173096, 0.0024562012465942883, 1.4966125424274376e-05, 0.00023154900645144116, 0.00045763796416625687, 0.006776609650876252, 0.004514175647521074, 0.014246316348391613, 0.0008767979765407122, 0.00018983794011457854, 1.7306137938797073e-05, 8.033268812390195e-05, 0.03407008217281547, 0.009033510198987566, 0.004784162356266646, 0.0009148315931940271, 9.674660838662389e-05, 0.05119441117301382, 8.159015275370149e-05, 0.05306120971223334, 0.00599150788386126, 0.01467267156401233, 0.0021825866379098446, 0.0052640944097296005, 0.00010816876005299564, 0.03834762676326592, 0.0016495416744712014, 0.001188717036299078, 6.297683999298468e-05, 0.010334266801472265, 0.0022021872519213596, 0.014402347502940505, 0.001942761715832034, 0.000733996632362841, 0.007071271115505972, 0.0008679402634111199, 0.0002893251565461353, 0.0006049124346317719, 0.0008918202020026816, 0.00018872808514114477, 0.0003803693186580078, 1.0433743941757444e-05, 1.6620916755727897e-05, 3.8407130452044214e-05, 0.003018393146749446, 0.034685579243857644, 2.6158463555000625e-05, 2.9174757763911876e-05, 0.019370178198613305, 0.0022742455769488045, 0.005614655505149592, 1.3537792252405265e-05, 0.0012835246306086888, 0.00826166558382751, 0.004342307530414021, 2.0190440888740574e-05, 0.00043911047754837307, 0.0007110761076740471, 0.0035900761491488536, 0.0001313651617928921, 0.0016026406003944993, 0.0015325373372423088, 0.0020368890468971832, 0.0001834908820637703, 1.995098967858798e-05, 1.742255620556468e-05, 0.01123970499901931, 3.874465089471696e-05, 3.826287067121454e-05, 0.012821405831850626, 0.011399677585419493, 0.00014067605178906035, 0.00013476469008755215, 0.012971114644962258, 5.589956235246366e-05, 2.156021697065197e-06, 3.6593093085241535e-06, 8.667524574060525e-05, 0.009529199161653519, 0.0004432162566449831, 0.0003712097415578356, 0.0007127187598614023, 9.99060923144683e-05, 9.709561650753267e-05, 0.0008781382729594536, 0.005303694150017595, 0.0004200359221073041, 0.0102602571470586, 0.011731014242210444, 0.0003298130152788408, 2.1671197686147745e-05, 0.0008185238365552727, 0.0002961379734956069, 6.060044851056479e-05, 0.0004587564663591653, 0.004920448813340636, 8.215994027169422e-05, 0.00011518520448716753, 7.526827441138758e-06, 6.255837606217936e-06, 0.0007030857665976702, 5.591064818289419e-05, 0.0017663077955264732, 0.0037088124319359372, 0.0012121835180012811, 0.0015485836482227908, 0.007846585290566203, 0.0035311539219088804, 0.001038033380678755, 0.00016815954914440898, 0.006174188459948834, 0.002327755629472236, 0.00036181279444963025, 0.0014930931235972488, 3.118254855740899e-05, 1.5214208925518525e-05, 0.00014832280696650866, 0.0005808587333023869, 7.41353373174063e-05, 6.075581693139708e-05, 7.19239594832535e-05, 1.940848324161595e-06, 5.3008475782724834e-06, 1.996063491647412e-05, 1.4265780986755467e-05, 3.561953143583157e-06, 0.001608354886672519, 0.0005683950596934541, 0.00046496223731354243, 0.000607975541107159, 0.010788206047899599, 3.2779466326862344e-05, 0.0005829646249128405, 0.0050109353162559, 9.284660622989134e-06, 4.821815294353416e-07, 5.014127567432289e-07, 2.2616977194664663e-06, 0.0012882891782310508, 0.0005457962064423119, 7.157132602068503e-05, 0.0008556125010799068, 0.0015784865841231262, 0.0018903071876847917, 2.724052286138611e-06, 3.3968025715006133e-06, 0.0047496979914099105, 0.01155329972927938, 2.6166348081548594e-06, 9.072354966005404e-07, 0.028601383495686482, 0.0003352337899649174, 0.010868165074294032, 0.003537232566733904, 7.9260832822755e-05, 0.009361233155720365, 0.005983685358632272, 0.0008632653376820973, 4.0191168946359705e-05, 3.3130672905955115e-05, 0.004938751146984588, 0.00019241372782642852, 0.002505745406896359, 0.010845348993885574, 7.74723734228028e-06, 1.1984625501550946e-05, 0.01664856693711803, 0.011553323369603677, 0.021663160432844258, 0.0030285801966769502, 0.0018885408487559284, 0.004192168270427411, 0.021089477680105707, 4.795356948788662e-05, 0.03054924807601293, 0.0045193144548754316, 0.027618018124121166, 7.443953831486155e-06, 0.00496997682640464, 0.0022018376042287737, 0.0005228414329810238, 0.0007457928802658777, 0.00026654365162378737, 0.008096586116532856, 1.9870943719848092e-06, 2.4436384596768505e-06, 0.00014937311317124135, 0.00040143819601704466, 8.54224552076957e-05, 5.8208580629595665e-06, 8.6023355554555e-05, 5.667500726567963e-06, 7.346991348116933e-06, 1.894369483792884e-05, 7.185934556625867e-06, 1.7956148534892538e-05, 8.972296265525944e-05, 1.4430903429912857e-05, 9.129305628479893e-05, 6.114683719898276e-06, 8.014289411734202e-06, 1.4820639946981858e-05, 7.750950581008709e-06, 1.871186712950176e-05], "data_std": [0.001029310507344997, 0.0005220666518559378, 0.00194906050790798, 0.00259429400563596, 0.007336475932397028, 0.0038702042955166918, 0.0059810906645989224, 0.0044971149989931555, 0.005130047786258716, 0.003504155205934232, 0.004318334673998624, 0.0038291807108772028, 0.003130362863945301, 0.013075106623288901, 0.008550961334833367, 0.005426021886257854, 0.07229034021658125, 0.05326794501176709, 0.08236493257864302, 0.048192336284157866, 0.011774006132908816, 0.007249787497073886, 0.009262946507520098, 0.007098220814629502, 0.005369796974405425, 0.03626480399649185, 0.005616851363201915, 0.028652644334837583, 0.010826448588994985, 0.008850952520970326, 0.00555037413247089, 0.004884195539376173, 0.006402242399499621, 0.0039722444598520945, 0.006146542008758004, 0.004139980931895049, 0.011253169189756643, 0.01382865437636852, 0.006780841081650001, 0.01212966902915012, 0.04319513860497356, 0.0058449917438435075, 0.03844663949629404, 0.005334332443311412, 0.004604495697525066, 0.01997131050282762, 0.003819518052830291, 0.014136155409306052, 0.02363004034622133, 0.0231182892452802, 0.020456453413189562, 0.018846527785332686, 0.010437405295039129, 0.009539033895117198, 0.0060863329290485905, 0.012872272058200327, 0.0214350536216777, 0.027338062982025048, 0.017980227051451594, 0.015349553118114537, 0.002627398679380201, 0.0031195774459278082, 0.002223299810370106, 0.0034738294451890357, 0.01680827690245178, 0.008013438759702247, 0.015006749233916006, 0.011427333104629558, 0.008976933322463167, 0.004642053062649587, 0.00827618670525644, 0.004461598000557662, 0.003260972899578949, 0.008175787436976925, 0.0034990849464970404, 0.010846222067822086, 0.006979022257746191, 0.011035857085338318, 0.006264104908511159, 0.013666914898328842, 0.008713279867789036, 0.023217266762010975, 0.006680751292893796, 0.026748766371529332, 0.00886179475734797, 0.012106213624418329, 0.006738118747938832, 0.01591644144931264, 0.002988750582597079, 0.005053858504622327, 0.002587698971939708, 0.005541303839155023, 0.030488805377040157, 0.007996772637449407, 0.020963051302078334, 0.006780563658198245, 0.0054044075787885665, 0.01377836878119801, 0.00453487848549394, 0.019183942224830275, 0.00795520294754409, 0.04604769313896822, 0.007530137027538593, 0.043851782102536416, 0.014811149725983089, 0.014622005568957114, 0.0072509968468977256, 0.02308286532015905, 0.061760757926507814, 0.02881968552622215, 0.05151886218002803, 0.03586781462819963, 0.008159143604981971, 0.03167031057101105, 0.005107289046391984, 0.031168571413339997, 0.051348935063388376, 0.018268468784484404, 0.04271058281080147, 0.026342762140823248, 0.019176793501753393, 0.03719609480796415, 0.017989058105887593, 0.044043769943691864, 0.0026334221714641583, 0.0053115701125808715, 0.0032435762210828644, 0.004715893803564115, 0.016855288390179485, 0.00914061130116373, 0.013667771340577523, 0.013336300489188263, 0.0038781701800259328, 0.004594208381737646, 0.004488487022073323, 0.0037082348735282774, 0.006355968579595406, 0.017150760851538813, 0.005262503461280486, 0.02029043648673681, 0.010858546156297721, 0.01072825175990069, 0.008074047686159361, 0.01273305115385371, 0.07683133021292071, 0.03985359800694734, 0.06918588610482976, 0.03914723140640002, 0.011727424377229003, 0.020675172986541934, 0.0030210443134068106, 0.010780140962473697, 0.0029164366127911734, 0.005895328861199798, 0.02110684876241754, 0.022250078133988067, 0.018762727431681368, 0.02287757815212466, 0.013616649878885863, 0.035899326988740876, 0.025034899304745707, 0.021225197504530283, 0.004702308675303987, 0.0020147224426586034, 0.0032809529288326347, 0.0029083706924518758, 0.03369662315179626, 0.021834448156912732, 0.028783579858956184, 0.022500397281695353, 0.010025589553824028, 0.0031042556813229366, 0.002987545500219733, 0.008043667738875597, 0.005946896874019065, 0.03795728958291553, 0.00840396693509606, 0.0337623527724478, 0.005150216674335097, 0.024063618261963817, 0.00480960993237406, 0.016604378826957433, 0.006513266384279273, 0.0357590795269157, 0.00709758258458471, 0.03158743400710625, 0.03936871213696133, 0.015953351785143018, 0.03011178249005328, 0.02477795162639227, 0.007610653799317317, 0.0136409845835932, 0.007541863250336872, 0.009996932616274152, 0.0062825704143431435, 0.02918621430329423, 0.011356451740096585, 0.019374477333481882, 0.0015693245653320437, 0.0010477008176598575, 0.0011330589441620126, 0.002026722615352854, 0.0022816099745732164, 0.003789893209899732, 0.0011763851753263197, 0.0021623845009286157, 0.03470236368691786, 0.02692932933388657, 0.005487996716458007, 0.005945679148551279, 0.004141869545622366, 0.006886934778074173, 0.0068161911055734, 0.0071408578585361185, 0.005121694917190892, 0.006336809088271251, 0.005982185830666457, 0.004741778435345008, 0.00467082237185417, 0.005076213187824329, 0.006785729304533483, 0.004232043058675233, 0.005613974454989874, 0.004090608003661613, 0.00568852747634868, 0.0035586807144613146, 0.004786804970382516, 0.003616724647032317, 0.004199952646305782, 0.004112951617008819, 0.004334766845472619, 0.00417401946329906, 0.004552881509088721, 0.0090408878860084, 0.00608888771889014, 0.005734216726657498, 0.007600370541257084, 0.011766293671373607, 0.005030945965270955, 0.011441401683294274, 0.02133424933982803, 0.008112215621885337, 0.013916486643166201, 0.013374798840136771, 0.01577683510564583, 0.011734425957404341, 0.012949183515564155, 0.01343500284758911, 0.006166114872884583, 0.006020495822756122, 0.006914802454154489, 0.005421489330710068, 0.007666530743332644, 0.005504469696831474, 0.006712356800202012, 0.007009055614425366, 0.0068503737979467355, 0.006028766068745525, 0.003644617965129175, 0.01000308824848547, 0.005099607019053276, 0.0034766755013315156, 0.004706886319410363, 0.004558469024592933, 0.0045220950069317966, 0.005476375384450982, 0.0038612677557735213, 0.0067410376184356075, 0.006885502014346571, 0.022569109194946594, 0.00634505036475833, 0.0275641067610571, 0.004009644351623969, 0.00307722057358295, 0.0028017765964718964, 0.003825975309025457, 0.004362743720914773, 0.0077195980768220976, 0.0043040429228839725, 0.007706419878145939, 0.055384372056772484, 0.019242511886091426, 0.06182318438998559, 0.01602614064474966, 0.016765186383798418, 0.03218192734223463, 0.01664917862251111, 0.02642427144642462, 0.001997263951501494, 0.0005372813728072858, 0.0019161431652070864, 0.0027885704691305298, 0.004077873255392863, 0.007282557692573597, 0.0045779901409386875, 0.005931752412589687, 0.0036899516879728253, 0.0052061392474057585, 0.0040155335765010075, 0.00438971452276216, 0.013771722555528474, 0.00328674889563494, 0.005691759723027065, 0.009383963331300132, 0.05155078741070821, 0.07447137888047138, 0.049379754965605864, 0.08249685062556569, 0.007105997808988301, 0.012045006999167933, 0.007223896026099102, 0.009322633090294213, 0.036155489614409744, 0.005624615632352726, 0.02873881403723502, 0.005404302926414112, 0.009266344437768467, 0.010681865803069627, 0.005307341774284211, 0.005689936463381652, 0.0037929817026404506, 0.006445381375006667, 0.003932814429958519, 0.0062021506778602315, 0.013952345217458507, 0.012010094051292447, 0.01240748273490712, 0.007326366987929463, 0.006699507136081987, 0.042964487853364056, 0.005417428672275548, 0.038093834570805375, 0.020216178913202654, 0.004966981531350165, 0.014315499825310912, 0.0038187018391239104, 0.023386246083268506, 0.022401152010125124, 0.018723017831090767, 0.019593910034590576, 0.01004669820538475, 0.010107765232019016, 0.013171713066736637, 0.005976547568310125, 0.028175537970744773, 0.022520501126232086, 0.015854921117066646, 0.019064125972804415, 0.003177084031245836, 0.0025217756835452356, 0.003537585042178845, 0.0021289319152698618, 0.008258622333858713, 0.017790830181046196, 0.011865274921848721, 0.015759836873081738, 0.00478273237984058, 0.009082698715782763, 0.0045568365613286275, 0.00833180583615286, 0.00848440716328801, 0.003322349524521539, 0.011232309977661399, 0.003430783738702885, 0.011589424997069305, 0.007307673310673552, 0.0144898502078389, 0.006466094923826912, 0.02343298939903733, 0.00857888426859, 0.026638065964266586, 0.006891756899344124, 0.012561404607116161, 0.009019689327511377, 0.01640670992040614, 0.006987407502419563, 0.005047624049591397, 0.0028986250930993656, 0.005446254914324471, 0.0025346371468337727, 0.008520135135243155, 0.03002302462060254, 0.006583854729165507, 0.020615635980319076, 0.014306173190054073, 0.0055183131151575315, 0.019724007272250727, 0.004627595052278803, 0.045737568142667044, 0.008188231262949854, 0.0435687764742267, 0.0073575242793370195, 0.015011148609664002, 0.01533035929103724, 0.023729769085054066, 0.007406309241046552, 0.029883164424676045, 0.06304493658413203, 0.03718213299117992, 0.05277782312376729, 0.03337642032538493, 0.007677181011310146, 0.0332344264115851, 0.004855600894738408, 0.01952614373893411, 0.05247195004535581, 0.027566910247274295, 0.04400545154079573, 0.0376801987901227, 0.018062707536129305, 0.04435465163902032, 0.016855156039069164, 0.005342449418194909, 0.002653021566705645, 0.004833569699124027, 0.003221959811225363, 0.009383300305026866, 0.017694816099805836, 0.01388997506136694, 0.0143097752779892, 0.0045850625502409405, 0.004074705141527803, 0.0036578128430773296, 0.004663786933069459, 0.018454515967701413, 0.006295354670891472, 0.021831745907769845, 0.005297520697926414, 0.01087392193311054, 0.010965688074085558, 0.012718511515072348, 0.00809151064714732, 0.04112298634426218, 0.07735239687464791, 0.039782381499799915, 0.07021010163839123, 0.020332354296298434, 0.01249553705620954, 0.011669060421921765, 0.0032431087065332353, 0.006371758725397579, 0.0031475301884191743, 0.023022153490254913, 0.021567536797661567, 0.02386122128188456, 0.019196986211118153, 0.03745200006765084, 0.014139356980163508, 0.02170584962088688, 0.02689302132012801, 0.002054504518812209, 0.0048289417431691345, 0.0029864589884650706, 0.003437944112509303, 0.022243472899583176, 0.035406516253725026, 0.023345951840729264, 0.03069656056481831, 0.003285403722307545, 0.010137234112620132, 0.00819860286443387, 0.0030190668426831745, 0.04049091495578241, 0.0063121493900665454, 0.03579884531750128, 0.00902939698902122, 0.02602190880268854, 0.005387048688355904, 0.017985223789928385, 0.005114537432260451, 0.03834576512992458, 0.006582816917498353, 0.03408052496156101, 0.0074795349676856525, 0.017129555478715985, 0.04096759595195614, 0.02609948378104536, 0.03213324757492837, 0.01363678736004406, 0.008476948014733358, 0.010134548257363813, 0.008252417274087242, 0.03087190414714258, 0.006477712652814315, 0.020366930486100776, 0.012318642735561703, 0.0011439359255285102, 0.0015324418352850584, 0.0021149987121249474, 0.0011358380861360153, 0.003955496206484485, 0.0023985296894827902, 0.0022876189756520825, 0.0011973270036026822, 0.028306481847352846, 0.03611236675349789, 0.006376615342624221, 0.005579352248567388, 0.007289668822309147, 0.004207656163471587, 0.007304189233924776, 0.0071246528010856305, 0.00643719891875095, 0.005275101980148591, 0.004992167777716592, 0.006090497752162662, 0.005312883400243481, 0.004730530192944143, 0.0044516456137147446, 0.006976619442676341, 0.004200942474315446, 0.005776544703097637, 0.0036587375915026745, 0.005748382515891893, 0.003664926368255658, 0.004873634927060905, 0.004033837330807848, 0.004182208093984546, 0.004113023094096913, 0.004306364412232121, 0.009181002699743694, 0.004583902871124192, 0.005940178198074516, 0.0062454125749488, 0.012264242114268534, 0.007537130983788571, 0.011996277863231682, 0.004977979386205046, 0.008289909228411293, 0.02168108376758325, 0.013611192227795992, 0.014297049114888388, 0.01184824546255907, 0.015930428637250495, 0.013551105623225514, 0.013154805477755951, 0.006322612861276688, 0.006610873288028654, 0.005760465821839357, 0.007334213485111513, 0.0057333687928241, 0.008137045073322179, 0.0072296837663534735, 0.007080173373416907, 0.006394778894691112, 0.007162157467937294, 0.01034412093118407, 0.0038336158762986, 0.0035002932967322514, 0.005132202832507274, 0.004495496154136649, 0.004849326172290685, 0.005555459853453758, 0.004807138502703312, 0.006861948665071065, 0.004123451133122037, 0.02295158300922344, 0.007051252962183404, 0.028173293520336935, 0.006669707102367835, 0.003159031394217317, 0.004144902165582691, 0.003915463361535313, 0.0029258187003839767, 0.008385569278611315, 0.004401718258242242, 0.008213563486557732, 0.004567981393010979, 0.06696710465986667, 0.027692298146757617, 0.05549112165378568, 0.0201746684970983, 0.017547567584084205, 0.02550049230382981, 0.017398226170846406, 0.03268583279141934, 0.008591173752684035, 0.009363522762350616, 0.009266587254963413, 0.008632538717759508, 0.007014854887518382, 0.002260018014885936, 0.0022979268489784392, 0.007071931767111337, 0.0071634881730687685, 0.0017299391418130236, 0.0017686940710958934, 0.00723257715651442, 0.001643031144417955, 0.009120219463075714, 0.00923464045901921, 0.0016984902452772653, 0.0017881383330578926, 0.008017330962500676, 0.008068712787537504, 0.0018493339843271206, 0.0010454903613342328, 0.007071528911784969, 0.007024515160169981, 0.0011022833333855563, 0.001484714964888898, 0.006399031664063421, 0.006363541394553128, 0.0015181797461949538, 0.006026368776342308, 0.0012683590296050287, 0.0012567866849480416, 0.0058734776182109505, 0.006197589310755258, 0.0008926706597289555, 0.0008688973014745598, 0.006052453961010347, 0.0008369973146372788, 0.005378972304049904, 0.005338003222441254, 0.000837010801796581, 0.0008477220320523966, 0.005298246270524145, 0.005217445517378499, 0.0008522865340575917, 0.023975118346932455, 0.008856705383316666, 0.00858439586681334, 0.02580164174382993, 0.023428123452942984, 0.00781812720915928, 0.007911574958703727, 0.02538321713580939, 0.00810721540572797, 0.015754914897609534, 0.01623159969773803, 0.008096039871658987, 0.00985246232149621, 0.013051353591415219, 0.013433581925295531, 0.009930483099207386, 0.026325973471943043, 0.012455627146740844, 0.011489246111756363, 0.02661865936694935, 0.028056110133441503, 0.012296118530873913, 0.01135587309758481, 0.02840246395966109, 0.0010172292466722479, 0.005803995260872623, 0.005823001469159309, 0.001032680059289303, 0.0008256994008806106, 0.006141124516594082, 0.006161614540334442, 0.0008713863411145974, 0.00981635299443823, 0.012822718023227713, 0.011706602987073862, 0.008759008964139937, 0.00790047350310175, 0.014148374923279337, 0.012699145052208927, 0.007074241468440424, 0.010099810310248801, 0.0053661662259103056, 0.004945351843594362, 0.009488980808445915, 0.002022952580510925, 0.006579524822769498, 0.006506999800581414, 0.0019787386778562068, 0.0011972075029836507, 0.007322201396680355, 0.00723482225337236, 0.0011975255874886583, 0.007617495417820617, 0.008262722115735354, 0.008186127292100344, 0.007890133269709847, 0.008601076384484336, 0.008318014263514828, 0.008329010307342026, 0.008899675330887421, 0.019108687652200917, 0.01171425568264895, 0.011300678663513744, 0.01921772298600908, 0.02219638325016058, 0.011751541540904966, 0.011408390871909738, 0.022404105822164348, 0.008150496951505867, 0.0020384116840524223, 0.002028566973120436, 0.008029278909187861, 0.007425783904849813, 0.0014159360898861495, 0.0014147977821190735, 0.007297877229543554, 0.00931167392806397, 0.00321800786415782, 0.0031856224325169475, 0.009372944924995666, 0.009030285516360028, 0.0034861822251855347, 0.003453304256689703, 0.009046718049206218, 0.028720027991267306, 0.008975742391153804, 0.009270767172360805, 0.03019393232794276, 0.02728194162022413, 0.009701181512229824, 0.010093430194275334, 0.029056715519808263, 0.009335117621421753, 0.020049057385395443, 0.02036207067640526, 0.009635636757060235, 0.008578056071164289, 0.021092611494940305, 0.021785961648121806, 0.008592899162448663, 0.005881743777321795, 0.0010609188023041314, 0.0010173670412703029, 0.005841645525716396, 0.006206526376011412, 0.00046955289312352894, 0.0004599849822565617, 0.006118948610365362, 0.016928414458088247, 0.013068761068564343, 0.012133201472461892, 0.0159685971812208, 0.017864975228636015, 0.027164637116210616, 0.027698541885371165, 0.016137066953259026, 0.013296872445597033, 0.02931521990142068, 0.029671720859815075, 0.01261164049377574, 0.009069594736842245, 0.011493244349878303, 0.010343940073292974, 0.00919404316788479, 0.007771836394470863, 0.012802747370241637, 0.011559193995640947, 0.007796407247558604, 0.00758914770238494, 0.012251189781826318, 0.010954962186180497, 0.006889947375246457, 0.006400173014912416, 0.01311287363745799, 0.01162507067772028, 0.005872108880190892, 0.0005956087371482655, 0.0055103686619500675, 0.005537960152065837, 0.0006358052461587466, 0.0006631363942821378, 0.005441892643673315, 0.0054481496214445774, 0.0006581168004678195, 0.0018179778333411655, 0.007322403081400085, 0.007283695386180675, 0.0017839301272603919, 0.0018302171603745158, 0.006745996150257413, 0.006664521513895944, 0.0018161971046029416, 0.0011953701406214323, 0.0057994699137371005, 0.005728248065850849, 0.0011978033241021022, 0.0012861889979983168, 0.0054157036212198915, 0.005323379501032409, 0.0012749351282936542, 0.014500450927666478, 0.03305315542780525, 0.03217149872811667, 0.013574170237605886, 0.021390049552263528, 0.024020286532773695, 0.022936638895668337, 0.02054396081061808, 0.0010517762573704925, 0.0062680276506592355, 0.006139531820383456, 0.001028379185158879, 0.0013991572859752398, 0.00569761071878367, 0.005621228810488668, 0.0013360265818009723, 0.001507449478899285, 0.005273511656604493, 0.005232278573983769, 0.0015054103551419516, 0.0008930579840440097, 0.0059517262714447305, 0.005919571688209116, 0.0008818987068718453, 0.007112987967610293, 0.0022264071859550718, 0.0021975322523573085, 0.006964325128196484, 0.006454105392911996, 0.0018504604801338495, 0.001822675415602462, 0.006319224997194328, 0.008549797482439874, 0.003250785825656253, 0.003158198661770252, 0.008514472771578172, 0.007910056562598, 0.003875926454382421, 0.0037630686454738697, 0.007895991727061354, 0.006986805499429947, 0.0021581921600375372, 0.0020959781317622514, 0.006956799387683669, 0.006472122214277441, 0.0023974186710303737, 0.0023189565753702927, 0.006446190269167945, 0.0016179731675424552, 0.0055426476200886995, 0.005465804043140043, 0.0015713770678539229, 0.0014373011292573236, 0.0059424331330854814, 0.005849070582741708, 0.0013583911444603198, 0.004245920792369998, 0.0010567794018042813, 0.0010079844414992135, 0.0041548857883931065, 0.004783893415801703, 0.0012614969522598053, 0.001223323485325369, 0.004685689545967305, 0.0011332712947520617, 0.005346415283902762, 0.005283864530066999, 0.0010710270530584502, 0.0009050789138511863, 0.005082409794491054, 0.004986831844789302, 0.0009157239200582413, 0.0116009364653744, 0.0214688665769535, 0.022502351038754947, 0.01217796988061715, 0.008108834299577474, 0.025477369543316798, 0.027195421846233317, 0.008301673908427508, 0.0017618295006759284, 0.006382208084547436, 0.006329104095546791, 0.0018171984779132688, 0.0016467929851855581, 0.005663978325389407, 0.005656575867091994, 0.0016215729633515846, 0.0007877691098074405, 0.00484098509448598, 0.004854366123167747, 0.0007817549077199387, 0.00041671120596232847, 0.004837006817393871, 0.004911698486326623, 0.00040764013893509793, 0.010284661980967124, 0.008998571905403896, 0.008256969936714468, 0.009410955436397037, 0.011236580661233928, 0.008162028933484857, 0.007403222046760517, 0.01012691910091794, 0.00376614152916415, 0.004940999890147418, 0.005275856535478139, 0.003753149356090169, 0.003125897866278603, 0.004817605843054477, 0.005159091182496664, 0.0031321315420859957, 0.011511631977247166, 0.032991518721269646, 0.032928083778386893, 0.010759909685904847, 0.01184822777133921, 0.02859097967690462, 0.02872514813762151, 0.010769699455169228, 0.0022274590945979686, 0.007010467711088895, 0.0070819022845327465, 0.0021991663928341556, 0.0026716921805108756, 0.006657175094216257, 0.0067070529560383126, 0.002620034811247889, 0.0021693211715344165, 0.00648413378310036, 0.00651810693730866, 0.0021890366529645653, 0.002046596809006366, 0.006214814959199362, 0.006184581462063673, 0.002111925915318504, 0.015296891413374245, 0.006861028936346463, 0.0067036226219298455, 0.014261667864705627, 0.014263134201340273, 0.007466848556985597, 0.00724634383004218, 0.013235966502626652, 0.007123779372483926, 0.009905182396198736, 0.010045078137588776, 0.0071259739147627316, 0.004637577115695464, 0.01032642784738148, 0.010153469521251434, 0.004664795534093348, 0.0061394670128305465, 0.002139425203838456, 0.0021070416227821657, 0.006064084028515571, 0.005552502082876559, 0.002020477801468636, 0.0019892358679718973, 0.0054961325821300646, 0.007601424132162161, 0.003134811049524915, 0.0030815178465893643, 0.007531588090051445, 0.007011351176029506, 0.002831853303848058, 0.0027696171274949415, 0.0069517804257982945, 0.008402819660494686, 0.002662228288065767, 0.002650329577193934, 0.00825815967175325, 0.00804030714329621, 0.002375569965246921, 0.002334300373087869, 0.007981359997355015, 0.01319384309730578, 0.025597789900569178, 0.025457957242226745, 0.013582497481765791, 0.012356432120735743, 0.024714657551838687, 0.02476029575758697, 0.012727163752495647, 0.007276905430824068, 0.011322340616675313, 0.011066649025095805, 0.007291120526405241, 0.008282912727174893, 0.011144799298277247, 0.010793171918621215, 0.008448668875750463, 0.0009639227708988272, 0.005229943456876828, 0.005152559583028958, 0.0009276904343858334, 0.0007441670776905912, 0.005058732309009035, 0.004995375852321796, 0.0007423229639703388, 0.005699992918812689, 0.0009481560903281636, 0.0009099944720197805, 0.005646716359435809, 0.006379886029353468, 0.0007391825756430035, 0.0007393610361603129, 0.006312139164040621, 0.021462627231566927, 0.010077965745369464, 0.009414142920334049, 0.023207718213637714, 0.023629662417583863, 0.006759839233210368, 0.006476008252738697, 0.025065401351372644, 0.01018095481481351, 0.015289674291140185, 0.014282439143667718, 0.009097244645295065, 0.011969373879915599, 0.011101406817592353, 0.010330537545874999, 0.010604914000430577, 0.0067227122536322485, 0.11944727168855515, 0.11932818588021096, 0.006614896915861303, 0.006784345944129135, 0.11479706429793128, 0.11454282435756699, 0.006573743651359913, 0.00937033294642957, 0.1040243242432151, 0.10400233696401356, 0.009386172320478585, 0.009103782347933484, 0.08991725998292786, 0.08991950510050589, 0.00912713089758217, 0.010098668595685105, 0.07358333743011927, 0.07349052201499083, 0.01027930529212749, 0.011017662841342946, 0.055595403100289126, 0.05551312844413025, 0.010915339014588667, 0.007667625201476909, 0.03946635299286161, 0.03933119733057944, 0.007708612219600199, 0.01025366963585176, 0.02353698696536458, 0.023434537909262674, 0.01010773783178086, 0.014252639667944909, 0.02575981520214755, 0.037413146016266836, 0.08382541732605812, 0.005060897346861967, 0.019395317182462058, 0.024445954161473174, 0.01704909080480523, 0.01264401033293978, 0.06487836444136733, 0.0758642181243293, 0.03725753218428828, 0.00497430352852078, 0.008740682687187336, 0.013097882135601487, 0.04779054035693543, 0.0021239662743725513, 0.012025430143571894, 0.010961967769368072, 0.01099165270619097, 0.035880417644068456, 0.02364569860971659, 0.003494476182160376, 0.00345589203681989, 0.07692777705107902, 0.14131600405802813, 0.10841638667274009, 0.049560077144757235, 0.0038686076854954387, 0.015216734421400709, 0.021392474475063816, 0.08232016551778945, 0.06718761528377885, 0.11935793374716074, 0.029610774669716296, 0.013778168968138637, 0.004160064655602972, 0.008962850446364815, 0.18458082829160635, 0.09504477996706377, 0.06916763951637099, 0.03024618311777582, 0.009835985379545045, 0.226261819963099, 0.009032726761820126, 0.2303501893036629, 0.07740483114031875, 0.12113080353077961, 0.04671816175653581, 0.07255407920806108, 0.010400421147866832, 0.19582550079922154, 0.040614550034085095, 0.034477775976693714, 0.007935794855777502, 0.1016575958867426, 0.04692746798966848, 0.1200097808636467, 0.044076770705577265, 0.02709237221733898, 0.08409085036736144, 0.02946082591189731, 0.01700956073936465, 0.024594967668849898, 0.029863358853328633, 0.013737834077508171, 0.019503059212800638, 0.003230130638497063, 0.00407687585728679, 0.00619734866310136, 0.05493990486658532, 0.1862406487420446, 0.005114534539427867, 0.005401366286775215, 0.13917678757110793, 0.047689050912644554, 0.07493100496556543, 0.00367937389407563, 0.03582631198726278, 0.09089370486357957, 0.06589618752563779, 0.00449337744783816, 0.020954963076759956, 0.02666601034414498, 0.059917244171848, 0.011461464208070978, 0.04003299389746537, 0.03914763514239792, 0.045131907193217344, 0.013545880630795855, 0.004466653073453095, 0.0041740335654573595, 0.10601747497002233, 0.006224520133690384, 0.006185698883005423, 0.11323164677708536, 0.10676927266502986, 0.011860693562733183, 0.011608819495864002, 0.11389080140626923, 0.0074766009892506405, 0.0014683397757553247, 0.0019129321233447238, 0.00930995412129433, 0.09761761706604766, 0.02105270188467464, 0.01926680413451685, 0.02669679306323893, 0.009995303512873848, 0.009853710798858096, 0.02963339793137894, 0.07282646599978332, 0.02049477792285889, 0.10129292742861468, 0.10830980676841061, 0.01816075481027264, 0.004655233365380059, 0.02860985558431347, 0.017208659840196937, 0.0077846289899111305, 0.02141860094308602, 0.07014591088111007, 0.009064212060167956, 0.010732437024607577, 0.002743506413540664, 0.0025011672487496583, 0.02651576449204643, 0.007477342320831259, 0.04202746477633969, 0.06090001996663004, 0.034816425979719415, 0.03935204757344643, 0.08858095331709974, 0.05942351320739023, 0.03221852542682168, 0.012967634678090256, 0.07857600435214833, 0.048246819889731965, 0.019021377301594915, 0.038640563189441854, 0.005584133644300519, 0.0039005395685108137, 0.012178785118660591, 0.024101011043157233, 0.0086101879954741, 0.00779460178145087, 0.008480799460148406, 0.0013931433250608477, 0.0023023569615227965, 0.004467732637084959, 0.003777006882010604, 0.0018873137374541512, 0.04010430010201548, 0.02384103730321846, 0.02156298303374425, 0.024657160037343293, 0.10386628927568174, 0.005725335477232958, 0.024144660380979486, 0.07078796024929593, 0.00304707410854891, 0.0006943929215043465, 0.0007081050464042951, 0.0015038941849300656, 0.03589274548193619, 0.023362281704540588, 0.008459983807353594, 0.029250854706827062, 0.03973017221361023, 0.04347766308904828, 0.0016504703227076247, 0.0018430416629855693, 0.06891805272502924, 0.10748627693468306, 0.0016176015603834152, 0.0009524891057647539, 0.1691194355941578, 0.018309390758977136, 0.10425049196188012, 0.05947463801263446, 0.00890285531853433, 0.09675346585895704, 0.07735428468179556, 0.029381377395930528, 0.0063396505381889704, 0.005755925026088779, 0.07027624881127754, 0.01387132754376554, 0.05005742109713962, 0.10414100534316717, 0.0027833859492137052, 0.0034618817861895496, 0.12902932588027433, 0.10748638690366179, 0.14718410387281725, 0.055032537618003315, 0.04345734516460858, 0.06474695568462976, 0.1452221666279143, 0.006924851585982664, 0.17478343192652138, 0.06722584662817889, 0.16618669659187876, 0.0027283610156073838, 0.070498062571993, 0.046923742436305885, 0.022865726163431237, 0.027309208708160653, 0.016326164632999, 0.08998103198192858, 0.0014096433492145485, 0.0015632141438961108, 0.01222182937089376, 0.020035922639525354, 0.009242426911136256, 0.0024126454490785766, 0.009274877657120605, 0.002380651324022055, 0.0027105334065672263, 0.004352435506464035, 0.0026806593510973874, 0.004237469591028653, 0.009472220576784486, 0.0037988028943224806, 0.009554739990434012, 0.0024727886524930263, 0.0028309520327505023, 0.0038497584270940763, 0.0027840529055692723, 0.00432572157327558], "label_norm": {"browDown_L": [0.16184226283028932, 0.20977234886071028], "cheekSquint_L": [0.16185153609579386, 0.2097683718446928], "browOuterUp_L": [0.15270091543678424, 0.16839646529867786], "browDown_R": [0.06948338508522964, 0.16283591380307832], "browOuterUp_R": [0.06948302474716682, 0.16283847961001208], "cheekSquint_R": [0.05328527165206706, 0.0987137094443144], "browInnerUp": [0.12377143222455209, 0.11054432239365392], "eyeBlink_L": [0.12378660998864666, 0.11056262499764855], "eyeBlink_R": [0.190942831872188, 0.279206755584966], "eyeSquint_L": [0.19093755749443306, 0.2792060904994797], "eyeSquint_R": [0.14227027950930204, 0.1416391784898584], "eyeWide_L": [0.14227035540092334, 0.14163926447890837], "eyeWide_R": [0.11309330373911854, 0.18565386881570314], "eyeLookDown_L": [0.11306353298758509, 0.18566134365607134], "eyeLookDown_R": [0.06285944359725414, 0.17045273250250584], "eyeLookIn_L": [0.0628729756892031, 0.1704466309400626], "eyeLookIn_R": [0.07485748085688285, 0.16893314702185766], "eyeLookOut_L": [0.07485740438210119, 0.1689329351938502], "eyeLookOut_R": [0.18266849983368028, 0.14296388111660893], "eyeLookUp_L": [0.18265154591402213, 0.14292028255240136], "eyeLookUp_R": [0.08961160259588949, 0.16585373167085588], "jawOpen": [0.08961131633644744, 0.16585278449154386], "jawLeft": [0.11765810615884183, 0.08816165020315778], "jawRight": [0.026571828761178935, 0.05492373416723142], "mouthClose": [0.15299164237732532, 0.150655587484649], "mouthFunnel": [0.026557468328964346, 0.054797332139965196], "mouthPucker": [0.09498957945671399, 0.09181490726836748], "mouthRollLower": [0.14519119410745168, 0.12731614011549094], "mouthRollUpper": [0.10349672362506636, 0.11123604030718619], "mouthShrugLower": [0.10465714266768646, 0.09383210265018498], "mouthShrugUpper": [0.0678096379479136, 0.07960643467573829], "noseSneer_L": [0.08945952378613364, 0.08728771405812234], "noseSneer_R": [0.2222825280831422, 0.1261008077133412], "mouthLeft": [0.022971706246310317, 0.08432441787704713], "mouthRight": [0.02298672339965462, 0.0843408328391454], "mouthSmile_L": [0.13505946631542162, 0.21724098606264428], "mouthSmile_R": [0.13508046237566498, 0.21726259548479832], "mouthFrown_L": [0.051900052605321746, 0.09449455049264716], "mouthFrown_R": [0.05189726627093182, 0.09449150605096043], "mouthDimple_L": [0.09506372589428794, 0.06431724885890054], "mouthDimple_R": [0.09506641018113879, 0.06431844000329903], "mouthStretch_L": [0.20472376314609514, 0.16635334721205874], "mouthStretch_R": [0.20473381382347117, 0.1663557625463717], "mouthPress_L": [0.07839229651774052, 0.0643156347072905], "mouthPress_R": [0.07839077916451218, 0.06430965774739499], "mouthLowerDown_L": [0.17512900932173842, 0.09322782743034486], "mouthLowerDown_R": [0.1751238538275112, 0.09322656028013022], "mouthUpperUp_L": [0.0822388672075358, 0.09820284010334808], "mouthUpperUp_R": [0.08224144650194605, 0.09820911130340014]}, "label_norm_mm": {"browDown_L": [-0.8073297739028931, 1.6146595478057861], "cheekSquint_L": [-0.8073297739028931, 1.6353405714035034], "browOuterUp_L": [0.0, 0.9911944270133972], "browDown_R": [-0.7330395579338074, 1.470625638961792], "browOuterUp_R": [-0.725012481212616, 1.4660791158676147], "cheekSquint_R": [0.0, 0.9704002141952515], "browInnerUp": [0.005171118304133415, 0.8572343587875366], "eyeBlink_L": [0.00921106431633234, 0.8549602031707764], "eyeBlink_R": [0.0, 0.999589204788208], "eyeSquint_L": [0.0, 0.9996109008789062], "eyeSquint_R": [0.0, 1.0], "eyeWide_L": [0.0, 1.0], "eyeWide_R": [0.0, 1.0], "eyeLookDown_L": [0.0, 1.0], "eyeLookDown_R": [0.0, 1.0], "eyeLookIn_L": [0.0, 1.0], "eyeLookIn_R": [0.0, 1.0], "eyeLookOut_L": [0.0, 1.0], "eyeLookOut_R": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_L": [0.005141416564583778, 0.9804584383964539], "eyeLookUp_R": [0.0, 0.9534252882003784], "jawOpen": [0.0, 0.9534395337104797], "jawLeft": [0.0, 0.8010596036911011], "jawRight": [0.0, 0.7739279270172119], "mouthClose": [0.0, 1.0], "mouthFunnel": [0.0, 0.7443013787269592], "mouthPucker": [0.0, 0.9496217966079712], "mouthRollLower": [0.0, 0.9745720624923706], "mouthRollUpper": [0.0, 0.9714981913566589], "mouthShrugLower": [0.006537656299769878, 0.8364248275756836], "mouthShrugUpper": [0.0, 0.9035037159919739], "noseSneer_L": [0.0, 0.9107782244682312], "noseSneer_R": [0.02829817868769169, 0.9374051094055176], "mouthLeft": [0.0, 1.0], "mouthRight": [0.0, 1.0], "mouthSmile_L": [0.0, 0.9820542931556702], "mouthSmile_R": [0.0, 0.9820542931556702], "mouthFrown_L": [0.0, 0.867120623588562], "mouthFrown_R": [0.0, 0.867120623588562], "mouthDimple_L": [0.0, 0.7573938965797424], "mouthDimple_R": [0.0, 0.7562941908836365], "mouthStretch_L": [0.0, 0.9634690284729004], "mouthStretch_R": [0.0, 0.9634690284729004], "mouthPress_L": [0.0011928933672606945, 0.8130543828010559], "mouthPress_R": [0.00045785587280988693, 0.813126266002655], "mouthLowerDown_L": [0.008856703527271748, 0.9179792404174805], "mouthLowerDown_R": [0.008817199617624283, 0.9179792404174805], "mouthUpperUp_L": [0.0, 0.9093780517578125], "mouthUpperUp_R": [0.0, 0.9063169956207275]}}',"forEach","cancelVideoFrameCallback",'{"browDown_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browDown_R":{"fps":30,"minCutoff":0.001,"beta":10,"bez_enabled":true,"bezier_x1":0.10830324909747292,"bezier_y1":0.016000000000000014,"bezier_x2":0.9638989169675091,"bezier_y2":0.724},"browInnerUp":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"browOuterUp_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"cheekSquint_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeBlink_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeBlink_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":true,"bezier_x1":0.04151624548736462,"bezier_y1":0.01200000000000001,"bezier_x2":1,"bezier_y2":1.004},"eyeLookDown_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookDown_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookIn_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookOut_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_L":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeLookUp_R":{"fps":30,"minCutoff":0.001,"beta":8,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeSquint_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_L":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"eyeWide_R":{"fps":30,"minCutoff":0.001,"beta":5,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawOpen":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.030685920577617327,"bezier_y1":0.0040000000000000036,"bezier_x2":1,"bezier_y2":1},"mouthClose":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.023465703971119134,"bezier_y1":0.03200000000000003,"bezier_x2":1,"bezier_y2":1},"mouthFunnel":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPucker":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRollUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugLower":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthShrugUpper":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLeft":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthRight":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthSmile_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthFrown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":true,"bezier_x1":0.04512635379061372,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthDimple_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthStretch_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthPress_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthLowerDown_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_L":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"mouthUpperUp_R":{"fps":30,"minCutoff":0.001,"beta":35,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawLeft":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"jawRight":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1},"noseSneer_L":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"noseSneer_R":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":true,"bezier_x1":0.3104693140794224,"bezier_y1":0.041000000000000036,"bezier_x2":1,"bezier_y2":1},"tune_points":{"fps":30,"minCutoff":0.001,"beta":28,"bez_enabled":false,"bezier_x1":0,"bezier_y1":0,"bezier_x2":1,"bezier_y2":1}}',"fps","setDerivateCutoff","requestAnimationFrame","_state","oNow","noseSneerRight","eyeSquintRight","prototype","46308KHNCQk","reject","modelInitializer","dir","stopped","mouthFrownLeft","cheekSquintLeft","init","mouthOpen","isInteger","avatarDensePredictor","_rotationTune","frameRateMs","mouthShrugHigher","77728RfeUUs","eyesClosed","bezier_x2","57xKpVCF",'{"format": "layers-model", "generatedBy": "keras v2.6.0", "convertedBy": "TensorFlow.js Converter v3.11.0", "modelTopology": {"keras_version": "2.6.0", "backend": "tensorflow", "model_config": {"class_name": "Functional", "config": {"name": "model", "layers": [{"class_name": "InputLayer", "config": {"batch_input_shape": [null, 1266], "dtype": "float32", "sparse": false, "ragged": false, "name": "input_1"}, "name": "input_1", "inbound_nodes": []}, {"class_name": "Dense", "config": {"name": "dense", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense", "inbound_nodes": [[["input_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation", "inbound_nodes": [[["dense", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_1", "trainable": true, "dtype": "float32", "units": 256, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_1", "inbound_nodes": [[["activation", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization", "inbound_nodes": [[["dense_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_1", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_1", "inbound_nodes": [[["batch_normalization", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_2", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_2", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_5", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_5", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_8", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_8", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_11", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_11", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_14", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_14", "inbound_nodes": [[["activation_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_2", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_2", "inbound_nodes": [[["dense_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_5", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_5", "inbound_nodes": [[["dense_5", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_8", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_8", "inbound_nodes": [[["dense_8", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_11", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_11", "inbound_nodes": [[["dense_11", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_14", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_14", "inbound_nodes": [[["dense_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "shared", "trainable": true, "dtype": "float32", "units": 96, "activation": "swish", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "shared", "inbound_nodes": [[["activation_2", 0, 0, {}]], [["activation_5", 0, 0, {}]], [["activation_8", 0, 0, {}]], [["activation_11", 0, 0, {}]], [["activation_14", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_3", "trainable": true, "dtype": "float32", "units": 42, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_3", "inbound_nodes": [[["shared", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_6", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_6", "inbound_nodes": [[["shared", 1, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_9", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_9", "inbound_nodes": [[["shared", 2, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_12", "trainable": true, "dtype": "float32", "units": 72, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_12", "inbound_nodes": [[["shared", 3, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_15", "trainable": true, "dtype": "float32", "units": 96, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_15", "inbound_nodes": [[["shared", 4, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_1", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_1", "inbound_nodes": [[["dense_3", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_2", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_2", "inbound_nodes": [[["dense_6", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_3", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_3", "inbound_nodes": [[["dense_9", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_4", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_4", "inbound_nodes": [[["dense_12", 0, 0, {}]]]}, {"class_name": "BatchNormalization", "config": {"name": "batch_normalization_5", "trainable": true, "dtype": "float32", "axis": [1], "momentum": 0.99, "epsilon": 0.001, "center": true, "scale": true, "beta_initializer": {"class_name": "Zeros", "config": {}}, "gamma_initializer": {"class_name": "Ones", "config": {}}, "moving_mean_initializer": {"class_name": "Zeros", "config": {}}, "moving_variance_initializer": {"class_name": "Ones", "config": {}}, "beta_regularizer": null, "gamma_regularizer": null, "beta_constraint": null, "gamma_constraint": null}, "name": "batch_normalization_5", "inbound_nodes": [[["dense_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_3", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_3", "inbound_nodes": [[["batch_normalization_1", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_6", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_6", "inbound_nodes": [[["batch_normalization_2", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_9", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_9", "inbound_nodes": [[["batch_normalization_3", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_12", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_12", "inbound_nodes": [[["batch_normalization_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_15", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_15", "inbound_nodes": [[["batch_normalization_5", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_4", "trainable": true, "dtype": "float32", "units": 21, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_4", "inbound_nodes": [[["activation_3", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_7", "trainable": true, "dtype": "float32", "units": 18, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_7", "inbound_nodes": [[["activation_6", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_10", "trainable": true, "dtype": "float32", "units": 24, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_10", "inbound_nodes": [[["activation_9", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_13", "trainable": true, "dtype": "float32", "units": 36, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_13", "inbound_nodes": [[["activation_12", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "dense_16", "trainable": true, "dtype": "float32", "units": 48, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "dense_16", "inbound_nodes": [[["activation_15", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_4", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_4", "inbound_nodes": [[["dense_4", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_7", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_7", "inbound_nodes": [[["dense_7", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_10", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_10", "inbound_nodes": [[["dense_10", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_13", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_13", "inbound_nodes": [[["dense_13", 0, 0, {}]]]}, {"class_name": "Activation", "config": {"name": "activation_16", "trainable": true, "dtype": "float32", "activation": "swish"}, "name": "activation_16", "inbound_nodes": [[["dense_16", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "a", "trainable": true, "dtype": "float32", "units": 7, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "a", "inbound_nodes": [[["activation_4", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "b", "trainable": true, "dtype": "float32", "units": 6, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "b", "inbound_nodes": [[["activation_7", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "c", "trainable": true, "dtype": "float32", "units": 8, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "c", "inbound_nodes": [[["activation_10", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "d", "trainable": true, "dtype": "float32", "units": 12, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "d", "inbound_nodes": [[["activation_13", 0, 0, {}]]]}, {"class_name": "Dense", "config": {"name": "e", "trainable": true, "dtype": "float32", "units": 16, "activation": "linear", "use_bias": true, "kernel_initializer": {"class_name": "GlorotUniform", "config": {"seed": null}}, "bias_initializer": {"class_name": "Zeros", "config": {}}, "kernel_regularizer": null, "bias_regularizer": null, "activity_regularizer": null, "kernel_constraint": null, "bias_constraint": null}, "name": "e", "inbound_nodes": [[["activation_16", 0, 0, {}]]]}], "input_layers": [["input_1", 0, 0]], "output_layers": [["a", 0, 0], ["b", 0, 0], ["c", 0, 0], ["d", 0, 0], ["e", 0, 0]]}}, "training_config": {"loss": {"class_name": "MeanSquaredError", "config": {"reduction": "auto", "name": "mean_squared_error"}}, "metrics": [[{"class_name": "MeanSquaredError", "config": {"name": "a_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "a_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "b_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "b_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "c_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "c_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "d_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "d_mean_absolute_error", "dtype": "float32"}}], [{"class_name": "MeanSquaredError", "config": {"name": "e_mean_squared_error", "dtype": "float32"}}, {"class_name": "MeanAbsoluteError", "config": {"name": "e_mean_absolute_error", "dtype": "float32"}}]], "weighted_metrics": null, "loss_weights": null, "optimizer_config": {"class_name": "Adam", "config": {"name": "Adam", "learning_rate": 0.0010000000474974513, "decay": 0.0, "beta_1": 0.8999999761581421, "beta_2": 0.9990000128746033, "epsilon": 1e-07, "amsgrad": false}}}}, "weightsManifest": [{"paths": ["group1-shard1of1.bin"], "weights": [{"name": "a/kernel", "shape": [21, 7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.34152484037805736, "scale": 9.998385162423367e-06, "original_dtype": "float32"}}, {"name": "a/bias", "shape": [7], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05245498940348625, "scale": 2.5705616638954565e-06, "original_dtype": "float32"}}, {"name": "b/kernel", "shape": [18, 6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.49812461368150135, "scale": 1.4075292842088198e-05, "original_dtype": "float32"}}, {"name": "b/bias", "shape": [6], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.05327168479561806, "scale": 3.762704696063729e-06, "original_dtype": "float32"}}, {"name": "batch_normalization/gamma", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.6943549513816833, "scale": 4.430730073468549e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/beta", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.579886580037427, "scale": 7.17555939073447e-05, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_mean", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -2468.1569582629986, "scale": 0.07718779579256313, "original_dtype": "float32"}}, {"name": "batch_normalization/moving_variance", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 439589.96875, "scale": 51.03764066910811, "original_dtype": "float32"}}, {"name": "batch_normalization_1/gamma", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.24011404812335968, "scale": 1.8985137346817335e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/beta", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.7531593294995136, "scale": 1.1959655887249125e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_mean", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4832.2838959501605, "scale": 0.09189646843051423, "original_dtype": "float32"}}, {"name": "batch_normalization_1/moving_variance", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1683400.125, "scale": 127.26468108644237, "original_dtype": "float32"}}, {"name": "batch_normalization_2/gamma", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.21489904820919037, "scale": 1.690830133540994e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/beta", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.9055880334267783, "scale": 1.3959182930400135e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_mean", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5010.460415001437, "scale": 0.08848807754801824, "original_dtype": "float32"}}, {"name": "batch_normalization_2/moving_variance", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1195131.5, "scale": 356.11878385595486, "original_dtype": "float32"}}, {"name": "batch_normalization_3/gamma", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.25988802313804626, "scale": 2.0154197619673844e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/beta", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4214927238326438, "scale": 2.3814587432277496e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_mean", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4516.991902261345, "scale": 0.09553301261074712, "original_dtype": "float32"}}, {"name": "batch_normalization_3/moving_variance", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1302695.875, "scale": 239.49736972610054, "original_dtype": "float32"}}, {"name": "batch_normalization_4/gamma", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20372924208641052, "scale": 1.2058584442889562e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_4/beta", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.5091016292572021, "scale": 7.333824422545552e-06, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_mean", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5581.663886533228, "scale": 0.13759802505936714, "original_dtype": "float32"}}, {"name": "batch_normalization_4/moving_variance", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1547579.875, "scale": 266.28256847486074, "original_dtype": "float32"}}, {"name": "batch_normalization_5/gamma", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.20020067691802979, "scale": 1.4120464495211178e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/beta", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.0803118545666908, "scale": 1.6702409625335354e-05, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_mean", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5893.203580423688, "scale": 0.15120471020971618, "original_dtype": "float32"}}, {"name": "batch_normalization_5/moving_variance", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 1174690.375, "scale": 252.40655565728238, "original_dtype": "float32"}}, {"name": "c/kernel", "shape": [24, 8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.5177297037499278, "scale": 2.771855910419008e-05, "original_dtype": "float32"}}, {"name": "c/bias", "shape": [8], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.0011589399073272943, "scale": 2.454352526953003e-06, "original_dtype": "float32"}}, {"name": "d/kernel", "shape": [36, 12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.15260927745549588, "scale": 7.149314974959986e-06, "original_dtype": "float32"}}, {"name": "d/bias", "shape": [12], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06730722635984421, "scale": 3.79263997723693e-06, "original_dtype": "float32"}}, {"name": "dense/kernel", "shape": [1266, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -17.766702855722013, "scale": 0.0004408501738349424, "original_dtype": "float32"}}, {"name": "dense/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -32.2838449468545, "scale": 0.0006995567606417149, "original_dtype": "float32"}}, {"name": "dense_1/kernel", "shape": [256, 256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -15.679528270048255, "scale": 0.00036315379539670776, "original_dtype": "float32"}}, {"name": "dense_1/bias", "shape": [256], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.192216108751227e-05, "scale": 8.993424732360127e-10, "original_dtype": "float32"}}, {"name": "dense_10/kernel", "shape": [48, 24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4914666624994, "scale": 0.00011503602762266674, "original_dtype": "float32"}}, {"name": "dense_10/bias", "shape": [24], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.4884052329353725, "scale": 6.925375681497543e-05, "original_dtype": "float32"}}, {"name": "dense_11/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.527113251610789, "scale": 0.0003040893041288097, "original_dtype": "float32"}}, {"name": "dense_11/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.077751987095218, "scale": 0.00020590211212421307, "original_dtype": "float32"}}, {"name": "dense_12/kernel", "shape": [96, 72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -11.040607545991925, "scale": 0.0002703182319122475, "original_dtype": "float32"}}, {"name": "dense_12/bias", "shape": [72], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.242119919933536e-05, "scale": 2.699762086386201e-09, "original_dtype": "float32"}}, {"name": "dense_13/kernel", "shape": [72, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.645381233680709, "scale": 0.0001528868824755144, "original_dtype": "float32"}}, {"name": "dense_13/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.1402740888594924, "scale": 4.8027438844681385e-05, "original_dtype": "float32"}}, {"name": "dense_14/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.119709127176868, "scale": 0.00028039937053181863, "original_dtype": "float32"}}, {"name": "dense_14/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.081811899195512, "scale": 0.00027500845124103605, "original_dtype": "float32"}}, {"name": "dense_15/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.011770248267565, "scale": 0.00027143886289962544, "original_dtype": "float32"}}, {"name": "dense_15/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.66976530797628e-05, "scale": 2.967733268261449e-09, "original_dtype": "float32"}}, {"name": "dense_16/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.360003139687646, "scale": 0.0001221625293939203, "original_dtype": "float32"}}, {"name": "dense_16/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.117162990980711, "scale": 6.43648655689071e-05, "original_dtype": "float32"}}, {"name": "dense_2/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.283893973543414, "scale": 0.00023756733727944455, "original_dtype": "float32"}}, {"name": "dense_2/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -5.288528963516677, "scale": 0.0001738561084689397, "original_dtype": "float32"}}, {"name": "dense_3/kernel", "shape": [96, 42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.805625922701546, "scale": 0.0003913238663926972, "original_dtype": "float32"}}, {"name": "dense_3/bias", "shape": [42], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00023975147793200651, "scale": 5.611634629997344e-09, "original_dtype": "float32"}}, {"name": "dense_4/kernel", "shape": [42, 21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.910697617828778, "scale": 9.83204932200824e-05, "original_dtype": "float32"}}, {"name": "dense_4/bias", "shape": [21], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.2725718021392822, "scale": 4.936938509521272e-05, "original_dtype": "float32"}}, {"name": "dense_5/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.804166829475978, "scale": 0.000304168831559025, "original_dtype": "float32"}}, {"name": "dense_5/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -6.093871475057325, "scale": 0.00017886326607153874, "original_dtype": "float32"}}, {"name": "dense_6/kernel", "shape": [96, 36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -9.628214164030146, "scale": 0.00023941252645788108, "original_dtype": "float32"}}, {"name": "dense_6/bias", "shape": [36], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.00018072614102045825, "scale": 5.3396602558783386e-09, "original_dtype": "float32"}}, {"name": "dense_7/kernel", "shape": [36, 18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -4.399672209062356, "scale": 0.00010582749336273526, "original_dtype": "float32"}}, {"name": "dense_7/bias", "shape": [18], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -1.4238353799521228, "scale": 2.524262276977844e-05, "original_dtype": "float32"}}, {"name": "dense_8/kernel", "shape": [256, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -10.658081016895599, "scale": 0.0003199952267359894, "original_dtype": "float32"}}, {"name": "dense_8/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -3.988045453686931, "scale": 0.00010946545492113887, "original_dtype": "float32"}}, {"name": "dense_9/kernel", "shape": [96, 48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.9635740770340115, "scale": 0.0002236393629990736, "original_dtype": "float32"}}, {"name": "dense_9/bias", "shape": [48], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -8.43627593902066e-05, "scale": 3.4019985236795956e-09, "original_dtype": "float32"}}, {"name": "e/kernel", "shape": [48, 16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -0.21210380814900756, "scale": 8.544304227723476e-06, "original_dtype": "float32"}}, {"name": "e/bias", "shape": [16], "dtype": "float32", "quantization": {"dtype": "uint16", "min": 0.06371922045946121, "scale": 2.9261341000018006e-06, "original_dtype": "float32"}}, {"name": "shared/kernel", "shape": [96, 96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -7.98148017837316, "scale": 0.0002198997183814514, "original_dtype": "float32"}}, {"name": "shared/bias", "shape": [96], "dtype": "float32", "quantization": {"dtype": "uint16", "min": -14.595442970970305, "scale": 0.0005023211374920948, "original_dtype": "float32"}}]}]}',"userDefinedMetadata","data","setTimeout","actionUnits","webkitNow","Maximum occupation time is exceeded in queue ","mouthLowerDownRight","cheekPuff","call","concat","next","T_MIN","browDownRight","filterWithAlpha","alpha","initialized","Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, ","toFixed","convertedBy","pitch","https://hallway.nyc3.cdn.digitaloceanspaces.com/face_mesh/0.4.1633559619/","slice","_initializePromise","bind","_transformTune","R_MAX","setFrequency","mincutoff","array","undefined","https://joinhallway.com/auth","format","from","eyeLookOutLeft","apiToken","resultsCallback","jawRight","process.binding is not supported","Promise","T_MAX","27640140VucHbK","avatarScaleEncode","start","Private accessor was defined without a getter","parse","jawOpen","mouthStretchLeft","tris","data_means","domain","send","mozNow","weightSpecs","DEFAULT_MAX_PENDING","mouthRight","max","_start","browOuterUpRight","freq should be >0","BYTES_PER_ELEMENT"];return E4=function(){return r},E4()}function pP(r){let e=Se;if(bl===setTimeout)return setTimeout(r,0);if((bl===uP||!bl)&&setTimeout)return bl=setTimeout,setTimeout(r,0);try{return bl(r,0)}catch{try{return bl[e(293)](null,r,0)}catch{return bl.call(this,r,0)}}}function j0e(r){let e=Se;if(vl===clearTimeout)return clearTimeout(r);if((vl===cP||!vl)&&clearTimeout)return vl=clearTimeout,clearTimeout(r);try{return vl(r)}catch{try{return vl[e(293)](null,r)}catch{return vl[e(293)](this,r)}}}var u2=[],zx=![],gc,k4=-1;function X0e(){let r=Se;!zx||!gc||(zx=![],gc[r(390)]?u2=gc[r(294)](u2):k4=-1,u2.length&&xP())}function xP(){let r=Se;if(!zx){var e=pP(X0e);zx=!![];for(var t=u2[r(390)];t;){for(gc=u2,u2=[];++k4<t;)gc&&gc[k4][r(380)]();k4=-1,t=u2[r(390)]}gc=null,zx=![],j0e(e)}}function Y0e(r){let e=Se;var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments[e(390)];n++)t[n-1]=arguments[n];u2.push(new fP(r,t)),u2[e(390)]===1&&!zx&&pP(xP)}function fP(r,e){let t=Se;this[t(250)]=r,this.array=e}fP.prototype[Se(380)]=function(){let r=Se;this[r(250)][r(435)](null,this[r(313)])};var Z0e=Se(430),J0e=Se(430),Q0e=!![],e2e={},t2e=[],r2e="",n2e={},o2e={},i2e={};function yc(){}var s2e=yc,a2e=yc,l2e=yc,u2e=yc,c2e=yc,p2e=yc,x2e=yc;function f2e(r){let e=Se;throw new Error(e(322))}function m2e(){return"/"}function h2e(r){throw new Error("process.chdir is not supported")}function d2e(){return 0}var Fx=Mb[Se(431)]||{},g2e=Fx[Se(407)]||Fx[Se(336)]||Fx[Se(469)]||Fx[Se(262)]||Fx[Se(289)]||function(){let r=Se;return new Date()[r(488)]()};function y2e(r){let e=Se;var t=g2e[e(293)](Fx)*.001,n=Math[e(452)](t),o=Math[e(452)](t%1*1e9);return r&&(n=n-r[0],o=o-r[1],o<0&&(n--,o+=1e9)),[n,o]}var b2e=new Date;function v2e(){var r=new Date,e=r-b2e;return e/1e3}var dc={nextTick:Y0e,title:Z0e,browser:Q0e,env:e2e,argv:t2e,version:r2e,versions:n2e,on:s2e,addListener:a2e,once:l2e,off:u2e,removeListener:c2e,removeAllListeners:p2e,emit:x2e,binding:f2e,cwd:m2e,chdir:h2e,umask:d2e,hrtime:y2e,platform:J0e,release:o2e,config:i2e,uptime:v2e},cs=function(r){let e=Se;if(r=r||{},this.Promise=r.Promise||Promise,this.queues=Object[e(420)](null),this[e(424)]=r[e(424)]||![],this.domainReentrant){if(typeof dc===e(314)||typeof dc[e(334)]>"u")throw new Error(e(301)+"use a NodeJS version that still implements Domain, or install a browser polyfill.");this[e(462)]=Object[e(420)](null)}this.timeout=r[e(464)]||cs[e(228)],this[e(447)]=r[e(447)]||cs[e(490)],r[e(459)]===1/0||Number[e(275)](r[e(459)])&&r[e(459)]>=0?this[e(459)]=r[e(459)]:this[e(459)]=cs[e(338)]};cs[Se(228)]=0,cs.DEFAULT_MAX_OCCUPATION_TIME=0,cs[Se(338)]=1e3,cs[Se(265)][Se(449)]=function(r,e,t,n){let o=Se;if(Array[o(253)](r))return this[o(359)](r,e,t,n);if(typeof e!==o(388))throw new Error(o(377));var i=null,s=null,a=null;typeof t!="function"&&(n=t,t=null,a=new this[o(323)](function(v,w){i=v,s=w})),n=n||{};var l=![],u=null,c=null,x=this,f=function(v,w,C){let N=o;c&&(clearTimeout(c),c=null),v&&(!!x[N(474)][r]&&x[N(474)][r][N(390)]===0&&delete x[N(474)][r],x[N(424)]&&delete x[N(462)][r]),!l&&(a?w?s(w):i(C):typeof t===N(388)&&t(w,C),l=!![]),v&&!!x[N(474)][r]&&x[N(474)][r][N(390)]>0&&x[N(474)][r].shift()()},h=function(v){let w=o;if(l)return f(v);if(u&&(clearTimeout(u),u=null),x[w(424)]&&v&&(x[w(462)][r]=dc.domain),e[w(390)]===1){var C=![];e(function(N,_){!C&&(C=!![],f(v,N,_))})}else x[w(441)](function(){return e()}).then(function(N){f(v,void 0,N)},function(N){f(v,N)})};if(x[o(424)]&&!!dc[o(334)]&&(h=dc[o(334)][o(308)](h)),!x.queues[r])x[o(474)][r]=[],h(!![]);else if(x.domainReentrant&&!!dc[o(334)]&&dc.domain===x[o(462)][r])h(![]);else if(x.queues[r][o(390)]>=x[o(459)])f(![],new Error(o(224)+r));else{var g=function(){h(!![])};n[o(458)]?x[o(474)][r][o(221)](g):x[o(474)][r][o(457)](g);var m=n.timeout||x[o(464)];m&&(u=setTimeout(function(){let v=o;u=null,f(![],new Error(v(446)+r))},m))}var b=n[o(447)]||x[o(447)];if(b&&(c=setTimeout(function(){let v=o;x[v(474)][r]&&f(![],new Error(v(290)+r))},b)),a)return a},cs[Se(265)][Se(359)]=function(r,e,t,n){let o=Se;typeof t!==o(388)&&(n=t,t=null);var i=this,s=function(l,u){return function(c){i.acquire(l,u,c,n)}},a=e;if(r[o(384)]()[o(255)](function(l){a=s(l,a)}),typeof t===o(388))a(t);else return new this.Promise(function(l,u){a[o(390)]===1?a(function(x,f){x?u(x):l(f)}):l(a())})},cs.prototype[Se(345)]=function(r){let e=Se;return r?!!this[e(474)][r]:Object[e(392)](this[e(474)])[e(390)]>0},cs.prototype[Se(441)]=function(r){let e=Se;try{return this[e(323)].resolve(r())}catch(t){return this[e(323)][e(267)](t)}};var w2e=cs,C2e=w2e,$b=class{[Se(406)](e){let t=Se;(e<=0||e>1)&&console.log(t(215)+e),this.a=e}constructor(e,t=0){let n=Se;this.y=this.s=t,this[n(406)](e),this[n(300)]=![]}[Se(372)](e){let t=Se;var n;return this[t(300)]?n=this.a*e+(1-this.a)*this.s:(n=e,this[t(300)]=!![]),this.y=e,this.s=n,n}[Se(298)](e,t){return this.setAlpha(t),this.filter(e)}[Se(244)](){return this[Se(300)]}[Se(450)](){return this.y}[Se(235)](){let e=Se;this[e(300)]=![]}},La=class{alpha(e){var n=1/this[Se(202)],o=1/(2*Math.PI*e);return 1/(1+o/n)}setFrequency(e){let t=Se;e<=0&&console[t(385)](t(343)),this.freq=e}[Se(473)](e){let t=Se;e<=0&&console[t(385)](t(491)),this[t(312)]=e}setBeta(e){this.beta_=e}[Se(259)](e){let t=Se;e<=0&&console[t(385)](t(236)),this[t(211)]=e}constructor(e,t=1,n=0,o=1){let i=Se;this[i(311)](e),this.setMinCutoff(t),this[i(478)](n),this.setDerivateCutoff(o),this.x=new $b(this.alpha(t)),this.dx=new $b(this[i(299)](o)),this.lasttime=void 0}reset(){let e=Se;this.x.reset(),this.dx[e(235)](),this[e(429)]=void 0}[Se(372)](e,t=void 0){let n=Se;this[n(429)]!==void 0&&t!==void 0&&(this.freq=1/(t-this[n(429)])),this[n(429)]=t;var o=this.x.hasLastRawValue()?(e-this.x[n(450)]())*this.freq:0,i=this.dx[n(298)](o,this[n(299)](this[n(211)])),s=this.mincutoff+this[n(346)]*Math[n(394)](i);return this.x[n(298)](e,this[n(299)](s))}};function Tb(r){let e=Se,t=1/0,n=-1/0;for(let o=0;o<r[e(390)];o++){let i=r[o];i<t&&(t=i),i>n&&(n=i)}return[t,n]}function Ib(r,e,t){let n=e[1]-e[0],o=t[1]-t[0];return(r-e[0])/n*o+t[0]}function rP(r,e,t){let n=[r[0]-e[0],r[1]-e[1],r[2]-e[2]],o=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];return S4(n,o)}function N2e(r,e,t,n,o){let i=Se,s=[];for(let a=0;a<e[i(390)]/3;a++){let l=[e[a*3],e[a*3+1],e[a*3+2]],u=r[l[0]],c=r[l[1]],x=r[l[2]],f=rP(u,c,x),h=rP(u,x,c),g=(f-t[o+a*2])/n[o+a*2],m=(h-t[o+a*2+1])/n[o+a*2+1];s[i(457)](g),s[i(457)](m)}return s}function _2e(r){let e=Se,t=[0,0],n=[0,0],o=[0,0];if(r[e(390)]>0){let i=r[0][e(390)],s=2;t=Tb(r[e(444)](w=>w?w[0]:0)),n=Tb(r.map(w=>w?w[1]:0)),i===3&&(o=Tb(r[e(444)](w=>w?w[2]:0)));let a=w=>Math[e(394)](w[1]-w[0]),l=a(t),u=a(n),c=a(o),x=Math.max(l,u,c),f=s/2,h=(w,C)=>[-C*(w/x),C*(w/x)],g=h(l,f),m=h(u,f),b=h(c,f),v=new Array(r[e(390)]);for(let w=0;w<r[e(390)];w++){let C=r[w],N=Ib(C[0],t,g),_=Ib(C[1],n,m),E=0;i===3&&(E=Ib(C[2],o,b)||0),v[w]=[N,_,E]}return v}return[]}function S2e(r,e,t,n){let o=r[e],i=r[t],s=[(o[0]+i[0])/2,o[1],o[2]],a=r[n],l=za(o,i);l=_b(l,Sb(l));let u=za(s,a);u=_b(u,Sb(u));let c=JL(l,u),x=kr([l,u,c]);return I2e(x.toArray())}function T2e(r,e){let t=r[e],n=t.z;return{x:t.x-.5,y:-t.y+.5,z:-1+-n*20}}function I2e(r){let e=Se,t=Math[e(409)](Math.pow(r[0][0],2)+Math[e(470)](r[1][0],2)),n=t<1e-6,o=0,i=0,s=0;return n?(o=Math.atan2(-r[1][2],r[1][1]),i=Math.atan2(-r[2][0],t),s=0):(o=Math[e(365)](r[2][1],r[2][2]),i=Math.atan2(-r[2][0],t),s=Math[e(365)](r[1][0],-r[0][0])),{pitch:o,yaw:i,roll:s}}var k2e={mouthOpen:Se(274),mouthSmile:Se(381),eyesClosed:Se(281),eyesLookUp:Se(350),eyesLookDown:Se(456),eyeBlink_L:"eyeBlinkLeft",eyeBlink_R:Se(427),eyeSquint_L:Se(426),eyeSquint_R:Se(264),eyeWide_L:Se(471),eyeWide_R:"eyeWideRight",jawForward:"jawForward",jawLeft:Se(417),jawRight:Se(321),jawOpen:Se(330),mouthClose:Se(247),mouthFunnel:"mouthFunnel",mouthPucker:Se(482),mouthLeft:Se(216),mouthRight:Se(339),mouthSmile_L:Se(428),mouthSmile_R:Se(422),mouthFrown_L:"mouthFrownLeft",mouthFrown_R:Se(373),mouthDimple_L:"mouthDimpleLeft",mouthDimple_R:"mouthDimpleRight",mouthStretch_L:Se(331),mouthStretch_R:Se(438),mouthRollLower:Se(233),mouthRollUpper:Se(399),mouthShrugLower:Se(454),mouthShrugHigher:Se(279),mouthPress_L:Se(411),mouthPress_R:Se(217),mouthLowerDown_L:Se(442),mouthLowerDown_R:Se(291),mouthUpperUp_L:Se(415),mouthUpperUp_R:Se(401),browDown_L:Se(432),browDown_R:"browDownRight",browInnerUp:Se(227),browOuterUp_L:Se(463),browOuterUp_R:Se(342),cheekPuff:"cheekPuff",cheekSquint_L:Se(272),cheekSquint_R:Se(404),noseSneer_L:"noseSneerLeft",noseSneer_R:Se(263),tongueOut:Se(207),mouthShrugUpper:Se(467),eyeLookIn_L:Se(232),eyeLookIn_R:Se(349),eyeLookOut_L:Se(318),eyeLookOut_R:"eyeLookOutRight",eyeLookUp_L:Se(405),eyeLookUp_R:"eyeLookUpRight",eyeLookDown_L:"eyeLookDownLeft",eyeLookDown_R:"eyeLookDownRight"};function Cn(r,e){let t=E4();return Cn=function(n,o){return n=n-199,t[n]},Cn(r,e)}var mP=class{constructor(e,t){let n=Se;this[n(395)]=e,this[n(269)]=t}[Se(210)](){return co(this,void 0,void 0,function*(){let e=Cn,t=this[e(395)],n={modelTopology:t.modelTopology,format:t[e(316)],generatedBy:t[e(354)],convertedBy:t[e(303)]};if(t[e(398)]!=null&&(n[e(398)]=t.signature),t[e(285)]!=null&&(n[e(285)]=t[e(285)]),t[e(268)]!=null&&(n.modelInitializer=t.modelInitializer),t[e(214)]!=null){let[o,i]=yield E2e(t[e(214)],this.dir);n[e(337)]=o,n[e(466)]=i}return t.trainingConfig!=null&&(n[e(201)]=t[e(201)]),n})}};function E2e(r,e){return co(this,void 0,void 0,function*(){let t=Cn,n=[],o=[];for(let i of r){for(let s of i[t(481)]){let a=e+s,l=yield(yield Fb.default[t(389)](a,{responseType:t(225),withCredentials:![]}))[t(286)];n[t(457)](l)}o[t(457)](...i[t(387)])}return[o,A2e(n)]})}function A2e(r){let e=Se;if(r.length===1)return r[0];let t=0;r[e(255)](i=>{t+=i[e(437)]});let n=new Uint8Array(t),o=0;return r[e(255)](i=>{let s=e;n[s(361)](new Uint8Array(i),o),o+=i[s(437)]}),n[e(386)]}var D2e=5,R2e=33,$2e=263,O2e=152,hP=class{constructor(){let e=Se;this.pitchFilter=new La(20,.001,1,1),this[e(448)]=new La(20,.001,5,1),this[e(218)]=new La(20,.001,5,1),this[e(242)]=new La(20,.001,1,1),this.transformY=new La(20,.001,5,1),this[e(206)]=new La(20,.001,5,1),this[e(277)]=t=>{let n=e,o=this[n(246)].filter(t[n(304)]),i=this.yawFilter[n(372)](t[n(434)]),s=this[n(448)].filter(t[n(476)]);return{pitch:o,yaw:i,roll:s}},this[e(309)]=t=>{let n=e,o=this[n(242)][n(372)](t.x),i=this.transformY[n(372)](t.y),s=this[n(206)][n(372)](t.z);return{x:o,y:i,z:s}}}predictFace(e){return co(this,void 0,void 0,function*(){let t=Cn;if(e[t(238)][t(390)]<1)return;Oo()[t(414)]();let n=e[t(238)][0][t(444)](N=>[N.x*e[t(245)][t(383)],N.y*e.image[t(356)],N.z*e[t(245)].width]),o=S2e(n,R2e,$2e,O2e),i=this._rotationTune(o),s=T2e(e.multiFaceLandmarks[0],D2e),a=this._transformTune(s),l=yield this.createPrediction(this[t(222)],this[t(237)],n),u={};this.modelMeta.label_keys[t(255)]((N,_)=>{let E=t;N[E(255)]((T,k)=>{let D=E,R=l[_][k],K=Math[D(252)](Math[D(340)](R-0,0),1),M=this[D(440)][T],j=this[D(382)][T],Z=M.filter(K);Z=j(Z),u[k2e[T]]=Z*1.15})});let x=u[t(428)],f=u[t(422)],h=u[t(439)],g=u[t(427)],m=this[t(366)](.5,t(432),"browDownRight",u);u[t(432)]=m[t(412)]*(1-h/2),u.browDownRight=m[t(223)]*(1-g/2);let b=this[t(366)](.5,t(463),t(342),u);u[t(463)]=b[t(412)],u[t(342)]=b.rightAmp;let v=this[t(366)](.5,"mouthSmileLeft",t(422),u);u.mouthSmileLeft=v.leftAmp,u[t(422)]=v[t(223)],u[t(415)]=u.mouthUpperUpLeft*(1-u[t(422)]*.2),u.mouthUpperUpRight=u.mouthUpperUpRight*(1-u[t(428)]*.2);let w=this[t(366)](.2,t(415),t(401),u);u.mouthUpperUpLeft=w[t(412)],u[t(401)]=w[t(223)],u.eyeBlinkLeft=h*(1-f*.5),u.eyeBlinkRight=g*(1-x*.5),u.mouthShrugUpper=u[t(467)]/2;let C={actionUnits:u,rotation:i,transform:a};return Oo()[t(421)](),C})}[Se(366)](e,t,n,o){let i=Se,s=o[t],a=o[n],l=(s-a)*e,u=(a-s)*e,c=Math.min(Math[i(340)](l+s-0,0),1),x=Math[i(252)](Math[i(340)](u+a-0,0),1);return{leftAmp:c,rightAmp:x}}[Se(273)](){return co(this,void 0,void 0,function*(){let e=Cn,t=JSON[e(329)](M2e),n=e(220);this.actionUnitModel=yield G1(new mP(t,n)),this[e(237)]=JSON[e(329)](z2e),this[e(402)]()})}[Se(402)](){let e=Se;this[e(413)]=JSON[e(329)](F2e),this[e(440)]={},this[e(382)]={};let t=this[e(237)].label_keys,n={fps:120,minCutoff:.01,beta:25,bezier_x1:.08894012120656589,bezier_y1:.003999877929687479,bezier_x2:.8217921067661327,bezier_y2:.8839998779296875};for(let o of t)for(let i of o)if(i in this[e(413)]){let s=this.tune[i];this.filters[i]=new La(30,.001,10,1),this[e(382)][i]=(0,I4.default)(s[e(352)],s.bezier_y1,s[e(282)],s[e(199)])}else this[e(440)][i]=new La(n[e(258)],n.minCutoff,n.beta,1),this[e(382)][i]=(0,I4.default)(n[e(352)],n[e(485)],n[e(282)],n.bezier_y2),this[e(413)][i]=n;this.filters[e(493)]=new La(60,.001,5,1),this[e(382)][e(493)]=(0,I4.default)(n[e(352)],n[e(485)],n.bezier_x2,n[e(199)]),this[e(413)][e(493)]={fps:60,minCutoff:.001,beta:5,bezier_x1:.08894012120656589,bezier_y1:.003999877929687479,bezier_x2:.8217921067661327,bezier_y2:.8839998779296875}}_getScalerTriFeatureVectorDot(e,t,n,o){let i=Se,s=[],a=0;for(let l=0;l<t.length;l++){let u=t[l],c=u[0],x=u[1],f=[];for(let m=0;m<c[i(390)];m++){let b=c[m];f[i(457)](e[b])}let h=_2e(f),g=N2e(h,x,n,o,a);s=s.concat(g),a+=x[i(390)]/3*2}return yn([s])}[Se(453)](e,t,n){return co(this,void 0,void 0,function*(){let o=Cn,i=t.type,s;i==o(483)?s=this[o(212)](n,t[o(332)],t[o(333)],t.data_std):s=r4[o(248)]([0,0]);let a=e[o(492)](s),l=[];if(a instanceof r4[o(249)])l.push(a[o(451)]());else if(a instanceof Array)for(let u=0;u<a[o(390)];u++)l[o(457)](a[u][o(451)]());return l})}},F2e=Se(257),M2e=Se(284),z2e=Se(254),dP=class{constructor(e,t,n,o=![]){let i=Se;this[i(335)]=s=>co(this,void 0,void 0,function*(){return this[i(370)].send({image:s})}),this[i(241)]=()=>{this[i(370)].close()},this[i(320)]=e,this[i(383)]=t,this[i(356)]=n,this[i(370)]=new lP.FaceMesh({locateFile:s=>i(305)+s}),this.setOptions({selfieMode:o}),this[i(370)][i(397)](this.resultsCallback)}[Se(273)](){return co(this,void 0,void 0,function*(){let e=Cn;return this.model[e(433)]()})}[Se(410)]({selfieMode:e}){let t=Se;this[t(370)][t(410)]({maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5,refineLandmarks:!![],selfieMode:e})}},kb=(r,e)=>{let t=Se;return r?.requestVideoFrameCallback?r[t(209)](e):window[t(260)](e)},nP=(r,e)=>{let t=Se;r?.[t(256)]?r.cancelVideoFrameCallback(e):window[t(487)](e)},Ob,oP=40,iP=640,sP=360,Eb=Se(379),Ab=new C2e,zb=class{constructor(e){let t=Se;this[t(436)]=performance.now(),this[t(208)]=document[t(371)](t(360)),this._dataStream=new Qh,this[t(261)]=t(270),Ob[t(361)](this,()=>co(this,void 0,void 0,function*(){let l=t,u=l(315);return yield Fb.default[l(389)](u,{headers:{authorization:l(364)+this[l(319)]}}),!![]})),this[t(416)]=l=>co(this,void 0,void 0,function*(){let u=t;if(this[u(351)]!=="stopped"){if(this[u(348)]&&nP(this[u(208)],this[u(348)]),(!this[u(213)]||this._video[u(461)])&&this[u(443)](),!this.requestFrameToken)return;if(performance.now()-this[u(436)]<=this.frameRateMs){this[u(348)]=kb(this._video,()=>this[u(416)](l));return}this[u(348)]=kb(this[u(208)],()=>co(this,void 0,void 0,function*(){yield this[u(374)].send(this._video)}))}this.lastFrameTime=performance[u(407)]();let c=yield this[u(276)][u(368)](l);c&&(this[u(200)]&&this.onPredict(c),this[u(477)][u(295)](c))}),this[t(492)]=l=>co(this,void 0,void 0,function*(){let u=t;this[u(351)]!==u(270)&&(console.warn(u(234)),yield this[u(443)]()),yield this[u(433)](),yield this[u(374)][u(335)](l)});let{apiToken:n,fps:o=oP,onPredict:i,shouldMirrorOutput:s=![]}=e;this[t(208)][t(205)]=!![],this[t(319)]=n,this[t(374)]=new dP(this[t(416)],iP,sP,s),this[t(276)]=new hP,this[t(200)]=i;let a=o>0?o:oP;this[t(278)]=1e3/a}[Se(433)](){return co(this,void 0,void 0,function*(){let e=Cn;return Ab[e(449)](Eb,()=>this[e(486)]())})}[Se(486)](){let e=Se;return!this[e(307)]&&(console.log(e(243)),this._initializePromise=K0e(this,Ob,"f").call(this)[e(393)](()=>this.faceMeshCalculator[e(273)]())[e(393)](()=>this[e(276)][e(273)]())[e(393)](()=>console[e(385)](e(489)))),this[e(307)]}get dataStream(){return this._dataStream}get[Se(360)](){return this[Se(208)]}get[Se(479)](){return this[Se(200)]}get[Se(213)](){return this[Se(367)]}get state(){return this[Se(261)]}set[Se(479)](e){let t=Se;this[t(200)]=e}setOptions({shouldMirrorOutput:e=![]}){let t=Se;this[t(374)][t(410)]({selfieMode:e})}[Se(327)](e){return co(this,void 0,void 0,function*(){let t=Cn;return Ab[t(449)](Eb,()=>this[t(341)](e))})}_start({stream:e}){return co(this,void 0,void 0,function*(){let t=Cn;try{(this[t(261)]!==t(270)||this[t(213)]||this[t(348)])&&this[t(219)](),yield this[t(486)](),this._state="starting",this[t(367)]=e,this[t(208)][t(383)]=iP,this[t(208)][t(356)]=sP,this[t(208)][t(231)]=e,yield this[t(208)][t(375)](),this[t(348)]=kb(this[t(208)],()=>{let n=t;this.faceMeshCalculator[n(335)](this._video)}),this[t(261)]=t(251)}catch(n){throw this[t(219)](),n}})}[Se(443)](){return co(this,void 0,void 0,function*(){return Ab[Cn(449)](Eb,()=>this._stop())})}_stop(){return co(this,void 0,void 0,function*(){let e=Cn;nP(this[e(208)],this[e(348)]),this[e(348)]=void 0,this[e(360)][e(231)]=null,this._stream=null,this[e(261)]=e(270)})}};Ob=new WeakMap;var L2e=0,P2e=1,B2e=-Math.PI,U2e=Math.PI,V2e=-1,G2e=1,Db=0,Rb=65535,T4=52,aP=3,Oe;(function(r){let e=Se;r[r[e(226)]=0]=e(226),r[r[e(418)]=1]=e(418),r[r[e(408)]=2]="TRANSFORM",r[r[e(204)]=3]=e(204)})(Oe||(Oe={}));var Pa;(function(r){let e=Se;r[r[e(484)]=0]=e(484),r[r[e(310)]=1]=e(310),r[r.T_MIN=2]=e(296),r[r[e(324)]=3]=e(324)})(Pa||(Pa={}));var Mx=class{constructor(){let e=Se;this[e(239)]=[],this.PRED_SCALE[Oe[e(226)]]=[L2e,P2e,Db,Rb],this[e(239)][Oe[e(418)]]=[B2e,U2e,Db,Rb],this[e(239)][Oe[e(408)]]=[V2e,G2e,Db,Rb]}encode(e){let t=Se,n=Mx[t(396)](e),o=[...n[Oe.ACTION_UNITS][t(444)](s=>this[t(326)](s,Oe[t(226)])),...n[Oe[t(418)]][t(444)](s=>this[t(326)](s,Oe[t(418)])),...n[Oe.TRANSFORM][t(444)](s=>this[t(326)](s,Oe[t(408)]))],i=new Uint16Array(o);return new Uint8Array(i.buffer,i[t(378)],i[t(437)])}decode(e){let t=Se,n=new Uint16Array(e[t(386)],e[t(378)],e[t(437)]/Uint16Array[t(344)]),o=Array[t(317)](n),i=o[t(306)](0,T4),s=o[t(306)](T4,T4+aP),a=o.slice(T4+aP),l=[i[t(444)](u=>this[t(475)](u,Oe[t(226)])),s[t(444)](u=>this[t(475)](u,Oe[t(418)])),a[t(444)](u=>this[t(475)](u,Oe[t(408)]))];return Mx[t(391)](l)}[Se(326)](e,t){let n=Se,o=this.PRED_SCALE[t],i=Mx.linearScale(e,o[Pa[n(484)]],o[Pa[n(310)]],o[Pa[n(296)]],o[Pa[n(324)]]);return Math[n(460)](i)}[Se(475)](e,t){let n=Se,o=this[n(239)][t],i=Mx[n(423)](e,o[Pa[n(296)]],o[Pa[n(324)]],o[Pa.R_MIN],o[Pa[n(310)]]);return Number(i[n(302)](4))}static[Se(423)](e,t,n,o,i){return e>n?n:e<t?t:(e-t)/(n-t)*(i-o)+o}static[Se(396)](e){let t=Se,n=Array[t(317)](Array(Oe[t(204)]),()=>new Array(0)),o=0;return n[Oe[t(226)]][o++]=e[t(288)][t(432)],n[Oe[t(226)]][o++]=e.actionUnits[t(297)],n[Oe.ACTION_UNITS][o++]=e.actionUnits[t(227)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(463)],n[Oe.ACTION_UNITS][o++]=e.actionUnits[t(342)],n[Oe[t(226)]][o++]=e[t(288)][t(292)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(272)],n[Oe[t(226)]][o++]=e[t(288)][t(404)],n[Oe[t(226)]][o++]=e[t(288)][t(439)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(427)],n[Oe[t(226)]][o++]=e.actionUnits[t(376)],n[Oe[t(226)]][o++]=e[t(288)][t(445)],n[Oe[t(226)]][o++]=e[t(288)].eyeLookInLeft,n[Oe[t(226)]][o++]=e[t(288)].eyeLookInRight,n[Oe[t(226)]][o++]=e[t(288)][t(318)],n[Oe[t(226)]][o++]=e[t(288)].eyeLookOutRight,n[Oe[t(226)]][o++]=e[t(288)][t(405)],n[Oe[t(226)]][o++]=e[t(288)][t(419)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(456)],n[Oe[t(226)]][o++]=e.actionUnits.eyesLookUp,n[Oe[t(226)]][o++]=e[t(288)][t(426)],n[Oe[t(226)]][o++]=e[t(288)][t(264)],n[Oe[t(226)]][o++]=e[t(288)][t(471)],n[Oe[t(226)]][o++]=e[t(288)].eyeWideRight,n[Oe[t(226)]][o++]=e[t(288)][t(425)],n[Oe[t(226)]][o++]=e[t(288)][t(417)],n[Oe[t(226)]][o++]=e[t(288)][t(330)],n[Oe[t(226)]][o++]=e.actionUnits[t(321)],n[Oe[t(226)]][o++]=e[t(288)][t(247)],n[Oe[t(226)]][o++]=e[t(288)][t(400)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(357)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(271)],n[Oe[t(226)]][o++]=e[t(288)].mouthFrownRight,n[Oe[t(226)]][o++]=e[t(288)][t(363)],n[Oe[t(226)]][o++]=e[t(288)][t(216)],n[Oe[t(226)]][o++]=e[t(288)][t(442)],n[Oe[t(226)]][o++]=e[t(288)][t(291)],n[Oe[t(226)]][o++]=e[t(288)][t(411)],n[Oe[t(226)]][o++]=e[t(288)][t(217)],n[Oe[t(226)]][o++]=e.actionUnits[t(482)],n[Oe[t(226)]][o++]=e.actionUnits[t(339)],n[Oe[t(226)]][o++]=e.actionUnits[t(233)],n[Oe[t(226)]][o++]=e[t(288)][t(399)],n[Oe[t(226)]][o++]=e[t(288)][t(454)],n[Oe[t(226)]][o++]=e[t(288)][t(467)],n[Oe.ACTION_UNITS][o++]=e.actionUnits.mouthSmileLeft,n[Oe.ACTION_UNITS][o++]=e[t(288)][t(422)],n[Oe[t(226)]][o++]=e.actionUnits[t(331)],n[Oe[t(226)]][o++]=e[t(288)][t(438)],n[Oe[t(226)]][o++]=e[t(288)][t(415)],n[Oe.ACTION_UNITS][o++]=e.actionUnits[t(401)],n[Oe.ACTION_UNITS][o++]=e[t(288)][t(207)],o=0,n[Oe[t(418)]][o++]=e[t(455)][t(304)],n[Oe[t(418)]][o++]=e.rotation[t(476)],n[Oe[t(418)]][o++]=e[t(455)][t(434)],o=0,n[Oe.TRANSFORM][o++]=e.transform.x,n[Oe.TRANSFORM][o++]=e[t(480)].y,n[Oe.TRANSFORM][o++]=e.transform.z,n}static[Se(391)](e){let t=Se,n={},o={},i={},s=0;return n[t(432)]=e[Oe[t(226)]][s++],n[t(297)]=e[Oe[t(226)]][s++],n[t(227)]=e[Oe[t(226)]][s++],n[t(463)]=e[Oe[t(226)]][s++],n[t(342)]=e[Oe[t(226)]][s++],n.cheekPuff=e[Oe.ACTION_UNITS][s++],n[t(272)]=e[Oe.ACTION_UNITS][s++],n[t(404)]=e[Oe.ACTION_UNITS][s++],n.eyeBlinkLeft=e[Oe.ACTION_UNITS][s++],n.eyeBlinkRight=e[Oe[t(226)]][s++],n[t(376)]=e[Oe[t(226)]][s++],n[t(445)]=e[Oe[t(226)]][s++],n[t(232)]=e[Oe[t(226)]][s++],n[t(349)]=e[Oe[t(226)]][s++],n[t(318)]=e[Oe.ACTION_UNITS][s++],n[t(472)]=e[Oe[t(226)]][s++],n[t(405)]=e[Oe.ACTION_UNITS][s++],n[t(419)]=e[Oe.ACTION_UNITS][s++],n[t(456)]=e[Oe[t(226)]][s++],n.eyesLookUp=e[Oe[t(226)]][s++],n[t(426)]=e[Oe[t(226)]][s++],n[t(264)]=e[Oe.ACTION_UNITS][s++],n[t(471)]=e[Oe[t(226)]][s++],n[t(362)]=e[Oe[t(226)]][s++],n.jawForward=e[Oe.ACTION_UNITS][s++],n[t(417)]=e[Oe[t(226)]][s++],n[t(330)]=e[Oe.ACTION_UNITS][s++],n[t(321)]=e[Oe.ACTION_UNITS][s++],n[t(247)]=e[Oe[t(226)]][s++],n.mouthDimpleLeft=e[Oe[t(226)]][s++],n[t(357)]=e[Oe[t(226)]][s++],n.mouthFrownLeft=e[Oe[t(226)]][s++],n[t(373)]=e[Oe.ACTION_UNITS][s++],n.mouthFunnel=e[Oe[t(226)]][s++],n[t(216)]=e[Oe[t(226)]][s++],n[t(442)]=e[Oe[t(226)]][s++],n[t(291)]=e[Oe[t(226)]][s++],n[t(411)]=e[Oe[t(226)]][s++],n.mouthPressRight=e[Oe[t(226)]][s++],n[t(482)]=e[Oe[t(226)]][s++],n[t(339)]=e[Oe.ACTION_UNITS][s++],n[t(233)]=e[Oe[t(226)]][s++],n.mouthRollUpper=e[Oe[t(226)]][s++],n[t(454)]=e[Oe[t(226)]][s++],n[t(467)]=e[Oe.ACTION_UNITS][s++],n[t(428)]=e[Oe[t(226)]][s++],n[t(422)]=e[Oe[t(226)]][s++],n.mouthStretchLeft=e[Oe[t(226)]][s++],n[t(438)]=e[Oe[t(226)]][s++],n.mouthUpperUpLeft=e[Oe[t(226)]][s++],n[t(401)]=e[Oe[t(226)]][s++],n.tongueOut=e[Oe[t(226)]][s++],s=0,o[t(304)]=e[Oe[t(418)]][s++],o[t(476)]=e[Oe[t(418)]][s++],o[t(434)]=e[Oe[t(418)]][s++],s=0,i.x=e[Oe[t(408)]][s++],i.y=e[Oe[t(408)]][s++],i.z=e[Oe[t(408)]][s++],{actionUnits:n,rotation:o,transform:i}}};var gP=new THREE.Euler,Lx=new THREE.Quaternion;AFRAME.registerSystem("avatar-webkit",{init:function(){window.avatarWebkit=this,this.avatarRig=APP.scene.querySelector("#avatar-rig"),this.headCalibration=new THREE.Quaternion,this.baselineNeutral={...gv},this.baselineNegative={...bv},this.baselinePositive={...yv},this.range=[-1,0,.6],this.enhancements=!1,this.rawHeadOrientation=new THREE.Quaternion,this.rawActionUnits={...Hh},this.el.addEventListener("share_video_failed",()=>{alert("Failed to start webcam, have you granted camera permissions?")}),wv(r=>{r.onclick=()=>{vv(n=>{this.startPredictor(n)},n=>{console.error(n)}),this.el.sceneEl.addEventListener("share_video_disabled",()=>{this.stopPredictor()},{once:!0})}}),this.el.sceneEl.addEventListener("facetracking_action",r=>{switch(r.detail.type){case"calibrate_center":this.headCalibration.copy(this.rawHeadOrientation).invert();break;case"calibrate_neutral":Object.assign(this.baselineNeutral,this.rawActionUnits);break;case"calibrate_negative":Object.assign(this.baselineNegative,this.rawActionUnits);break;case"calibrate_positive":Object.assign(this.baselinePositive,this.rawActionUnits);break;case"pause":this.avatarRig.setAttribute("rpm-controller",{trackingIsActive:!1});break;case"resume":this.avatarRig.setAttribute("rpm-controller",{trackingIsActive:!0});break;case"set_range":for(let e=0;e<this.range.length;++e)this.range[e]=r.detail.payload[e];break;case"set_enhancements":this.enhancements=r.detail.payload,this.el.sceneEl.emit("extensions_setvisible",{aura:this.enhancements,particles:this.enhancements});break;case"stop":this.stopAll();break}})},startPredictor:async function(r){let e=this.avatarRig.components["rpm-controller"];this.el.sceneEl.emit("facetracking_initializing","Loading face tracker model..."),this.predictor=new zb({apiToken:"D8F8CB86-1E9F-4D21-8E9F-120E52C688EE",fps:30});let t=!1;this.predictor.onPredict=n=>{t||(t=!0,this.el.sceneEl.emit("facetracking_initialized"));let{actionUnits:o,rotation:i}=n;if(e.supported){this.rawActionUnits=o;let[s,a,l]=hv(o,[this.baselineNeutral,this.baselineNegative,this.baselinePositive]);dv(o,this.range),gP.set(-i.pitch,i.yaw,-i.roll),this.rawHeadOrientation.setFromEuler(gP),Lx.copy(this.rawHeadOrientation),Lx.premultiply(this.headCalibration),this.avatarRig.setAttribute("rpm-controller",{...o,headQuaternion:{x:Lx.x,y:Lx.y,z:Lx.z,w:Lx.w},similarityNeutral:s,similarityNegative:a,similarityPositive:l})}};try{await this.predictor.start({stream:r}),this.el.sceneEl.emit("facetracking_initializing","Looking for a face..."),this.avatarRig.setAttribute("rpm-controller",{trackingIsActive:!0})}catch(n){this.stopAll(),console.error(n),alert("There was a problem while initializing the face tracker. Try again in a bit?")}},stopPredictor:function(){this.predictor.stop(),this.avatarRig.setAttribute("rpm-controller",{trackingIsActive:!1}),this.el.sceneEl.emit("facetracking_stopped")},stopAll:function(){this.stopPredictor(),this.el.sceneEl.emit("action_end_video_sharing")}});Vh();p();p();Vh();var $h,ii,yP,D4=0,SP=[],bP=Ft.__b,vP=Ft.__r,wP=Ft.diffed,CP=Ft.__c,NP=Ft.unmount;function R4(r,e){Ft.__h&&Ft.__h(ii,r,D4||e),D4=0;var t=ii.__H||(ii.__H={__:[],__h:[]});return r>=t.__.length&&t.__.push({}),t.__[r]}function $4(r){return D4=1,W2e(IP,r)}function W2e(r,e,t){var n=R4($h++,2);return n.t=r,n.__c||(n.__=[t?t(e):IP(void 0,e),function(o){var i=n.t(n.__[0],o);n.__[0]!==i&&(n.__=[i,n.__[1]],n.__c.setState({}))}],n.__c=ii),n.__}function TP(r,e){var t=R4($h++,3);!Ft.__s&&Pb(t.__H,e)&&(t.__=r,t.__H=e,ii.__H.__h.push(t))}function O4(r,e){var t=R4($h++,4);!Ft.__s&&Pb(t.__H,e)&&(t.__=r,t.__H=e,ii.__h.push(t))}function F4(r){return D4=5,q2e(function(){return{current:r}},[])}function q2e(r,e){var t=R4($h++,7);return Pb(t.__H,e)&&(t.__=r(),t.__H=e,t.__h=r),t.__}function H2e(){for(var r;r=SP.shift();)if(r.__P)try{r.__H.__h.forEach(A4),r.__H.__h.forEach(Lb),r.__H.__h=[]}catch(e){r.__H.__h=[],Ft.__e(e,r.__v)}}Ft.__b=function(r){ii=null,bP&&bP(r)},Ft.__r=function(r){vP&&vP(r),$h=0;var e=(ii=r.__c).__H;e&&(e.__h.forEach(A4),e.__h.forEach(Lb),e.__h=[])},Ft.diffed=function(r){wP&&wP(r);var e=r.__c;e&&e.__H&&e.__H.__h.length&&(SP.push(e)!==1&&yP===Ft.requestAnimationFrame||((yP=Ft.requestAnimationFrame)||function(t){var n,o=function(){clearTimeout(i),_P&&cancelAnimationFrame(n),setTimeout(t)},i=setTimeout(o,100);_P&&(n=requestAnimationFrame(o))})(H2e)),ii=null},Ft.__c=function(r,e){e.some(function(t){try{t.__h.forEach(A4),t.__h=t.__h.filter(function(n){return!n.__||Lb(n)})}catch(n){e.some(function(o){o.__h&&(o.__h=[])}),e=[],Ft.__e(n,t.__v)}}),CP&&CP(r,e)},Ft.unmount=function(r){NP&&NP(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{A4(n)}catch(o){e=o}}),e&&Ft.__e(e,t.__v))};var _P=typeof requestAnimationFrame=="function";function A4(r){var e=ii,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),ii=e}function Lb(r){var e=ii;r.__c=r.__(),ii=e}function Pb(r,e){return!r||r.length!==e.length||e.some(function(t,n){return t!==r[n]})}function IP(r,e){return typeof e=="function"?e(r):e}p();function Oh({...r}){return d("button",{class:`border-2 border-hubs-blue text-hubs-blue active:bg-hubs-lightblue active:text-white
        rounded-xl px-4 py-2 grid grid-flow-col gap-2 place-items-center
        focus:outline-none`,...r})}p();function kP({children:r,open:e}){let t=F4();return O4(()=>{t.current.style.height=`${e?t.current.scrollHeight:0}px`},[t,e]),d("div",{ref:t,style:{overflow:"hidden",transition:"height 200ms ease-in-out"}},r)}p();function EP({message:r,onCancel:e=()=>{}}){return d("div",{class:"absolute w-full h-full grid place-items-center bg-black bg-opacity-30"},d("div",{class:"bg-white rounded-xl p-8 relative w-[300px] max-w-xl grid place-items-center gap-2"},d(K2e,null),d("p",{class:"text-xl font-semibold"},"Initializing"),d("p",{class:"text-sm text-hubs-gray"},r),d("button",{onClick:e,class:"bg-hubs-pink hover:bg-hubs-lightpink text-white rounded px-3 py-2"},"Cancel")))}function K2e(){return d("div",{class:"w-8 aspect-square border-4 border-gray-400 border-t-gray-600 rounded-full animate-spin"})}p();function AP({onClose:r,onAction:e,initialState:t}){let[n,o]=$4(t),{range:i,enhancements:s}=n,a=(c,x)=>{let f=[...n.range];f[c]=Number(x),e({type:"set_range",payload:f}),o(h=>({...h,range:f}))},l=c=>{e({type:"set_enhancements",payload:c}),o(x=>({...x,enhancements:c}))},u=["Negative","Neutral","Positive"];return d("div",{class:"absolute w-full h-full p-8 grid place-items-center bg-black bg-opacity-30"},d("div",{class:"bg-white rounded-xl p-8 relative max-w-xl overflow-hidden"},d("div",{class:"flex flex-col"},d("button",{class:"absolute top-2 right-2",onClick:r},d("box-icon",{name:"x"})),d("h1",{class:"text-xl mb-8 font-bold"},"Settings"),d("p",{class:"mt-8"},"To correct your avatar's head orientation, ",d("b",null,"look towards the center of your monitor")," and click the button below."),d("div",{class:"my-2 flex justify-center"},d(Oh,{onClick:()=>e({type:"calibrate_center"})},d("box-icon",{name:"target-lock"}),"Recenter Head")),d("p",{class:"mb-4 mt-8 text-xl font-bold"},"Expression Adjustment"),d("div",{class:"grid grid-cols-[auto_1fr_auto] gap-x-5 gap-y-2 items-center"},Array(3).fill().map((c,x)=>d(y,null,d("label",{class:"flex gap-6 items-center"},u[x]),d("input",{class:"w-80",type:"range",value:i[x],min:-2,max:2,step:.1,onInput:f=>a(x,f.target.value)}),d("p",{class:"w-8 flex justify-center"},i[x])))),d("p",{class:"mb-2 mt-8 text-xl font-bold"},"Experimental"),d("label",{class:"my-2 flex gap-2"},d("input",{type:"checkbox",checked:s,onChange:c=>l(c.target.checked)}),"Enable enhancements"))))}var si={STOPPED:0,INITIALIZING:1,RUNNING:2,PAUSED:3};function DP({canvasEl:r,onPreviewVisibilityChange:e,onAction:t,initialState:n}){let o=F4(),[i,s]=$4({openSettings:!1,openPreview:!1,status:si.STOPPED,statusMessage:""}),{openSettings:a,openPreview:l,status:u,statusMessage:c}=i,x=w=>s(C=>({...C,openSettings:w})),f=w=>s(C=>({...C,openPreview:w})),h=(w,C="")=>s(N=>({...N,status:w,statusMessage:C})),g=()=>{let w=!l;e({open:w}),f(w)},m=()=>{switch(u){case si.PAUSED:t({type:"resume"}),h(si.RUNNING);break;case si.RUNNING:t({type:"pause"}),h(si.PAUSED);break}},b=()=>{t({type:"stop"})};TP(()=>{let w=_=>h(si.INITIALIZING,_.detail),C=()=>{s(_=>({..._,status:si.RUNNING,openPreview:!0})),e({open:!0})},N=()=>{s(_=>({..._,status:si.STOPPED,openPreview:!1})),e({open:!1})};return APP.scene.addEventListener("facetracking_initializing",w),APP.scene.addEventListener("facetracking_initialized",C),APP.scene.addEventListener("facetracking_stopped",N),()=>{APP.scene.removeEventListener("facetracking_initializing",w),APP.scene.removeEventListener("facetracking_initialized",C),APP.scene.removeEventListener("facetracking_stopped",N)}},[]),O4(()=>{o.current.appendChild(r)},[r]);let v=u===si.RUNNING||u===si.PAUSED;return d(y,null,d("div",{style:{display:v?"":"none"},class:"absolute bottom-0 right-0 mx-12 px-4 bg-white rounded-t-xl pointer-events-auto"},d("button",{class:"flex fill-current text-hubs-gray justify-center w-full focus:outline-none",onClick:g},d("box-icon",{name:l?"chevron-down":"chevron-up"})),d(kP,{open:l},d("div",{ref:o,class:"mb-4"}),d("div",{class:"flex justify-center gap-2 mb-4"},d(Oh,{onClick:m},d("box-icon",{name:u===si.PAUSED?"play":"pause"}),u===si.PAUSED?"Resume":"Pause"),d(Oh,{onClick:()=>x(!a)},d("box-icon",{name:"slider-alt"}))))),a&&d(AP,{onClose:()=>x(!1),onAction:t,initialState:n}),u===si.INITIALIZING&&d(EP,{message:c,onCancel:b}))}AFRAME.registerSystem("facetracking-widget",{dependencies:["scene-overlay","preview-self","avatar-webkit"],schema:{paused:{default:!1}},init:function(){let r=this.el.sceneEl;this.el.sceneEl.addEventListener("facetracking_getstate",l=>{this.el.setAttribute("facetracking-widget",l.detail)});let e=this.el.sceneEl.systems["scene-overlay"],t=this.el.sceneEl.systems["preview-self"],n=this.el.sceneEl.systems["avatar-webkit"];t.canvas.style.transform="scaleX(-1)";let o=document.createElement("div");function i({open:l}){t.enabled=l}function s(l){r.emit("facetracking_action",l)}this.el.sceneEl.addEventListener("facetracking_stopped",()=>t.enabled=!1),e.shadowRoot.appendChild(o);let a={canvasEl:t.canvas,onPreviewVisibilityChange:i,onAction:s,initialState:()=>({range:n.range,enhancements:n.enhancements})};cv(d(DP,a,null),o),Object.assign(window,{previewSelf:t,preactRoot:o})}});p();p();window.blendShapeNames=Ga;function RP(r,e){let t=AFRAME.utils.styleParser.stringify(e??"");document.querySelector("#avatar-rig").setAttribute(r,t),NAF.schemas.templateCache["#remote-avatar"].firstElementChild.setAttribute(r,t),NAF.schemas.schemaDict["#remote-avatar"].components.push(r)}p();var $P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAh1BMVEVHcEz/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3GmTCMZxNmRQDisz+DXg5wTQX1xEh5VgqziSfZqjrsu0OWbxjPojWfeB2pgCK8kSvs6N/Z0b+zooCWf1CDaDB5XCD18+/////i3M+8ro+MdECfi2BwURDGuZ/Pxa9Pcc+sAAAADnRSTlMAIGCPv9//UJ/vQK+Az1vcyGwAAAJDSURBVHgBpNPVoUQhDATQyWUZEqT/cp+uC5bzD3F0yBFOkWfxFA7BhqSRL6ImLJFg/MCCYFYu7CoZM0Q5pIKhapxgFX3SOKkJOpJxmqVOWVxS8YFykfr/OVP/P2fa6Y+zT4mbEh6IcZMJ7jVua/4GndVOYbvFKV0UZ5lOGf8Kncq5Q3QT/Ap0C/hldLPzcfgl9+zPFEAk/aJ/ZmeCg2c+xzfzZaEfPQgE8c+lEgaP27m8//M1v/NbstTl354FGBx2Ric/ERgQSfw5WQC/gmdS4YCS/HPCr3CspcYJLfnndLRZHVIieE6gQkbhCmviz1khB4KLP2eFNADh/A4nAOj4c15IO3PRUac1/5wKvZwvLvT7bXR+B1tE+icUMz4NtsjPcD3azOUpp5HmLrMAhCGb9voYKXBCidJVfke6e69cKRROFOQYuT7Y8AzIwXY12ualQr93hz8Rqpu268Ey6dqmpkL/6HWEgX46G5g3i7Zd7uiXe9p20cxnA9OeCv2lF6TFwGr2CCsMWHpBXi2AAsc28Uz7YNZ+BkFEjh3rhtdp1tiRkyCChDUWe7p6XKbusMeSsIYGWgmOLDfToFObJY4kNNCioZ/CmWW7nR9F5tt2iTOKzH0YjEo8CTkead+FnYuTcC7ini6BOAUN2GnnnqhUsBaCbBSHKI5uDt5m5RosOqf+IWb8TAaGzDzTQnqBEYR/gamVhSadKiRvRON21DthscMK559s1x9G8QAC5UMalA+yUD7sQ8+BKMJDY3QZrKN8+BAAXe+ec4BPStgAAAAASUVORK5CYII=";var OP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAWlBMVEVHcEz/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE3/zE31xEjGmTCfeB15VgpmRQCziSfisz/su0OWbxi8kStwTQWpgCLPojXZqjqDXg6MZxPjNEovAAAADnRSTlMAIGCPv9//UJ/vQK+Az1vcyGwAAAITSURBVHgBrdjX0uMgDAVg3I4h7kpzy/s/5hZGaZjF+F99t8ycQcIFUAFJmuUFWJFnaaJ+oNQFNgpdqkOSzAB+Jouf16lCUHWKm43GLh0xq9oggqlVWNIgUhOcVGkQzZSBsnDIP8vTOEgL5QBaKAfQ4f60XT8Q0RmOMxENfdeG+lTi5dITg4NYf8GLs3aJAbveiAJB7HYFM4n61IDdR3ryl8bGO1jja1D7nM4wzUuLjXaZp+E5qed4vS2sXZ0eeD17uLab4vRXzoNjAlGPrySt2InHV+7MPu7WCgsnDqpgTXawQ5SO/ppgVdwhLiyc40/i4hIblHEQ5xxKgoXMBpl33RMOmN79NPxy/L8y8NYf/goU2JgHomEG4kcKu2aumaz5yEiiUrjakayxjR9ByovvfcfP8SPIVA7XSmyNH0Hu6XXMh83TbQSCrjEjTEFgRsJBMs2GgszyQ0HmgYSCwCvCQRIvLaAKiChUDhG5yiAiUylEpCqBiETJdLuQ/PiXCFn6geyGb9n9HSmzu+3Y3aSY9y/bax7pwzgHFp83EX4LOZbAmvG2xuc6kmO8wqtyNlqOB2084HVSTAcKiyhOO5tRx408btgySfh8ZUuZ7gu7T7bUvdNWg41xPLf40p7HERuN/wgRFiqMlfihMnwMjVbLHfwEkuQOtVrquC5+gSB/pSF/yRJ/7SN1ESV/NSZ/WSd2ffgbsVSDS68oJdkAAAAASUVORK5CYII=";var FP={resolve:!1,particleCount:20,startSize:.01,endSize:.2,sizeRandomness:.05,lifetime:1,lifetimeRandomness:.2,ageRandomness:1,startVelocity:{x:0,y:1,z:0},endVelocity:{x:0,y:.25,z:0},startOpacity:1,middleOpacity:1,endOpacity:0},MP=.5,zP=.4;AFRAME.registerComponent("expression-extensions",{dependencies:["billboard"],schema:{positiveInfluence:{default:0},negativeInfluence:{default:0}},init:function(){let r=document.createElement("a-entity");r.setAttribute("geometry",{primitive:"plane"}),r.setAttribute("material",{shader:"aura",transparent:!0}),r.setAttribute("position",{z:-.2}),r.setAttribute("visible",!1);let e=document.createElement("a-entity");e.setAttribute("visible",!1);let t=document.createElement("a-entity"),n=document.createElement("a-entity");t.setAttribute("particle-emitter",{...FP,src:$P}),n.setAttribute("particle-emitter",{...FP,src:OP}),e.appendChild(t),e.appendChild(n),this.el.appendChild(r),this.el.appendChild(e),this.el.sceneEl.addEventListener("extensions_setvisible",o=>{r.setAttribute("visible",o.detail.aura),e.setAttribute("visible",o.detail.particles)}),this.responsePositive=0,this.responseNegative=0,Object.assign(this,{auraEl:r,particlesPositiveEl:t,particlesNegativeEl:n})},update:function(){let r=LP(this.data.positiveInfluence),e=LP(this.data.negativeInfluence);this.responsePositive=THREE.MathUtils.lerp(this.responsePositive,r,zP),this.responseNegative=THREE.MathUtils.lerp(this.responseNegative,e,zP);let t=Math.max(this.responseNegative,this.responsePositive),n=this.responsePositive>this.responseNegative?"#f5f242":"#c8dff7";this.auraEl.setAttribute("material",{color:n,size:t}),this.particlesPositiveEl.setAttribute("particle-emitter",{startOpacity:this.responsePositive,middleOpacity:this.responsePositive,endOpacity:0}),this.particlesNegativeEl.setAttribute("particle-emitter",{startOpacity:this.responseNegative,middleOpacity:this.responseNegative,endOpacity:0})}});function LP(r){return Math.max(0,(r-MP)/(1-MP))}AFRAME.registerShader("aura",{schema:{color:{type:"color",is:"uniform"},size:{type:"number",is:"uniform",default:1}},vertexShader:`
    uniform float size;
    varying vec3 v_pos;
    void main() {
      v_pos = position;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position * size, 1.0);
    }
  `,fragmentShader:`
    #define PI 3.14159
    #define RINGS 4.0
    #define OPACITY 0.5
    
    uniform vec3 color;
    varying vec3 v_pos;
    void main() {
      float t = length(v_pos) * 2.0;
      float maskCircle = step(t, 1.0);
      float maskRings = cos(t * 2.0 * PI * RINGS + PI) * 0.5 + 0.5;
      gl_FragColor = vec4(color, maskCircle * maskRings * OPACITY);
    }
  `});var PP=Object.fromEntries(Ga.map(r=>[r,{default:0}]));AFRAME.registerComponent("rpm-controller",{schema:{...PP,trackingIsActive:{default:!1},headQuaternion:{type:"vec4"},similarityNeutral:{type:"number"},similarityNegative:{type:"number"},similarityPositive:{type:"number"}},init:function(){this.el.addEventListener("model-loaded",()=>{this.avatarRootEl=this.el.querySelector(".AvatarRoot"),this.supported=mv(this.avatarRootEl),this.supported?(console.log("Detected RPM avatar:",this.el),this.initRPMAvatar(),this.update()):console.log("Unsupported avatar:",this.el)})},initRPMAvatar:function(){let r=[];this.el.object3D.traverse(t=>{t.isMesh&&t.morphTargetDictionary&&r.push(t)});let e={leftEye:this.el.object3D.getObjectByName("LeftEye"),rightEye:this.el.object3D.getObjectByName("RightEye")};this.headQuaternionTarget=this.avatarRootEl.components["ik-controller"].headQuaternion,this.meshes=r,this.bones=e,this.loopAnimation=this.avatarRootEl.parentEl.components["loop-animation"],this.morphAudioFeedback=this.avatarRootEl.querySelector("[morph-audio-feedback]").components["morph-audio-feedback"],this.extensionsEl=document.createElement("a-entity"),this.extensionsEl.setAttribute("expression-extensions",""),this.el.querySelector(".Head").appendChild(this.extensionsEl),window.rpmController=this},stopDefaultBehaviors:function(){if(this.supported){this.loopAnimation.currentActions.forEach(e=>e.stop()),this.morphAudioFeedback.pause();let{morphs:r}=this.morphAudioFeedback;r.forEach(({mesh:e,morphNumber:t})=>e.morphTargetInfluences[t]=0)}},restartDefaultBehaviors:function(){this.supported&&(this.headQuaternionTarget.identity(),this.applyFacialMorphs(Hh),this.loopAnimation.currentActions.forEach(r=>r.play()),this.morphAudioFeedback.play())},update:function(r={}){r.trackingIsActive!==this.data.trackingIsActive?this.data.trackingIsActive?this.stopDefaultBehaviors():this.restartDefaultBehaviors():this.supported&&this.data.trackingIsActive&&(this.applyFacialMorphs(this.data),this.headQuaternionTarget.set(this.data.headQuaternion.x,this.data.headQuaternion.y,this.data.headQuaternion.z,this.data.headQuaternion.w),this.bones.rightEye.rotation.set(-Math.PI/2+this.data.eyeLookDownRight*.5-this.data.eyeLookUpRight*.5,0,Math.PI-this.data.eyeLookOutRight+this.data.eyeLookOutLeft),this.bones.leftEye.rotation.copy(this.bones.rightEye.rotation),this.bones.leftEye.updateMatrix(),this.bones.rightEye.updateMatrix())},applyFacialMorphs(r){for(let e=0;e<this.meshes.length;++e){let t=this.meshes[e];for(let n in PP)t.morphTargetInfluences[t.morphTargetDictionary[n]]=r[n]??0}this.extensionsEl.setAttribute("expression-extensions",{negativeInfluence:r.similarityNegative,positiveInfluence:r.similarityPositive})}});RP("rpm-controller");NAF.options.updateRate=30;console.log("Custom script successfully executed");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license Complex.js v2.0.15 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.1.3 23/05/2021
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/** @license See the LICENSE file. */
